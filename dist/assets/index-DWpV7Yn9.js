function LE(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Zg(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var qp={exports:{}},_l={},Kp={exports:{}},st={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zv;function zE(){if(Zv)return st;Zv=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.iterator;function x(D){return D===null||typeof D!="object"?null:(D=m&&D[m]||D["@@iterator"],typeof D=="function"?D:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,k={};function w(D,G,Ne){this.props=D,this.context=G,this.refs=k,this.updater=Ne||y}w.prototype.isReactComponent={},w.prototype.setState=function(D,G){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,G,"setState")},w.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function j(){}j.prototype=w.prototype;function C(D,G,Ne){this.props=D,this.context=G,this.refs=k,this.updater=Ne||y}var T=C.prototype=new j;T.constructor=C,v(T,w.prototype),T.isPureReactComponent=!0;var A=Array.isArray,M=Object.prototype.hasOwnProperty,P={current:null},F={key:!0,ref:!0,__self:!0,__source:!0};function ne(D,G,Ne){var Ae,Ue={},Ve=null,Z=null;if(G!=null)for(Ae in G.ref!==void 0&&(Z=G.ref),G.key!==void 0&&(Ve=""+G.key),G)M.call(G,Ae)&&!F.hasOwnProperty(Ae)&&(Ue[Ae]=G[Ae]);var Ce=arguments.length-2;if(Ce===1)Ue.children=Ne;else if(1<Ce){for(var Fe=Array(Ce),se=0;se<Ce;se++)Fe[se]=arguments[se+2];Ue.children=Fe}if(D&&D.defaultProps)for(Ae in Ce=D.defaultProps,Ce)Ue[Ae]===void 0&&(Ue[Ae]=Ce[Ae]);return{$$typeof:t,type:D,key:Ve,ref:Z,props:Ue,_owner:P.current}}function O(D,G){return{$$typeof:t,type:D.type,key:G,ref:D.ref,props:D.props,_owner:D._owner}}function X(D){return typeof D=="object"&&D!==null&&D.$$typeof===t}function le(D){var G={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(Ne){return G[Ne]})}var z=/\/+/g;function te(D,G){return typeof D=="object"&&D!==null&&D.key!=null?le(""+D.key):G.toString(36)}function ie(D,G,Ne,Ae,Ue){var Ve=typeof D;(Ve==="undefined"||Ve==="boolean")&&(D=null);var Z=!1;if(D===null)Z=!0;else switch(Ve){case"string":case"number":Z=!0;break;case"object":switch(D.$$typeof){case t:case e:Z=!0}}if(Z)return Z=D,Ue=Ue(Z),D=Ae===""?"."+te(Z,0):Ae,A(Ue)?(Ne="",D!=null&&(Ne=D.replace(z,"$&/")+"/"),ie(Ue,G,Ne,"",function(se){return se})):Ue!=null&&(X(Ue)&&(Ue=O(Ue,Ne+(!Ue.key||Z&&Z.key===Ue.key?"":(""+Ue.key).replace(z,"$&/")+"/")+D)),G.push(Ue)),1;if(Z=0,Ae=Ae===""?".":Ae+":",A(D))for(var Ce=0;Ce<D.length;Ce++){Ve=D[Ce];var Fe=Ae+te(Ve,Ce);Z+=ie(Ve,G,Ne,Fe,Ue)}else if(Fe=x(D),typeof Fe=="function")for(D=Fe.call(D),Ce=0;!(Ve=D.next()).done;)Ve=Ve.value,Fe=Ae+te(Ve,Ce++),Z+=ie(Ve,G,Ne,Fe,Ue);else if(Ve==="object")throw G=String(D),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.");return Z}function oe(D,G,Ne){if(D==null)return D;var Ae=[],Ue=0;return ie(D,Ae,"","",function(Ve){return G.call(Ne,Ve,Ue++)}),Ae}function W(D){if(D._status===-1){var G=D._result;G=G(),G.then(function(Ne){(D._status===0||D._status===-1)&&(D._status=1,D._result=Ne)},function(Ne){(D._status===0||D._status===-1)&&(D._status=2,D._result=Ne)}),D._status===-1&&(D._status=0,D._result=G)}if(D._status===1)return D._result.default;throw D._result}var q={current:null},J={transition:null},fe={ReactCurrentDispatcher:q,ReactCurrentBatchConfig:J,ReactCurrentOwner:P};function ce(){throw Error("act(...) is not supported in production builds of React.")}return st.Children={map:oe,forEach:function(D,G,Ne){oe(D,function(){G.apply(this,arguments)},Ne)},count:function(D){var G=0;return oe(D,function(){G++}),G},toArray:function(D){return oe(D,function(G){return G})||[]},only:function(D){if(!X(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},st.Component=w,st.Fragment=n,st.Profiler=s,st.PureComponent=C,st.StrictMode=r,st.Suspense=u,st.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fe,st.act=ce,st.cloneElement=function(D,G,Ne){if(D==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+D+".");var Ae=v({},D.props),Ue=D.key,Ve=D.ref,Z=D._owner;if(G!=null){if(G.ref!==void 0&&(Ve=G.ref,Z=P.current),G.key!==void 0&&(Ue=""+G.key),D.type&&D.type.defaultProps)var Ce=D.type.defaultProps;for(Fe in G)M.call(G,Fe)&&!F.hasOwnProperty(Fe)&&(Ae[Fe]=G[Fe]===void 0&&Ce!==void 0?Ce[Fe]:G[Fe])}var Fe=arguments.length-2;if(Fe===1)Ae.children=Ne;else if(1<Fe){Ce=Array(Fe);for(var se=0;se<Fe;se++)Ce[se]=arguments[se+2];Ae.children=Ce}return{$$typeof:t,type:D.type,key:Ue,ref:Ve,props:Ae,_owner:Z}},st.createContext=function(D){return D={$$typeof:o,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},D.Provider={$$typeof:i,_context:D},D.Consumer=D},st.createElement=ne,st.createFactory=function(D){var G=ne.bind(null,D);return G.type=D,G},st.createRef=function(){return{current:null}},st.forwardRef=function(D){return{$$typeof:c,render:D}},st.isValidElement=X,st.lazy=function(D){return{$$typeof:p,_payload:{_status:-1,_result:D},_init:W}},st.memo=function(D,G){return{$$typeof:f,type:D,compare:G===void 0?null:G}},st.startTransition=function(D){var G=J.transition;J.transition={};try{D()}finally{J.transition=G}},st.unstable_act=ce,st.useCallback=function(D,G){return q.current.useCallback(D,G)},st.useContext=function(D){return q.current.useContext(D)},st.useDebugValue=function(){},st.useDeferredValue=function(D){return q.current.useDeferredValue(D)},st.useEffect=function(D,G){return q.current.useEffect(D,G)},st.useId=function(){return q.current.useId()},st.useImperativeHandle=function(D,G,Ne){return q.current.useImperativeHandle(D,G,Ne)},st.useInsertionEffect=function(D,G){return q.current.useInsertionEffect(D,G)},st.useLayoutEffect=function(D,G){return q.current.useLayoutEffect(D,G)},st.useMemo=function(D,G){return q.current.useMemo(D,G)},st.useReducer=function(D,G,Ne){return q.current.useReducer(D,G,Ne)},st.useRef=function(D){return q.current.useRef(D)},st.useState=function(D){return q.current.useState(D)},st.useSyncExternalStore=function(D,G,Ne){return q.current.useSyncExternalStore(D,G,Ne)},st.useTransition=function(){return q.current.useTransition()},st.version="18.3.1",st}var Qv;function Ac(){return Qv||(Qv=1,Kp.exports=zE()),Kp.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yv;function BE(){if(Yv)return _l;Yv=1;var t=Ac(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(c,u,f){var p,m={},x=null,y=null;f!==void 0&&(x=""+f),u.key!==void 0&&(x=""+u.key),u.ref!==void 0&&(y=u.ref);for(p in u)r.call(u,p)&&!i.hasOwnProperty(p)&&(m[p]=u[p]);if(c&&c.defaultProps)for(p in u=c.defaultProps,u)m[p]===void 0&&(m[p]=u[p]);return{$$typeof:e,type:c,key:x,ref:y,props:m,_owner:s.current}}return _l.Fragment=n,_l.jsx=o,_l.jsxs=o,_l}var Xv;function FE(){return Xv||(Xv=1,qp.exports=BE()),qp.exports}var l=FE(),E=Ac();const dt=Zg(E),$E=LE({__proto__:null,default:dt},[E]);var Jd={},Gp={exports:{}},Xn={},Jp={exports:{}},Zp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eb;function VE(){return eb||(eb=1,(function(t){function e(J,fe){var ce=J.length;J.push(fe);e:for(;0<ce;){var D=ce-1>>>1,G=J[D];if(0<s(G,fe))J[D]=fe,J[ce]=G,ce=D;else break e}}function n(J){return J.length===0?null:J[0]}function r(J){if(J.length===0)return null;var fe=J[0],ce=J.pop();if(ce!==fe){J[0]=ce;e:for(var D=0,G=J.length,Ne=G>>>1;D<Ne;){var Ae=2*(D+1)-1,Ue=J[Ae],Ve=Ae+1,Z=J[Ve];if(0>s(Ue,ce))Ve<G&&0>s(Z,Ue)?(J[D]=Z,J[Ve]=ce,D=Ve):(J[D]=Ue,J[Ae]=ce,D=Ae);else if(Ve<G&&0>s(Z,ce))J[D]=Z,J[Ve]=ce,D=Ve;else break e}}return fe}function s(J,fe){var ce=J.sortIndex-fe.sortIndex;return ce!==0?ce:J.id-fe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],f=[],p=1,m=null,x=3,y=!1,v=!1,k=!1,w=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(J){for(var fe=n(f);fe!==null;){if(fe.callback===null)r(f);else if(fe.startTime<=J)r(f),fe.sortIndex=fe.expirationTime,e(u,fe);else break;fe=n(f)}}function A(J){if(k=!1,T(J),!v)if(n(u)!==null)v=!0,W(M);else{var fe=n(f);fe!==null&&q(A,fe.startTime-J)}}function M(J,fe){v=!1,k&&(k=!1,j(ne),ne=-1),y=!0;var ce=x;try{for(T(fe),m=n(u);m!==null&&(!(m.expirationTime>fe)||J&&!le());){var D=m.callback;if(typeof D=="function"){m.callback=null,x=m.priorityLevel;var G=D(m.expirationTime<=fe);fe=t.unstable_now(),typeof G=="function"?m.callback=G:m===n(u)&&r(u),T(fe)}else r(u);m=n(u)}if(m!==null)var Ne=!0;else{var Ae=n(f);Ae!==null&&q(A,Ae.startTime-fe),Ne=!1}return Ne}finally{m=null,x=ce,y=!1}}var P=!1,F=null,ne=-1,O=5,X=-1;function le(){return!(t.unstable_now()-X<O)}function z(){if(F!==null){var J=t.unstable_now();X=J;var fe=!0;try{fe=F(!0,J)}finally{fe?te():(P=!1,F=null)}}else P=!1}var te;if(typeof C=="function")te=function(){C(z)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,oe=ie.port2;ie.port1.onmessage=z,te=function(){oe.postMessage(null)}}else te=function(){w(z,0)};function W(J){F=J,P||(P=!0,te())}function q(J,fe){ne=w(function(){J(t.unstable_now())},fe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(J){J.callback=null},t.unstable_continueExecution=function(){v||y||(v=!0,W(M))},t.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<J?Math.floor(1e3/J):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(J){switch(x){case 1:case 2:case 3:var fe=3;break;default:fe=x}var ce=x;x=fe;try{return J()}finally{x=ce}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(J,fe){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var ce=x;x=J;try{return fe()}finally{x=ce}},t.unstable_scheduleCallback=function(J,fe,ce){var D=t.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?D+ce:D):ce=D,J){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=ce+G,J={id:p++,callback:fe,priorityLevel:J,startTime:ce,expirationTime:G,sortIndex:-1},ce>D?(J.sortIndex=ce,e(f,J),n(u)===null&&J===n(f)&&(k?(j(ne),ne=-1):k=!0,q(A,ce-D))):(J.sortIndex=G,e(u,J),v||y||(v=!0,W(M))),J},t.unstable_shouldYield=le,t.unstable_wrapCallback=function(J){var fe=x;return function(){var ce=x;x=fe;try{return J.apply(this,arguments)}finally{x=ce}}}})(Zp)),Zp}var tb;function UE(){return tb||(tb=1,Jp.exports=VE()),Jp.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nb;function HE(){if(nb)return Xn;nb=1;var t=Ac(),e=UE();function n(a){for(var d="https://reactjs.org/docs/error-decoder.html?invariant="+a,h=1;h<arguments.length;h++)d+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+a+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function i(a,d){o(a,d),o(a+"Capture",d)}function o(a,d){for(s[a]=d,a=0;a<d.length;a++)r.add(d[a])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},m={};function x(a){return u.call(m,a)?!0:u.call(p,a)?!1:f.test(a)?m[a]=!0:(p[a]=!0,!1)}function y(a,d,h,g){if(h!==null&&h.type===0)return!1;switch(typeof d){case"function":case"symbol":return!0;case"boolean":return g?!1:h!==null?!h.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function v(a,d,h,g){if(d===null||typeof d>"u"||y(a,d,h,g))return!0;if(g)return!1;if(h!==null)switch(h.type){case 3:return!d;case 4:return d===!1;case 5:return isNaN(d);case 6:return isNaN(d)||1>d}return!1}function k(a,d,h,g,b,N,S){this.acceptsBooleans=d===2||d===3||d===4,this.attributeName=g,this.attributeNamespace=b,this.mustUseProperty=h,this.propertyName=a,this.type=d,this.sanitizeURL=N,this.removeEmptyString=S}var w={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){w[a]=new k(a,0,!1,a,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var d=a[0];w[d]=new k(d,1,!1,a[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){w[a]=new k(a,2,!1,a.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){w[a]=new k(a,2,!1,a,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){w[a]=new k(a,3,!1,a.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a){w[a]=new k(a,3,!0,a,null,!1,!1)}),["capture","download"].forEach(function(a){w[a]=new k(a,4,!1,a,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a){w[a]=new k(a,6,!1,a,null,!1,!1)}),["rowSpan","start"].forEach(function(a){w[a]=new k(a,5,!1,a.toLowerCase(),null,!1,!1)});var j=/[\-:]([a-z])/g;function C(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var d=a.replace(j,C);w[d]=new k(d,1,!1,a,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var d=a.replace(j,C);w[d]=new k(d,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var d=a.replace(j,C);w[d]=new k(d,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a){w[a]=new k(a,1,!1,a.toLowerCase(),null,!1,!1)}),w.xlinkHref=new k("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a){w[a]=new k(a,1,!1,a.toLowerCase(),null,!0,!0)});function T(a,d,h,g){var b=w.hasOwnProperty(d)?w[d]:null;(b!==null?b.type!==0:g||!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(v(d,h,b,g)&&(h=null),g||b===null?x(d)&&(h===null?a.removeAttribute(d):a.setAttribute(d,""+h)):b.mustUseProperty?a[b.propertyName]=h===null?b.type===3?!1:"":h:(d=b.attributeName,g=b.attributeNamespace,h===null?a.removeAttribute(d):(b=b.type,h=b===3||b===4&&h===!0?"":""+h,g?a.setAttributeNS(g,d,h):a.setAttribute(d,h))))}var A=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,M=Symbol.for("react.element"),P=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),ne=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),X=Symbol.for("react.provider"),le=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),te=Symbol.for("react.suspense"),ie=Symbol.for("react.suspense_list"),oe=Symbol.for("react.memo"),W=Symbol.for("react.lazy"),q=Symbol.for("react.offscreen"),J=Symbol.iterator;function fe(a){return a===null||typeof a!="object"?null:(a=J&&a[J]||a["@@iterator"],typeof a=="function"?a:null)}var ce=Object.assign,D;function G(a){if(D===void 0)try{throw Error()}catch(h){var d=h.stack.trim().match(/\n( *(at )?)/);D=d&&d[1]||""}return`
`+D+a}var Ne=!1;function Ae(a,d){if(!a||Ne)return"";Ne=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(d)if(d=function(){throw Error()},Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(Y){var g=Y}Reflect.construct(a,[],d)}else{try{d.call()}catch(Y){g=Y}a.call(d.prototype)}else{try{throw Error()}catch(Y){g=Y}a()}}catch(Y){if(Y&&g&&typeof Y.stack=="string"){for(var b=Y.stack.split(`
`),N=g.stack.split(`
`),S=b.length-1,R=N.length-1;1<=S&&0<=R&&b[S]!==N[R];)R--;for(;1<=S&&0<=R;S--,R--)if(b[S]!==N[R]){if(S!==1||R!==1)do if(S--,R--,0>R||b[S]!==N[R]){var L=`
`+b[S].replace(" at new "," at ");return a.displayName&&L.includes("<anonymous>")&&(L=L.replace("<anonymous>",a.displayName)),L}while(1<=S&&0<=R);break}}}finally{Ne=!1,Error.prepareStackTrace=h}return(a=a?a.displayName||a.name:"")?G(a):""}function Ue(a){switch(a.tag){case 5:return G(a.type);case 16:return G("Lazy");case 13:return G("Suspense");case 19:return G("SuspenseList");case 0:case 2:case 15:return a=Ae(a.type,!1),a;case 11:return a=Ae(a.type.render,!1),a;case 1:return a=Ae(a.type,!0),a;default:return""}}function Ve(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case F:return"Fragment";case P:return"Portal";case O:return"Profiler";case ne:return"StrictMode";case te:return"Suspense";case ie:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case le:return(a.displayName||"Context")+".Consumer";case X:return(a._context.displayName||"Context")+".Provider";case z:var d=a.render;return a=a.displayName,a||(a=d.displayName||d.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case oe:return d=a.displayName||null,d!==null?d:Ve(a.type)||"Memo";case W:d=a._payload,a=a._init;try{return Ve(a(d))}catch{}}return null}function Z(a){var d=a.type;switch(a.tag){case 24:return"Cache";case 9:return(d.displayName||"Context")+".Consumer";case 10:return(d._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=d.render,a=a.displayName||a.name||"",d.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return d;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ve(d);case 8:return d===ne?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d}return null}function Ce(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Fe(a){var d=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function se(a){var d=Fe(a)?"checked":"value",h=Object.getOwnPropertyDescriptor(a.constructor.prototype,d),g=""+a[d];if(!a.hasOwnProperty(d)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var b=h.get,N=h.set;return Object.defineProperty(a,d,{configurable:!0,get:function(){return b.call(this)},set:function(S){g=""+S,N.call(this,S)}}),Object.defineProperty(a,d,{enumerable:h.enumerable}),{getValue:function(){return g},setValue:function(S){g=""+S},stopTracking:function(){a._valueTracker=null,delete a[d]}}}}function Ye(a){a._valueTracker||(a._valueTracker=se(a))}function wt(a){if(!a)return!1;var d=a._valueTracker;if(!d)return!0;var h=d.getValue(),g="";return a&&(g=Fe(a)?a.checked?"true":"false":a.value),a=g,a!==h?(d.setValue(a),!0):!1}function ht(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function xr(a,d){var h=d.checked;return ce({},d,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:h??a._wrapperState.initialChecked})}function yr(a,d){var h=d.defaultValue==null?"":d.defaultValue,g=d.checked!=null?d.checked:d.defaultChecked;h=Ce(d.value!=null?d.value:h),a._wrapperState={initialChecked:g,initialValue:h,controlled:d.type==="checkbox"||d.type==="radio"?d.checked!=null:d.value!=null}}function vr(a,d){d=d.checked,d!=null&&T(a,"checked",d,!1)}function Wt(a,d){vr(a,d);var h=Ce(d.value),g=d.type;if(h!=null)g==="number"?(h===0&&a.value===""||a.value!=h)&&(a.value=""+h):a.value!==""+h&&(a.value=""+h);else if(g==="submit"||g==="reset"){a.removeAttribute("value");return}d.hasOwnProperty("value")?Yr(a,d.type,h):d.hasOwnProperty("defaultValue")&&Yr(a,d.type,Ce(d.defaultValue)),d.checked==null&&d.defaultChecked!=null&&(a.defaultChecked=!!d.defaultChecked)}function an(a,d,h){if(d.hasOwnProperty("value")||d.hasOwnProperty("defaultValue")){var g=d.type;if(!(g!=="submit"&&g!=="reset"||d.value!==void 0&&d.value!==null))return;d=""+a._wrapperState.initialValue,h||d===a.value||(a.value=d),a.defaultValue=d}h=a.name,h!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,h!==""&&(a.name=h)}function Yr(a,d,h){(d!=="number"||ht(a.ownerDocument)!==a)&&(h==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+h&&(a.defaultValue=""+h))}var qn=Array.isArray;function _(a,d,h,g){if(a=a.options,d){d={};for(var b=0;b<h.length;b++)d["$"+h[b]]=!0;for(h=0;h<a.length;h++)b=d.hasOwnProperty("$"+a[h].value),a[h].selected!==b&&(a[h].selected=b),b&&g&&(a[h].defaultSelected=!0)}else{for(h=""+Ce(h),d=null,b=0;b<a.length;b++){if(a[b].value===h){a[b].selected=!0,g&&(a[b].defaultSelected=!0);return}d!==null||a[b].disabled||(d=a[b])}d!==null&&(d.selected=!0)}}function U(a,d){if(d.dangerouslySetInnerHTML!=null)throw Error(n(91));return ce({},d,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function re(a,d){var h=d.value;if(h==null){if(h=d.children,d=d.defaultValue,h!=null){if(d!=null)throw Error(n(92));if(qn(h)){if(1<h.length)throw Error(n(93));h=h[0]}d=h}d==null&&(d=""),h=d}a._wrapperState={initialValue:Ce(h)}}function I(a,d){var h=Ce(d.value),g=Ce(d.defaultValue);h!=null&&(h=""+h,h!==a.value&&(a.value=h),d.defaultValue==null&&a.defaultValue!==h&&(a.defaultValue=h)),g!=null&&(a.defaultValue=""+g)}function B(a){var d=a.textContent;d===a._wrapperState.initialValue&&d!==""&&d!==null&&(a.value=d)}function V(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Q(a,d){return a==null||a==="http://www.w3.org/1999/xhtml"?V(d):a==="http://www.w3.org/2000/svg"&&d==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var pe,Ee=(function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(d,h,g,b){MSApp.execUnsafeLocalFunction(function(){return a(d,h,g,b)})}:a})(function(a,d){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=d;else{for(pe=pe||document.createElement("div"),pe.innerHTML="<svg>"+d.valueOf().toString()+"</svg>",d=pe.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;d.firstChild;)a.appendChild(d.firstChild)}});function je(a,d){if(d){var h=a.firstChild;if(h&&h===a.lastChild&&h.nodeType===3){h.nodeValue=d;return}}a.textContent=d}var Xe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},et=["Webkit","ms","Moz","O"];Object.keys(Xe).forEach(function(a){et.forEach(function(d){d=d+a.charAt(0).toUpperCase()+a.substring(1),Xe[d]=Xe[a]})});function qt(a,d,h){return d==null||typeof d=="boolean"||d===""?"":h||typeof d!="number"||d===0||Xe.hasOwnProperty(a)&&Xe[a]?(""+d).trim():d+"px"}function en(a,d){a=a.style;for(var h in d)if(d.hasOwnProperty(h)){var g=h.indexOf("--")===0,b=qt(h,d[h],g);h==="float"&&(h="cssFloat"),g?a.setProperty(h,b):a[h]=b}}var ft=ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Kn(a,d){if(d){if(ft[a]&&(d.children!=null||d.dangerouslySetInnerHTML!=null))throw Error(n(137,a));if(d.dangerouslySetInnerHTML!=null){if(d.children!=null)throw Error(n(60));if(typeof d.dangerouslySetInnerHTML!="object"||!("__html"in d.dangerouslySetInnerHTML))throw Error(n(61))}if(d.style!=null&&typeof d.style!="object")throw Error(n(62))}}function ys(a,d){if(a.indexOf("-")===-1)return typeof d.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zs=null;function vs(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Uo=null,bs=null,ws=null;function Ka(a){if(a=yl(a)){if(typeof Uo!="function")throw Error(n(280));var d=a.stateNode;d&&(d=dd(d),Uo(a.stateNode,a.type,d))}}function Ga(a){bs?ws?ws.push(a):ws=[a]:bs=a}function Ja(){if(bs){var a=bs,d=ws;if(ws=bs=null,Ka(a),d)for(a=0;a<d.length;a++)Ka(d[a])}}function Za(a,d){return a(d)}function Qa(){}var Ho=!1;function Ya(a,d,h){if(Ho)return a(d,h);Ho=!0;try{return Za(a,d,h)}finally{Ho=!1,(bs!==null||ws!==null)&&(Qa(),Ja())}}function Qs(a,d){var h=a.stateNode;if(h===null)return null;var g=dd(h);if(g===null)return null;h=g[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(a=a.type,g=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!g;break e;default:a=!1}if(a)return null;if(h&&typeof h!="function")throw Error(n(231,d,typeof h));return h}var Wo=!1;if(c)try{var Ys={};Object.defineProperty(Ys,"passive",{get:function(){Wo=!0}}),window.addEventListener("test",Ys,Ys),window.removeEventListener("test",Ys,Ys)}catch{Wo=!1}function Xr(a,d,h,g,b,N,S,R,L){var Y=Array.prototype.slice.call(arguments,3);try{d.apply(h,Y)}catch(ue){this.onError(ue)}}var Xa=!1,Vc=null,Uc=!1,uh=null,H2={onError:function(a){Xa=!0,Vc=a}};function W2(a,d,h,g,b,N,S,R,L){Xa=!1,Vc=null,Xr.apply(H2,arguments)}function q2(a,d,h,g,b,N,S,R,L){if(W2.apply(this,arguments),Xa){if(Xa){var Y=Vc;Xa=!1,Vc=null}else throw Error(n(198));Uc||(Uc=!0,uh=Y)}}function Ji(a){var d=a,h=a;if(a.alternate)for(;d.return;)d=d.return;else{a=d;do d=a,(d.flags&4098)!==0&&(h=d.return),a=d.return;while(a)}return d.tag===3?h:null}function vx(a){if(a.tag===13){var d=a.memoizedState;if(d===null&&(a=a.alternate,a!==null&&(d=a.memoizedState)),d!==null)return d.dehydrated}return null}function bx(a){if(Ji(a)!==a)throw Error(n(188))}function K2(a){var d=a.alternate;if(!d){if(d=Ji(a),d===null)throw Error(n(188));return d!==a?null:a}for(var h=a,g=d;;){var b=h.return;if(b===null)break;var N=b.alternate;if(N===null){if(g=b.return,g!==null){h=g;continue}break}if(b.child===N.child){for(N=b.child;N;){if(N===h)return bx(b),a;if(N===g)return bx(b),d;N=N.sibling}throw Error(n(188))}if(h.return!==g.return)h=b,g=N;else{for(var S=!1,R=b.child;R;){if(R===h){S=!0,h=b,g=N;break}if(R===g){S=!0,g=b,h=N;break}R=R.sibling}if(!S){for(R=N.child;R;){if(R===h){S=!0,h=N,g=b;break}if(R===g){S=!0,g=N,h=b;break}R=R.sibling}if(!S)throw Error(n(189))}}if(h.alternate!==g)throw Error(n(190))}if(h.tag!==3)throw Error(n(188));return h.stateNode.current===h?a:d}function wx(a){return a=K2(a),a!==null?kx(a):null}function kx(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var d=kx(a);if(d!==null)return d;a=a.sibling}return null}var Nx=e.unstable_scheduleCallback,jx=e.unstable_cancelCallback,G2=e.unstable_shouldYield,J2=e.unstable_requestPaint,Vt=e.unstable_now,Z2=e.unstable_getCurrentPriorityLevel,fh=e.unstable_ImmediatePriority,Sx=e.unstable_UserBlockingPriority,Hc=e.unstable_NormalPriority,Q2=e.unstable_LowPriority,Cx=e.unstable_IdlePriority,Wc=null,es=null;function Y2(a){if(es&&typeof es.onCommitFiberRoot=="function")try{es.onCommitFiberRoot(Wc,a,void 0,(a.current.flags&128)===128)}catch{}}var Dr=Math.clz32?Math.clz32:tC,X2=Math.log,eC=Math.LN2;function tC(a){return a>>>=0,a===0?32:31-(X2(a)/eC|0)|0}var qc=64,Kc=4194304;function el(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function Gc(a,d){var h=a.pendingLanes;if(h===0)return 0;var g=0,b=a.suspendedLanes,N=a.pingedLanes,S=h&268435455;if(S!==0){var R=S&~b;R!==0?g=el(R):(N&=S,N!==0&&(g=el(N)))}else S=h&~b,S!==0?g=el(S):N!==0&&(g=el(N));if(g===0)return 0;if(d!==0&&d!==g&&(d&b)===0&&(b=g&-g,N=d&-d,b>=N||b===16&&(N&4194240)!==0))return d;if((g&4)!==0&&(g|=h&16),d=a.entangledLanes,d!==0)for(a=a.entanglements,d&=g;0<d;)h=31-Dr(d),b=1<<h,g|=a[h],d&=~b;return g}function nC(a,d){switch(a){case 1:case 2:case 4:return d+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function rC(a,d){for(var h=a.suspendedLanes,g=a.pingedLanes,b=a.expirationTimes,N=a.pendingLanes;0<N;){var S=31-Dr(N),R=1<<S,L=b[S];L===-1?((R&h)===0||(R&g)!==0)&&(b[S]=nC(R,d)):L<=d&&(a.expiredLanes|=R),N&=~R}}function hh(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function Ex(){var a=qc;return qc<<=1,(qc&4194240)===0&&(qc=64),a}function ph(a){for(var d=[],h=0;31>h;h++)d.push(a);return d}function tl(a,d,h){a.pendingLanes|=d,d!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,d=31-Dr(d),a[d]=h}function sC(a,d){var h=a.pendingLanes&~d;a.pendingLanes=d,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=d,a.mutableReadLanes&=d,a.entangledLanes&=d,d=a.entanglements;var g=a.eventTimes;for(a=a.expirationTimes;0<h;){var b=31-Dr(h),N=1<<b;d[b]=0,g[b]=-1,a[b]=-1,h&=~N}}function mh(a,d){var h=a.entangledLanes|=d;for(a=a.entanglements;h;){var g=31-Dr(h),b=1<<g;b&d|a[g]&d&&(a[g]|=d),h&=~b}}var ut=0;function Tx(a){return a&=-a,1<a?4<a?(a&268435455)!==0?16:536870912:4:1}var Ax,gh,Mx,Rx,Ox,xh=!1,Jc=[],Xs=null,ei=null,ti=null,nl=new Map,rl=new Map,ni=[],iC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function _x(a,d){switch(a){case"focusin":case"focusout":Xs=null;break;case"dragenter":case"dragleave":ei=null;break;case"mouseover":case"mouseout":ti=null;break;case"pointerover":case"pointerout":nl.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":rl.delete(d.pointerId)}}function sl(a,d,h,g,b,N){return a===null||a.nativeEvent!==N?(a={blockedOn:d,domEventName:h,eventSystemFlags:g,nativeEvent:N,targetContainers:[b]},d!==null&&(d=yl(d),d!==null&&gh(d)),a):(a.eventSystemFlags|=g,d=a.targetContainers,b!==null&&d.indexOf(b)===-1&&d.push(b),a)}function oC(a,d,h,g,b){switch(d){case"focusin":return Xs=sl(Xs,a,d,h,g,b),!0;case"dragenter":return ei=sl(ei,a,d,h,g,b),!0;case"mouseover":return ti=sl(ti,a,d,h,g,b),!0;case"pointerover":var N=b.pointerId;return nl.set(N,sl(nl.get(N)||null,a,d,h,g,b)),!0;case"gotpointercapture":return N=b.pointerId,rl.set(N,sl(rl.get(N)||null,a,d,h,g,b)),!0}return!1}function Px(a){var d=Zi(a.target);if(d!==null){var h=Ji(d);if(h!==null){if(d=h.tag,d===13){if(d=vx(h),d!==null){a.blockedOn=d,Ox(a.priority,function(){Mx(h)});return}}else if(d===3&&h.stateNode.current.memoizedState.isDehydrated){a.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Zc(a){if(a.blockedOn!==null)return!1;for(var d=a.targetContainers;0<d.length;){var h=vh(a.domEventName,a.eventSystemFlags,d[0],a.nativeEvent);if(h===null){h=a.nativeEvent;var g=new h.constructor(h.type,h);Zs=g,h.target.dispatchEvent(g),Zs=null}else return d=yl(h),d!==null&&gh(d),a.blockedOn=h,!1;d.shift()}return!0}function Ix(a,d,h){Zc(a)&&h.delete(d)}function aC(){xh=!1,Xs!==null&&Zc(Xs)&&(Xs=null),ei!==null&&Zc(ei)&&(ei=null),ti!==null&&Zc(ti)&&(ti=null),nl.forEach(Ix),rl.forEach(Ix)}function il(a,d){a.blockedOn===d&&(a.blockedOn=null,xh||(xh=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,aC)))}function ol(a){function d(b){return il(b,a)}if(0<Jc.length){il(Jc[0],a);for(var h=1;h<Jc.length;h++){var g=Jc[h];g.blockedOn===a&&(g.blockedOn=null)}}for(Xs!==null&&il(Xs,a),ei!==null&&il(ei,a),ti!==null&&il(ti,a),nl.forEach(d),rl.forEach(d),h=0;h<ni.length;h++)g=ni[h],g.blockedOn===a&&(g.blockedOn=null);for(;0<ni.length&&(h=ni[0],h.blockedOn===null);)Px(h),h.blockedOn===null&&ni.shift()}var qo=A.ReactCurrentBatchConfig,Qc=!0;function lC(a,d,h,g){var b=ut,N=qo.transition;qo.transition=null;try{ut=1,yh(a,d,h,g)}finally{ut=b,qo.transition=N}}function cC(a,d,h,g){var b=ut,N=qo.transition;qo.transition=null;try{ut=4,yh(a,d,h,g)}finally{ut=b,qo.transition=N}}function yh(a,d,h,g){if(Qc){var b=vh(a,d,h,g);if(b===null)Dh(a,d,g,Yc,h),_x(a,g);else if(oC(b,a,d,h,g))g.stopPropagation();else if(_x(a,g),d&4&&-1<iC.indexOf(a)){for(;b!==null;){var N=yl(b);if(N!==null&&Ax(N),N=vh(a,d,h,g),N===null&&Dh(a,d,g,Yc,h),N===b)break;b=N}b!==null&&g.stopPropagation()}else Dh(a,d,g,null,h)}}var Yc=null;function vh(a,d,h,g){if(Yc=null,a=vs(g),a=Zi(a),a!==null)if(d=Ji(a),d===null)a=null;else if(h=d.tag,h===13){if(a=vx(d),a!==null)return a;a=null}else if(h===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;a=null}else d!==a&&(a=null);return Yc=a,null}function Dx(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Z2()){case fh:return 1;case Sx:return 4;case Hc:case Q2:return 16;case Cx:return 536870912;default:return 16}default:return 16}}var ri=null,bh=null,Xc=null;function Lx(){if(Xc)return Xc;var a,d=bh,h=d.length,g,b="value"in ri?ri.value:ri.textContent,N=b.length;for(a=0;a<h&&d[a]===b[a];a++);var S=h-a;for(g=1;g<=S&&d[h-g]===b[N-g];g++);return Xc=b.slice(a,1<g?1-g:void 0)}function ed(a){var d=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&d===13&&(a=13)):a=d,a===10&&(a=13),32<=a||a===13?a:0}function td(){return!0}function zx(){return!1}function or(a){function d(h,g,b,N,S){this._reactName=h,this._targetInst=b,this.type=g,this.nativeEvent=N,this.target=S,this.currentTarget=null;for(var R in a)a.hasOwnProperty(R)&&(h=a[R],this[R]=h?h(N):N[R]);return this.isDefaultPrevented=(N.defaultPrevented!=null?N.defaultPrevented:N.returnValue===!1)?td:zx,this.isPropagationStopped=zx,this}return ce(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=td)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=td)},persist:function(){},isPersistent:td}),d}var Ko={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wh=or(Ko),al=ce({},Ko,{view:0,detail:0}),dC=or(al),kh,Nh,ll,nd=ce({},al,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sh,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==ll&&(ll&&a.type==="mousemove"?(kh=a.screenX-ll.screenX,Nh=a.screenY-ll.screenY):Nh=kh=0,ll=a),kh)},movementY:function(a){return"movementY"in a?a.movementY:Nh}}),Bx=or(nd),uC=ce({},nd,{dataTransfer:0}),fC=or(uC),hC=ce({},al,{relatedTarget:0}),jh=or(hC),pC=ce({},Ko,{animationName:0,elapsedTime:0,pseudoElement:0}),mC=or(pC),gC=ce({},Ko,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),xC=or(gC),yC=ce({},Ko,{data:0}),Fx=or(yC),vC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kC(a){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(a):(a=wC[a])?!!d[a]:!1}function Sh(){return kC}var NC=ce({},al,{key:function(a){if(a.key){var d=vC[a.key]||a.key;if(d!=="Unidentified")return d}return a.type==="keypress"?(a=ed(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?bC[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sh,charCode:function(a){return a.type==="keypress"?ed(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?ed(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),jC=or(NC),SC=ce({},nd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$x=or(SC),CC=ce({},al,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sh}),EC=or(CC),TC=ce({},Ko,{propertyName:0,elapsedTime:0,pseudoElement:0}),AC=or(TC),MC=ce({},nd,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),RC=or(MC),OC=[9,13,27,32],Ch=c&&"CompositionEvent"in window,cl=null;c&&"documentMode"in document&&(cl=document.documentMode);var _C=c&&"TextEvent"in window&&!cl,Vx=c&&(!Ch||cl&&8<cl&&11>=cl),Ux=" ",Hx=!1;function Wx(a,d){switch(a){case"keyup":return OC.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qx(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Go=!1;function PC(a,d){switch(a){case"compositionend":return qx(d);case"keypress":return d.which!==32?null:(Hx=!0,Ux);case"textInput":return a=d.data,a===Ux&&Hx?null:a;default:return null}}function IC(a,d){if(Go)return a==="compositionend"||!Ch&&Wx(a,d)?(a=Lx(),Xc=bh=ri=null,Go=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return Vx&&d.locale!=="ko"?null:d.data;default:return null}}var DC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kx(a){var d=a&&a.nodeName&&a.nodeName.toLowerCase();return d==="input"?!!DC[a.type]:d==="textarea"}function Gx(a,d,h,g){Ga(g),d=ad(d,"onChange"),0<d.length&&(h=new wh("onChange","change",null,h,g),a.push({event:h,listeners:d}))}var dl=null,ul=null;function LC(a){fy(a,0)}function rd(a){var d=Xo(a);if(wt(d))return a}function zC(a,d){if(a==="change")return d}var Jx=!1;if(c){var Eh;if(c){var Th="oninput"in document;if(!Th){var Zx=document.createElement("div");Zx.setAttribute("oninput","return;"),Th=typeof Zx.oninput=="function"}Eh=Th}else Eh=!1;Jx=Eh&&(!document.documentMode||9<document.documentMode)}function Qx(){dl&&(dl.detachEvent("onpropertychange",Yx),ul=dl=null)}function Yx(a){if(a.propertyName==="value"&&rd(ul)){var d=[];Gx(d,ul,a,vs(a)),Ya(LC,d)}}function BC(a,d,h){a==="focusin"?(Qx(),dl=d,ul=h,dl.attachEvent("onpropertychange",Yx)):a==="focusout"&&Qx()}function FC(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return rd(ul)}function $C(a,d){if(a==="click")return rd(d)}function VC(a,d){if(a==="input"||a==="change")return rd(d)}function UC(a,d){return a===d&&(a!==0||1/a===1/d)||a!==a&&d!==d}var Lr=typeof Object.is=="function"?Object.is:UC;function fl(a,d){if(Lr(a,d))return!0;if(typeof a!="object"||a===null||typeof d!="object"||d===null)return!1;var h=Object.keys(a),g=Object.keys(d);if(h.length!==g.length)return!1;for(g=0;g<h.length;g++){var b=h[g];if(!u.call(d,b)||!Lr(a[b],d[b]))return!1}return!0}function Xx(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function ey(a,d){var h=Xx(a);a=0;for(var g;h;){if(h.nodeType===3){if(g=a+h.textContent.length,a<=d&&g>=d)return{node:h,offset:d-a};a=g}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=Xx(h)}}function ty(a,d){return a&&d?a===d?!0:a&&a.nodeType===3?!1:d&&d.nodeType===3?ty(a,d.parentNode):"contains"in a?a.contains(d):a.compareDocumentPosition?!!(a.compareDocumentPosition(d)&16):!1:!1}function ny(){for(var a=window,d=ht();d instanceof a.HTMLIFrameElement;){try{var h=typeof d.contentWindow.location.href=="string"}catch{h=!1}if(h)a=d.contentWindow;else break;d=ht(a.document)}return d}function Ah(a){var d=a&&a.nodeName&&a.nodeName.toLowerCase();return d&&(d==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||d==="textarea"||a.contentEditable==="true")}function HC(a){var d=ny(),h=a.focusedElem,g=a.selectionRange;if(d!==h&&h&&h.ownerDocument&&ty(h.ownerDocument.documentElement,h)){if(g!==null&&Ah(h)){if(d=g.start,a=g.end,a===void 0&&(a=d),"selectionStart"in h)h.selectionStart=d,h.selectionEnd=Math.min(a,h.value.length);else if(a=(d=h.ownerDocument||document)&&d.defaultView||window,a.getSelection){a=a.getSelection();var b=h.textContent.length,N=Math.min(g.start,b);g=g.end===void 0?N:Math.min(g.end,b),!a.extend&&N>g&&(b=g,g=N,N=b),b=ey(h,N);var S=ey(h,g);b&&S&&(a.rangeCount!==1||a.anchorNode!==b.node||a.anchorOffset!==b.offset||a.focusNode!==S.node||a.focusOffset!==S.offset)&&(d=d.createRange(),d.setStart(b.node,b.offset),a.removeAllRanges(),N>g?(a.addRange(d),a.extend(S.node,S.offset)):(d.setEnd(S.node,S.offset),a.addRange(d)))}}for(d=[],a=h;a=a.parentNode;)a.nodeType===1&&d.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof h.focus=="function"&&h.focus(),h=0;h<d.length;h++)a=d[h],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var WC=c&&"documentMode"in document&&11>=document.documentMode,Jo=null,Mh=null,hl=null,Rh=!1;function ry(a,d,h){var g=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;Rh||Jo==null||Jo!==ht(g)||(g=Jo,"selectionStart"in g&&Ah(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),hl&&fl(hl,g)||(hl=g,g=ad(Mh,"onSelect"),0<g.length&&(d=new wh("onSelect","select",null,d,h),a.push({event:d,listeners:g}),d.target=Jo)))}function sd(a,d){var h={};return h[a.toLowerCase()]=d.toLowerCase(),h["Webkit"+a]="webkit"+d,h["Moz"+a]="moz"+d,h}var Zo={animationend:sd("Animation","AnimationEnd"),animationiteration:sd("Animation","AnimationIteration"),animationstart:sd("Animation","AnimationStart"),transitionend:sd("Transition","TransitionEnd")},Oh={},sy={};c&&(sy=document.createElement("div").style,"AnimationEvent"in window||(delete Zo.animationend.animation,delete Zo.animationiteration.animation,delete Zo.animationstart.animation),"TransitionEvent"in window||delete Zo.transitionend.transition);function id(a){if(Oh[a])return Oh[a];if(!Zo[a])return a;var d=Zo[a],h;for(h in d)if(d.hasOwnProperty(h)&&h in sy)return Oh[a]=d[h];return a}var iy=id("animationend"),oy=id("animationiteration"),ay=id("animationstart"),ly=id("transitionend"),cy=new Map,dy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function si(a,d){cy.set(a,d),i(d,[a])}for(var _h=0;_h<dy.length;_h++){var Ph=dy[_h],qC=Ph.toLowerCase(),KC=Ph[0].toUpperCase()+Ph.slice(1);si(qC,"on"+KC)}si(iy,"onAnimationEnd"),si(oy,"onAnimationIteration"),si(ay,"onAnimationStart"),si("dblclick","onDoubleClick"),si("focusin","onFocus"),si("focusout","onBlur"),si(ly,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),GC=new Set("cancel close invalid load scroll toggle".split(" ").concat(pl));function uy(a,d,h){var g=a.type||"unknown-event";a.currentTarget=h,q2(g,d,void 0,a),a.currentTarget=null}function fy(a,d){d=(d&4)!==0;for(var h=0;h<a.length;h++){var g=a[h],b=g.event;g=g.listeners;e:{var N=void 0;if(d)for(var S=g.length-1;0<=S;S--){var R=g[S],L=R.instance,Y=R.currentTarget;if(R=R.listener,L!==N&&b.isPropagationStopped())break e;uy(b,R,Y),N=L}else for(S=0;S<g.length;S++){if(R=g[S],L=R.instance,Y=R.currentTarget,R=R.listener,L!==N&&b.isPropagationStopped())break e;uy(b,R,Y),N=L}}}if(Uc)throw a=uh,Uc=!1,uh=null,a}function kt(a,d){var h=d[Vh];h===void 0&&(h=d[Vh]=new Set);var g=a+"__bubble";h.has(g)||(hy(d,a,2,!1),h.add(g))}function Ih(a,d,h){var g=0;d&&(g|=4),hy(h,a,g,d)}var od="_reactListening"+Math.random().toString(36).slice(2);function ml(a){if(!a[od]){a[od]=!0,r.forEach(function(h){h!=="selectionchange"&&(GC.has(h)||Ih(h,!1,a),Ih(h,!0,a))});var d=a.nodeType===9?a:a.ownerDocument;d===null||d[od]||(d[od]=!0,Ih("selectionchange",!1,d))}}function hy(a,d,h,g){switch(Dx(d)){case 1:var b=lC;break;case 4:b=cC;break;default:b=yh}h=b.bind(null,d,h,a),b=void 0,!Wo||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(b=!0),g?b!==void 0?a.addEventListener(d,h,{capture:!0,passive:b}):a.addEventListener(d,h,!0):b!==void 0?a.addEventListener(d,h,{passive:b}):a.addEventListener(d,h,!1)}function Dh(a,d,h,g,b){var N=g;if((d&1)===0&&(d&2)===0&&g!==null)e:for(;;){if(g===null)return;var S=g.tag;if(S===3||S===4){var R=g.stateNode.containerInfo;if(R===b||R.nodeType===8&&R.parentNode===b)break;if(S===4)for(S=g.return;S!==null;){var L=S.tag;if((L===3||L===4)&&(L=S.stateNode.containerInfo,L===b||L.nodeType===8&&L.parentNode===b))return;S=S.return}for(;R!==null;){if(S=Zi(R),S===null)return;if(L=S.tag,L===5||L===6){g=N=S;continue e}R=R.parentNode}}g=g.return}Ya(function(){var Y=N,ue=vs(h),he=[];e:{var de=cy.get(a);if(de!==void 0){var Te=wh,Oe=a;switch(a){case"keypress":if(ed(h)===0)break e;case"keydown":case"keyup":Te=jC;break;case"focusin":Oe="focus",Te=jh;break;case"focusout":Oe="blur",Te=jh;break;case"beforeblur":case"afterblur":Te=jh;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Te=Bx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Te=fC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Te=EC;break;case iy:case oy:case ay:Te=mC;break;case ly:Te=AC;break;case"scroll":Te=dC;break;case"wheel":Te=RC;break;case"copy":case"cut":case"paste":Te=xC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Te=$x}var Ie=(d&4)!==0,Ut=!Ie&&a==="scroll",H=Ie?de!==null?de+"Capture":null:de;Ie=[];for(var $=Y,K;$!==null;){K=$;var ve=K.stateNode;if(K.tag===5&&ve!==null&&(K=ve,H!==null&&(ve=Qs($,H),ve!=null&&Ie.push(gl($,ve,K)))),Ut)break;$=$.return}0<Ie.length&&(de=new Te(de,Oe,null,h,ue),he.push({event:de,listeners:Ie}))}}if((d&7)===0){e:{if(de=a==="mouseover"||a==="pointerover",Te=a==="mouseout"||a==="pointerout",de&&h!==Zs&&(Oe=h.relatedTarget||h.fromElement)&&(Zi(Oe)||Oe[ks]))break e;if((Te||de)&&(de=ue.window===ue?ue:(de=ue.ownerDocument)?de.defaultView||de.parentWindow:window,Te?(Oe=h.relatedTarget||h.toElement,Te=Y,Oe=Oe?Zi(Oe):null,Oe!==null&&(Ut=Ji(Oe),Oe!==Ut||Oe.tag!==5&&Oe.tag!==6)&&(Oe=null)):(Te=null,Oe=Y),Te!==Oe)){if(Ie=Bx,ve="onMouseLeave",H="onMouseEnter",$="mouse",(a==="pointerout"||a==="pointerover")&&(Ie=$x,ve="onPointerLeave",H="onPointerEnter",$="pointer"),Ut=Te==null?de:Xo(Te),K=Oe==null?de:Xo(Oe),de=new Ie(ve,$+"leave",Te,h,ue),de.target=Ut,de.relatedTarget=K,ve=null,Zi(ue)===Y&&(Ie=new Ie(H,$+"enter",Oe,h,ue),Ie.target=K,Ie.relatedTarget=Ut,ve=Ie),Ut=ve,Te&&Oe)t:{for(Ie=Te,H=Oe,$=0,K=Ie;K;K=Qo(K))$++;for(K=0,ve=H;ve;ve=Qo(ve))K++;for(;0<$-K;)Ie=Qo(Ie),$--;for(;0<K-$;)H=Qo(H),K--;for(;$--;){if(Ie===H||H!==null&&Ie===H.alternate)break t;Ie=Qo(Ie),H=Qo(H)}Ie=null}else Ie=null;Te!==null&&py(he,de,Te,Ie,!1),Oe!==null&&Ut!==null&&py(he,Ut,Oe,Ie,!0)}}e:{if(de=Y?Xo(Y):window,Te=de.nodeName&&de.nodeName.toLowerCase(),Te==="select"||Te==="input"&&de.type==="file")var De=zC;else if(Kx(de))if(Jx)De=VC;else{De=FC;var We=BC}else(Te=de.nodeName)&&Te.toLowerCase()==="input"&&(de.type==="checkbox"||de.type==="radio")&&(De=$C);if(De&&(De=De(a,Y))){Gx(he,De,h,ue);break e}We&&We(a,de,Y),a==="focusout"&&(We=de._wrapperState)&&We.controlled&&de.type==="number"&&Yr(de,"number",de.value)}switch(We=Y?Xo(Y):window,a){case"focusin":(Kx(We)||We.contentEditable==="true")&&(Jo=We,Mh=Y,hl=null);break;case"focusout":hl=Mh=Jo=null;break;case"mousedown":Rh=!0;break;case"contextmenu":case"mouseup":case"dragend":Rh=!1,ry(he,h,ue);break;case"selectionchange":if(WC)break;case"keydown":case"keyup":ry(he,h,ue)}var qe;if(Ch)e:{switch(a){case"compositionstart":var Je="onCompositionStart";break e;case"compositionend":Je="onCompositionEnd";break e;case"compositionupdate":Je="onCompositionUpdate";break e}Je=void 0}else Go?Wx(a,h)&&(Je="onCompositionEnd"):a==="keydown"&&h.keyCode===229&&(Je="onCompositionStart");Je&&(Vx&&h.locale!=="ko"&&(Go||Je!=="onCompositionStart"?Je==="onCompositionEnd"&&Go&&(qe=Lx()):(ri=ue,bh="value"in ri?ri.value:ri.textContent,Go=!0)),We=ad(Y,Je),0<We.length&&(Je=new Fx(Je,a,null,h,ue),he.push({event:Je,listeners:We}),qe?Je.data=qe:(qe=qx(h),qe!==null&&(Je.data=qe)))),(qe=_C?PC(a,h):IC(a,h))&&(Y=ad(Y,"onBeforeInput"),0<Y.length&&(ue=new Fx("onBeforeInput","beforeinput",null,h,ue),he.push({event:ue,listeners:Y}),ue.data=qe))}fy(he,d)})}function gl(a,d,h){return{instance:a,listener:d,currentTarget:h}}function ad(a,d){for(var h=d+"Capture",g=[];a!==null;){var b=a,N=b.stateNode;b.tag===5&&N!==null&&(b=N,N=Qs(a,h),N!=null&&g.unshift(gl(a,N,b)),N=Qs(a,d),N!=null&&g.push(gl(a,N,b))),a=a.return}return g}function Qo(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function py(a,d,h,g,b){for(var N=d._reactName,S=[];h!==null&&h!==g;){var R=h,L=R.alternate,Y=R.stateNode;if(L!==null&&L===g)break;R.tag===5&&Y!==null&&(R=Y,b?(L=Qs(h,N),L!=null&&S.unshift(gl(h,L,R))):b||(L=Qs(h,N),L!=null&&S.push(gl(h,L,R)))),h=h.return}S.length!==0&&a.push({event:d,listeners:S})}var JC=/\r\n?/g,ZC=/\u0000|\uFFFD/g;function my(a){return(typeof a=="string"?a:""+a).replace(JC,`
`).replace(ZC,"")}function ld(a,d,h){if(d=my(d),my(a)!==d&&h)throw Error(n(425))}function cd(){}var Lh=null,zh=null;function Bh(a,d){return a==="textarea"||a==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var Fh=typeof setTimeout=="function"?setTimeout:void 0,QC=typeof clearTimeout=="function"?clearTimeout:void 0,gy=typeof Promise=="function"?Promise:void 0,YC=typeof queueMicrotask=="function"?queueMicrotask:typeof gy<"u"?function(a){return gy.resolve(null).then(a).catch(XC)}:Fh;function XC(a){setTimeout(function(){throw a})}function $h(a,d){var h=d,g=0;do{var b=h.nextSibling;if(a.removeChild(h),b&&b.nodeType===8)if(h=b.data,h==="/$"){if(g===0){a.removeChild(b),ol(d);return}g--}else h!=="$"&&h!=="$?"&&h!=="$!"||g++;h=b}while(h);ol(d)}function ii(a){for(;a!=null;a=a.nextSibling){var d=a.nodeType;if(d===1||d===3)break;if(d===8){if(d=a.data,d==="$"||d==="$!"||d==="$?")break;if(d==="/$")return null}}return a}function xy(a){a=a.previousSibling;for(var d=0;a;){if(a.nodeType===8){var h=a.data;if(h==="$"||h==="$!"||h==="$?"){if(d===0)return a;d--}else h==="/$"&&d++}a=a.previousSibling}return null}var Yo=Math.random().toString(36).slice(2),ts="__reactFiber$"+Yo,xl="__reactProps$"+Yo,ks="__reactContainer$"+Yo,Vh="__reactEvents$"+Yo,eE="__reactListeners$"+Yo,tE="__reactHandles$"+Yo;function Zi(a){var d=a[ts];if(d)return d;for(var h=a.parentNode;h;){if(d=h[ks]||h[ts]){if(h=d.alternate,d.child!==null||h!==null&&h.child!==null)for(a=xy(a);a!==null;){if(h=a[ts])return h;a=xy(a)}return d}a=h,h=a.parentNode}return null}function yl(a){return a=a[ts]||a[ks],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function Xo(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(n(33))}function dd(a){return a[xl]||null}var Uh=[],ea=-1;function oi(a){return{current:a}}function Nt(a){0>ea||(a.current=Uh[ea],Uh[ea]=null,ea--)}function gt(a,d){ea++,Uh[ea]=a.current,a.current=d}var ai={},Nn=oi(ai),Gn=oi(!1),Qi=ai;function ta(a,d){var h=a.type.contextTypes;if(!h)return ai;var g=a.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===d)return g.__reactInternalMemoizedMaskedChildContext;var b={},N;for(N in h)b[N]=d[N];return g&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=d,a.__reactInternalMemoizedMaskedChildContext=b),b}function Jn(a){return a=a.childContextTypes,a!=null}function ud(){Nt(Gn),Nt(Nn)}function yy(a,d,h){if(Nn.current!==ai)throw Error(n(168));gt(Nn,d),gt(Gn,h)}function vy(a,d,h){var g=a.stateNode;if(d=d.childContextTypes,typeof g.getChildContext!="function")return h;g=g.getChildContext();for(var b in g)if(!(b in d))throw Error(n(108,Z(a)||"Unknown",b));return ce({},h,g)}function fd(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||ai,Qi=Nn.current,gt(Nn,a),gt(Gn,Gn.current),!0}function by(a,d,h){var g=a.stateNode;if(!g)throw Error(n(169));h?(a=vy(a,d,Qi),g.__reactInternalMemoizedMergedChildContext=a,Nt(Gn),Nt(Nn),gt(Nn,a)):Nt(Gn),gt(Gn,h)}var Ns=null,hd=!1,Hh=!1;function wy(a){Ns===null?Ns=[a]:Ns.push(a)}function nE(a){hd=!0,wy(a)}function li(){if(!Hh&&Ns!==null){Hh=!0;var a=0,d=ut;try{var h=Ns;for(ut=1;a<h.length;a++){var g=h[a];do g=g(!0);while(g!==null)}Ns=null,hd=!1}catch(b){throw Ns!==null&&(Ns=Ns.slice(a+1)),Nx(fh,li),b}finally{ut=d,Hh=!1}}return null}var na=[],ra=0,pd=null,md=0,br=[],wr=0,Yi=null,js=1,Ss="";function Xi(a,d){na[ra++]=md,na[ra++]=pd,pd=a,md=d}function ky(a,d,h){br[wr++]=js,br[wr++]=Ss,br[wr++]=Yi,Yi=a;var g=js;a=Ss;var b=32-Dr(g)-1;g&=~(1<<b),h+=1;var N=32-Dr(d)+b;if(30<N){var S=b-b%5;N=(g&(1<<S)-1).toString(32),g>>=S,b-=S,js=1<<32-Dr(d)+b|h<<b|g,Ss=N+a}else js=1<<N|h<<b|g,Ss=a}function Wh(a){a.return!==null&&(Xi(a,1),ky(a,1,0))}function qh(a){for(;a===pd;)pd=na[--ra],na[ra]=null,md=na[--ra],na[ra]=null;for(;a===Yi;)Yi=br[--wr],br[wr]=null,Ss=br[--wr],br[wr]=null,js=br[--wr],br[wr]=null}var ar=null,lr=null,Tt=!1,zr=null;function Ny(a,d){var h=Sr(5,null,null,0);h.elementType="DELETED",h.stateNode=d,h.return=a,d=a.deletions,d===null?(a.deletions=[h],a.flags|=16):d.push(h)}function jy(a,d){switch(a.tag){case 5:var h=a.type;return d=d.nodeType!==1||h.toLowerCase()!==d.nodeName.toLowerCase()?null:d,d!==null?(a.stateNode=d,ar=a,lr=ii(d.firstChild),!0):!1;case 6:return d=a.pendingProps===""||d.nodeType!==3?null:d,d!==null?(a.stateNode=d,ar=a,lr=null,!0):!1;case 13:return d=d.nodeType!==8?null:d,d!==null?(h=Yi!==null?{id:js,overflow:Ss}:null,a.memoizedState={dehydrated:d,treeContext:h,retryLane:1073741824},h=Sr(18,null,null,0),h.stateNode=d,h.return=a,a.child=h,ar=a,lr=null,!0):!1;default:return!1}}function Kh(a){return(a.mode&1)!==0&&(a.flags&128)===0}function Gh(a){if(Tt){var d=lr;if(d){var h=d;if(!jy(a,d)){if(Kh(a))throw Error(n(418));d=ii(h.nextSibling);var g=ar;d&&jy(a,d)?Ny(g,h):(a.flags=a.flags&-4097|2,Tt=!1,ar=a)}}else{if(Kh(a))throw Error(n(418));a.flags=a.flags&-4097|2,Tt=!1,ar=a}}}function Sy(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;ar=a}function gd(a){if(a!==ar)return!1;if(!Tt)return Sy(a),Tt=!0,!1;var d;if((d=a.tag!==3)&&!(d=a.tag!==5)&&(d=a.type,d=d!=="head"&&d!=="body"&&!Bh(a.type,a.memoizedProps)),d&&(d=lr)){if(Kh(a))throw Cy(),Error(n(418));for(;d;)Ny(a,d),d=ii(d.nextSibling)}if(Sy(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(317));e:{for(a=a.nextSibling,d=0;a;){if(a.nodeType===8){var h=a.data;if(h==="/$"){if(d===0){lr=ii(a.nextSibling);break e}d--}else h!=="$"&&h!=="$!"&&h!=="$?"||d++}a=a.nextSibling}lr=null}}else lr=ar?ii(a.stateNode.nextSibling):null;return!0}function Cy(){for(var a=lr;a;)a=ii(a.nextSibling)}function sa(){lr=ar=null,Tt=!1}function Jh(a){zr===null?zr=[a]:zr.push(a)}var rE=A.ReactCurrentBatchConfig;function vl(a,d,h){if(a=h.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(h._owner){if(h=h._owner,h){if(h.tag!==1)throw Error(n(309));var g=h.stateNode}if(!g)throw Error(n(147,a));var b=g,N=""+a;return d!==null&&d.ref!==null&&typeof d.ref=="function"&&d.ref._stringRef===N?d.ref:(d=function(S){var R=b.refs;S===null?delete R[N]:R[N]=S},d._stringRef=N,d)}if(typeof a!="string")throw Error(n(284));if(!h._owner)throw Error(n(290,a))}return a}function xd(a,d){throw a=Object.prototype.toString.call(d),Error(n(31,a==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":a))}function Ey(a){var d=a._init;return d(a._payload)}function Ty(a){function d(H,$){if(a){var K=H.deletions;K===null?(H.deletions=[$],H.flags|=16):K.push($)}}function h(H,$){if(!a)return null;for(;$!==null;)d(H,$),$=$.sibling;return null}function g(H,$){for(H=new Map;$!==null;)$.key!==null?H.set($.key,$):H.set($.index,$),$=$.sibling;return H}function b(H,$){return H=gi(H,$),H.index=0,H.sibling=null,H}function N(H,$,K){return H.index=K,a?(K=H.alternate,K!==null?(K=K.index,K<$?(H.flags|=2,$):K):(H.flags|=2,$)):(H.flags|=1048576,$)}function S(H){return a&&H.alternate===null&&(H.flags|=2),H}function R(H,$,K,ve){return $===null||$.tag!==6?($=Fp(K,H.mode,ve),$.return=H,$):($=b($,K),$.return=H,$)}function L(H,$,K,ve){var De=K.type;return De===F?ue(H,$,K.props.children,ve,K.key):$!==null&&($.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===W&&Ey(De)===$.type)?(ve=b($,K.props),ve.ref=vl(H,$,K),ve.return=H,ve):(ve=$d(K.type,K.key,K.props,null,H.mode,ve),ve.ref=vl(H,$,K),ve.return=H,ve)}function Y(H,$,K,ve){return $===null||$.tag!==4||$.stateNode.containerInfo!==K.containerInfo||$.stateNode.implementation!==K.implementation?($=$p(K,H.mode,ve),$.return=H,$):($=b($,K.children||[]),$.return=H,$)}function ue(H,$,K,ve,De){return $===null||$.tag!==7?($=ao(K,H.mode,ve,De),$.return=H,$):($=b($,K),$.return=H,$)}function he(H,$,K){if(typeof $=="string"&&$!==""||typeof $=="number")return $=Fp(""+$,H.mode,K),$.return=H,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case M:return K=$d($.type,$.key,$.props,null,H.mode,K),K.ref=vl(H,null,$),K.return=H,K;case P:return $=$p($,H.mode,K),$.return=H,$;case W:var ve=$._init;return he(H,ve($._payload),K)}if(qn($)||fe($))return $=ao($,H.mode,K,null),$.return=H,$;xd(H,$)}return null}function de(H,$,K,ve){var De=$!==null?$.key:null;if(typeof K=="string"&&K!==""||typeof K=="number")return De!==null?null:R(H,$,""+K,ve);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case M:return K.key===De?L(H,$,K,ve):null;case P:return K.key===De?Y(H,$,K,ve):null;case W:return De=K._init,de(H,$,De(K._payload),ve)}if(qn(K)||fe(K))return De!==null?null:ue(H,$,K,ve,null);xd(H,K)}return null}function Te(H,$,K,ve,De){if(typeof ve=="string"&&ve!==""||typeof ve=="number")return H=H.get(K)||null,R($,H,""+ve,De);if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case M:return H=H.get(ve.key===null?K:ve.key)||null,L($,H,ve,De);case P:return H=H.get(ve.key===null?K:ve.key)||null,Y($,H,ve,De);case W:var We=ve._init;return Te(H,$,K,We(ve._payload),De)}if(qn(ve)||fe(ve))return H=H.get(K)||null,ue($,H,ve,De,null);xd($,ve)}return null}function Oe(H,$,K,ve){for(var De=null,We=null,qe=$,Je=$=0,dn=null;qe!==null&&Je<K.length;Je++){qe.index>Je?(dn=qe,qe=null):dn=qe.sibling;var lt=de(H,qe,K[Je],ve);if(lt===null){qe===null&&(qe=dn);break}a&&qe&&lt.alternate===null&&d(H,qe),$=N(lt,$,Je),We===null?De=lt:We.sibling=lt,We=lt,qe=dn}if(Je===K.length)return h(H,qe),Tt&&Xi(H,Je),De;if(qe===null){for(;Je<K.length;Je++)qe=he(H,K[Je],ve),qe!==null&&($=N(qe,$,Je),We===null?De=qe:We.sibling=qe,We=qe);return Tt&&Xi(H,Je),De}for(qe=g(H,qe);Je<K.length;Je++)dn=Te(qe,H,Je,K[Je],ve),dn!==null&&(a&&dn.alternate!==null&&qe.delete(dn.key===null?Je:dn.key),$=N(dn,$,Je),We===null?De=dn:We.sibling=dn,We=dn);return a&&qe.forEach(function(xi){return d(H,xi)}),Tt&&Xi(H,Je),De}function Ie(H,$,K,ve){var De=fe(K);if(typeof De!="function")throw Error(n(150));if(K=De.call(K),K==null)throw Error(n(151));for(var We=De=null,qe=$,Je=$=0,dn=null,lt=K.next();qe!==null&&!lt.done;Je++,lt=K.next()){qe.index>Je?(dn=qe,qe=null):dn=qe.sibling;var xi=de(H,qe,lt.value,ve);if(xi===null){qe===null&&(qe=dn);break}a&&qe&&xi.alternate===null&&d(H,qe),$=N(xi,$,Je),We===null?De=xi:We.sibling=xi,We=xi,qe=dn}if(lt.done)return h(H,qe),Tt&&Xi(H,Je),De;if(qe===null){for(;!lt.done;Je++,lt=K.next())lt=he(H,lt.value,ve),lt!==null&&($=N(lt,$,Je),We===null?De=lt:We.sibling=lt,We=lt);return Tt&&Xi(H,Je),De}for(qe=g(H,qe);!lt.done;Je++,lt=K.next())lt=Te(qe,H,Je,lt.value,ve),lt!==null&&(a&&lt.alternate!==null&&qe.delete(lt.key===null?Je:lt.key),$=N(lt,$,Je),We===null?De=lt:We.sibling=lt,We=lt);return a&&qe.forEach(function(DE){return d(H,DE)}),Tt&&Xi(H,Je),De}function Ut(H,$,K,ve){if(typeof K=="object"&&K!==null&&K.type===F&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case M:e:{for(var De=K.key,We=$;We!==null;){if(We.key===De){if(De=K.type,De===F){if(We.tag===7){h(H,We.sibling),$=b(We,K.props.children),$.return=H,H=$;break e}}else if(We.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===W&&Ey(De)===We.type){h(H,We.sibling),$=b(We,K.props),$.ref=vl(H,We,K),$.return=H,H=$;break e}h(H,We);break}else d(H,We);We=We.sibling}K.type===F?($=ao(K.props.children,H.mode,ve,K.key),$.return=H,H=$):(ve=$d(K.type,K.key,K.props,null,H.mode,ve),ve.ref=vl(H,$,K),ve.return=H,H=ve)}return S(H);case P:e:{for(We=K.key;$!==null;){if($.key===We)if($.tag===4&&$.stateNode.containerInfo===K.containerInfo&&$.stateNode.implementation===K.implementation){h(H,$.sibling),$=b($,K.children||[]),$.return=H,H=$;break e}else{h(H,$);break}else d(H,$);$=$.sibling}$=$p(K,H.mode,ve),$.return=H,H=$}return S(H);case W:return We=K._init,Ut(H,$,We(K._payload),ve)}if(qn(K))return Oe(H,$,K,ve);if(fe(K))return Ie(H,$,K,ve);xd(H,K)}return typeof K=="string"&&K!==""||typeof K=="number"?(K=""+K,$!==null&&$.tag===6?(h(H,$.sibling),$=b($,K),$.return=H,H=$):(h(H,$),$=Fp(K,H.mode,ve),$.return=H,H=$),S(H)):h(H,$)}return Ut}var ia=Ty(!0),Ay=Ty(!1),yd=oi(null),vd=null,oa=null,Zh=null;function Qh(){Zh=oa=vd=null}function Yh(a){var d=yd.current;Nt(yd),a._currentValue=d}function Xh(a,d,h){for(;a!==null;){var g=a.alternate;if((a.childLanes&d)!==d?(a.childLanes|=d,g!==null&&(g.childLanes|=d)):g!==null&&(g.childLanes&d)!==d&&(g.childLanes|=d),a===h)break;a=a.return}}function aa(a,d){vd=a,Zh=oa=null,a=a.dependencies,a!==null&&a.firstContext!==null&&((a.lanes&d)!==0&&(Zn=!0),a.firstContext=null)}function kr(a){var d=a._currentValue;if(Zh!==a)if(a={context:a,memoizedValue:d,next:null},oa===null){if(vd===null)throw Error(n(308));oa=a,vd.dependencies={lanes:0,firstContext:a}}else oa=oa.next=a;return d}var eo=null;function ep(a){eo===null?eo=[a]:eo.push(a)}function My(a,d,h,g){var b=d.interleaved;return b===null?(h.next=h,ep(d)):(h.next=b.next,b.next=h),d.interleaved=h,Cs(a,g)}function Cs(a,d){a.lanes|=d;var h=a.alternate;for(h!==null&&(h.lanes|=d),h=a,a=a.return;a!==null;)a.childLanes|=d,h=a.alternate,h!==null&&(h.childLanes|=d),h=a,a=a.return;return h.tag===3?h.stateNode:null}var ci=!1;function tp(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ry(a,d){a=a.updateQueue,d.updateQueue===a&&(d.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function Es(a,d){return{eventTime:a,lane:d,tag:0,payload:null,callback:null,next:null}}function di(a,d,h){var g=a.updateQueue;if(g===null)return null;if(g=g.shared,(ot&2)!==0){var b=g.pending;return b===null?d.next=d:(d.next=b.next,b.next=d),g.pending=d,Cs(a,h)}return b=g.interleaved,b===null?(d.next=d,ep(g)):(d.next=b.next,b.next=d),g.interleaved=d,Cs(a,h)}function bd(a,d,h){if(d=d.updateQueue,d!==null&&(d=d.shared,(h&4194240)!==0)){var g=d.lanes;g&=a.pendingLanes,h|=g,d.lanes=h,mh(a,h)}}function Oy(a,d){var h=a.updateQueue,g=a.alternate;if(g!==null&&(g=g.updateQueue,h===g)){var b=null,N=null;if(h=h.firstBaseUpdate,h!==null){do{var S={eventTime:h.eventTime,lane:h.lane,tag:h.tag,payload:h.payload,callback:h.callback,next:null};N===null?b=N=S:N=N.next=S,h=h.next}while(h!==null);N===null?b=N=d:N=N.next=d}else b=N=d;h={baseState:g.baseState,firstBaseUpdate:b,lastBaseUpdate:N,shared:g.shared,effects:g.effects},a.updateQueue=h;return}a=h.lastBaseUpdate,a===null?h.firstBaseUpdate=d:a.next=d,h.lastBaseUpdate=d}function wd(a,d,h,g){var b=a.updateQueue;ci=!1;var N=b.firstBaseUpdate,S=b.lastBaseUpdate,R=b.shared.pending;if(R!==null){b.shared.pending=null;var L=R,Y=L.next;L.next=null,S===null?N=Y:S.next=Y,S=L;var ue=a.alternate;ue!==null&&(ue=ue.updateQueue,R=ue.lastBaseUpdate,R!==S&&(R===null?ue.firstBaseUpdate=Y:R.next=Y,ue.lastBaseUpdate=L))}if(N!==null){var he=b.baseState;S=0,ue=Y=L=null,R=N;do{var de=R.lane,Te=R.eventTime;if((g&de)===de){ue!==null&&(ue=ue.next={eventTime:Te,lane:0,tag:R.tag,payload:R.payload,callback:R.callback,next:null});e:{var Oe=a,Ie=R;switch(de=d,Te=h,Ie.tag){case 1:if(Oe=Ie.payload,typeof Oe=="function"){he=Oe.call(Te,he,de);break e}he=Oe;break e;case 3:Oe.flags=Oe.flags&-65537|128;case 0:if(Oe=Ie.payload,de=typeof Oe=="function"?Oe.call(Te,he,de):Oe,de==null)break e;he=ce({},he,de);break e;case 2:ci=!0}}R.callback!==null&&R.lane!==0&&(a.flags|=64,de=b.effects,de===null?b.effects=[R]:de.push(R))}else Te={eventTime:Te,lane:de,tag:R.tag,payload:R.payload,callback:R.callback,next:null},ue===null?(Y=ue=Te,L=he):ue=ue.next=Te,S|=de;if(R=R.next,R===null){if(R=b.shared.pending,R===null)break;de=R,R=de.next,de.next=null,b.lastBaseUpdate=de,b.shared.pending=null}}while(!0);if(ue===null&&(L=he),b.baseState=L,b.firstBaseUpdate=Y,b.lastBaseUpdate=ue,d=b.shared.interleaved,d!==null){b=d;do S|=b.lane,b=b.next;while(b!==d)}else N===null&&(b.shared.lanes=0);ro|=S,a.lanes=S,a.memoizedState=he}}function _y(a,d,h){if(a=d.effects,d.effects=null,a!==null)for(d=0;d<a.length;d++){var g=a[d],b=g.callback;if(b!==null){if(g.callback=null,g=h,typeof b!="function")throw Error(n(191,b));b.call(g)}}}var bl={},ns=oi(bl),wl=oi(bl),kl=oi(bl);function to(a){if(a===bl)throw Error(n(174));return a}function np(a,d){switch(gt(kl,d),gt(wl,a),gt(ns,bl),a=d.nodeType,a){case 9:case 11:d=(d=d.documentElement)?d.namespaceURI:Q(null,"");break;default:a=a===8?d.parentNode:d,d=a.namespaceURI||null,a=a.tagName,d=Q(d,a)}Nt(ns),gt(ns,d)}function la(){Nt(ns),Nt(wl),Nt(kl)}function Py(a){to(kl.current);var d=to(ns.current),h=Q(d,a.type);d!==h&&(gt(wl,a),gt(ns,h))}function rp(a){wl.current===a&&(Nt(ns),Nt(wl))}var Mt=oi(0);function kd(a){for(var d=a;d!==null;){if(d.tag===13){var h=d.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||h.data==="$!"))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===a)break;for(;d.sibling===null;){if(d.return===null||d.return===a)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var sp=[];function ip(){for(var a=0;a<sp.length;a++)sp[a]._workInProgressVersionPrimary=null;sp.length=0}var Nd=A.ReactCurrentDispatcher,op=A.ReactCurrentBatchConfig,no=0,Rt=null,tn=null,ln=null,jd=!1,Nl=!1,jl=0,sE=0;function jn(){throw Error(n(321))}function ap(a,d){if(d===null)return!1;for(var h=0;h<d.length&&h<a.length;h++)if(!Lr(a[h],d[h]))return!1;return!0}function lp(a,d,h,g,b,N){if(no=N,Rt=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,Nd.current=a===null||a.memoizedState===null?lE:cE,a=h(g,b),Nl){N=0;do{if(Nl=!1,jl=0,25<=N)throw Error(n(301));N+=1,ln=tn=null,d.updateQueue=null,Nd.current=dE,a=h(g,b)}while(Nl)}if(Nd.current=Ed,d=tn!==null&&tn.next!==null,no=0,ln=tn=Rt=null,jd=!1,d)throw Error(n(300));return a}function cp(){var a=jl!==0;return jl=0,a}function rs(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ln===null?Rt.memoizedState=ln=a:ln=ln.next=a,ln}function Nr(){if(tn===null){var a=Rt.alternate;a=a!==null?a.memoizedState:null}else a=tn.next;var d=ln===null?Rt.memoizedState:ln.next;if(d!==null)ln=d,tn=a;else{if(a===null)throw Error(n(310));tn=a,a={memoizedState:tn.memoizedState,baseState:tn.baseState,baseQueue:tn.baseQueue,queue:tn.queue,next:null},ln===null?Rt.memoizedState=ln=a:ln=ln.next=a}return ln}function Sl(a,d){return typeof d=="function"?d(a):d}function dp(a){var d=Nr(),h=d.queue;if(h===null)throw Error(n(311));h.lastRenderedReducer=a;var g=tn,b=g.baseQueue,N=h.pending;if(N!==null){if(b!==null){var S=b.next;b.next=N.next,N.next=S}g.baseQueue=b=N,h.pending=null}if(b!==null){N=b.next,g=g.baseState;var R=S=null,L=null,Y=N;do{var ue=Y.lane;if((no&ue)===ue)L!==null&&(L=L.next={lane:0,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),g=Y.hasEagerState?Y.eagerState:a(g,Y.action);else{var he={lane:ue,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null};L===null?(R=L=he,S=g):L=L.next=he,Rt.lanes|=ue,ro|=ue}Y=Y.next}while(Y!==null&&Y!==N);L===null?S=g:L.next=R,Lr(g,d.memoizedState)||(Zn=!0),d.memoizedState=g,d.baseState=S,d.baseQueue=L,h.lastRenderedState=g}if(a=h.interleaved,a!==null){b=a;do N=b.lane,Rt.lanes|=N,ro|=N,b=b.next;while(b!==a)}else b===null&&(h.lanes=0);return[d.memoizedState,h.dispatch]}function up(a){var d=Nr(),h=d.queue;if(h===null)throw Error(n(311));h.lastRenderedReducer=a;var g=h.dispatch,b=h.pending,N=d.memoizedState;if(b!==null){h.pending=null;var S=b=b.next;do N=a(N,S.action),S=S.next;while(S!==b);Lr(N,d.memoizedState)||(Zn=!0),d.memoizedState=N,d.baseQueue===null&&(d.baseState=N),h.lastRenderedState=N}return[N,g]}function Iy(){}function Dy(a,d){var h=Rt,g=Nr(),b=d(),N=!Lr(g.memoizedState,b);if(N&&(g.memoizedState=b,Zn=!0),g=g.queue,fp(By.bind(null,h,g,a),[a]),g.getSnapshot!==d||N||ln!==null&&ln.memoizedState.tag&1){if(h.flags|=2048,Cl(9,zy.bind(null,h,g,b,d),void 0,null),cn===null)throw Error(n(349));(no&30)!==0||Ly(h,d,b)}return b}function Ly(a,d,h){a.flags|=16384,a={getSnapshot:d,value:h},d=Rt.updateQueue,d===null?(d={lastEffect:null,stores:null},Rt.updateQueue=d,d.stores=[a]):(h=d.stores,h===null?d.stores=[a]:h.push(a))}function zy(a,d,h,g){d.value=h,d.getSnapshot=g,Fy(d)&&$y(a)}function By(a,d,h){return h(function(){Fy(d)&&$y(a)})}function Fy(a){var d=a.getSnapshot;a=a.value;try{var h=d();return!Lr(a,h)}catch{return!0}}function $y(a){var d=Cs(a,1);d!==null&&Vr(d,a,1,-1)}function Vy(a){var d=rs();return typeof a=="function"&&(a=a()),d.memoizedState=d.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Sl,lastRenderedState:a},d.queue=a,a=a.dispatch=aE.bind(null,Rt,a),[d.memoizedState,a]}function Cl(a,d,h,g){return a={tag:a,create:d,destroy:h,deps:g,next:null},d=Rt.updateQueue,d===null?(d={lastEffect:null,stores:null},Rt.updateQueue=d,d.lastEffect=a.next=a):(h=d.lastEffect,h===null?d.lastEffect=a.next=a:(g=h.next,h.next=a,a.next=g,d.lastEffect=a)),a}function Uy(){return Nr().memoizedState}function Sd(a,d,h,g){var b=rs();Rt.flags|=a,b.memoizedState=Cl(1|d,h,void 0,g===void 0?null:g)}function Cd(a,d,h,g){var b=Nr();g=g===void 0?null:g;var N=void 0;if(tn!==null){var S=tn.memoizedState;if(N=S.destroy,g!==null&&ap(g,S.deps)){b.memoizedState=Cl(d,h,N,g);return}}Rt.flags|=a,b.memoizedState=Cl(1|d,h,N,g)}function Hy(a,d){return Sd(8390656,8,a,d)}function fp(a,d){return Cd(2048,8,a,d)}function Wy(a,d){return Cd(4,2,a,d)}function qy(a,d){return Cd(4,4,a,d)}function Ky(a,d){if(typeof d=="function")return a=a(),d(a),function(){d(null)};if(d!=null)return a=a(),d.current=a,function(){d.current=null}}function Gy(a,d,h){return h=h!=null?h.concat([a]):null,Cd(4,4,Ky.bind(null,d,a),h)}function hp(){}function Jy(a,d){var h=Nr();d=d===void 0?null:d;var g=h.memoizedState;return g!==null&&d!==null&&ap(d,g[1])?g[0]:(h.memoizedState=[a,d],a)}function Zy(a,d){var h=Nr();d=d===void 0?null:d;var g=h.memoizedState;return g!==null&&d!==null&&ap(d,g[1])?g[0]:(a=a(),h.memoizedState=[a,d],a)}function Qy(a,d,h){return(no&21)===0?(a.baseState&&(a.baseState=!1,Zn=!0),a.memoizedState=h):(Lr(h,d)||(h=Ex(),Rt.lanes|=h,ro|=h,a.baseState=!0),d)}function iE(a,d){var h=ut;ut=h!==0&&4>h?h:4,a(!0);var g=op.transition;op.transition={};try{a(!1),d()}finally{ut=h,op.transition=g}}function Yy(){return Nr().memoizedState}function oE(a,d,h){var g=pi(a);if(h={lane:g,action:h,hasEagerState:!1,eagerState:null,next:null},Xy(a))ev(d,h);else if(h=My(a,d,h,g),h!==null){var b=Bn();Vr(h,a,g,b),tv(h,d,g)}}function aE(a,d,h){var g=pi(a),b={lane:g,action:h,hasEagerState:!1,eagerState:null,next:null};if(Xy(a))ev(d,b);else{var N=a.alternate;if(a.lanes===0&&(N===null||N.lanes===0)&&(N=d.lastRenderedReducer,N!==null))try{var S=d.lastRenderedState,R=N(S,h);if(b.hasEagerState=!0,b.eagerState=R,Lr(R,S)){var L=d.interleaved;L===null?(b.next=b,ep(d)):(b.next=L.next,L.next=b),d.interleaved=b;return}}catch{}finally{}h=My(a,d,b,g),h!==null&&(b=Bn(),Vr(h,a,g,b),tv(h,d,g))}}function Xy(a){var d=a.alternate;return a===Rt||d!==null&&d===Rt}function ev(a,d){Nl=jd=!0;var h=a.pending;h===null?d.next=d:(d.next=h.next,h.next=d),a.pending=d}function tv(a,d,h){if((h&4194240)!==0){var g=d.lanes;g&=a.pendingLanes,h|=g,d.lanes=h,mh(a,h)}}var Ed={readContext:kr,useCallback:jn,useContext:jn,useEffect:jn,useImperativeHandle:jn,useInsertionEffect:jn,useLayoutEffect:jn,useMemo:jn,useReducer:jn,useRef:jn,useState:jn,useDebugValue:jn,useDeferredValue:jn,useTransition:jn,useMutableSource:jn,useSyncExternalStore:jn,useId:jn,unstable_isNewReconciler:!1},lE={readContext:kr,useCallback:function(a,d){return rs().memoizedState=[a,d===void 0?null:d],a},useContext:kr,useEffect:Hy,useImperativeHandle:function(a,d,h){return h=h!=null?h.concat([a]):null,Sd(4194308,4,Ky.bind(null,d,a),h)},useLayoutEffect:function(a,d){return Sd(4194308,4,a,d)},useInsertionEffect:function(a,d){return Sd(4,2,a,d)},useMemo:function(a,d){var h=rs();return d=d===void 0?null:d,a=a(),h.memoizedState=[a,d],a},useReducer:function(a,d,h){var g=rs();return d=h!==void 0?h(d):d,g.memoizedState=g.baseState=d,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:d},g.queue=a,a=a.dispatch=oE.bind(null,Rt,a),[g.memoizedState,a]},useRef:function(a){var d=rs();return a={current:a},d.memoizedState=a},useState:Vy,useDebugValue:hp,useDeferredValue:function(a){return rs().memoizedState=a},useTransition:function(){var a=Vy(!1),d=a[0];return a=iE.bind(null,a[1]),rs().memoizedState=a,[d,a]},useMutableSource:function(){},useSyncExternalStore:function(a,d,h){var g=Rt,b=rs();if(Tt){if(h===void 0)throw Error(n(407));h=h()}else{if(h=d(),cn===null)throw Error(n(349));(no&30)!==0||Ly(g,d,h)}b.memoizedState=h;var N={value:h,getSnapshot:d};return b.queue=N,Hy(By.bind(null,g,N,a),[a]),g.flags|=2048,Cl(9,zy.bind(null,g,N,h,d),void 0,null),h},useId:function(){var a=rs(),d=cn.identifierPrefix;if(Tt){var h=Ss,g=js;h=(g&~(1<<32-Dr(g)-1)).toString(32)+h,d=":"+d+"R"+h,h=jl++,0<h&&(d+="H"+h.toString(32)),d+=":"}else h=sE++,d=":"+d+"r"+h.toString(32)+":";return a.memoizedState=d},unstable_isNewReconciler:!1},cE={readContext:kr,useCallback:Jy,useContext:kr,useEffect:fp,useImperativeHandle:Gy,useInsertionEffect:Wy,useLayoutEffect:qy,useMemo:Zy,useReducer:dp,useRef:Uy,useState:function(){return dp(Sl)},useDebugValue:hp,useDeferredValue:function(a){var d=Nr();return Qy(d,tn.memoizedState,a)},useTransition:function(){var a=dp(Sl)[0],d=Nr().memoizedState;return[a,d]},useMutableSource:Iy,useSyncExternalStore:Dy,useId:Yy,unstable_isNewReconciler:!1},dE={readContext:kr,useCallback:Jy,useContext:kr,useEffect:fp,useImperativeHandle:Gy,useInsertionEffect:Wy,useLayoutEffect:qy,useMemo:Zy,useReducer:up,useRef:Uy,useState:function(){return up(Sl)},useDebugValue:hp,useDeferredValue:function(a){var d=Nr();return tn===null?d.memoizedState=a:Qy(d,tn.memoizedState,a)},useTransition:function(){var a=up(Sl)[0],d=Nr().memoizedState;return[a,d]},useMutableSource:Iy,useSyncExternalStore:Dy,useId:Yy,unstable_isNewReconciler:!1};function Br(a,d){if(a&&a.defaultProps){d=ce({},d),a=a.defaultProps;for(var h in a)d[h]===void 0&&(d[h]=a[h]);return d}return d}function pp(a,d,h,g){d=a.memoizedState,h=h(g,d),h=h==null?d:ce({},d,h),a.memoizedState=h,a.lanes===0&&(a.updateQueue.baseState=h)}var Td={isMounted:function(a){return(a=a._reactInternals)?Ji(a)===a:!1},enqueueSetState:function(a,d,h){a=a._reactInternals;var g=Bn(),b=pi(a),N=Es(g,b);N.payload=d,h!=null&&(N.callback=h),d=di(a,N,b),d!==null&&(Vr(d,a,b,g),bd(d,a,b))},enqueueReplaceState:function(a,d,h){a=a._reactInternals;var g=Bn(),b=pi(a),N=Es(g,b);N.tag=1,N.payload=d,h!=null&&(N.callback=h),d=di(a,N,b),d!==null&&(Vr(d,a,b,g),bd(d,a,b))},enqueueForceUpdate:function(a,d){a=a._reactInternals;var h=Bn(),g=pi(a),b=Es(h,g);b.tag=2,d!=null&&(b.callback=d),d=di(a,b,g),d!==null&&(Vr(d,a,g,h),bd(d,a,g))}};function nv(a,d,h,g,b,N,S){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(g,N,S):d.prototype&&d.prototype.isPureReactComponent?!fl(h,g)||!fl(b,N):!0}function rv(a,d,h){var g=!1,b=ai,N=d.contextType;return typeof N=="object"&&N!==null?N=kr(N):(b=Jn(d)?Qi:Nn.current,g=d.contextTypes,N=(g=g!=null)?ta(a,b):ai),d=new d(h,N),a.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Td,a.stateNode=d,d._reactInternals=a,g&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=b,a.__reactInternalMemoizedMaskedChildContext=N),d}function sv(a,d,h,g){a=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(h,g),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(h,g),d.state!==a&&Td.enqueueReplaceState(d,d.state,null)}function mp(a,d,h,g){var b=a.stateNode;b.props=h,b.state=a.memoizedState,b.refs={},tp(a);var N=d.contextType;typeof N=="object"&&N!==null?b.context=kr(N):(N=Jn(d)?Qi:Nn.current,b.context=ta(a,N)),b.state=a.memoizedState,N=d.getDerivedStateFromProps,typeof N=="function"&&(pp(a,d,N,h),b.state=a.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(d=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),d!==b.state&&Td.enqueueReplaceState(b,b.state,null),wd(a,h,b,g),b.state=a.memoizedState),typeof b.componentDidMount=="function"&&(a.flags|=4194308)}function ca(a,d){try{var h="",g=d;do h+=Ue(g),g=g.return;while(g);var b=h}catch(N){b=`
Error generating stack: `+N.message+`
`+N.stack}return{value:a,source:d,stack:b,digest:null}}function gp(a,d,h){return{value:a,source:null,stack:h??null,digest:d??null}}function xp(a,d){try{console.error(d.value)}catch(h){setTimeout(function(){throw h})}}var uE=typeof WeakMap=="function"?WeakMap:Map;function iv(a,d,h){h=Es(-1,h),h.tag=3,h.payload={element:null};var g=d.value;return h.callback=function(){Id||(Id=!0,Op=g),xp(a,d)},h}function ov(a,d,h){h=Es(-1,h),h.tag=3;var g=a.type.getDerivedStateFromError;if(typeof g=="function"){var b=d.value;h.payload=function(){return g(b)},h.callback=function(){xp(a,d)}}var N=a.stateNode;return N!==null&&typeof N.componentDidCatch=="function"&&(h.callback=function(){xp(a,d),typeof g!="function"&&(fi===null?fi=new Set([this]):fi.add(this));var S=d.stack;this.componentDidCatch(d.value,{componentStack:S!==null?S:""})}),h}function av(a,d,h){var g=a.pingCache;if(g===null){g=a.pingCache=new uE;var b=new Set;g.set(d,b)}else b=g.get(d),b===void 0&&(b=new Set,g.set(d,b));b.has(h)||(b.add(h),a=SE.bind(null,a,d,h),d.then(a,a))}function lv(a){do{var d;if((d=a.tag===13)&&(d=a.memoizedState,d=d!==null?d.dehydrated!==null:!0),d)return a;a=a.return}while(a!==null);return null}function cv(a,d,h,g,b){return(a.mode&1)===0?(a===d?a.flags|=65536:(a.flags|=128,h.flags|=131072,h.flags&=-52805,h.tag===1&&(h.alternate===null?h.tag=17:(d=Es(-1,1),d.tag=2,di(h,d,1))),h.lanes|=1),a):(a.flags|=65536,a.lanes=b,a)}var fE=A.ReactCurrentOwner,Zn=!1;function zn(a,d,h,g){d.child=a===null?Ay(d,null,h,g):ia(d,a.child,h,g)}function dv(a,d,h,g,b){h=h.render;var N=d.ref;return aa(d,b),g=lp(a,d,h,g,N,b),h=cp(),a!==null&&!Zn?(d.updateQueue=a.updateQueue,d.flags&=-2053,a.lanes&=~b,Ts(a,d,b)):(Tt&&h&&Wh(d),d.flags|=1,zn(a,d,g,b),d.child)}function uv(a,d,h,g,b){if(a===null){var N=h.type;return typeof N=="function"&&!Bp(N)&&N.defaultProps===void 0&&h.compare===null&&h.defaultProps===void 0?(d.tag=15,d.type=N,fv(a,d,N,g,b)):(a=$d(h.type,null,g,d,d.mode,b),a.ref=d.ref,a.return=d,d.child=a)}if(N=a.child,(a.lanes&b)===0){var S=N.memoizedProps;if(h=h.compare,h=h!==null?h:fl,h(S,g)&&a.ref===d.ref)return Ts(a,d,b)}return d.flags|=1,a=gi(N,g),a.ref=d.ref,a.return=d,d.child=a}function fv(a,d,h,g,b){if(a!==null){var N=a.memoizedProps;if(fl(N,g)&&a.ref===d.ref)if(Zn=!1,d.pendingProps=g=N,(a.lanes&b)!==0)(a.flags&131072)!==0&&(Zn=!0);else return d.lanes=a.lanes,Ts(a,d,b)}return yp(a,d,h,g,b)}function hv(a,d,h){var g=d.pendingProps,b=g.children,N=a!==null?a.memoizedState:null;if(g.mode==="hidden")if((d.mode&1)===0)d.memoizedState={baseLanes:0,cachePool:null,transitions:null},gt(ua,cr),cr|=h;else{if((h&1073741824)===0)return a=N!==null?N.baseLanes|h:h,d.lanes=d.childLanes=1073741824,d.memoizedState={baseLanes:a,cachePool:null,transitions:null},d.updateQueue=null,gt(ua,cr),cr|=a,null;d.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=N!==null?N.baseLanes:h,gt(ua,cr),cr|=g}else N!==null?(g=N.baseLanes|h,d.memoizedState=null):g=h,gt(ua,cr),cr|=g;return zn(a,d,b,h),d.child}function pv(a,d){var h=d.ref;(a===null&&h!==null||a!==null&&a.ref!==h)&&(d.flags|=512,d.flags|=2097152)}function yp(a,d,h,g,b){var N=Jn(h)?Qi:Nn.current;return N=ta(d,N),aa(d,b),h=lp(a,d,h,g,N,b),g=cp(),a!==null&&!Zn?(d.updateQueue=a.updateQueue,d.flags&=-2053,a.lanes&=~b,Ts(a,d,b)):(Tt&&g&&Wh(d),d.flags|=1,zn(a,d,h,b),d.child)}function mv(a,d,h,g,b){if(Jn(h)){var N=!0;fd(d)}else N=!1;if(aa(d,b),d.stateNode===null)Md(a,d),rv(d,h,g),mp(d,h,g,b),g=!0;else if(a===null){var S=d.stateNode,R=d.memoizedProps;S.props=R;var L=S.context,Y=h.contextType;typeof Y=="object"&&Y!==null?Y=kr(Y):(Y=Jn(h)?Qi:Nn.current,Y=ta(d,Y));var ue=h.getDerivedStateFromProps,he=typeof ue=="function"||typeof S.getSnapshotBeforeUpdate=="function";he||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(R!==g||L!==Y)&&sv(d,S,g,Y),ci=!1;var de=d.memoizedState;S.state=de,wd(d,g,S,b),L=d.memoizedState,R!==g||de!==L||Gn.current||ci?(typeof ue=="function"&&(pp(d,h,ue,g),L=d.memoizedState),(R=ci||nv(d,h,R,g,de,L,Y))?(he||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(d.flags|=4194308)):(typeof S.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=g,d.memoizedState=L),S.props=g,S.state=L,S.context=Y,g=R):(typeof S.componentDidMount=="function"&&(d.flags|=4194308),g=!1)}else{S=d.stateNode,Ry(a,d),R=d.memoizedProps,Y=d.type===d.elementType?R:Br(d.type,R),S.props=Y,he=d.pendingProps,de=S.context,L=h.contextType,typeof L=="object"&&L!==null?L=kr(L):(L=Jn(h)?Qi:Nn.current,L=ta(d,L));var Te=h.getDerivedStateFromProps;(ue=typeof Te=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(R!==he||de!==L)&&sv(d,S,g,L),ci=!1,de=d.memoizedState,S.state=de,wd(d,g,S,b);var Oe=d.memoizedState;R!==he||de!==Oe||Gn.current||ci?(typeof Te=="function"&&(pp(d,h,Te,g),Oe=d.memoizedState),(Y=ci||nv(d,h,Y,g,de,Oe,L)||!1)?(ue||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(g,Oe,L),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(g,Oe,L)),typeof S.componentDidUpdate=="function"&&(d.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof S.componentDidUpdate!="function"||R===a.memoizedProps&&de===a.memoizedState||(d.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||R===a.memoizedProps&&de===a.memoizedState||(d.flags|=1024),d.memoizedProps=g,d.memoizedState=Oe),S.props=g,S.state=Oe,S.context=L,g=Y):(typeof S.componentDidUpdate!="function"||R===a.memoizedProps&&de===a.memoizedState||(d.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||R===a.memoizedProps&&de===a.memoizedState||(d.flags|=1024),g=!1)}return vp(a,d,h,g,N,b)}function vp(a,d,h,g,b,N){pv(a,d);var S=(d.flags&128)!==0;if(!g&&!S)return b&&by(d,h,!1),Ts(a,d,N);g=d.stateNode,fE.current=d;var R=S&&typeof h.getDerivedStateFromError!="function"?null:g.render();return d.flags|=1,a!==null&&S?(d.child=ia(d,a.child,null,N),d.child=ia(d,null,R,N)):zn(a,d,R,N),d.memoizedState=g.state,b&&by(d,h,!0),d.child}function gv(a){var d=a.stateNode;d.pendingContext?yy(a,d.pendingContext,d.pendingContext!==d.context):d.context&&yy(a,d.context,!1),np(a,d.containerInfo)}function xv(a,d,h,g,b){return sa(),Jh(b),d.flags|=256,zn(a,d,h,g),d.child}var bp={dehydrated:null,treeContext:null,retryLane:0};function wp(a){return{baseLanes:a,cachePool:null,transitions:null}}function yv(a,d,h){var g=d.pendingProps,b=Mt.current,N=!1,S=(d.flags&128)!==0,R;if((R=S)||(R=a!==null&&a.memoizedState===null?!1:(b&2)!==0),R?(N=!0,d.flags&=-129):(a===null||a.memoizedState!==null)&&(b|=1),gt(Mt,b&1),a===null)return Gh(d),a=d.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?((d.mode&1)===0?d.lanes=1:a.data==="$!"?d.lanes=8:d.lanes=1073741824,null):(S=g.children,a=g.fallback,N?(g=d.mode,N=d.child,S={mode:"hidden",children:S},(g&1)===0&&N!==null?(N.childLanes=0,N.pendingProps=S):N=Vd(S,g,0,null),a=ao(a,g,h,null),N.return=d,a.return=d,N.sibling=a,d.child=N,d.child.memoizedState=wp(h),d.memoizedState=bp,a):kp(d,S));if(b=a.memoizedState,b!==null&&(R=b.dehydrated,R!==null))return hE(a,d,S,g,R,b,h);if(N){N=g.fallback,S=d.mode,b=a.child,R=b.sibling;var L={mode:"hidden",children:g.children};return(S&1)===0&&d.child!==b?(g=d.child,g.childLanes=0,g.pendingProps=L,d.deletions=null):(g=gi(b,L),g.subtreeFlags=b.subtreeFlags&14680064),R!==null?N=gi(R,N):(N=ao(N,S,h,null),N.flags|=2),N.return=d,g.return=d,g.sibling=N,d.child=g,g=N,N=d.child,S=a.child.memoizedState,S=S===null?wp(h):{baseLanes:S.baseLanes|h,cachePool:null,transitions:S.transitions},N.memoizedState=S,N.childLanes=a.childLanes&~h,d.memoizedState=bp,g}return N=a.child,a=N.sibling,g=gi(N,{mode:"visible",children:g.children}),(d.mode&1)===0&&(g.lanes=h),g.return=d,g.sibling=null,a!==null&&(h=d.deletions,h===null?(d.deletions=[a],d.flags|=16):h.push(a)),d.child=g,d.memoizedState=null,g}function kp(a,d){return d=Vd({mode:"visible",children:d},a.mode,0,null),d.return=a,a.child=d}function Ad(a,d,h,g){return g!==null&&Jh(g),ia(d,a.child,null,h),a=kp(d,d.pendingProps.children),a.flags|=2,d.memoizedState=null,a}function hE(a,d,h,g,b,N,S){if(h)return d.flags&256?(d.flags&=-257,g=gp(Error(n(422))),Ad(a,d,S,g)):d.memoizedState!==null?(d.child=a.child,d.flags|=128,null):(N=g.fallback,b=d.mode,g=Vd({mode:"visible",children:g.children},b,0,null),N=ao(N,b,S,null),N.flags|=2,g.return=d,N.return=d,g.sibling=N,d.child=g,(d.mode&1)!==0&&ia(d,a.child,null,S),d.child.memoizedState=wp(S),d.memoizedState=bp,N);if((d.mode&1)===0)return Ad(a,d,S,null);if(b.data==="$!"){if(g=b.nextSibling&&b.nextSibling.dataset,g)var R=g.dgst;return g=R,N=Error(n(419)),g=gp(N,g,void 0),Ad(a,d,S,g)}if(R=(S&a.childLanes)!==0,Zn||R){if(g=cn,g!==null){switch(S&-S){case 4:b=2;break;case 16:b=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:b=32;break;case 536870912:b=268435456;break;default:b=0}b=(b&(g.suspendedLanes|S))!==0?0:b,b!==0&&b!==N.retryLane&&(N.retryLane=b,Cs(a,b),Vr(g,a,b,-1))}return zp(),g=gp(Error(n(421))),Ad(a,d,S,g)}return b.data==="$?"?(d.flags|=128,d.child=a.child,d=CE.bind(null,a),b._reactRetry=d,null):(a=N.treeContext,lr=ii(b.nextSibling),ar=d,Tt=!0,zr=null,a!==null&&(br[wr++]=js,br[wr++]=Ss,br[wr++]=Yi,js=a.id,Ss=a.overflow,Yi=d),d=kp(d,g.children),d.flags|=4096,d)}function vv(a,d,h){a.lanes|=d;var g=a.alternate;g!==null&&(g.lanes|=d),Xh(a.return,d,h)}function Np(a,d,h,g,b){var N=a.memoizedState;N===null?a.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:g,tail:h,tailMode:b}:(N.isBackwards=d,N.rendering=null,N.renderingStartTime=0,N.last=g,N.tail=h,N.tailMode=b)}function bv(a,d,h){var g=d.pendingProps,b=g.revealOrder,N=g.tail;if(zn(a,d,g.children,h),g=Mt.current,(g&2)!==0)g=g&1|2,d.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=d.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&vv(a,h,d);else if(a.tag===19)vv(a,h,d);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===d)break e;for(;a.sibling===null;){if(a.return===null||a.return===d)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}g&=1}if(gt(Mt,g),(d.mode&1)===0)d.memoizedState=null;else switch(b){case"forwards":for(h=d.child,b=null;h!==null;)a=h.alternate,a!==null&&kd(a)===null&&(b=h),h=h.sibling;h=b,h===null?(b=d.child,d.child=null):(b=h.sibling,h.sibling=null),Np(d,!1,b,h,N);break;case"backwards":for(h=null,b=d.child,d.child=null;b!==null;){if(a=b.alternate,a!==null&&kd(a)===null){d.child=b;break}a=b.sibling,b.sibling=h,h=b,b=a}Np(d,!0,h,null,N);break;case"together":Np(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function Md(a,d){(d.mode&1)===0&&a!==null&&(a.alternate=null,d.alternate=null,d.flags|=2)}function Ts(a,d,h){if(a!==null&&(d.dependencies=a.dependencies),ro|=d.lanes,(h&d.childLanes)===0)return null;if(a!==null&&d.child!==a.child)throw Error(n(153));if(d.child!==null){for(a=d.child,h=gi(a,a.pendingProps),d.child=h,h.return=d;a.sibling!==null;)a=a.sibling,h=h.sibling=gi(a,a.pendingProps),h.return=d;h.sibling=null}return d.child}function pE(a,d,h){switch(d.tag){case 3:gv(d),sa();break;case 5:Py(d);break;case 1:Jn(d.type)&&fd(d);break;case 4:np(d,d.stateNode.containerInfo);break;case 10:var g=d.type._context,b=d.memoizedProps.value;gt(yd,g._currentValue),g._currentValue=b;break;case 13:if(g=d.memoizedState,g!==null)return g.dehydrated!==null?(gt(Mt,Mt.current&1),d.flags|=128,null):(h&d.child.childLanes)!==0?yv(a,d,h):(gt(Mt,Mt.current&1),a=Ts(a,d,h),a!==null?a.sibling:null);gt(Mt,Mt.current&1);break;case 19:if(g=(h&d.childLanes)!==0,(a.flags&128)!==0){if(g)return bv(a,d,h);d.flags|=128}if(b=d.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),gt(Mt,Mt.current),g)break;return null;case 22:case 23:return d.lanes=0,hv(a,d,h)}return Ts(a,d,h)}var wv,jp,kv,Nv;wv=function(a,d){for(var h=d.child;h!==null;){if(h.tag===5||h.tag===6)a.appendChild(h.stateNode);else if(h.tag!==4&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===d)break;for(;h.sibling===null;){if(h.return===null||h.return===d)return;h=h.return}h.sibling.return=h.return,h=h.sibling}},jp=function(){},kv=function(a,d,h,g){var b=a.memoizedProps;if(b!==g){a=d.stateNode,to(ns.current);var N=null;switch(h){case"input":b=xr(a,b),g=xr(a,g),N=[];break;case"select":b=ce({},b,{value:void 0}),g=ce({},g,{value:void 0}),N=[];break;case"textarea":b=U(a,b),g=U(a,g),N=[];break;default:typeof b.onClick!="function"&&typeof g.onClick=="function"&&(a.onclick=cd)}Kn(h,g);var S;h=null;for(Y in b)if(!g.hasOwnProperty(Y)&&b.hasOwnProperty(Y)&&b[Y]!=null)if(Y==="style"){var R=b[Y];for(S in R)R.hasOwnProperty(S)&&(h||(h={}),h[S]="")}else Y!=="dangerouslySetInnerHTML"&&Y!=="children"&&Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&Y!=="autoFocus"&&(s.hasOwnProperty(Y)?N||(N=[]):(N=N||[]).push(Y,null));for(Y in g){var L=g[Y];if(R=b!=null?b[Y]:void 0,g.hasOwnProperty(Y)&&L!==R&&(L!=null||R!=null))if(Y==="style")if(R){for(S in R)!R.hasOwnProperty(S)||L&&L.hasOwnProperty(S)||(h||(h={}),h[S]="");for(S in L)L.hasOwnProperty(S)&&R[S]!==L[S]&&(h||(h={}),h[S]=L[S])}else h||(N||(N=[]),N.push(Y,h)),h=L;else Y==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,R=R?R.__html:void 0,L!=null&&R!==L&&(N=N||[]).push(Y,L)):Y==="children"?typeof L!="string"&&typeof L!="number"||(N=N||[]).push(Y,""+L):Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&(s.hasOwnProperty(Y)?(L!=null&&Y==="onScroll"&&kt("scroll",a),N||R===L||(N=[])):(N=N||[]).push(Y,L))}h&&(N=N||[]).push("style",h);var Y=N;(d.updateQueue=Y)&&(d.flags|=4)}},Nv=function(a,d,h,g){h!==g&&(d.flags|=4)};function El(a,d){if(!Tt)switch(a.tailMode){case"hidden":d=a.tail;for(var h=null;d!==null;)d.alternate!==null&&(h=d),d=d.sibling;h===null?a.tail=null:h.sibling=null;break;case"collapsed":h=a.tail;for(var g=null;h!==null;)h.alternate!==null&&(g=h),h=h.sibling;g===null?d||a.tail===null?a.tail=null:a.tail.sibling=null:g.sibling=null}}function Sn(a){var d=a.alternate!==null&&a.alternate.child===a.child,h=0,g=0;if(d)for(var b=a.child;b!==null;)h|=b.lanes|b.childLanes,g|=b.subtreeFlags&14680064,g|=b.flags&14680064,b.return=a,b=b.sibling;else for(b=a.child;b!==null;)h|=b.lanes|b.childLanes,g|=b.subtreeFlags,g|=b.flags,b.return=a,b=b.sibling;return a.subtreeFlags|=g,a.childLanes=h,d}function mE(a,d,h){var g=d.pendingProps;switch(qh(d),d.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Sn(d),null;case 1:return Jn(d.type)&&ud(),Sn(d),null;case 3:return g=d.stateNode,la(),Nt(Gn),Nt(Nn),ip(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(a===null||a.child===null)&&(gd(d)?d.flags|=4:a===null||a.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,zr!==null&&(Ip(zr),zr=null))),jp(a,d),Sn(d),null;case 5:rp(d);var b=to(kl.current);if(h=d.type,a!==null&&d.stateNode!=null)kv(a,d,h,g,b),a.ref!==d.ref&&(d.flags|=512,d.flags|=2097152);else{if(!g){if(d.stateNode===null)throw Error(n(166));return Sn(d),null}if(a=to(ns.current),gd(d)){g=d.stateNode,h=d.type;var N=d.memoizedProps;switch(g[ts]=d,g[xl]=N,a=(d.mode&1)!==0,h){case"dialog":kt("cancel",g),kt("close",g);break;case"iframe":case"object":case"embed":kt("load",g);break;case"video":case"audio":for(b=0;b<pl.length;b++)kt(pl[b],g);break;case"source":kt("error",g);break;case"img":case"image":case"link":kt("error",g),kt("load",g);break;case"details":kt("toggle",g);break;case"input":yr(g,N),kt("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!N.multiple},kt("invalid",g);break;case"textarea":re(g,N),kt("invalid",g)}Kn(h,N),b=null;for(var S in N)if(N.hasOwnProperty(S)){var R=N[S];S==="children"?typeof R=="string"?g.textContent!==R&&(N.suppressHydrationWarning!==!0&&ld(g.textContent,R,a),b=["children",R]):typeof R=="number"&&g.textContent!==""+R&&(N.suppressHydrationWarning!==!0&&ld(g.textContent,R,a),b=["children",""+R]):s.hasOwnProperty(S)&&R!=null&&S==="onScroll"&&kt("scroll",g)}switch(h){case"input":Ye(g),an(g,N,!0);break;case"textarea":Ye(g),B(g);break;case"select":case"option":break;default:typeof N.onClick=="function"&&(g.onclick=cd)}g=b,d.updateQueue=g,g!==null&&(d.flags|=4)}else{S=b.nodeType===9?b:b.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=V(h)),a==="http://www.w3.org/1999/xhtml"?h==="script"?(a=S.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof g.is=="string"?a=S.createElement(h,{is:g.is}):(a=S.createElement(h),h==="select"&&(S=a,g.multiple?S.multiple=!0:g.size&&(S.size=g.size))):a=S.createElementNS(a,h),a[ts]=d,a[xl]=g,wv(a,d,!1,!1),d.stateNode=a;e:{switch(S=ys(h,g),h){case"dialog":kt("cancel",a),kt("close",a),b=g;break;case"iframe":case"object":case"embed":kt("load",a),b=g;break;case"video":case"audio":for(b=0;b<pl.length;b++)kt(pl[b],a);b=g;break;case"source":kt("error",a),b=g;break;case"img":case"image":case"link":kt("error",a),kt("load",a),b=g;break;case"details":kt("toggle",a),b=g;break;case"input":yr(a,g),b=xr(a,g),kt("invalid",a);break;case"option":b=g;break;case"select":a._wrapperState={wasMultiple:!!g.multiple},b=ce({},g,{value:void 0}),kt("invalid",a);break;case"textarea":re(a,g),b=U(a,g),kt("invalid",a);break;default:b=g}Kn(h,b),R=b;for(N in R)if(R.hasOwnProperty(N)){var L=R[N];N==="style"?en(a,L):N==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,L!=null&&Ee(a,L)):N==="children"?typeof L=="string"?(h!=="textarea"||L!=="")&&je(a,L):typeof L=="number"&&je(a,""+L):N!=="suppressContentEditableWarning"&&N!=="suppressHydrationWarning"&&N!=="autoFocus"&&(s.hasOwnProperty(N)?L!=null&&N==="onScroll"&&kt("scroll",a):L!=null&&T(a,N,L,S))}switch(h){case"input":Ye(a),an(a,g,!1);break;case"textarea":Ye(a),B(a);break;case"option":g.value!=null&&a.setAttribute("value",""+Ce(g.value));break;case"select":a.multiple=!!g.multiple,N=g.value,N!=null?_(a,!!g.multiple,N,!1):g.defaultValue!=null&&_(a,!!g.multiple,g.defaultValue,!0);break;default:typeof b.onClick=="function"&&(a.onclick=cd)}switch(h){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(d.flags|=4)}d.ref!==null&&(d.flags|=512,d.flags|=2097152)}return Sn(d),null;case 6:if(a&&d.stateNode!=null)Nv(a,d,a.memoizedProps,g);else{if(typeof g!="string"&&d.stateNode===null)throw Error(n(166));if(h=to(kl.current),to(ns.current),gd(d)){if(g=d.stateNode,h=d.memoizedProps,g[ts]=d,(N=g.nodeValue!==h)&&(a=ar,a!==null))switch(a.tag){case 3:ld(g.nodeValue,h,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&ld(g.nodeValue,h,(a.mode&1)!==0)}N&&(d.flags|=4)}else g=(h.nodeType===9?h:h.ownerDocument).createTextNode(g),g[ts]=d,d.stateNode=g}return Sn(d),null;case 13:if(Nt(Mt),g=d.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(Tt&&lr!==null&&(d.mode&1)!==0&&(d.flags&128)===0)Cy(),sa(),d.flags|=98560,N=!1;else if(N=gd(d),g!==null&&g.dehydrated!==null){if(a===null){if(!N)throw Error(n(318));if(N=d.memoizedState,N=N!==null?N.dehydrated:null,!N)throw Error(n(317));N[ts]=d}else sa(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;Sn(d),N=!1}else zr!==null&&(Ip(zr),zr=null),N=!0;if(!N)return d.flags&65536?d:null}return(d.flags&128)!==0?(d.lanes=h,d):(g=g!==null,g!==(a!==null&&a.memoizedState!==null)&&g&&(d.child.flags|=8192,(d.mode&1)!==0&&(a===null||(Mt.current&1)!==0?nn===0&&(nn=3):zp())),d.updateQueue!==null&&(d.flags|=4),Sn(d),null);case 4:return la(),jp(a,d),a===null&&ml(d.stateNode.containerInfo),Sn(d),null;case 10:return Yh(d.type._context),Sn(d),null;case 17:return Jn(d.type)&&ud(),Sn(d),null;case 19:if(Nt(Mt),N=d.memoizedState,N===null)return Sn(d),null;if(g=(d.flags&128)!==0,S=N.rendering,S===null)if(g)El(N,!1);else{if(nn!==0||a!==null&&(a.flags&128)!==0)for(a=d.child;a!==null;){if(S=kd(a),S!==null){for(d.flags|=128,El(N,!1),g=S.updateQueue,g!==null&&(d.updateQueue=g,d.flags|=4),d.subtreeFlags=0,g=h,h=d.child;h!==null;)N=h,a=g,N.flags&=14680066,S=N.alternate,S===null?(N.childLanes=0,N.lanes=a,N.child=null,N.subtreeFlags=0,N.memoizedProps=null,N.memoizedState=null,N.updateQueue=null,N.dependencies=null,N.stateNode=null):(N.childLanes=S.childLanes,N.lanes=S.lanes,N.child=S.child,N.subtreeFlags=0,N.deletions=null,N.memoizedProps=S.memoizedProps,N.memoizedState=S.memoizedState,N.updateQueue=S.updateQueue,N.type=S.type,a=S.dependencies,N.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),h=h.sibling;return gt(Mt,Mt.current&1|2),d.child}a=a.sibling}N.tail!==null&&Vt()>fa&&(d.flags|=128,g=!0,El(N,!1),d.lanes=4194304)}else{if(!g)if(a=kd(S),a!==null){if(d.flags|=128,g=!0,h=a.updateQueue,h!==null&&(d.updateQueue=h,d.flags|=4),El(N,!0),N.tail===null&&N.tailMode==="hidden"&&!S.alternate&&!Tt)return Sn(d),null}else 2*Vt()-N.renderingStartTime>fa&&h!==1073741824&&(d.flags|=128,g=!0,El(N,!1),d.lanes=4194304);N.isBackwards?(S.sibling=d.child,d.child=S):(h=N.last,h!==null?h.sibling=S:d.child=S,N.last=S)}return N.tail!==null?(d=N.tail,N.rendering=d,N.tail=d.sibling,N.renderingStartTime=Vt(),d.sibling=null,h=Mt.current,gt(Mt,g?h&1|2:h&1),d):(Sn(d),null);case 22:case 23:return Lp(),g=d.memoizedState!==null,a!==null&&a.memoizedState!==null!==g&&(d.flags|=8192),g&&(d.mode&1)!==0?(cr&1073741824)!==0&&(Sn(d),d.subtreeFlags&6&&(d.flags|=8192)):Sn(d),null;case 24:return null;case 25:return null}throw Error(n(156,d.tag))}function gE(a,d){switch(qh(d),d.tag){case 1:return Jn(d.type)&&ud(),a=d.flags,a&65536?(d.flags=a&-65537|128,d):null;case 3:return la(),Nt(Gn),Nt(Nn),ip(),a=d.flags,(a&65536)!==0&&(a&128)===0?(d.flags=a&-65537|128,d):null;case 5:return rp(d),null;case 13:if(Nt(Mt),a=d.memoizedState,a!==null&&a.dehydrated!==null){if(d.alternate===null)throw Error(n(340));sa()}return a=d.flags,a&65536?(d.flags=a&-65537|128,d):null;case 19:return Nt(Mt),null;case 4:return la(),null;case 10:return Yh(d.type._context),null;case 22:case 23:return Lp(),null;case 24:return null;default:return null}}var Rd=!1,Cn=!1,xE=typeof WeakSet=="function"?WeakSet:Set,Me=null;function da(a,d){var h=a.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(g){Pt(a,d,g)}else h.current=null}function Sp(a,d,h){try{h()}catch(g){Pt(a,d,g)}}var jv=!1;function yE(a,d){if(Lh=Qc,a=ny(),Ah(a)){if("selectionStart"in a)var h={start:a.selectionStart,end:a.selectionEnd};else e:{h=(h=a.ownerDocument)&&h.defaultView||window;var g=h.getSelection&&h.getSelection();if(g&&g.rangeCount!==0){h=g.anchorNode;var b=g.anchorOffset,N=g.focusNode;g=g.focusOffset;try{h.nodeType,N.nodeType}catch{h=null;break e}var S=0,R=-1,L=-1,Y=0,ue=0,he=a,de=null;t:for(;;){for(var Te;he!==h||b!==0&&he.nodeType!==3||(R=S+b),he!==N||g!==0&&he.nodeType!==3||(L=S+g),he.nodeType===3&&(S+=he.nodeValue.length),(Te=he.firstChild)!==null;)de=he,he=Te;for(;;){if(he===a)break t;if(de===h&&++Y===b&&(R=S),de===N&&++ue===g&&(L=S),(Te=he.nextSibling)!==null)break;he=de,de=he.parentNode}he=Te}h=R===-1||L===-1?null:{start:R,end:L}}else h=null}h=h||{start:0,end:0}}else h=null;for(zh={focusedElem:a,selectionRange:h},Qc=!1,Me=d;Me!==null;)if(d=Me,a=d.child,(d.subtreeFlags&1028)!==0&&a!==null)a.return=d,Me=a;else for(;Me!==null;){d=Me;try{var Oe=d.alternate;if((d.flags&1024)!==0)switch(d.tag){case 0:case 11:case 15:break;case 1:if(Oe!==null){var Ie=Oe.memoizedProps,Ut=Oe.memoizedState,H=d.stateNode,$=H.getSnapshotBeforeUpdate(d.elementType===d.type?Ie:Br(d.type,Ie),Ut);H.__reactInternalSnapshotBeforeUpdate=$}break;case 3:var K=d.stateNode.containerInfo;K.nodeType===1?K.textContent="":K.nodeType===9&&K.documentElement&&K.removeChild(K.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(ve){Pt(d,d.return,ve)}if(a=d.sibling,a!==null){a.return=d.return,Me=a;break}Me=d.return}return Oe=jv,jv=!1,Oe}function Tl(a,d,h){var g=d.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var b=g=g.next;do{if((b.tag&a)===a){var N=b.destroy;b.destroy=void 0,N!==void 0&&Sp(d,h,N)}b=b.next}while(b!==g)}}function Od(a,d){if(d=d.updateQueue,d=d!==null?d.lastEffect:null,d!==null){var h=d=d.next;do{if((h.tag&a)===a){var g=h.create;h.destroy=g()}h=h.next}while(h!==d)}}function Cp(a){var d=a.ref;if(d!==null){var h=a.stateNode;switch(a.tag){case 5:a=h;break;default:a=h}typeof d=="function"?d(a):d.current=a}}function Sv(a){var d=a.alternate;d!==null&&(a.alternate=null,Sv(d)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(d=a.stateNode,d!==null&&(delete d[ts],delete d[xl],delete d[Vh],delete d[eE],delete d[tE])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function Cv(a){return a.tag===5||a.tag===3||a.tag===4}function Ev(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||Cv(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Ep(a,d,h){var g=a.tag;if(g===5||g===6)a=a.stateNode,d?h.nodeType===8?h.parentNode.insertBefore(a,d):h.insertBefore(a,d):(h.nodeType===8?(d=h.parentNode,d.insertBefore(a,h)):(d=h,d.appendChild(a)),h=h._reactRootContainer,h!=null||d.onclick!==null||(d.onclick=cd));else if(g!==4&&(a=a.child,a!==null))for(Ep(a,d,h),a=a.sibling;a!==null;)Ep(a,d,h),a=a.sibling}function Tp(a,d,h){var g=a.tag;if(g===5||g===6)a=a.stateNode,d?h.insertBefore(a,d):h.appendChild(a);else if(g!==4&&(a=a.child,a!==null))for(Tp(a,d,h),a=a.sibling;a!==null;)Tp(a,d,h),a=a.sibling}var xn=null,Fr=!1;function ui(a,d,h){for(h=h.child;h!==null;)Tv(a,d,h),h=h.sibling}function Tv(a,d,h){if(es&&typeof es.onCommitFiberUnmount=="function")try{es.onCommitFiberUnmount(Wc,h)}catch{}switch(h.tag){case 5:Cn||da(h,d);case 6:var g=xn,b=Fr;xn=null,ui(a,d,h),xn=g,Fr=b,xn!==null&&(Fr?(a=xn,h=h.stateNode,a.nodeType===8?a.parentNode.removeChild(h):a.removeChild(h)):xn.removeChild(h.stateNode));break;case 18:xn!==null&&(Fr?(a=xn,h=h.stateNode,a.nodeType===8?$h(a.parentNode,h):a.nodeType===1&&$h(a,h),ol(a)):$h(xn,h.stateNode));break;case 4:g=xn,b=Fr,xn=h.stateNode.containerInfo,Fr=!0,ui(a,d,h),xn=g,Fr=b;break;case 0:case 11:case 14:case 15:if(!Cn&&(g=h.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){b=g=g.next;do{var N=b,S=N.destroy;N=N.tag,S!==void 0&&((N&2)!==0||(N&4)!==0)&&Sp(h,d,S),b=b.next}while(b!==g)}ui(a,d,h);break;case 1:if(!Cn&&(da(h,d),g=h.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=h.memoizedProps,g.state=h.memoizedState,g.componentWillUnmount()}catch(R){Pt(h,d,R)}ui(a,d,h);break;case 21:ui(a,d,h);break;case 22:h.mode&1?(Cn=(g=Cn)||h.memoizedState!==null,ui(a,d,h),Cn=g):ui(a,d,h);break;default:ui(a,d,h)}}function Av(a){var d=a.updateQueue;if(d!==null){a.updateQueue=null;var h=a.stateNode;h===null&&(h=a.stateNode=new xE),d.forEach(function(g){var b=EE.bind(null,a,g);h.has(g)||(h.add(g),g.then(b,b))})}}function $r(a,d){var h=d.deletions;if(h!==null)for(var g=0;g<h.length;g++){var b=h[g];try{var N=a,S=d,R=S;e:for(;R!==null;){switch(R.tag){case 5:xn=R.stateNode,Fr=!1;break e;case 3:xn=R.stateNode.containerInfo,Fr=!0;break e;case 4:xn=R.stateNode.containerInfo,Fr=!0;break e}R=R.return}if(xn===null)throw Error(n(160));Tv(N,S,b),xn=null,Fr=!1;var L=b.alternate;L!==null&&(L.return=null),b.return=null}catch(Y){Pt(b,d,Y)}}if(d.subtreeFlags&12854)for(d=d.child;d!==null;)Mv(d,a),d=d.sibling}function Mv(a,d){var h=a.alternate,g=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if($r(d,a),ss(a),g&4){try{Tl(3,a,a.return),Od(3,a)}catch(Ie){Pt(a,a.return,Ie)}try{Tl(5,a,a.return)}catch(Ie){Pt(a,a.return,Ie)}}break;case 1:$r(d,a),ss(a),g&512&&h!==null&&da(h,h.return);break;case 5:if($r(d,a),ss(a),g&512&&h!==null&&da(h,h.return),a.flags&32){var b=a.stateNode;try{je(b,"")}catch(Ie){Pt(a,a.return,Ie)}}if(g&4&&(b=a.stateNode,b!=null)){var N=a.memoizedProps,S=h!==null?h.memoizedProps:N,R=a.type,L=a.updateQueue;if(a.updateQueue=null,L!==null)try{R==="input"&&N.type==="radio"&&N.name!=null&&vr(b,N),ys(R,S);var Y=ys(R,N);for(S=0;S<L.length;S+=2){var ue=L[S],he=L[S+1];ue==="style"?en(b,he):ue==="dangerouslySetInnerHTML"?Ee(b,he):ue==="children"?je(b,he):T(b,ue,he,Y)}switch(R){case"input":Wt(b,N);break;case"textarea":I(b,N);break;case"select":var de=b._wrapperState.wasMultiple;b._wrapperState.wasMultiple=!!N.multiple;var Te=N.value;Te!=null?_(b,!!N.multiple,Te,!1):de!==!!N.multiple&&(N.defaultValue!=null?_(b,!!N.multiple,N.defaultValue,!0):_(b,!!N.multiple,N.multiple?[]:"",!1))}b[xl]=N}catch(Ie){Pt(a,a.return,Ie)}}break;case 6:if($r(d,a),ss(a),g&4){if(a.stateNode===null)throw Error(n(162));b=a.stateNode,N=a.memoizedProps;try{b.nodeValue=N}catch(Ie){Pt(a,a.return,Ie)}}break;case 3:if($r(d,a),ss(a),g&4&&h!==null&&h.memoizedState.isDehydrated)try{ol(d.containerInfo)}catch(Ie){Pt(a,a.return,Ie)}break;case 4:$r(d,a),ss(a);break;case 13:$r(d,a),ss(a),b=a.child,b.flags&8192&&(N=b.memoizedState!==null,b.stateNode.isHidden=N,!N||b.alternate!==null&&b.alternate.memoizedState!==null||(Rp=Vt())),g&4&&Av(a);break;case 22:if(ue=h!==null&&h.memoizedState!==null,a.mode&1?(Cn=(Y=Cn)||ue,$r(d,a),Cn=Y):$r(d,a),ss(a),g&8192){if(Y=a.memoizedState!==null,(a.stateNode.isHidden=Y)&&!ue&&(a.mode&1)!==0)for(Me=a,ue=a.child;ue!==null;){for(he=Me=ue;Me!==null;){switch(de=Me,Te=de.child,de.tag){case 0:case 11:case 14:case 15:Tl(4,de,de.return);break;case 1:da(de,de.return);var Oe=de.stateNode;if(typeof Oe.componentWillUnmount=="function"){g=de,h=de.return;try{d=g,Oe.props=d.memoizedProps,Oe.state=d.memoizedState,Oe.componentWillUnmount()}catch(Ie){Pt(g,h,Ie)}}break;case 5:da(de,de.return);break;case 22:if(de.memoizedState!==null){_v(he);continue}}Te!==null?(Te.return=de,Me=Te):_v(he)}ue=ue.sibling}e:for(ue=null,he=a;;){if(he.tag===5){if(ue===null){ue=he;try{b=he.stateNode,Y?(N=b.style,typeof N.setProperty=="function"?N.setProperty("display","none","important"):N.display="none"):(R=he.stateNode,L=he.memoizedProps.style,S=L!=null&&L.hasOwnProperty("display")?L.display:null,R.style.display=qt("display",S))}catch(Ie){Pt(a,a.return,Ie)}}}else if(he.tag===6){if(ue===null)try{he.stateNode.nodeValue=Y?"":he.memoizedProps}catch(Ie){Pt(a,a.return,Ie)}}else if((he.tag!==22&&he.tag!==23||he.memoizedState===null||he===a)&&he.child!==null){he.child.return=he,he=he.child;continue}if(he===a)break e;for(;he.sibling===null;){if(he.return===null||he.return===a)break e;ue===he&&(ue=null),he=he.return}ue===he&&(ue=null),he.sibling.return=he.return,he=he.sibling}}break;case 19:$r(d,a),ss(a),g&4&&Av(a);break;case 21:break;default:$r(d,a),ss(a)}}function ss(a){var d=a.flags;if(d&2){try{e:{for(var h=a.return;h!==null;){if(Cv(h)){var g=h;break e}h=h.return}throw Error(n(160))}switch(g.tag){case 5:var b=g.stateNode;g.flags&32&&(je(b,""),g.flags&=-33);var N=Ev(a);Tp(a,N,b);break;case 3:case 4:var S=g.stateNode.containerInfo,R=Ev(a);Ep(a,R,S);break;default:throw Error(n(161))}}catch(L){Pt(a,a.return,L)}a.flags&=-3}d&4096&&(a.flags&=-4097)}function vE(a,d,h){Me=a,Rv(a)}function Rv(a,d,h){for(var g=(a.mode&1)!==0;Me!==null;){var b=Me,N=b.child;if(b.tag===22&&g){var S=b.memoizedState!==null||Rd;if(!S){var R=b.alternate,L=R!==null&&R.memoizedState!==null||Cn;R=Rd;var Y=Cn;if(Rd=S,(Cn=L)&&!Y)for(Me=b;Me!==null;)S=Me,L=S.child,S.tag===22&&S.memoizedState!==null?Pv(b):L!==null?(L.return=S,Me=L):Pv(b);for(;N!==null;)Me=N,Rv(N),N=N.sibling;Me=b,Rd=R,Cn=Y}Ov(a)}else(b.subtreeFlags&8772)!==0&&N!==null?(N.return=b,Me=N):Ov(a)}}function Ov(a){for(;Me!==null;){var d=Me;if((d.flags&8772)!==0){var h=d.alternate;try{if((d.flags&8772)!==0)switch(d.tag){case 0:case 11:case 15:Cn||Od(5,d);break;case 1:var g=d.stateNode;if(d.flags&4&&!Cn)if(h===null)g.componentDidMount();else{var b=d.elementType===d.type?h.memoizedProps:Br(d.type,h.memoizedProps);g.componentDidUpdate(b,h.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var N=d.updateQueue;N!==null&&_y(d,N,g);break;case 3:var S=d.updateQueue;if(S!==null){if(h=null,d.child!==null)switch(d.child.tag){case 5:h=d.child.stateNode;break;case 1:h=d.child.stateNode}_y(d,S,h)}break;case 5:var R=d.stateNode;if(h===null&&d.flags&4){h=R;var L=d.memoizedProps;switch(d.type){case"button":case"input":case"select":case"textarea":L.autoFocus&&h.focus();break;case"img":L.src&&(h.src=L.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(d.memoizedState===null){var Y=d.alternate;if(Y!==null){var ue=Y.memoizedState;if(ue!==null){var he=ue.dehydrated;he!==null&&ol(he)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Cn||d.flags&512&&Cp(d)}catch(de){Pt(d,d.return,de)}}if(d===a){Me=null;break}if(h=d.sibling,h!==null){h.return=d.return,Me=h;break}Me=d.return}}function _v(a){for(;Me!==null;){var d=Me;if(d===a){Me=null;break}var h=d.sibling;if(h!==null){h.return=d.return,Me=h;break}Me=d.return}}function Pv(a){for(;Me!==null;){var d=Me;try{switch(d.tag){case 0:case 11:case 15:var h=d.return;try{Od(4,d)}catch(L){Pt(d,h,L)}break;case 1:var g=d.stateNode;if(typeof g.componentDidMount=="function"){var b=d.return;try{g.componentDidMount()}catch(L){Pt(d,b,L)}}var N=d.return;try{Cp(d)}catch(L){Pt(d,N,L)}break;case 5:var S=d.return;try{Cp(d)}catch(L){Pt(d,S,L)}}}catch(L){Pt(d,d.return,L)}if(d===a){Me=null;break}var R=d.sibling;if(R!==null){R.return=d.return,Me=R;break}Me=d.return}}var bE=Math.ceil,_d=A.ReactCurrentDispatcher,Ap=A.ReactCurrentOwner,jr=A.ReactCurrentBatchConfig,ot=0,cn=null,Kt=null,yn=0,cr=0,ua=oi(0),nn=0,Al=null,ro=0,Pd=0,Mp=0,Ml=null,Qn=null,Rp=0,fa=1/0,As=null,Id=!1,Op=null,fi=null,Dd=!1,hi=null,Ld=0,Rl=0,_p=null,zd=-1,Bd=0;function Bn(){return(ot&6)!==0?Vt():zd!==-1?zd:zd=Vt()}function pi(a){return(a.mode&1)===0?1:(ot&2)!==0&&yn!==0?yn&-yn:rE.transition!==null?(Bd===0&&(Bd=Ex()),Bd):(a=ut,a!==0||(a=window.event,a=a===void 0?16:Dx(a.type)),a)}function Vr(a,d,h,g){if(50<Rl)throw Rl=0,_p=null,Error(n(185));tl(a,h,g),((ot&2)===0||a!==cn)&&(a===cn&&((ot&2)===0&&(Pd|=h),nn===4&&mi(a,yn)),Yn(a,g),h===1&&ot===0&&(d.mode&1)===0&&(fa=Vt()+500,hd&&li()))}function Yn(a,d){var h=a.callbackNode;rC(a,d);var g=Gc(a,a===cn?yn:0);if(g===0)h!==null&&jx(h),a.callbackNode=null,a.callbackPriority=0;else if(d=g&-g,a.callbackPriority!==d){if(h!=null&&jx(h),d===1)a.tag===0?nE(Dv.bind(null,a)):wy(Dv.bind(null,a)),YC(function(){(ot&6)===0&&li()}),h=null;else{switch(Tx(g)){case 1:h=fh;break;case 4:h=Sx;break;case 16:h=Hc;break;case 536870912:h=Cx;break;default:h=Hc}h=Hv(h,Iv.bind(null,a))}a.callbackPriority=d,a.callbackNode=h}}function Iv(a,d){if(zd=-1,Bd=0,(ot&6)!==0)throw Error(n(327));var h=a.callbackNode;if(ha()&&a.callbackNode!==h)return null;var g=Gc(a,a===cn?yn:0);if(g===0)return null;if((g&30)!==0||(g&a.expiredLanes)!==0||d)d=Fd(a,g);else{d=g;var b=ot;ot|=2;var N=zv();(cn!==a||yn!==d)&&(As=null,fa=Vt()+500,io(a,d));do try{NE();break}catch(R){Lv(a,R)}while(!0);Qh(),_d.current=N,ot=b,Kt!==null?d=0:(cn=null,yn=0,d=nn)}if(d!==0){if(d===2&&(b=hh(a),b!==0&&(g=b,d=Pp(a,b))),d===1)throw h=Al,io(a,0),mi(a,g),Yn(a,Vt()),h;if(d===6)mi(a,g);else{if(b=a.current.alternate,(g&30)===0&&!wE(b)&&(d=Fd(a,g),d===2&&(N=hh(a),N!==0&&(g=N,d=Pp(a,N))),d===1))throw h=Al,io(a,0),mi(a,g),Yn(a,Vt()),h;switch(a.finishedWork=b,a.finishedLanes=g,d){case 0:case 1:throw Error(n(345));case 2:oo(a,Qn,As);break;case 3:if(mi(a,g),(g&130023424)===g&&(d=Rp+500-Vt(),10<d)){if(Gc(a,0)!==0)break;if(b=a.suspendedLanes,(b&g)!==g){Bn(),a.pingedLanes|=a.suspendedLanes&b;break}a.timeoutHandle=Fh(oo.bind(null,a,Qn,As),d);break}oo(a,Qn,As);break;case 4:if(mi(a,g),(g&4194240)===g)break;for(d=a.eventTimes,b=-1;0<g;){var S=31-Dr(g);N=1<<S,S=d[S],S>b&&(b=S),g&=~N}if(g=b,g=Vt()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*bE(g/1960))-g,10<g){a.timeoutHandle=Fh(oo.bind(null,a,Qn,As),g);break}oo(a,Qn,As);break;case 5:oo(a,Qn,As);break;default:throw Error(n(329))}}}return Yn(a,Vt()),a.callbackNode===h?Iv.bind(null,a):null}function Pp(a,d){var h=Ml;return a.current.memoizedState.isDehydrated&&(io(a,d).flags|=256),a=Fd(a,d),a!==2&&(d=Qn,Qn=h,d!==null&&Ip(d)),a}function Ip(a){Qn===null?Qn=a:Qn.push.apply(Qn,a)}function wE(a){for(var d=a;;){if(d.flags&16384){var h=d.updateQueue;if(h!==null&&(h=h.stores,h!==null))for(var g=0;g<h.length;g++){var b=h[g],N=b.getSnapshot;b=b.value;try{if(!Lr(N(),b))return!1}catch{return!1}}}if(h=d.child,d.subtreeFlags&16384&&h!==null)h.return=d,d=h;else{if(d===a)break;for(;d.sibling===null;){if(d.return===null||d.return===a)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function mi(a,d){for(d&=~Mp,d&=~Pd,a.suspendedLanes|=d,a.pingedLanes&=~d,a=a.expirationTimes;0<d;){var h=31-Dr(d),g=1<<h;a[h]=-1,d&=~g}}function Dv(a){if((ot&6)!==0)throw Error(n(327));ha();var d=Gc(a,0);if((d&1)===0)return Yn(a,Vt()),null;var h=Fd(a,d);if(a.tag!==0&&h===2){var g=hh(a);g!==0&&(d=g,h=Pp(a,g))}if(h===1)throw h=Al,io(a,0),mi(a,d),Yn(a,Vt()),h;if(h===6)throw Error(n(345));return a.finishedWork=a.current.alternate,a.finishedLanes=d,oo(a,Qn,As),Yn(a,Vt()),null}function Dp(a,d){var h=ot;ot|=1;try{return a(d)}finally{ot=h,ot===0&&(fa=Vt()+500,hd&&li())}}function so(a){hi!==null&&hi.tag===0&&(ot&6)===0&&ha();var d=ot;ot|=1;var h=jr.transition,g=ut;try{if(jr.transition=null,ut=1,a)return a()}finally{ut=g,jr.transition=h,ot=d,(ot&6)===0&&li()}}function Lp(){cr=ua.current,Nt(ua)}function io(a,d){a.finishedWork=null,a.finishedLanes=0;var h=a.timeoutHandle;if(h!==-1&&(a.timeoutHandle=-1,QC(h)),Kt!==null)for(h=Kt.return;h!==null;){var g=h;switch(qh(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&ud();break;case 3:la(),Nt(Gn),Nt(Nn),ip();break;case 5:rp(g);break;case 4:la();break;case 13:Nt(Mt);break;case 19:Nt(Mt);break;case 10:Yh(g.type._context);break;case 22:case 23:Lp()}h=h.return}if(cn=a,Kt=a=gi(a.current,null),yn=cr=d,nn=0,Al=null,Mp=Pd=ro=0,Qn=Ml=null,eo!==null){for(d=0;d<eo.length;d++)if(h=eo[d],g=h.interleaved,g!==null){h.interleaved=null;var b=g.next,N=h.pending;if(N!==null){var S=N.next;N.next=b,g.next=S}h.pending=g}eo=null}return a}function Lv(a,d){do{var h=Kt;try{if(Qh(),Nd.current=Ed,jd){for(var g=Rt.memoizedState;g!==null;){var b=g.queue;b!==null&&(b.pending=null),g=g.next}jd=!1}if(no=0,ln=tn=Rt=null,Nl=!1,jl=0,Ap.current=null,h===null||h.return===null){nn=1,Al=d,Kt=null;break}e:{var N=a,S=h.return,R=h,L=d;if(d=yn,R.flags|=32768,L!==null&&typeof L=="object"&&typeof L.then=="function"){var Y=L,ue=R,he=ue.tag;if((ue.mode&1)===0&&(he===0||he===11||he===15)){var de=ue.alternate;de?(ue.updateQueue=de.updateQueue,ue.memoizedState=de.memoizedState,ue.lanes=de.lanes):(ue.updateQueue=null,ue.memoizedState=null)}var Te=lv(S);if(Te!==null){Te.flags&=-257,cv(Te,S,R,N,d),Te.mode&1&&av(N,Y,d),d=Te,L=Y;var Oe=d.updateQueue;if(Oe===null){var Ie=new Set;Ie.add(L),d.updateQueue=Ie}else Oe.add(L);break e}else{if((d&1)===0){av(N,Y,d),zp();break e}L=Error(n(426))}}else if(Tt&&R.mode&1){var Ut=lv(S);if(Ut!==null){(Ut.flags&65536)===0&&(Ut.flags|=256),cv(Ut,S,R,N,d),Jh(ca(L,R));break e}}N=L=ca(L,R),nn!==4&&(nn=2),Ml===null?Ml=[N]:Ml.push(N),N=S;do{switch(N.tag){case 3:N.flags|=65536,d&=-d,N.lanes|=d;var H=iv(N,L,d);Oy(N,H);break e;case 1:R=L;var $=N.type,K=N.stateNode;if((N.flags&128)===0&&(typeof $.getDerivedStateFromError=="function"||K!==null&&typeof K.componentDidCatch=="function"&&(fi===null||!fi.has(K)))){N.flags|=65536,d&=-d,N.lanes|=d;var ve=ov(N,R,d);Oy(N,ve);break e}}N=N.return}while(N!==null)}Fv(h)}catch(De){d=De,Kt===h&&h!==null&&(Kt=h=h.return);continue}break}while(!0)}function zv(){var a=_d.current;return _d.current=Ed,a===null?Ed:a}function zp(){(nn===0||nn===3||nn===2)&&(nn=4),cn===null||(ro&268435455)===0&&(Pd&268435455)===0||mi(cn,yn)}function Fd(a,d){var h=ot;ot|=2;var g=zv();(cn!==a||yn!==d)&&(As=null,io(a,d));do try{kE();break}catch(b){Lv(a,b)}while(!0);if(Qh(),ot=h,_d.current=g,Kt!==null)throw Error(n(261));return cn=null,yn=0,nn}function kE(){for(;Kt!==null;)Bv(Kt)}function NE(){for(;Kt!==null&&!G2();)Bv(Kt)}function Bv(a){var d=Uv(a.alternate,a,cr);a.memoizedProps=a.pendingProps,d===null?Fv(a):Kt=d,Ap.current=null}function Fv(a){var d=a;do{var h=d.alternate;if(a=d.return,(d.flags&32768)===0){if(h=mE(h,d,cr),h!==null){Kt=h;return}}else{if(h=gE(h,d),h!==null){h.flags&=32767,Kt=h;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{nn=6,Kt=null;return}}if(d=d.sibling,d!==null){Kt=d;return}Kt=d=a}while(d!==null);nn===0&&(nn=5)}function oo(a,d,h){var g=ut,b=jr.transition;try{jr.transition=null,ut=1,jE(a,d,h,g)}finally{jr.transition=b,ut=g}return null}function jE(a,d,h,g){do ha();while(hi!==null);if((ot&6)!==0)throw Error(n(327));h=a.finishedWork;var b=a.finishedLanes;if(h===null)return null;if(a.finishedWork=null,a.finishedLanes=0,h===a.current)throw Error(n(177));a.callbackNode=null,a.callbackPriority=0;var N=h.lanes|h.childLanes;if(sC(a,N),a===cn&&(Kt=cn=null,yn=0),(h.subtreeFlags&2064)===0&&(h.flags&2064)===0||Dd||(Dd=!0,Hv(Hc,function(){return ha(),null})),N=(h.flags&15990)!==0,(h.subtreeFlags&15990)!==0||N){N=jr.transition,jr.transition=null;var S=ut;ut=1;var R=ot;ot|=4,Ap.current=null,yE(a,h),Mv(h,a),HC(zh),Qc=!!Lh,zh=Lh=null,a.current=h,vE(h),J2(),ot=R,ut=S,jr.transition=N}else a.current=h;if(Dd&&(Dd=!1,hi=a,Ld=b),N=a.pendingLanes,N===0&&(fi=null),Y2(h.stateNode),Yn(a,Vt()),d!==null)for(g=a.onRecoverableError,h=0;h<d.length;h++)b=d[h],g(b.value,{componentStack:b.stack,digest:b.digest});if(Id)throw Id=!1,a=Op,Op=null,a;return(Ld&1)!==0&&a.tag!==0&&ha(),N=a.pendingLanes,(N&1)!==0?a===_p?Rl++:(Rl=0,_p=a):Rl=0,li(),null}function ha(){if(hi!==null){var a=Tx(Ld),d=jr.transition,h=ut;try{if(jr.transition=null,ut=16>a?16:a,hi===null)var g=!1;else{if(a=hi,hi=null,Ld=0,(ot&6)!==0)throw Error(n(331));var b=ot;for(ot|=4,Me=a.current;Me!==null;){var N=Me,S=N.child;if((Me.flags&16)!==0){var R=N.deletions;if(R!==null){for(var L=0;L<R.length;L++){var Y=R[L];for(Me=Y;Me!==null;){var ue=Me;switch(ue.tag){case 0:case 11:case 15:Tl(8,ue,N)}var he=ue.child;if(he!==null)he.return=ue,Me=he;else for(;Me!==null;){ue=Me;var de=ue.sibling,Te=ue.return;if(Sv(ue),ue===Y){Me=null;break}if(de!==null){de.return=Te,Me=de;break}Me=Te}}}var Oe=N.alternate;if(Oe!==null){var Ie=Oe.child;if(Ie!==null){Oe.child=null;do{var Ut=Ie.sibling;Ie.sibling=null,Ie=Ut}while(Ie!==null)}}Me=N}}if((N.subtreeFlags&2064)!==0&&S!==null)S.return=N,Me=S;else e:for(;Me!==null;){if(N=Me,(N.flags&2048)!==0)switch(N.tag){case 0:case 11:case 15:Tl(9,N,N.return)}var H=N.sibling;if(H!==null){H.return=N.return,Me=H;break e}Me=N.return}}var $=a.current;for(Me=$;Me!==null;){S=Me;var K=S.child;if((S.subtreeFlags&2064)!==0&&K!==null)K.return=S,Me=K;else e:for(S=$;Me!==null;){if(R=Me,(R.flags&2048)!==0)try{switch(R.tag){case 0:case 11:case 15:Od(9,R)}}catch(De){Pt(R,R.return,De)}if(R===S){Me=null;break e}var ve=R.sibling;if(ve!==null){ve.return=R.return,Me=ve;break e}Me=R.return}}if(ot=b,li(),es&&typeof es.onPostCommitFiberRoot=="function")try{es.onPostCommitFiberRoot(Wc,a)}catch{}g=!0}return g}finally{ut=h,jr.transition=d}}return!1}function $v(a,d,h){d=ca(h,d),d=iv(a,d,1),a=di(a,d,1),d=Bn(),a!==null&&(tl(a,1,d),Yn(a,d))}function Pt(a,d,h){if(a.tag===3)$v(a,a,h);else for(;d!==null;){if(d.tag===3){$v(d,a,h);break}else if(d.tag===1){var g=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(fi===null||!fi.has(g))){a=ca(h,a),a=ov(d,a,1),d=di(d,a,1),a=Bn(),d!==null&&(tl(d,1,a),Yn(d,a));break}}d=d.return}}function SE(a,d,h){var g=a.pingCache;g!==null&&g.delete(d),d=Bn(),a.pingedLanes|=a.suspendedLanes&h,cn===a&&(yn&h)===h&&(nn===4||nn===3&&(yn&130023424)===yn&&500>Vt()-Rp?io(a,0):Mp|=h),Yn(a,d)}function Vv(a,d){d===0&&((a.mode&1)===0?d=1:(d=Kc,Kc<<=1,(Kc&130023424)===0&&(Kc=4194304)));var h=Bn();a=Cs(a,d),a!==null&&(tl(a,d,h),Yn(a,h))}function CE(a){var d=a.memoizedState,h=0;d!==null&&(h=d.retryLane),Vv(a,h)}function EE(a,d){var h=0;switch(a.tag){case 13:var g=a.stateNode,b=a.memoizedState;b!==null&&(h=b.retryLane);break;case 19:g=a.stateNode;break;default:throw Error(n(314))}g!==null&&g.delete(d),Vv(a,h)}var Uv;Uv=function(a,d,h){if(a!==null)if(a.memoizedProps!==d.pendingProps||Gn.current)Zn=!0;else{if((a.lanes&h)===0&&(d.flags&128)===0)return Zn=!1,pE(a,d,h);Zn=(a.flags&131072)!==0}else Zn=!1,Tt&&(d.flags&1048576)!==0&&ky(d,md,d.index);switch(d.lanes=0,d.tag){case 2:var g=d.type;Md(a,d),a=d.pendingProps;var b=ta(d,Nn.current);aa(d,h),b=lp(null,d,g,a,b,h);var N=cp();return d.flags|=1,typeof b=="object"&&b!==null&&typeof b.render=="function"&&b.$$typeof===void 0?(d.tag=1,d.memoizedState=null,d.updateQueue=null,Jn(g)?(N=!0,fd(d)):N=!1,d.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,tp(d),b.updater=Td,d.stateNode=b,b._reactInternals=d,mp(d,g,a,h),d=vp(null,d,g,!0,N,h)):(d.tag=0,Tt&&N&&Wh(d),zn(null,d,b,h),d=d.child),d;case 16:g=d.elementType;e:{switch(Md(a,d),a=d.pendingProps,b=g._init,g=b(g._payload),d.type=g,b=d.tag=AE(g),a=Br(g,a),b){case 0:d=yp(null,d,g,a,h);break e;case 1:d=mv(null,d,g,a,h);break e;case 11:d=dv(null,d,g,a,h);break e;case 14:d=uv(null,d,g,Br(g.type,a),h);break e}throw Error(n(306,g,""))}return d;case 0:return g=d.type,b=d.pendingProps,b=d.elementType===g?b:Br(g,b),yp(a,d,g,b,h);case 1:return g=d.type,b=d.pendingProps,b=d.elementType===g?b:Br(g,b),mv(a,d,g,b,h);case 3:e:{if(gv(d),a===null)throw Error(n(387));g=d.pendingProps,N=d.memoizedState,b=N.element,Ry(a,d),wd(d,g,null,h);var S=d.memoizedState;if(g=S.element,N.isDehydrated)if(N={element:g,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},d.updateQueue.baseState=N,d.memoizedState=N,d.flags&256){b=ca(Error(n(423)),d),d=xv(a,d,g,h,b);break e}else if(g!==b){b=ca(Error(n(424)),d),d=xv(a,d,g,h,b);break e}else for(lr=ii(d.stateNode.containerInfo.firstChild),ar=d,Tt=!0,zr=null,h=Ay(d,null,g,h),d.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(sa(),g===b){d=Ts(a,d,h);break e}zn(a,d,g,h)}d=d.child}return d;case 5:return Py(d),a===null&&Gh(d),g=d.type,b=d.pendingProps,N=a!==null?a.memoizedProps:null,S=b.children,Bh(g,b)?S=null:N!==null&&Bh(g,N)&&(d.flags|=32),pv(a,d),zn(a,d,S,h),d.child;case 6:return a===null&&Gh(d),null;case 13:return yv(a,d,h);case 4:return np(d,d.stateNode.containerInfo),g=d.pendingProps,a===null?d.child=ia(d,null,g,h):zn(a,d,g,h),d.child;case 11:return g=d.type,b=d.pendingProps,b=d.elementType===g?b:Br(g,b),dv(a,d,g,b,h);case 7:return zn(a,d,d.pendingProps,h),d.child;case 8:return zn(a,d,d.pendingProps.children,h),d.child;case 12:return zn(a,d,d.pendingProps.children,h),d.child;case 10:e:{if(g=d.type._context,b=d.pendingProps,N=d.memoizedProps,S=b.value,gt(yd,g._currentValue),g._currentValue=S,N!==null)if(Lr(N.value,S)){if(N.children===b.children&&!Gn.current){d=Ts(a,d,h);break e}}else for(N=d.child,N!==null&&(N.return=d);N!==null;){var R=N.dependencies;if(R!==null){S=N.child;for(var L=R.firstContext;L!==null;){if(L.context===g){if(N.tag===1){L=Es(-1,h&-h),L.tag=2;var Y=N.updateQueue;if(Y!==null){Y=Y.shared;var ue=Y.pending;ue===null?L.next=L:(L.next=ue.next,ue.next=L),Y.pending=L}}N.lanes|=h,L=N.alternate,L!==null&&(L.lanes|=h),Xh(N.return,h,d),R.lanes|=h;break}L=L.next}}else if(N.tag===10)S=N.type===d.type?null:N.child;else if(N.tag===18){if(S=N.return,S===null)throw Error(n(341));S.lanes|=h,R=S.alternate,R!==null&&(R.lanes|=h),Xh(S,h,d),S=N.sibling}else S=N.child;if(S!==null)S.return=N;else for(S=N;S!==null;){if(S===d){S=null;break}if(N=S.sibling,N!==null){N.return=S.return,S=N;break}S=S.return}N=S}zn(a,d,b.children,h),d=d.child}return d;case 9:return b=d.type,g=d.pendingProps.children,aa(d,h),b=kr(b),g=g(b),d.flags|=1,zn(a,d,g,h),d.child;case 14:return g=d.type,b=Br(g,d.pendingProps),b=Br(g.type,b),uv(a,d,g,b,h);case 15:return fv(a,d,d.type,d.pendingProps,h);case 17:return g=d.type,b=d.pendingProps,b=d.elementType===g?b:Br(g,b),Md(a,d),d.tag=1,Jn(g)?(a=!0,fd(d)):a=!1,aa(d,h),rv(d,g,b),mp(d,g,b,h),vp(null,d,g,!0,a,h);case 19:return bv(a,d,h);case 22:return hv(a,d,h)}throw Error(n(156,d.tag))};function Hv(a,d){return Nx(a,d)}function TE(a,d,h,g){this.tag=a,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sr(a,d,h,g){return new TE(a,d,h,g)}function Bp(a){return a=a.prototype,!(!a||!a.isReactComponent)}function AE(a){if(typeof a=="function")return Bp(a)?1:0;if(a!=null){if(a=a.$$typeof,a===z)return 11;if(a===oe)return 14}return 2}function gi(a,d){var h=a.alternate;return h===null?(h=Sr(a.tag,d,a.key,a.mode),h.elementType=a.elementType,h.type=a.type,h.stateNode=a.stateNode,h.alternate=a,a.alternate=h):(h.pendingProps=d,h.type=a.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=a.flags&14680064,h.childLanes=a.childLanes,h.lanes=a.lanes,h.child=a.child,h.memoizedProps=a.memoizedProps,h.memoizedState=a.memoizedState,h.updateQueue=a.updateQueue,d=a.dependencies,h.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},h.sibling=a.sibling,h.index=a.index,h.ref=a.ref,h}function $d(a,d,h,g,b,N){var S=2;if(g=a,typeof a=="function")Bp(a)&&(S=1);else if(typeof a=="string")S=5;else e:switch(a){case F:return ao(h.children,b,N,d);case ne:S=8,b|=8;break;case O:return a=Sr(12,h,d,b|2),a.elementType=O,a.lanes=N,a;case te:return a=Sr(13,h,d,b),a.elementType=te,a.lanes=N,a;case ie:return a=Sr(19,h,d,b),a.elementType=ie,a.lanes=N,a;case q:return Vd(h,b,N,d);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case X:S=10;break e;case le:S=9;break e;case z:S=11;break e;case oe:S=14;break e;case W:S=16,g=null;break e}throw Error(n(130,a==null?a:typeof a,""))}return d=Sr(S,h,d,b),d.elementType=a,d.type=g,d.lanes=N,d}function ao(a,d,h,g){return a=Sr(7,a,g,d),a.lanes=h,a}function Vd(a,d,h,g){return a=Sr(22,a,g,d),a.elementType=q,a.lanes=h,a.stateNode={isHidden:!1},a}function Fp(a,d,h){return a=Sr(6,a,null,d),a.lanes=h,a}function $p(a,d,h){return d=Sr(4,a.children!==null?a.children:[],a.key,d),d.lanes=h,d.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},d}function ME(a,d,h,g,b){this.tag=d,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ph(0),this.expirationTimes=ph(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ph(0),this.identifierPrefix=g,this.onRecoverableError=b,this.mutableSourceEagerHydrationData=null}function Vp(a,d,h,g,b,N,S,R,L){return a=new ME(a,d,h,R,L),d===1?(d=1,N===!0&&(d|=8)):d=0,N=Sr(3,null,null,d),a.current=N,N.stateNode=a,N.memoizedState={element:g,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null},tp(N),a}function RE(a,d,h){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:P,key:g==null?null:""+g,children:a,containerInfo:d,implementation:h}}function Wv(a){if(!a)return ai;a=a._reactInternals;e:{if(Ji(a)!==a||a.tag!==1)throw Error(n(170));var d=a;do{switch(d.tag){case 3:d=d.stateNode.context;break e;case 1:if(Jn(d.type)){d=d.stateNode.__reactInternalMemoizedMergedChildContext;break e}}d=d.return}while(d!==null);throw Error(n(171))}if(a.tag===1){var h=a.type;if(Jn(h))return vy(a,h,d)}return d}function qv(a,d,h,g,b,N,S,R,L){return a=Vp(h,g,!0,a,b,N,S,R,L),a.context=Wv(null),h=a.current,g=Bn(),b=pi(h),N=Es(g,b),N.callback=d??null,di(h,N,b),a.current.lanes=b,tl(a,b,g),Yn(a,g),a}function Ud(a,d,h,g){var b=d.current,N=Bn(),S=pi(b);return h=Wv(h),d.context===null?d.context=h:d.pendingContext=h,d=Es(N,S),d.payload={element:a},g=g===void 0?null:g,g!==null&&(d.callback=g),a=di(b,d,S),a!==null&&(Vr(a,b,S,N),bd(a,b,S)),S}function Hd(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function Kv(a,d){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var h=a.retryLane;a.retryLane=h!==0&&h<d?h:d}}function Up(a,d){Kv(a,d),(a=a.alternate)&&Kv(a,d)}function OE(){return null}var Gv=typeof reportError=="function"?reportError:function(a){console.error(a)};function Hp(a){this._internalRoot=a}Wd.prototype.render=Hp.prototype.render=function(a){var d=this._internalRoot;if(d===null)throw Error(n(409));Ud(a,d,null,null)},Wd.prototype.unmount=Hp.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var d=a.containerInfo;so(function(){Ud(null,a,null,null)}),d[ks]=null}};function Wd(a){this._internalRoot=a}Wd.prototype.unstable_scheduleHydration=function(a){if(a){var d=Rx();a={blockedOn:null,target:a,priority:d};for(var h=0;h<ni.length&&d!==0&&d<ni[h].priority;h++);ni.splice(h,0,a),h===0&&Px(a)}};function Wp(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function qd(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function Jv(){}function _E(a,d,h,g,b){if(b){if(typeof g=="function"){var N=g;g=function(){var Y=Hd(S);N.call(Y)}}var S=qv(d,g,a,0,null,!1,!1,"",Jv);return a._reactRootContainer=S,a[ks]=S.current,ml(a.nodeType===8?a.parentNode:a),so(),S}for(;b=a.lastChild;)a.removeChild(b);if(typeof g=="function"){var R=g;g=function(){var Y=Hd(L);R.call(Y)}}var L=Vp(a,0,!1,null,null,!1,!1,"",Jv);return a._reactRootContainer=L,a[ks]=L.current,ml(a.nodeType===8?a.parentNode:a),so(function(){Ud(d,L,h,g)}),L}function Kd(a,d,h,g,b){var N=h._reactRootContainer;if(N){var S=N;if(typeof b=="function"){var R=b;b=function(){var L=Hd(S);R.call(L)}}Ud(d,S,a,b)}else S=_E(h,d,a,b,g);return Hd(S)}Ax=function(a){switch(a.tag){case 3:var d=a.stateNode;if(d.current.memoizedState.isDehydrated){var h=el(d.pendingLanes);h!==0&&(mh(d,h|1),Yn(d,Vt()),(ot&6)===0&&(fa=Vt()+500,li()))}break;case 13:so(function(){var g=Cs(a,1);if(g!==null){var b=Bn();Vr(g,a,1,b)}}),Up(a,1)}},gh=function(a){if(a.tag===13){var d=Cs(a,134217728);if(d!==null){var h=Bn();Vr(d,a,134217728,h)}Up(a,134217728)}},Mx=function(a){if(a.tag===13){var d=pi(a),h=Cs(a,d);if(h!==null){var g=Bn();Vr(h,a,d,g)}Up(a,d)}},Rx=function(){return ut},Ox=function(a,d){var h=ut;try{return ut=a,d()}finally{ut=h}},Uo=function(a,d,h){switch(d){case"input":if(Wt(a,h),d=h.name,h.type==="radio"&&d!=null){for(h=a;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll("input[name="+JSON.stringify(""+d)+'][type="radio"]'),d=0;d<h.length;d++){var g=h[d];if(g!==a&&g.form===a.form){var b=dd(g);if(!b)throw Error(n(90));wt(g),Wt(g,b)}}}break;case"textarea":I(a,h);break;case"select":d=h.value,d!=null&&_(a,!!h.multiple,d,!1)}},Za=Dp,Qa=so;var PE={usingClientEntryPoint:!1,Events:[yl,Xo,dd,Ga,Ja,Dp]},Ol={findFiberByHostInstance:Zi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},IE={bundleType:Ol.bundleType,version:Ol.version,rendererPackageName:Ol.rendererPackageName,rendererConfig:Ol.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:A.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=wx(a),a===null?null:a.stateNode},findFiberByHostInstance:Ol.findFiberByHostInstance||OE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gd.isDisabled&&Gd.supportsFiber)try{Wc=Gd.inject(IE),es=Gd}catch{}}return Xn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=PE,Xn.createPortal=function(a,d){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Wp(d))throw Error(n(200));return RE(a,d,null,h)},Xn.createRoot=function(a,d){if(!Wp(a))throw Error(n(299));var h=!1,g="",b=Gv;return d!=null&&(d.unstable_strictMode===!0&&(h=!0),d.identifierPrefix!==void 0&&(g=d.identifierPrefix),d.onRecoverableError!==void 0&&(b=d.onRecoverableError)),d=Vp(a,1,!1,null,null,h,!1,g,b),a[ks]=d.current,ml(a.nodeType===8?a.parentNode:a),new Hp(d)},Xn.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var d=a._reactInternals;if(d===void 0)throw typeof a.render=="function"?Error(n(188)):(a=Object.keys(a).join(","),Error(n(268,a)));return a=wx(d),a=a===null?null:a.stateNode,a},Xn.flushSync=function(a){return so(a)},Xn.hydrate=function(a,d,h){if(!qd(d))throw Error(n(200));return Kd(null,a,d,!0,h)},Xn.hydrateRoot=function(a,d,h){if(!Wp(a))throw Error(n(405));var g=h!=null&&h.hydratedSources||null,b=!1,N="",S=Gv;if(h!=null&&(h.unstable_strictMode===!0&&(b=!0),h.identifierPrefix!==void 0&&(N=h.identifierPrefix),h.onRecoverableError!==void 0&&(S=h.onRecoverableError)),d=qv(d,null,a,1,h??null,b,!1,N,S),a[ks]=d.current,ml(a),g)for(a=0;a<g.length;a++)h=g[a],b=h._getVersion,b=b(h._source),d.mutableSourceEagerHydrationData==null?d.mutableSourceEagerHydrationData=[h,b]:d.mutableSourceEagerHydrationData.push(h,b);return new Wd(d)},Xn.render=function(a,d,h){if(!qd(d))throw Error(n(200));return Kd(null,a,d,!1,h)},Xn.unmountComponentAtNode=function(a){if(!qd(a))throw Error(n(40));return a._reactRootContainer?(so(function(){Kd(null,null,a,!1,function(){a._reactRootContainer=null,a[ks]=null})}),!0):!1},Xn.unstable_batchedUpdates=Dp,Xn.unstable_renderSubtreeIntoContainer=function(a,d,h,g){if(!qd(h))throw Error(n(200));if(a==null||a._reactInternals===void 0)throw Error(n(38));return Kd(a,d,h,!1,g)},Xn.version="18.3.1-next-f1338f8080-20240426",Xn}var rb;function gk(){if(rb)return Gp.exports;rb=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Gp.exports=HE(),Gp.exports}var sb;function WE(){if(sb)return Jd;sb=1;var t=gk();return Jd.createRoot=t.createRoot,Jd.hydrateRoot=t.hydrateRoot,Jd}var qE=WE();const KE=Zg(qE);var Qg=gk();const GE=Zg(Qg);/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function uc(){return uc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uc.apply(this,arguments)}var Ri;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ri||(Ri={}));const ib="popstate";function JE(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:c}=r.location;return Hm("",{pathname:i,search:o,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Mu(s)}return QE(e,n,null,t)}function Ht(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Yg(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function ZE(){return Math.random().toString(36).substr(2,8)}function ob(t,e){return{usr:t.state,key:t.key,idx:e}}function Hm(t,e,n,r){return n===void 0&&(n=null),uc({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?$a(e):e,{state:n,key:e&&e.key||r||ZE()})}function Mu(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function $a(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function QE(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,c=Ri.Pop,u=null,f=p();f==null&&(f=0,o.replaceState(uc({},o.state,{idx:f}),""));function p(){return(o.state||{idx:null}).idx}function m(){c=Ri.Pop;let w=p(),j=w==null?null:w-f;f=w,u&&u({action:c,location:k.location,delta:j})}function x(w,j){c=Ri.Push;let C=Hm(k.location,w,j);f=p()+1;let T=ob(C,f),A=k.createHref(C);try{o.pushState(T,"",A)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;s.location.assign(A)}i&&u&&u({action:c,location:k.location,delta:1})}function y(w,j){c=Ri.Replace;let C=Hm(k.location,w,j);f=p();let T=ob(C,f),A=k.createHref(C);o.replaceState(T,"",A),i&&u&&u({action:c,location:k.location,delta:0})}function v(w){let j=s.location.origin!=="null"?s.location.origin:s.location.href,C=typeof w=="string"?w:Mu(w);return C=C.replace(/ $/,"%20"),Ht(j,"No window.location.(origin|href) available to create URL for href: "+C),new URL(C,j)}let k={get action(){return c},get location(){return t(s,o)},listen(w){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(ib,m),u=w,()=>{s.removeEventListener(ib,m),u=null}},createHref(w){return e(s,w)},createURL:v,encodeLocation(w){let j=v(w);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:x,replace:y,go(w){return o.go(w)}};return k}var ab;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(ab||(ab={}));function YE(t,e,n){return n===void 0&&(n="/"),XE(t,e,n)}function XE(t,e,n,r){let s=typeof e=="string"?$a(e):e,i=Xg(s.pathname||"/",n);if(i==null)return null;let o=xk(t);eT(o);let c=null;for(let u=0;c==null&&u<o.length;++u){let f=fT(i);c=cT(o[u],f)}return c}function xk(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,c)=>{let u={relativePath:c===void 0?i.path||"":c,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};u.relativePath.startsWith("/")&&(Ht(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let f=Ii([r,u.relativePath]),p=n.concat(u);i.children&&i.children.length>0&&(Ht(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),xk(i.children,e,p,f)),!(i.path==null&&!i.index)&&e.push({path:f,score:aT(f,i.index),routesMeta:p})};return t.forEach((i,o)=>{var c;if(i.path===""||!((c=i.path)!=null&&c.includes("?")))s(i,o);else for(let u of yk(i.path))s(i,o,u)}),e}function yk(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=yk(r.join("/")),c=[];return c.push(...o.map(u=>u===""?i:[i,u].join("/"))),s&&c.push(...o),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function eT(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:lT(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const tT=/^:[\w-]+$/,nT=3,rT=2,sT=1,iT=10,oT=-2,lb=t=>t==="*";function aT(t,e){let n=t.split("/"),r=n.length;return n.some(lb)&&(r+=oT),e&&(r+=rT),n.filter(s=>!lb(s)).reduce((s,i)=>s+(tT.test(i)?nT:i===""?sT:iT),r)}function lT(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function cT(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let c=0;c<r.length;++c){let u=r[c],f=c===r.length-1,p=i==="/"?e:e.slice(i.length)||"/",m=dT({path:u.relativePath,caseSensitive:u.caseSensitive,end:f},p),x=u.route;if(!m)return null;Object.assign(s,m.params),o.push({params:s,pathname:Ii([i,m.pathname]),pathnameBase:xT(Ii([i,m.pathnameBase])),route:x}),m.pathnameBase!=="/"&&(i=Ii([i,m.pathnameBase]))}return o}function dT(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=uT(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:r.reduce((f,p,m)=>{let{paramName:x,isOptional:y}=p;if(x==="*"){let k=c[m]||"";o=i.slice(0,i.length-k.length).replace(/(.)\/+$/,"$1")}const v=c[m];return y&&!v?f[x]=void 0:f[x]=(v||"").replace(/%2F/g,"/"),f},{}),pathname:i,pathnameBase:o,pattern:t}}function uT(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Yg(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function fT(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Yg(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Xg(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const hT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,pT=t=>hT.test(t);function mT(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?$a(t):t,i;if(n)if(pT(n))i=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Yg(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?i=cb(n.substring(1),"/"):i=cb(n,e)}else i=e;return{pathname:i,search:yT(r),hash:vT(s)}}function cb(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Qp(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function gT(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function e0(t,e){let n=gT(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function t0(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=$a(t):(s=uc({},t),Ht(!s.pathname||!s.pathname.includes("?"),Qp("?","pathname","search",s)),Ht(!s.pathname||!s.pathname.includes("#"),Qp("#","pathname","hash",s)),Ht(!s.search||!s.search.includes("#"),Qp("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,c;if(o==null)c=n;else{let m=e.length-1;if(!r&&o.startsWith("..")){let x=o.split("/");for(;x[0]==="..";)x.shift(),m-=1;s.pathname=x.join("/")}c=m>=0?e[m]:"/"}let u=mT(s,c),f=o&&o!=="/"&&o.endsWith("/"),p=(i||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(f||p)&&(u.pathname+="/"),u}const Ii=t=>t.join("/").replace(/\/\/+/g,"/"),xT=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),yT=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,vT=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function bT(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const vk=["post","put","patch","delete"];new Set(vk);const wT=["get",...vk];new Set(wT);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fc(){return fc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fc.apply(this,arguments)}const n0=E.createContext(null),kT=E.createContext(null),Wi=E.createContext(null),Bf=E.createContext(null),gs=E.createContext({outlet:null,matches:[],isDataRoute:!1}),bk=E.createContext(null);function NT(t,e){let{relative:n}=e===void 0?{}:e;Va()||Ht(!1);let{basename:r,navigator:s}=E.useContext(Wi),{hash:i,pathname:o,search:c}=Nk(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:Ii([r,o])),s.createHref({pathname:u,search:c,hash:i})}function Va(){return E.useContext(Bf)!=null}function Pr(){return Va()||Ht(!1),E.useContext(Bf).location}function wk(t){E.useContext(Wi).static||E.useLayoutEffect(t)}function Dn(){let{isDataRoute:t}=E.useContext(gs);return t?zT():jT()}function jT(){Va()||Ht(!1);let t=E.useContext(n0),{basename:e,future:n,navigator:r}=E.useContext(Wi),{matches:s}=E.useContext(gs),{pathname:i}=Pr(),o=JSON.stringify(e0(s,n.v7_relativeSplatPath)),c=E.useRef(!1);return wk(()=>{c.current=!0}),E.useCallback(function(f,p){if(p===void 0&&(p={}),!c.current)return;if(typeof f=="number"){r.go(f);return}let m=t0(f,JSON.parse(o),i,p.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:Ii([e,m.pathname])),(p.replace?r.replace:r.push)(m,p.state,p)},[e,r,o,i,t])}const ST=E.createContext(null);function CT(t){let e=E.useContext(gs).outlet;return e&&E.createElement(ST.Provider,{value:t},e)}function kk(){let{matches:t}=E.useContext(gs),e=t[t.length-1];return e?e.params:{}}function Nk(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=E.useContext(Wi),{matches:s}=E.useContext(gs),{pathname:i}=Pr(),o=JSON.stringify(e0(s,r.v7_relativeSplatPath));return E.useMemo(()=>t0(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function ET(t,e){return TT(t,e)}function TT(t,e,n,r){Va()||Ht(!1);let{navigator:s}=E.useContext(Wi),{matches:i}=E.useContext(gs),o=i[i.length-1],c=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let f=Pr(),p;if(e){var m;let w=typeof e=="string"?$a(e):e;u==="/"||(m=w.pathname)!=null&&m.startsWith(u)||Ht(!1),p=w}else p=f;let x=p.pathname||"/",y=x;if(u!=="/"){let w=u.replace(/^\//,"").split("/");y="/"+x.replace(/^\//,"").split("/").slice(w.length).join("/")}let v=YE(t,{pathname:y}),k=_T(v&&v.map(w=>Object.assign({},w,{params:Object.assign({},c,w.params),pathname:Ii([u,s.encodeLocation?s.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?u:Ii([u,s.encodeLocation?s.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,n,r);return e&&k?E.createElement(Bf.Provider,{value:{location:fc({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:Ri.Pop}},k):k}function AT(){let t=LT(),e=bT(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},e),n?E.createElement("pre",{style:s},n):null,null)}const MT=E.createElement(AT,null);class RT extends E.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?E.createElement(gs.Provider,{value:this.props.routeContext},E.createElement(bk.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function OT(t){let{routeContext:e,match:n,children:r}=t,s=E.useContext(n0);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),E.createElement(gs.Provider,{value:e},r)}function _T(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,c=(s=n)==null?void 0:s.errors;if(c!=null){let p=o.findIndex(m=>m.route.id&&(c==null?void 0:c[m.route.id])!==void 0);p>=0||Ht(!1),o=o.slice(0,Math.min(o.length,p+1))}let u=!1,f=-1;if(n&&r&&r.v7_partialHydration)for(let p=0;p<o.length;p++){let m=o[p];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(f=p),m.route.id){let{loaderData:x,errors:y}=n,v=m.route.loader&&x[m.route.id]===void 0&&(!y||y[m.route.id]===void 0);if(m.route.lazy||v){u=!0,f>=0?o=o.slice(0,f+1):o=[o[0]];break}}}return o.reduceRight((p,m,x)=>{let y,v=!1,k=null,w=null;n&&(y=c&&m.route.id?c[m.route.id]:void 0,k=m.route.errorElement||MT,u&&(f<0&&x===0?(BT("route-fallback"),v=!0,w=null):f===x&&(v=!0,w=m.route.hydrateFallbackElement||null)));let j=e.concat(o.slice(0,x+1)),C=()=>{let T;return y?T=k:v?T=w:m.route.Component?T=E.createElement(m.route.Component,null):m.route.element?T=m.route.element:T=p,E.createElement(OT,{match:m,routeContext:{outlet:p,matches:j,isDataRoute:n!=null},children:T})};return n&&(m.route.ErrorBoundary||m.route.errorElement||x===0)?E.createElement(RT,{location:n.location,revalidation:n.revalidation,component:k,error:y,children:C(),routeContext:{outlet:null,matches:j,isDataRoute:!0}}):C()},null)}var jk=(function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t})(jk||{}),Sk=(function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t})(Sk||{});function PT(t){let e=E.useContext(n0);return e||Ht(!1),e}function IT(t){let e=E.useContext(kT);return e||Ht(!1),e}function DT(t){let e=E.useContext(gs);return e||Ht(!1),e}function Ck(t){let e=DT(),n=e.matches[e.matches.length-1];return n.route.id||Ht(!1),n.route.id}function LT(){var t;let e=E.useContext(bk),n=IT(),r=Ck();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function zT(){let{router:t}=PT(jk.UseNavigateStable),e=Ck(Sk.UseNavigateStable),n=E.useRef(!1);return wk(()=>{n.current=!0}),E.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,fc({fromRouteId:e},i)))},[t,e])}const db={};function BT(t,e,n){db[t]||(db[t]=!0)}function FT(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function fo(t){let{to:e,replace:n,state:r,relative:s}=t;Va()||Ht(!1);let{future:i,static:o}=E.useContext(Wi),{matches:c}=E.useContext(gs),{pathname:u}=Pr(),f=Dn(),p=t0(e,e0(c,i.v7_relativeSplatPath),u,s==="path"),m=JSON.stringify(p);return E.useEffect(()=>f(JSON.parse(m),{replace:n,state:r,relative:s}),[f,m,s,n,r]),null}function r0(t){return CT(t.context)}function St(t){Ht(!1)}function $T(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Ri.Pop,navigator:i,static:o=!1,future:c}=t;Va()&&Ht(!1);let u=e.replace(/^\/*/,"/"),f=E.useMemo(()=>({basename:u,navigator:i,static:o,future:fc({v7_relativeSplatPath:!1},c)}),[u,c,i,o]);typeof r=="string"&&(r=$a(r));let{pathname:p="/",search:m="",hash:x="",state:y=null,key:v="default"}=r,k=E.useMemo(()=>{let w=Xg(p,u);return w==null?null:{location:{pathname:w,search:m,hash:x,state:y,key:v},navigationType:s}},[u,p,m,x,y,v,s]);return k==null?null:E.createElement(Wi.Provider,{value:f},E.createElement(Bf.Provider,{children:n,value:k}))}function VT(t){let{children:e,location:n}=t;return ET(Wm(e),n)}new Promise(()=>{});function Wm(t,e){e===void 0&&(e=[]);let n=[];return E.Children.forEach(t,(r,s)=>{if(!E.isValidElement(r))return;let i=[...e,s];if(r.type===E.Fragment){n.push.apply(n,Wm(r.props.children,i));return}r.type!==St&&Ht(!1),!r.props.index||!r.props.children||Ht(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Wm(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qm(){return qm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qm.apply(this,arguments)}function UT(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function HT(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function WT(t,e){return t.button===0&&(!e||e==="_self")&&!HT(t)}function Km(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function qT(t,e){let n=Km(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(i=>{n.append(s,i)})}),n}const KT=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],GT="6";try{window.__reactRouterVersion=GT}catch{}const JT="startTransition",ub=$E[JT];function ZT(t){let{basename:e,children:n,future:r,window:s}=t,i=E.useRef();i.current==null&&(i.current=JE({window:s,v5Compat:!0}));let o=i.current,[c,u]=E.useState({action:o.action,location:o.location}),{v7_startTransition:f}=r||{},p=E.useCallback(m=>{f&&ub?ub(()=>u(m)):u(m)},[u,f]);return E.useLayoutEffect(()=>o.listen(p),[o,p]),E.useEffect(()=>FT(r),[r]),E.createElement($T,{basename:e,children:n,location:c.location,navigationType:c.action,navigator:o,future:r})}const QT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",YT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Dt=E.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:c,target:u,to:f,preventScrollReset:p,viewTransition:m}=e,x=UT(e,KT),{basename:y}=E.useContext(Wi),v,k=!1;if(typeof f=="string"&&YT.test(f)&&(v=f,QT))try{let T=new URL(window.location.href),A=f.startsWith("//")?new URL(T.protocol+f):new URL(f),M=Xg(A.pathname,y);A.origin===T.origin&&M!=null?f=M+A.search+A.hash:k=!0}catch{}let w=NT(f,{relative:s}),j=XT(f,{replace:o,state:c,target:u,preventScrollReset:p,relative:s,viewTransition:m});function C(T){r&&r(T),T.defaultPrevented||j(T)}return E.createElement("a",qm({},x,{href:v||w,onClick:k||i?r:C,ref:n,target:u}))});var fb;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(fb||(fb={}));var hb;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(hb||(hb={}));function XT(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:c}=e===void 0?{}:e,u=Dn(),f=Pr(),p=Nk(t,{relative:o});return E.useCallback(m=>{if(WT(m,n)){m.preventDefault();let x=r!==void 0?r:Mu(f)===Mu(p);u(t,{replace:x,state:s,preventScrollReset:i,relative:o,viewTransition:c})}},[f,u,p,r,s,n,t,i,o,c])}function eA(t){let e=E.useRef(Km(t)),n=E.useRef(!1),r=Pr(),s=E.useMemo(()=>qT(r.search,n.current?null:e.current),[r.search]),i=Dn(),o=E.useCallback((c,u)=>{const f=Km(typeof c=="function"?c(s):c);n.current=!0,i("?"+f,u)},[i,s]);return[s,o]}const pb=t=>{let e;const n=new Set,r=(f,p)=>{const m=typeof f=="function"?f(e):f;if(!Object.is(m,e)){const x=e;e=p??(typeof m!="object"||m===null)?m:Object.assign({},e,m),n.forEach(y=>y(e,x))}},s=()=>e,c={setState:r,getState:s,getInitialState:()=>u,subscribe:f=>(n.add(f),()=>n.delete(f))},u=e=t(r,s,c);return c},tA=(t=>t?pb(t):pb),nA=t=>t;function rA(t,e=nA){const n=dt.useSyncExternalStore(t.subscribe,dt.useCallback(()=>e(t.getState()),[t,e]),dt.useCallback(()=>e(t.getInitialState()),[t,e]));return dt.useDebugValue(n),n}const mb=t=>{const e=tA(t),n=r=>rA(e,r);return Object.assign(n,e),n},Ff=(t=>t?mb(t):mb);function sA(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var i;const o=u=>u===null?null:JSON.parse(u,void 0),c=(i=n.getItem(s))!=null?i:null;return c instanceof Promise?c.then(o):o(c)},setItem:(s,i)=>n.setItem(s,JSON.stringify(i,void 0)),removeItem:s=>n.removeItem(s)}}const Gm=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return Gm(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return Gm(r)(n)}}}},iA=(t,e)=>(n,r,s)=>{let i={storage:sA(()=>window.localStorage),partialize:w=>w,version:0,merge:(w,j)=>({...j,...w}),...e},o=!1,c=0;const u=new Set,f=new Set;let p=i.storage;if(!p)return t((...w)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...w)},r,s);const m=()=>{const w=i.partialize({...r()});return p.setItem(i.name,{state:w,version:i.version})},x=s.setState;s.setState=(w,j)=>(x(w,j),m());const y=t((...w)=>(n(...w),m()),r,s);s.getInitialState=()=>y;let v;const k=()=>{var w,j;if(!p)return;const C=++c;o=!1,u.forEach(A=>{var M;return A((M=r())!=null?M:y)});const T=((j=i.onRehydrateStorage)==null?void 0:j.call(i,(w=r())!=null?w:y))||void 0;return Gm(p.getItem.bind(p))(i.name).then(A=>{if(A)if(typeof A.version=="number"&&A.version!==i.version){if(i.migrate){const M=i.migrate(A.state,A.version);return M instanceof Promise?M.then(P=>[!0,P]):[!0,M]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,A.state];return[!1,void 0]}).then(A=>{var M;if(C!==c)return;const[P,F]=A;if(v=i.merge(F,(M=r())!=null?M:y),n(v,!0),P)return m()}).then(()=>{C===c&&(T==null||T(v,void 0),v=r(),o=!0,f.forEach(A=>A(v)))}).catch(A=>{C===c&&(T==null||T(void 0,A))})};return s.persist={setOptions:w=>{i={...i,...w},w.storage&&(p=w.storage)},clearStorage:()=>{p==null||p.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>k(),hasHydrated:()=>o,onHydrate:w=>(u.add(w),()=>{u.delete(w)}),onFinishHydration:w=>(f.add(w),()=>{f.delete(w)})},i.skipHydration||k(),v||y},Ek=iA;function Tk(t,e){return function(){return t.apply(e,arguments)}}const{toString:oA}=Object.prototype,{getPrototypeOf:s0}=Object,{iterator:$f,toStringTag:Ak}=Symbol,Vf=(t=>e=>{const n=oA.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Jr=t=>(t=t.toLowerCase(),e=>Vf(e)===t),Uf=t=>e=>typeof e===t,{isArray:Ua}=Array,Aa=Uf("undefined");function Mc(t){return t!==null&&!Aa(t)&&t.constructor!==null&&!Aa(t.constructor)&&nr(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Mk=Jr("ArrayBuffer");function aA(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&Mk(t.buffer),e}const lA=Uf("string"),nr=Uf("function"),Rk=Uf("number"),Rc=t=>t!==null&&typeof t=="object",cA=t=>t===!0||t===!1,bu=t=>{if(Vf(t)!=="object")return!1;const e=s0(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Ak in t)&&!($f in t)},dA=t=>{if(!Rc(t)||Mc(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},uA=Jr("Date"),fA=Jr("File"),hA=Jr("Blob"),pA=Jr("FileList"),mA=t=>Rc(t)&&nr(t.pipe),gA=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||nr(t.append)&&((e=Vf(t))==="formdata"||e==="object"&&nr(t.toString)&&t.toString()==="[object FormData]"))},xA=Jr("URLSearchParams"),[yA,vA,bA,wA]=["ReadableStream","Request","Response","Headers"].map(Jr),kA=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Oc(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,s;if(typeof t!="object"&&(t=[t]),Ua(t))for(r=0,s=t.length;r<s;r++)e.call(null,t[r],r,t);else{if(Mc(t))return;const i=n?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let c;for(r=0;r<o;r++)c=i[r],e.call(null,t[c],c,t)}}function Ok(t,e){if(Mc(t))return null;e=e.toLowerCase();const n=Object.keys(t);let r=n.length,s;for(;r-- >0;)if(s=n[r],e===s.toLowerCase())return s;return null}const ho=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,_k=t=>!Aa(t)&&t!==ho;function Jm(){const{caseless:t,skipUndefined:e}=_k(this)&&this||{},n={},r=(s,i)=>{if(i==="__proto__"||i==="constructor"||i==="prototype")return;const o=t&&Ok(n,i)||i;bu(n[o])&&bu(s)?n[o]=Jm(n[o],s):bu(s)?n[o]=Jm({},s):Ua(s)?n[o]=s.slice():(!e||!Aa(s))&&(n[o]=s)};for(let s=0,i=arguments.length;s<i;s++)arguments[s]&&Oc(arguments[s],r);return n}const NA=(t,e,n,{allOwnKeys:r}={})=>(Oc(e,(s,i)=>{n&&nr(s)?Object.defineProperty(t,i,{value:Tk(s,n),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(t,i,{value:s,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:r}),t),jA=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),SA=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),Object.defineProperty(t.prototype,"constructor",{value:t,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},CA=(t,e,n,r)=>{let s,i,o;const c={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),i=s.length;i-- >0;)o=s[i],(!r||r(o,t,e))&&!c[o]&&(e[o]=t[o],c[o]=!0);t=n!==!1&&s0(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},EA=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},TA=t=>{if(!t)return null;if(Ua(t))return t;let e=t.length;if(!Rk(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},AA=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&s0(Uint8Array)),MA=(t,e)=>{const r=(t&&t[$f]).call(t);let s;for(;(s=r.next())&&!s.done;){const i=s.value;e.call(t,i[0],i[1])}},RA=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},OA=Jr("HTMLFormElement"),_A=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),gb=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),PA=Jr("RegExp"),Pk=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Oc(n,(s,i)=>{let o;(o=e(s,i,t))!==!1&&(r[i]=o||s)}),Object.defineProperties(t,r)},IA=t=>{Pk(t,(e,n)=>{if(nr(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(nr(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},DA=(t,e)=>{const n={},r=s=>{s.forEach(i=>{n[i]=!0})};return Ua(t)?r(t):r(String(t).split(e)),n},LA=()=>{},zA=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function BA(t){return!!(t&&nr(t.append)&&t[Ak]==="FormData"&&t[$f])}const FA=t=>{const e=new Array(10),n=(r,s)=>{if(Rc(r)){if(e.indexOf(r)>=0)return;if(Mc(r))return r;if(!("toJSON"in r)){e[s]=r;const i=Ua(r)?[]:{};return Oc(r,(o,c)=>{const u=n(o,s+1);!Aa(u)&&(i[c]=u)}),e[s]=void 0,i}}return r};return n(t,0)},$A=Jr("AsyncFunction"),VA=t=>t&&(Rc(t)||nr(t))&&nr(t.then)&&nr(t.catch),Ik=((t,e)=>t?setImmediate:e?((n,r)=>(ho.addEventListener("message",({source:s,data:i})=>{s===ho&&i===n&&r.length&&r.shift()()},!1),s=>{r.push(s),ho.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",nr(ho.postMessage)),UA=typeof queueMicrotask<"u"?queueMicrotask.bind(ho):typeof process<"u"&&process.nextTick||Ik,HA=t=>t!=null&&nr(t[$f]),ee={isArray:Ua,isArrayBuffer:Mk,isBuffer:Mc,isFormData:gA,isArrayBufferView:aA,isString:lA,isNumber:Rk,isBoolean:cA,isObject:Rc,isPlainObject:bu,isEmptyObject:dA,isReadableStream:yA,isRequest:vA,isResponse:bA,isHeaders:wA,isUndefined:Aa,isDate:uA,isFile:fA,isBlob:hA,isRegExp:PA,isFunction:nr,isStream:mA,isURLSearchParams:xA,isTypedArray:AA,isFileList:pA,forEach:Oc,merge:Jm,extend:NA,trim:kA,stripBOM:jA,inherits:SA,toFlatObject:CA,kindOf:Vf,kindOfTest:Jr,endsWith:EA,toArray:TA,forEachEntry:MA,matchAll:RA,isHTMLForm:OA,hasOwnProperty:gb,hasOwnProp:gb,reduceDescriptors:Pk,freezeMethods:IA,toObjectSet:DA,toCamelCase:_A,noop:LA,toFiniteNumber:zA,findKey:Ok,global:ho,isContextDefined:_k,isSpecCompliantForm:BA,toJSONObject:FA,isAsyncFn:$A,isThenable:VA,setImmediate:Ik,asap:UA,isIterable:HA};let Ge=class Dk extends Error{static from(e,n,r,s,i,o){const c=new Dk(e.message,n||e.code,r,s,i);return c.cause=e,c.name=e.name,o&&Object.assign(c,o),c}constructor(e,n,r,s,i){super(e),this.name="AxiosError",this.isAxiosError=!0,n&&(this.code=n),r&&(this.config=r),s&&(this.request=s),i&&(this.response=i,this.status=i.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ee.toJSONObject(this.config),code:this.code,status:this.status}}};Ge.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE";Ge.ERR_BAD_OPTION="ERR_BAD_OPTION";Ge.ECONNABORTED="ECONNABORTED";Ge.ETIMEDOUT="ETIMEDOUT";Ge.ERR_NETWORK="ERR_NETWORK";Ge.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS";Ge.ERR_DEPRECATED="ERR_DEPRECATED";Ge.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE";Ge.ERR_BAD_REQUEST="ERR_BAD_REQUEST";Ge.ERR_CANCELED="ERR_CANCELED";Ge.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT";Ge.ERR_INVALID_URL="ERR_INVALID_URL";const WA=null;function Zm(t){return ee.isPlainObject(t)||ee.isArray(t)}function Lk(t){return ee.endsWith(t,"[]")?t.slice(0,-2):t}function xb(t,e,n){return t?t.concat(e).map(function(s,i){return s=Lk(s),!n&&i?"["+s+"]":s}).join(n?".":""):e}function qA(t){return ee.isArray(t)&&!t.some(Zm)}const KA=ee.toFlatObject(ee,{},null,function(e){return/^is[A-Z]/.test(e)});function Hf(t,e,n){if(!ee.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=ee.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(k,w){return!ee.isUndefined(w[k])});const r=n.metaTokens,s=n.visitor||p,i=n.dots,o=n.indexes,u=(n.Blob||typeof Blob<"u"&&Blob)&&ee.isSpecCompliantForm(e);if(!ee.isFunction(s))throw new TypeError("visitor must be a function");function f(v){if(v===null)return"";if(ee.isDate(v))return v.toISOString();if(ee.isBoolean(v))return v.toString();if(!u&&ee.isBlob(v))throw new Ge("Blob is not supported. Use a Buffer instead.");return ee.isArrayBuffer(v)||ee.isTypedArray(v)?u&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function p(v,k,w){let j=v;if(v&&!w&&typeof v=="object"){if(ee.endsWith(k,"{}"))k=r?k:k.slice(0,-2),v=JSON.stringify(v);else if(ee.isArray(v)&&qA(v)||(ee.isFileList(v)||ee.endsWith(k,"[]"))&&(j=ee.toArray(v)))return k=Lk(k),j.forEach(function(T,A){!(ee.isUndefined(T)||T===null)&&e.append(o===!0?xb([k],A,i):o===null?k:k+"[]",f(T))}),!1}return Zm(v)?!0:(e.append(xb(w,k,i),f(v)),!1)}const m=[],x=Object.assign(KA,{defaultVisitor:p,convertValue:f,isVisitable:Zm});function y(v,k){if(!ee.isUndefined(v)){if(m.indexOf(v)!==-1)throw Error("Circular reference detected in "+k.join("."));m.push(v),ee.forEach(v,function(j,C){(!(ee.isUndefined(j)||j===null)&&s.call(e,j,ee.isString(C)?C.trim():C,k,x))===!0&&y(j,k?k.concat(C):[C])}),m.pop()}}if(!ee.isObject(t))throw new TypeError("data must be an object");return y(t),e}function yb(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function i0(t,e){this._pairs=[],t&&Hf(t,this,e)}const zk=i0.prototype;zk.append=function(e,n){this._pairs.push([e,n])};zk.toString=function(e){const n=e?function(r){return e.call(this,r,yb)}:yb;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function GA(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Bk(t,e,n){if(!e)return t;const r=n&&n.encode||GA,s=ee.isFunction(n)?{serialize:n}:n,i=s&&s.serialize;let o;if(i?o=i(e,s):o=ee.isURLSearchParams(e)?e.toString():new i0(e,s).toString(r),o){const c=t.indexOf("#");c!==-1&&(t=t.slice(0,c)),t+=(t.indexOf("?")===-1?"?":"&")+o}return t}class vb{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){ee.forEach(this.handlers,function(r){r!==null&&e(r)})}}const o0={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1,legacyInterceptorReqResOrdering:!0},JA=typeof URLSearchParams<"u"?URLSearchParams:i0,ZA=typeof FormData<"u"?FormData:null,QA=typeof Blob<"u"?Blob:null,YA={isBrowser:!0,classes:{URLSearchParams:JA,FormData:ZA,Blob:QA},protocols:["http","https","file","blob","url","data"]},a0=typeof window<"u"&&typeof document<"u",Qm=typeof navigator=="object"&&navigator||void 0,XA=a0&&(!Qm||["ReactNative","NativeScript","NS"].indexOf(Qm.product)<0),e4=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",t4=a0&&window.location.href||"http://localhost",n4=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:a0,hasStandardBrowserEnv:XA,hasStandardBrowserWebWorkerEnv:e4,navigator:Qm,origin:t4},Symbol.toStringTag,{value:"Module"})),An={...n4,...YA};function r4(t,e){return Hf(t,new An.classes.URLSearchParams,{visitor:function(n,r,s,i){return An.isNode&&ee.isBuffer(n)?(this.append(r,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...e})}function s4(t){return ee.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function i4(t){const e={},n=Object.keys(t);let r;const s=n.length;let i;for(r=0;r<s;r++)i=n[r],e[i]=t[i];return e}function Fk(t){function e(n,r,s,i){let o=n[i++];if(o==="__proto__")return!0;const c=Number.isFinite(+o),u=i>=n.length;return o=!o&&ee.isArray(s)?s.length:o,u?(ee.hasOwnProp(s,o)?s[o]=[s[o],r]:s[o]=r,!c):((!s[o]||!ee.isObject(s[o]))&&(s[o]=[]),e(n,r,s[o],i)&&ee.isArray(s[o])&&(s[o]=i4(s[o])),!c)}if(ee.isFormData(t)&&ee.isFunction(t.entries)){const n={};return ee.forEachEntry(t,(r,s)=>{e(s4(r),s,n,0)}),n}return null}function o4(t,e,n){if(ee.isString(t))try{return(e||JSON.parse)(t),ee.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const _c={transitional:o0,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,i=ee.isObject(e);if(i&&ee.isHTMLForm(e)&&(e=new FormData(e)),ee.isFormData(e))return s?JSON.stringify(Fk(e)):e;if(ee.isArrayBuffer(e)||ee.isBuffer(e)||ee.isStream(e)||ee.isFile(e)||ee.isBlob(e)||ee.isReadableStream(e))return e;if(ee.isArrayBufferView(e))return e.buffer;if(ee.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let c;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return r4(e,this.formSerializer).toString();if((c=ee.isFileList(e))||r.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return Hf(c?{"files[]":e}:e,u&&new u,this.formSerializer)}}return i||s?(n.setContentType("application/json",!1),o4(e)):e}],transformResponse:[function(e){const n=this.transitional||_c.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(ee.isResponse(e)||ee.isReadableStream(e))return e;if(e&&ee.isString(e)&&(r&&!this.responseType||s)){const o=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(e,this.parseReviver)}catch(c){if(o)throw c.name==="SyntaxError"?Ge.from(c,Ge.ERR_BAD_RESPONSE,this,null,this.response):c}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:An.classes.FormData,Blob:An.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ee.forEach(["delete","get","head","post","put","patch"],t=>{_c.headers[t]={}});const a4=ee.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),l4=t=>{const e={};let n,r,s;return t&&t.split(`
`).forEach(function(o){s=o.indexOf(":"),n=o.substring(0,s).trim().toLowerCase(),r=o.substring(s+1).trim(),!(!n||e[n]&&a4[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},bb=Symbol("internals");function Pl(t){return t&&String(t).trim().toLowerCase()}function wu(t){return t===!1||t==null?t:ee.isArray(t)?t.map(wu):String(t)}function c4(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const d4=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Yp(t,e,n,r,s){if(ee.isFunction(r))return r.call(this,e,n);if(s&&(e=n),!!ee.isString(e)){if(ee.isString(r))return e.indexOf(r)!==-1;if(ee.isRegExp(r))return r.test(e)}}function u4(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function f4(t,e){const n=ee.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(s,i,o){return this[r].call(this,e,s,i,o)},configurable:!0})})}let rr=class{constructor(e){e&&this.set(e)}set(e,n,r){const s=this;function i(c,u,f){const p=Pl(u);if(!p)throw new Error("header name must be a non-empty string");const m=ee.findKey(s,p);(!m||s[m]===void 0||f===!0||f===void 0&&s[m]!==!1)&&(s[m||u]=wu(c))}const o=(c,u)=>ee.forEach(c,(f,p)=>i(f,p,u));if(ee.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(ee.isString(e)&&(e=e.trim())&&!d4(e))o(l4(e),n);else if(ee.isObject(e)&&ee.isIterable(e)){let c={},u,f;for(const p of e){if(!ee.isArray(p))throw TypeError("Object iterator must return a key-value pair");c[f=p[0]]=(u=c[f])?ee.isArray(u)?[...u,p[1]]:[u,p[1]]:p[1]}o(c,n)}else e!=null&&i(n,e,r);return this}get(e,n){if(e=Pl(e),e){const r=ee.findKey(this,e);if(r){const s=this[r];if(!n)return s;if(n===!0)return c4(s);if(ee.isFunction(n))return n.call(this,s,r);if(ee.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Pl(e),e){const r=ee.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||Yp(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let s=!1;function i(o){if(o=Pl(o),o){const c=ee.findKey(r,o);c&&(!n||Yp(r,r[c],c,n))&&(delete r[c],s=!0)}}return ee.isArray(e)?e.forEach(i):i(e),s}clear(e){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const i=n[r];(!e||Yp(this,this[i],i,e,!0))&&(delete this[i],s=!0)}return s}normalize(e){const n=this,r={};return ee.forEach(this,(s,i)=>{const o=ee.findKey(r,i);if(o){n[o]=wu(s),delete n[i];return}const c=e?u4(i):String(i).trim();c!==i&&delete n[i],n[c]=wu(s),r[c]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return ee.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=e&&ee.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(s=>r.set(s)),r}static accessor(e){const r=(this[bb]=this[bb]={accessors:{}}).accessors,s=this.prototype;function i(o){const c=Pl(o);r[c]||(f4(s,o),r[c]=!0)}return ee.isArray(e)?e.forEach(i):i(e),this}};rr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ee.reduceDescriptors(rr.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});ee.freezeMethods(rr);function Xp(t,e){const n=this||_c,r=e||n,s=rr.from(r.headers);let i=r.data;return ee.forEach(t,function(c){i=c.call(n,i,s.normalize(),e?e.status:void 0)}),s.normalize(),i}function $k(t){return!!(t&&t.__CANCEL__)}let Pc=class extends Ge{constructor(e,n,r){super(e??"canceled",Ge.ERR_CANCELED,n,r),this.name="CanceledError",this.__CANCEL__=!0}};function Vk(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new Ge("Request failed with status code "+n.status,[Ge.ERR_BAD_REQUEST,Ge.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function h4(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function p4(t,e){t=t||10;const n=new Array(t),r=new Array(t);let s=0,i=0,o;return e=e!==void 0?e:1e3,function(u){const f=Date.now(),p=r[i];o||(o=f),n[s]=u,r[s]=f;let m=i,x=0;for(;m!==s;)x+=n[m++],m=m%t;if(s=(s+1)%t,s===i&&(i=(i+1)%t),f-o<e)return;const y=p&&f-p;return y?Math.round(x*1e3/y):void 0}}function m4(t,e){let n=0,r=1e3/e,s,i;const o=(f,p=Date.now())=>{n=p,s=null,i&&(clearTimeout(i),i=null),t(...f)};return[(...f)=>{const p=Date.now(),m=p-n;m>=r?o(f,p):(s=f,i||(i=setTimeout(()=>{i=null,o(s)},r-m)))},()=>s&&o(s)]}const Ru=(t,e,n=3)=>{let r=0;const s=p4(50,250);return m4(i=>{const o=i.loaded,c=i.lengthComputable?i.total:void 0,u=o-r,f=s(u),p=o<=c;r=o;const m={loaded:o,total:c,progress:c?o/c:void 0,bytes:u,rate:f||void 0,estimated:f&&c&&p?(c-o)/f:void 0,event:i,lengthComputable:c!=null,[e?"download":"upload"]:!0};t(m)},n)},wb=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},kb=t=>(...e)=>ee.asap(()=>t(...e)),g4=An.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,An.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(An.origin),An.navigator&&/(msie|trident)/i.test(An.navigator.userAgent)):()=>!0,x4=An.hasStandardBrowserEnv?{write(t,e,n,r,s,i,o){if(typeof document>"u")return;const c=[`${t}=${encodeURIComponent(e)}`];ee.isNumber(n)&&c.push(`expires=${new Date(n).toUTCString()}`),ee.isString(r)&&c.push(`path=${r}`),ee.isString(s)&&c.push(`domain=${s}`),i===!0&&c.push("secure"),ee.isString(o)&&c.push(`SameSite=${o}`),document.cookie=c.join("; ")},read(t){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function y4(t){return typeof t!="string"?!1:/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function v4(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function Uk(t,e,n){let r=!y4(e);return t&&(r||n==!1)?v4(t,e):e}const Nb=t=>t instanceof rr?{...t}:t;function Co(t,e){e=e||{};const n={};function r(f,p,m,x){return ee.isPlainObject(f)&&ee.isPlainObject(p)?ee.merge.call({caseless:x},f,p):ee.isPlainObject(p)?ee.merge({},p):ee.isArray(p)?p.slice():p}function s(f,p,m,x){if(ee.isUndefined(p)){if(!ee.isUndefined(f))return r(void 0,f,m,x)}else return r(f,p,m,x)}function i(f,p){if(!ee.isUndefined(p))return r(void 0,p)}function o(f,p){if(ee.isUndefined(p)){if(!ee.isUndefined(f))return r(void 0,f)}else return r(void 0,p)}function c(f,p,m){if(m in e)return r(f,p);if(m in t)return r(void 0,f)}const u={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:c,headers:(f,p,m)=>s(Nb(f),Nb(p),m,!0)};return ee.forEach(Object.keys({...t,...e}),function(p){if(p==="__proto__"||p==="constructor"||p==="prototype")return;const m=ee.hasOwnProp(u,p)?u[p]:s,x=m(t[p],e[p],p);ee.isUndefined(x)&&m!==c||(n[p]=x)}),n}const Hk=t=>{const e=Co({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:i,headers:o,auth:c}=e;if(e.headers=o=rr.from(o),e.url=Bk(Uk(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),c&&o.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),ee.isFormData(n)){if(An.hasStandardBrowserEnv||An.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(ee.isFunction(n.getHeaders)){const u=n.getHeaders(),f=["content-type","content-length"];Object.entries(u).forEach(([p,m])=>{f.includes(p.toLowerCase())&&o.set(p,m)})}}if(An.hasStandardBrowserEnv&&(r&&ee.isFunction(r)&&(r=r(e)),r||r!==!1&&g4(e.url))){const u=s&&i&&x4.read(i);u&&o.set(s,u)}return e},b4=typeof XMLHttpRequest<"u",w4=b4&&function(t){return new Promise(function(n,r){const s=Hk(t);let i=s.data;const o=rr.from(s.headers).normalize();let{responseType:c,onUploadProgress:u,onDownloadProgress:f}=s,p,m,x,y,v;function k(){y&&y(),v&&v(),s.cancelToken&&s.cancelToken.unsubscribe(p),s.signal&&s.signal.removeEventListener("abort",p)}let w=new XMLHttpRequest;w.open(s.method.toUpperCase(),s.url,!0),w.timeout=s.timeout;function j(){if(!w)return;const T=rr.from("getAllResponseHeaders"in w&&w.getAllResponseHeaders()),M={data:!c||c==="text"||c==="json"?w.responseText:w.response,status:w.status,statusText:w.statusText,headers:T,config:t,request:w};Vk(function(F){n(F),k()},function(F){r(F),k()},M),w=null}"onloadend"in w?w.onloadend=j:w.onreadystatechange=function(){!w||w.readyState!==4||w.status===0&&!(w.responseURL&&w.responseURL.indexOf("file:")===0)||setTimeout(j)},w.onabort=function(){w&&(r(new Ge("Request aborted",Ge.ECONNABORTED,t,w)),w=null)},w.onerror=function(A){const M=A&&A.message?A.message:"Network Error",P=new Ge(M,Ge.ERR_NETWORK,t,w);P.event=A||null,r(P),w=null},w.ontimeout=function(){let A=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const M=s.transitional||o0;s.timeoutErrorMessage&&(A=s.timeoutErrorMessage),r(new Ge(A,M.clarifyTimeoutError?Ge.ETIMEDOUT:Ge.ECONNABORTED,t,w)),w=null},i===void 0&&o.setContentType(null),"setRequestHeader"in w&&ee.forEach(o.toJSON(),function(A,M){w.setRequestHeader(M,A)}),ee.isUndefined(s.withCredentials)||(w.withCredentials=!!s.withCredentials),c&&c!=="json"&&(w.responseType=s.responseType),f&&([x,v]=Ru(f,!0),w.addEventListener("progress",x)),u&&w.upload&&([m,y]=Ru(u),w.upload.addEventListener("progress",m),w.upload.addEventListener("loadend",y)),(s.cancelToken||s.signal)&&(p=T=>{w&&(r(!T||T.type?new Pc(null,t,w):T),w.abort(),w=null)},s.cancelToken&&s.cancelToken.subscribe(p),s.signal&&(s.signal.aborted?p():s.signal.addEventListener("abort",p)));const C=h4(s.url);if(C&&An.protocols.indexOf(C)===-1){r(new Ge("Unsupported protocol "+C+":",Ge.ERR_BAD_REQUEST,t));return}w.send(i||null)})},k4=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,s;const i=function(f){if(!s){s=!0,c();const p=f instanceof Error?f:this.reason;r.abort(p instanceof Ge?p:new Pc(p instanceof Error?p.message:p))}};let o=e&&setTimeout(()=>{o=null,i(new Ge(`timeout of ${e}ms exceeded`,Ge.ETIMEDOUT))},e);const c=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(f=>{f.unsubscribe?f.unsubscribe(i):f.removeEventListener("abort",i)}),t=null)};t.forEach(f=>f.addEventListener("abort",i));const{signal:u}=r;return u.unsubscribe=()=>ee.asap(c),u}},N4=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,s;for(;r<n;)s=r+e,yield t.slice(r,s),r=s},j4=async function*(t,e){for await(const n of S4(t))yield*N4(n,e)},S4=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},jb=(t,e,n,r)=>{const s=j4(t,e);let i=0,o,c=u=>{o||(o=!0,r&&r(u))};return new ReadableStream({async pull(u){try{const{done:f,value:p}=await s.next();if(f){c(),u.close();return}let m=p.byteLength;if(n){let x=i+=m;n(x)}u.enqueue(new Uint8Array(p))}catch(f){throw c(f),f}},cancel(u){return c(u),s.return()}},{highWaterMark:2})},Sb=64*1024,{isFunction:Zd}=ee,C4=(({Request:t,Response:e})=>({Request:t,Response:e}))(ee.global),{ReadableStream:Cb,TextEncoder:Eb}=ee.global,Tb=(t,...e)=>{try{return!!t(...e)}catch{return!1}},E4=t=>{t=ee.merge.call({skipUndefined:!0},C4,t);const{fetch:e,Request:n,Response:r}=t,s=e?Zd(e):typeof fetch=="function",i=Zd(n),o=Zd(r);if(!s)return!1;const c=s&&Zd(Cb),u=s&&(typeof Eb=="function"?(v=>k=>v.encode(k))(new Eb):async v=>new Uint8Array(await new n(v).arrayBuffer())),f=i&&c&&Tb(()=>{let v=!1;const k=new n(An.origin,{body:new Cb,method:"POST",get duplex(){return v=!0,"half"}}).headers.has("Content-Type");return v&&!k}),p=o&&c&&Tb(()=>ee.isReadableStream(new r("").body)),m={stream:p&&(v=>v.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(v=>{!m[v]&&(m[v]=(k,w)=>{let j=k&&k[v];if(j)return j.call(k);throw new Ge(`Response type '${v}' is not supported`,Ge.ERR_NOT_SUPPORT,w)})});const x=async v=>{if(v==null)return 0;if(ee.isBlob(v))return v.size;if(ee.isSpecCompliantForm(v))return(await new n(An.origin,{method:"POST",body:v}).arrayBuffer()).byteLength;if(ee.isArrayBufferView(v)||ee.isArrayBuffer(v))return v.byteLength;if(ee.isURLSearchParams(v)&&(v=v+""),ee.isString(v))return(await u(v)).byteLength},y=async(v,k)=>{const w=ee.toFiniteNumber(v.getContentLength());return w??x(k)};return async v=>{let{url:k,method:w,data:j,signal:C,cancelToken:T,timeout:A,onDownloadProgress:M,onUploadProgress:P,responseType:F,headers:ne,withCredentials:O="same-origin",fetchOptions:X}=Hk(v),le=e||fetch;F=F?(F+"").toLowerCase():"text";let z=k4([C,T&&T.toAbortSignal()],A),te=null;const ie=z&&z.unsubscribe&&(()=>{z.unsubscribe()});let oe;try{if(P&&f&&w!=="get"&&w!=="head"&&(oe=await y(ne,j))!==0){let D=new n(k,{method:"POST",body:j,duplex:"half"}),G;if(ee.isFormData(j)&&(G=D.headers.get("content-type"))&&ne.setContentType(G),D.body){const[Ne,Ae]=wb(oe,Ru(kb(P)));j=jb(D.body,Sb,Ne,Ae)}}ee.isString(O)||(O=O?"include":"omit");const W=i&&"credentials"in n.prototype,q={...X,signal:z,method:w.toUpperCase(),headers:ne.normalize().toJSON(),body:j,duplex:"half",credentials:W?O:void 0};te=i&&new n(k,q);let J=await(i?le(te,X):le(k,q));const fe=p&&(F==="stream"||F==="response");if(p&&(M||fe&&ie)){const D={};["status","statusText","headers"].forEach(Ue=>{D[Ue]=J[Ue]});const G=ee.toFiniteNumber(J.headers.get("content-length")),[Ne,Ae]=M&&wb(G,Ru(kb(M),!0))||[];J=new r(jb(J.body,Sb,Ne,()=>{Ae&&Ae(),ie&&ie()}),D)}F=F||"text";let ce=await m[ee.findKey(m,F)||"text"](J,v);return!fe&&ie&&ie(),await new Promise((D,G)=>{Vk(D,G,{data:ce,headers:rr.from(J.headers),status:J.status,statusText:J.statusText,config:v,request:te})})}catch(W){throw ie&&ie(),W&&W.name==="TypeError"&&/Load failed|fetch/i.test(W.message)?Object.assign(new Ge("Network Error",Ge.ERR_NETWORK,v,te,W&&W.response),{cause:W.cause||W}):Ge.from(W,W&&W.code,v,te,W&&W.response)}}},T4=new Map,Wk=t=>{let e=t&&t.env||{};const{fetch:n,Request:r,Response:s}=e,i=[r,s,n];let o=i.length,c=o,u,f,p=T4;for(;c--;)u=i[c],f=p.get(u),f===void 0&&p.set(u,f=c?new Map:E4(e)),p=f;return f};Wk();const l0={http:WA,xhr:w4,fetch:{get:Wk}};ee.forEach(l0,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const Ab=t=>`- ${t}`,A4=t=>ee.isFunction(t)||t===null||t===!1;function M4(t,e){t=ee.isArray(t)?t:[t];const{length:n}=t;let r,s;const i={};for(let o=0;o<n;o++){r=t[o];let c;if(s=r,!A4(r)&&(s=l0[(c=String(r)).toLowerCase()],s===void 0))throw new Ge(`Unknown adapter '${c}'`);if(s&&(ee.isFunction(s)||(s=s.get(e))))break;i[c||"#"+o]=s}if(!s){const o=Object.entries(i).map(([u,f])=>`adapter ${u} `+(f===!1?"is not supported by the environment":"is not available in the build"));let c=n?o.length>1?`since :
`+o.map(Ab).join(`
`):" "+Ab(o[0]):"as no adapter specified";throw new Ge("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return s}const qk={getAdapter:M4,adapters:l0};function em(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Pc(null,t)}function Mb(t){return em(t),t.headers=rr.from(t.headers),t.data=Xp.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),qk.getAdapter(t.adapter||_c.adapter,t)(t).then(function(r){return em(t),r.data=Xp.call(t,t.transformResponse,r),r.headers=rr.from(r.headers),r},function(r){return $k(r)||(em(t),r&&r.response&&(r.response.data=Xp.call(t,t.transformResponse,r.response),r.response.headers=rr.from(r.response.headers))),Promise.reject(r)})}const Kk="1.13.5",Wf={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Wf[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const Rb={};Wf.transitional=function(e,n,r){function s(i,o){return"[Axios v"+Kk+"] Transitional option '"+i+"'"+o+(r?". "+r:"")}return(i,o,c)=>{if(e===!1)throw new Ge(s(o," has been removed"+(n?" in "+n:"")),Ge.ERR_DEPRECATED);return n&&!Rb[o]&&(Rb[o]=!0,console.warn(s(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(i,o,c):!0}};Wf.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function R4(t,e,n){if(typeof t!="object")throw new Ge("options must be an object",Ge.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let s=r.length;for(;s-- >0;){const i=r[s],o=e[i];if(o){const c=t[i],u=c===void 0||o(c,i,t);if(u!==!0)throw new Ge("option "+i+" must be "+u,Ge.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Ge("Unknown option "+i,Ge.ERR_BAD_OPTION)}}const ku={assertOptions:R4,validators:Wf},Cr=ku.validators;let vo=class{constructor(e){this.defaults=e||{},this.interceptors={request:new vb,response:new vb}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{r.stack?i&&!String(r.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+i):r.stack=i}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Co(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:i}=n;r!==void 0&&ku.assertOptions(r,{silentJSONParsing:Cr.transitional(Cr.boolean),forcedJSONParsing:Cr.transitional(Cr.boolean),clarifyTimeoutError:Cr.transitional(Cr.boolean),legacyInterceptorReqResOrdering:Cr.transitional(Cr.boolean)},!1),s!=null&&(ee.isFunction(s)?n.paramsSerializer={serialize:s}:ku.assertOptions(s,{encode:Cr.function,serialize:Cr.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),ku.assertOptions(n,{baseUrl:Cr.spelling("baseURL"),withXsrfToken:Cr.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=i&&ee.merge(i.common,i[n.method]);i&&ee.forEach(["delete","get","head","post","put","patch","common"],v=>{delete i[v]}),n.headers=rr.concat(o,i);const c=[];let u=!0;this.interceptors.request.forEach(function(k){if(typeof k.runWhen=="function"&&k.runWhen(n)===!1)return;u=u&&k.synchronous;const w=n.transitional||o0;w&&w.legacyInterceptorReqResOrdering?c.unshift(k.fulfilled,k.rejected):c.push(k.fulfilled,k.rejected)});const f=[];this.interceptors.response.forEach(function(k){f.push(k.fulfilled,k.rejected)});let p,m=0,x;if(!u){const v=[Mb.bind(this),void 0];for(v.unshift(...c),v.push(...f),x=v.length,p=Promise.resolve(n);m<x;)p=p.then(v[m++],v[m++]);return p}x=c.length;let y=n;for(;m<x;){const v=c[m++],k=c[m++];try{y=v(y)}catch(w){k.call(this,w);break}}try{p=Mb.call(this,y)}catch(v){return Promise.reject(v)}for(m=0,x=f.length;m<x;)p=p.then(f[m++],f[m++]);return p}getUri(e){e=Co(this.defaults,e);const n=Uk(e.baseURL,e.url,e.allowAbsoluteUrls);return Bk(n,e.params,e.paramsSerializer)}};ee.forEach(["delete","get","head","options"],function(e){vo.prototype[e]=function(n,r){return this.request(Co(r||{},{method:e,url:n,data:(r||{}).data}))}});ee.forEach(["post","put","patch"],function(e){function n(r){return function(i,o,c){return this.request(Co(c||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}vo.prototype[e]=n(),vo.prototype[e+"Form"]=n(!0)});let O4=class Gk{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const r=this;this.promise.then(s=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](s);r._listeners=null}),this.promise.then=s=>{let i;const o=new Promise(c=>{r.subscribe(c),i=c}).then(s);return o.cancel=function(){r.unsubscribe(i)},o},e(function(i,o,c){r.reason||(r.reason=new Pc(i,o,c),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new Gk(function(s){e=s}),cancel:e}}};function _4(t){return function(n){return t.apply(null,n)}}function P4(t){return ee.isObject(t)&&t.isAxiosError===!0}const Ym={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Ym).forEach(([t,e])=>{Ym[e]=t});function Jk(t){const e=new vo(t),n=Tk(vo.prototype.request,e);return ee.extend(n,vo.prototype,e,{allOwnKeys:!0}),ee.extend(n,e,null,{allOwnKeys:!0}),n.create=function(s){return Jk(Co(t,s))},n}const Bt=Jk(_c);Bt.Axios=vo;Bt.CanceledError=Pc;Bt.CancelToken=O4;Bt.isCancel=$k;Bt.VERSION=Kk;Bt.toFormData=Hf;Bt.AxiosError=Ge;Bt.Cancel=Bt.CanceledError;Bt.all=function(e){return Promise.all(e)};Bt.spread=_4;Bt.isAxiosError=P4;Bt.mergeConfig=Co;Bt.AxiosHeaders=rr;Bt.formToJSON=t=>Fk(ee.isHTMLForm(t)?new FormData(t):t);Bt.getAdapter=qk.getAdapter;Bt.HttpStatusCode=Ym;Bt.default=Bt;const{Axios:ZB,AxiosError:QB,CanceledError:YB,isCancel:XB,CancelToken:e8,VERSION:t8,all:n8,Cancel:r8,isAxiosError:s8,spread:i8,toFormData:o8,AxiosHeaders:a8,HttpStatusCode:l8,formToJSON:c8,getAdapter:d8,mergeConfig:u8}=Bt,Zk=window.location.hostname==="localhost"?"http://localhost:5001/api/v1":"https://bukizz.in/api/v1",$e=Bt.create({baseURL:Zk,headers:{"Content-Type":"application/json"},timeout:15e3});function Qk(){var t,e;try{const n=localStorage.getItem("bukizz-auth");if(!n)return{accessToken:null,refreshToken:null};const r=JSON.parse(n);return{accessToken:((t=r==null?void 0:r.state)==null?void 0:t.accessToken)||null,refreshToken:((e=r==null?void 0:r.state)==null?void 0:e.refreshToken)||null}}catch{return{accessToken:null,refreshToken:null}}}function I4(t,e){try{const n=localStorage.getItem("bukizz-auth");if(!n)return;const r=JSON.parse(n);r.state.accessToken=t,r.state.refreshToken=e,localStorage.setItem("bukizz-auth",JSON.stringify(r))}catch{}}function D4(){try{const t=localStorage.getItem("bukizz-auth");if(!t)return;const e=JSON.parse(t);e.state={...e.state,user:null,accessToken:null,refreshToken:null,isAuthenticated:!1},localStorage.setItem("bukizz-auth",JSON.stringify(e))}catch{localStorage.removeItem("bukizz-auth")}}$e.interceptors.request.use(t=>{const{accessToken:e}=Qk();e&&(t.headers.Authorization=`Bearer ${e}`);const n=localStorage.getItem("activeWarehouseId");return n&&(t.headers["x-warehouse-id"]=n),t},t=>Promise.reject(t));let tm=!1,Xm=[];const Ob=(t,e=null)=>{Xm.forEach(({resolve:n,reject:r})=>{t?r(t):n(e)}),Xm=[]};$e.interceptors.response.use(t=>t,async t=>{var n,r,s,i;const e=t.config;if(((n=t.response)==null?void 0:n.status)!==401||e._retry||(r=e.url)!=null&&r.includes("/auth/refresh-token")||(s=e.url)!=null&&s.includes("/auth/login"))return Promise.reject(t);if(tm)return new Promise((o,c)=>{Xm.push({resolve:o,reject:c})}).then(o=>(e.headers.Authorization=`Bearer ${o}`,$e(e))).catch(o=>Promise.reject(o));e._retry=!0,tm=!0;try{const{refreshToken:o}=Qk();if(!o)throw new Error("No refresh token available");const c=await Bt.post(`${Zk}/auth/refresh-token`,{refreshToken:o}),u=((i=c.data)==null?void 0:i.data)||c.data,{accessToken:f,refreshToken:p}=u;return I4(f,p),$e.defaults.headers.common.Authorization=`Bearer ${f}`,e.headers.Authorization=`Bearer ${f}`,Ob(null,f),$e(e)}catch(o){return Ob(o,null),D4(),!window.location.pathname.startsWith("/login")&&!window.location.pathname.startsWith("/register")&&(window.location.href="/login"),Promise.reject(o)}finally{tm=!1}});const Zt=Ff(Ek((t,e)=>({user:null,accessToken:null,refreshToken:null,isOnboarding:!1,isInitialized:!1,error:null,verificationStatus:null,dataStatus:null,warehouseStatus:null,isVerificationChecked:!1,initialize:async()=>{var r;const{accessToken:n}=e();if(!n){t({isInitialized:!0});return}try{const s=await $e.get("/auth/me"),i=((r=s.data)==null?void 0:r.data)||s.data,o=i.user||i;t({user:o,isInitialized:!0})}catch{t({user:null,accessToken:null,refreshToken:null,isInitialized:!0})}},login:async(n,r)=>{var s,i,o,c,u;t({error:null});try{const f=await $e.post("/auth/login-retailer",{email:n,password:r}),p=((s=f.data)==null?void 0:s.data)||f.data,{user:m,accessToken:x,refreshToken:y}=p;return t({user:m,accessToken:x,refreshToken:y,isOnboarding:!1,isInitialized:!0,error:null}),{success:!0}}catch(f){const p=((o=(i=f.response)==null?void 0:i.data)==null?void 0:o.message)||((u=(c=f.response)==null?void 0:c.data)==null?void 0:u.error)||"Login failed. Please check your credentials.";return t({error:p}),{success:!1,error:p}}},checkVerificationStatus:async()=>{var n,r,s;try{const o=(n=(await $e.get("/retailer/verification-status")).data)==null?void 0:n.data;return t({verificationStatus:o}),{success:!0,data:o}}catch(i){return{success:!1,error:((s=(r=i.response)==null?void 0:r.data)==null?void 0:s.message)||"Failed to check verification status."}}},checkDataStatus:async()=>{var n,r,s;try{const o=(n=(await $e.get("/retailer/data/status")).data)==null?void 0:n.data;return t({dataStatus:o}),{success:!0,data:o}}catch(i){return{success:!1,error:((s=(r=i.response)==null?void 0:r.data)==null?void 0:s.message)||"Failed to check data status."}}},checkWarehouseStatus:async()=>{var n,r,s,i;try{const{user:o}=e(),c=(o==null?void 0:o.id)||(o==null?void 0:o._id);if(!c)return{success:!1,error:"No retailer ID found."};const f=((r=(n=(await $e.get(`/warehouses/retailer/${c}`)).data)==null?void 0:n.data)==null?void 0:r.warehouses)||[],p={hasWarehouse:f.length>0,warehouses:f};return t({warehouseStatus:p}),{success:!0,data:p}}catch(o){return{success:!1,error:((i=(s=o.response)==null?void 0:s.data)==null?void 0:i.message)||"Failed to check warehouse status."}}},runPostLoginChecks:async()=>{t({isVerificationChecked:!1});const n=await e().checkVerificationStatus(),r=n.success?n.data:null,s=r==null?void 0:r.status,i=(r==null?void 0:r.message)||n.error;if(s==="authorized")return t({isVerificationChecked:!0}),{destination:"dashboard"};const o=await e().checkDataStatus();if(!o.success)return t({isOnboarding:!0,isVerificationChecked:!0}),{destination:"onboarding",missingFields:[],message:i||"Please complete your profile."};const{isComplete:c,missingFields:u}=o.data;if(!c)return t({isOnboarding:!0,isVerificationChecked:!0}),{destination:"onboarding",missingFields:u,message:i};const f=await e().checkWarehouseStatus();return!f.success||!f.data.hasWarehouse?(t({isOnboarding:!0,isVerificationChecked:!0}),{destination:"onboarding-warehouse",message:i}):(t({isVerificationChecked:!0}),{destination:"pending",message:i})},resetVerificationState:()=>t({verificationStatus:null,dataStatus:null,warehouseStatus:null,isVerificationChecked:!1}),register:async(n,r,s,i)=>{var o,c,u,f,p;t({error:null});try{const m=await $e.post("/auth/register-retailer",{fullName:n,email:r,password:s,phone:i}),x=((o=m.data)==null?void 0:o.data)||m.data,{user:y,accessToken:v,refreshToken:k}=x;return v&&k&&t({user:y,accessToken:v,refreshToken:k,isInitialized:!0,error:null}),{success:!0,user:y}}catch(m){const x=((u=(c=m.response)==null?void 0:c.data)==null?void 0:u.message)||((p=(f=m.response)==null?void 0:f.data)==null?void 0:p.error)||"Registration failed. Please try again.";return t({error:x}),{success:!1,error:x}}},sendOtp:async(n,r,s,i)=>{var o,c,u,f;t({error:null});try{return await $e.post("/auth/send-retailer-otp",{email:r,password:s,fullName:n,phone:i||void 0}),{success:!0}}catch(p){const m=((c=(o=p.response)==null?void 0:o.data)==null?void 0:c.message)||((f=(u=p.response)==null?void 0:u.data)==null?void 0:f.error)||"Failed to send OTP. Please try again.";return t({error:m}),{success:!1,error:m}}},verifyOtp:async(n,r)=>{var s,i,o,c,u;t({error:null});try{const f=await $e.post("/auth/verify-retailer-otp",{email:n,otp:r}),p=((s=f.data)==null?void 0:s.data)||f.data,{user:m,accessToken:x,refreshToken:y}=p;return x&&y&&t({user:m,accessToken:x,refreshToken:y,isOnboarding:!0,isInitialized:!0,error:null}),{success:!0,user:m}}catch(f){const p=((o=(i=f.response)==null?void 0:i.data)==null?void 0:o.message)||((u=(c=f.response)==null?void 0:c.data)==null?void 0:u.error)||"OTP verification failed. Please try again.";return t({error:p}),{success:!1,error:p}}},logout:async()=>{const{refreshToken:n}=e();try{n&&await $e.post("/auth/logout",{refreshToken:n})}catch{}finally{t({user:null,accessToken:null,refreshToken:null,error:null,verificationStatus:null,dataStatus:null,warehouseStatus:null,isVerificationChecked:!1})}},refreshAccessToken:async()=>{var i;const{refreshToken:n}=e();if(!n)throw new Error("No refresh token");const r=await $e.post("/auth/refresh-token",{refreshToken:n}),s=((i=r.data)==null?void 0:i.data)||r.data;return t({accessToken:s.accessToken,refreshToken:s.refreshToken}),s.accessToken},fetchUser:async()=>{var n;try{const r=await $e.get("/auth/me"),s=((n=r.data)==null?void 0:n.data)||r.data,i=s.user||s;return t({user:i}),i}catch{return null}},forgotPassword:async n=>{var r,s,i,o;t({error:null});try{return await $e.post("/auth/forgot-password",{email:n}),{success:!0}}catch(c){const u=((s=(r=c.response)==null?void 0:r.data)==null?void 0:s.message)||((o=(i=c.response)==null?void 0:i.data)==null?void 0:o.error)||"Failed to send reset email. Please try again.";return t({error:u}),{success:!1,error:u}}},resetPassword:async(n,r)=>{var s,i,o,c;t({error:null});try{return await $e.post("/auth/reset-password",{resetToken:n,newPassword:r}),{success:!0}}catch(u){const f=((i=(s=u.response)==null?void 0:s.data)==null?void 0:i.message)||((c=(o=u.response)==null?void 0:o.data)==null?void 0:c.error)||"Password reset failed. The link may have expired.";return t({error:f}),{success:!1,error:f}}},completeOnboarding:()=>t({isOnboarding:!1}),clearError:()=>t({error:null})}),{name:"bukizz-auth",partialize:t=>({user:t.user,accessToken:t.accessToken,refreshToken:t.refreshToken,isOnboarding:t.isOnboarding})})),Yk=t=>!!t.accessToken,L4=t=>!!t.isOnboarding;function z4({children:t}){const e=Zt(Yk),n=Zt(v=>v.isInitialized),r=Zt(v=>v.isVerificationChecked),s=Zt(v=>v.verificationStatus),i=Zt(v=>v.dataStatus),o=Zt(v=>v.warehouseStatus),c=Zt(v=>v.runPostLoginChecks),u=Pr(),[f,p]=E.useState(null),[m,x]=E.useState(!1);return E.useEffect(()=>{if(!e||!n||r||m)return;let v=!1;return x(!0),c().then(k=>{v||p(k)}).catch(k=>{console.error("Post-login checks failed:",k),v||Zt.setState({isVerificationChecked:!0})}).finally(()=>{v||x(!1)}),()=>{v=!0}},[e,n,r,m,c]),!e&&!n?l.jsx("div",{className:"flex min-h-screen items-center justify-center bg-slate-50",children:l.jsxs("div",{className:"flex flex-col items-center gap-4",children:[l.jsx("div",{className:"h-10 w-10 animate-spin rounded-full border-4 border-blue-600 border-t-transparent"}),l.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Loading..."})]})}):e?r?(s==null?void 0:s.status)!=="authorized"?i&&!i.isComplete?l.jsx(fo,{to:"/register",replace:!0,state:{resumeOnboarding:!0,missingFields:i.missingFields}}):o&&!o.hasWarehouse?l.jsx(fo,{to:"/register",replace:!0,state:{resumeOnboarding:!0,resumeStep:"business"}}):l.jsx(fo,{to:"/pending-approval",replace:!0}):t:l.jsx("div",{className:"flex min-h-screen items-center justify-center bg-slate-50",children:l.jsxs("div",{className:"flex flex-col items-center gap-4",children:[l.jsx("div",{className:"h-10 w-10 animate-spin rounded-full border-4 border-violet-600 border-t-transparent"}),l.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Verifying account status..."})]})}):l.jsx(fo,{to:"/login",state:{from:u},replace:!0})}function nm({children:t}){var i;const e=Zt(Yk),n=Zt(L4),r=Zt(o=>o.isInitialized),s=Pr();return!r&&!e?l.jsx("div",{className:"flex min-h-screen items-center justify-center bg-slate-50",children:l.jsxs("div",{className:"flex flex-col items-center gap-4",children:[l.jsx("div",{className:"h-10 w-10 animate-spin rounded-full border-4 border-blue-600 border-t-transparent"}),l.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Loading..."})]})}):e&&n&&s.pathname==="/register"||e&&s.pathname==="/register"&&((i=s.state)!=null&&i.resumeOnboarding)?t:e?l.jsx(fo,{to:"/dashboard",replace:!0}):t}/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B4=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Xk=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var F4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $4=E.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...c},u)=>E.createElement("svg",{ref:u,...F4,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:Xk("lucide",s),...c},[...o.map(([f,p])=>E.createElement(f,p)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=(t,e)=>{const n=E.forwardRef(({className:r,...s},i)=>E.createElement($4,{ref:i,iconNode:e,className:Xk(`lucide-${B4(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=ye("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eo=ye("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V4=ye("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U4=ye("BellOff",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M17 17H4a1 1 0 0 1-.74-1.673C4.59 13.956 6 12.499 6 8a6 6 0 0 1 .258-1.742",key:"178tsu"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M8.668 3.01A6 6 0 0 1 18 8c0 2.687.77 4.653 1.707 6.05",key:"1hqiys"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c0=ye("Bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H4=ye("Bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=ye("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W4=ye("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eN=ye("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _b=ye("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hc=ye("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q4=ye("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K4=ye("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $i=ye("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tN=ye("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ws=ye("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sr=ye("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const un=ye("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nN=ye("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G4=ye("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J4=ye("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ou=ye("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z4=ye("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d0=ye("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q4=ye("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rN=ye("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u0=ye("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eg=ye("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f0=ye("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y4=ye("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ma=ye("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pn=ye("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h0=ye("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sN=ye("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X4=ye("Heading1",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eM=ye("Heading2",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tM=ye("Headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p0=ye("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iN=ye("IndianRupee",[["path",{d:"M6 3h12",key:"ggurg9"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"m6 13 8.5 8",key:"u1kupk"}],["path",{d:"M6 13h3",key:"wdp6ag"}],["path",{d:"M9 13c6.667 0 6.667-10 0-10",key:"1nkvk2"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nM=ye("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rM=ye("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zl=ye("Landmark",[["line",{x1:"3",x2:"21",y1:"22",y2:"22",key:"j8o0r"}],["line",{x1:"6",x2:"6",y1:"18",y2:"11",key:"10tf0k"}],["line",{x1:"10",x2:"10",y1:"18",y2:"11",key:"54lgf6"}],["line",{x1:"14",x2:"14",y1:"18",y2:"11",key:"380y"}],["line",{x1:"18",x2:"18",y1:"18",y2:"11",key:"1kevvc"}],["polygon",{points:"12 2 20 7 4 7",key:"jkujk7"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sM=ye("Layers",[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iM=ye("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oM=ye("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aM=ye("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lM=ye("ListOrdered",[["path",{d:"M10 12h11",key:"6m4ad9"}],["path",{d:"M10 18h11",key:"11hvi2"}],["path",{d:"M10 6h11",key:"c7qv1k"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m0=ye("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=ye("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pc=ye("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g0=ye("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mr=ye("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rn=ye("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cM=ye("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oN=ye("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _t=ye("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dM=ye("PenTool",[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x0=ye("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gr=ye("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _n=ye("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y0=ye("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uM=ye("Redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bo=ye("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tg=ye("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fM=ye("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gs=ye("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v0=ye("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hM=ye("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aN=ye("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ic=ye("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _u=ye("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pM=ye("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pu=ye("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pb=ye("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ha=ye("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mM=ye("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gM=ye("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qs=ye("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b0=ye("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dc=ye("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lN=ye("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cN=ye("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xM=ye("Underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yM=ye("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ng=ye("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vM=ye("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Na=ye("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w0=ye("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iu=ye("Warehouse",[["path",{d:"M22 8.35V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8.35A2 2 0 0 1 3.26 6.5l8-3.2a2 2 0 0 1 1.48 0l8 3.2A2 2 0 0 1 22 8.35Z",key:"gksnxg"}],["path",{d:"M6 18h12",key:"9pbo8z"}],["path",{d:"M6 14h12",key:"4cwo0f"}],["rect",{width:"12",height:"12",x:"6",y:"10",key:"apd30q"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const On=ye("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),dN=E.createContext(null);let bM=0;function wM({children:t}){const[e,n]=E.useState([]),r=E.useCallback(({title:o,description:c,variant:u="default",duration:f=4e3})=>{const p=++bM;return n(m=>[...m,{id:p,title:o,description:c,variant:u}]),f>0&&setTimeout(()=>{n(m=>m.filter(x=>x.id!==p))},f),p},[]),s=E.useCallback(o=>{n(c=>c.filter(u=>u.id!==o))},[]),i=E.useCallback(o=>r(typeof o=="string"?{title:o}:o),[r]);return l.jsxs(dN.Provider,{value:{toast:i,dismissToast:s},children:[t,l.jsx("div",{className:"fixed bottom-0 right-0 z-[100] flex flex-col gap-2 p-4 max-w-[420px] w-full pointer-events-none",children:e.map(o=>l.jsxs("div",{className:`
              pointer-events-auto flex items-start gap-3 w-full rounded-lg border p-4 shadow-lg
              animate-in slide-in-from-bottom-5 fade-in duration-300
              ${o.variant==="destructive"?"border-red-200 bg-red-50 text-red-900":o.variant==="success"?"border-green-200 bg-green-50 text-green-900":"border-slate-200 bg-white text-slate-900"}
            `,children:[l.jsx("div",{className:"shrink-0 mt-0.5",children:o.variant==="destructive"?l.jsx(sr,{className:"h-5 w-5 text-red-500"}):o.variant==="success"?l.jsx(nN,{className:"h-5 w-5 text-green-500"}):l.jsx(nM,{className:"h-5 w-5 text-slate-400"})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[o.title&&l.jsx("p",{className:"text-sm font-semibold",children:o.title}),o.description&&l.jsx("p",{className:"text-sm opacity-80 mt-0.5",children:o.description})]}),l.jsx("button",{onClick:()=>s(o.id),className:"shrink-0 rounded-md p-1 opacity-50 hover:opacity-100 transition-opacity",children:l.jsx(On,{className:"h-4 w-4"})})]},o.id))})]})}function qf(){const t=E.useContext(dN);if(!t)throw new Error("useToast must be used within a ToastProvider");return t}const Ql={getWarehouses:async()=>(await $e.get("/warehouses")).data.data.warehouses,createWarehouse:async t=>(await $e.post("/warehouses",t)).data,updateWarehouse:async(t,e)=>(await $e.put(`/warehouses/${t}`,e)).data,deleteWarehouse:async t=>(await $e.delete(`/warehouses/${t}`)).data},uN=E.createContext(null);function kM({children:t}){const[e,n]=E.useState([]),[r,s]=E.useState(null),[i,o]=E.useState(!0),c=E.useCallback(async()=>{o(!0);try{const f=await Ql.getWarehouses();n(f);const p=localStorage.getItem("activeWarehouseId");if(p){const m=f.find(x=>x.id===p);m?s(m):f.length>0&&(s(f[0]),localStorage.setItem("activeWarehouseId",f[0].id))}else f.length>0&&(s(f[0]),localStorage.setItem("activeWarehouseId",f[0].id))}catch(f){console.error("Failed to fetch warehouses:",f)}finally{o(!1)}},[]);E.useEffect(()=>{c()},[c]);const u=E.useCallback(f=>{s(f),localStorage.setItem("activeWarehouseId",f.id),window.location.reload()},[]);return l.jsx(uN.Provider,{value:{warehouses:e,activeWarehouse:r,loading:i,switchWarehouse:u,refreshWarehouses:c},children:t})}function Zr(){const t=E.useContext(uN);if(!t)throw new Error("useWarehouse must be used within a WarehouseProvider");return t}function fN(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=fN(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function hN(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=fN(t))&&(r&&(r+=" "),r+=e);return r}const Ib=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,Db=hN,pN=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return Db(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(f=>{const p=n==null?void 0:n[f],m=i==null?void 0:i[f];if(p===null)return null;const x=Ib(p)||Ib(m);return s[f][x]}),c=n&&Object.entries(n).reduce((f,p)=>{let[m,x]=p;return x===void 0||(f[m]=x),f},{}),u=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((f,p)=>{let{class:m,className:x,...y}=p;return Object.entries(y).every(v=>{let[k,w]=v;return Array.isArray(w)?w.includes({...i,...c}[k]):{...i,...c}[k]===w})?[...f,m,x]:f},[]);return Db(t,o,u,n==null?void 0:n.class,n==null?void 0:n.className)},k0="-",NM=t=>{const e=SM(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const c=o.split(k0);return c[0]===""&&c.length!==1&&c.shift(),mN(c,e)||jM(o)},getConflictingClassGroupIds:(o,c)=>{const u=n[o]||[];return c&&r[o]?[...u,...r[o]]:u}}},mN=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?mN(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(k0);return(o=e.validators.find(({validator:c})=>c(i)))==null?void 0:o.classGroupId},Lb=/^\[(.+)\]$/,jM=t=>{if(Lb.test(t)){const e=Lb.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},SM=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return EM(Object.entries(t.classGroups),n).forEach(([i,o])=>{rg(o,r,i,e)}),r},rg=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:zb(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(CM(s)){rg(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{rg(o,zb(e,i),n,r)})})},zb=(t,e)=>{let n=t;return e.split(k0).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},CM=t=>t.isThemeGetter,EM=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,c])=>[e+o,c])):i);return[n,s]}):t,TM=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},gN="!",AM=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,o=c=>{const u=[];let f=0,p=0,m;for(let w=0;w<c.length;w++){let j=c[w];if(f===0){if(j===s&&(r||c.slice(w,w+i)===e)){u.push(c.slice(p,w)),p=w+i;continue}if(j==="/"){m=w;continue}}j==="["?f++:j==="]"&&f--}const x=u.length===0?c:c.substring(p),y=x.startsWith(gN),v=y?x.substring(1):x,k=m&&m>p?m-p:void 0;return{modifiers:u,hasImportantModifier:y,baseClassName:v,maybePostfixModifierPosition:k}};return n?c=>n({className:c,parseClassName:o}):o},MM=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},RM=t=>({cache:TM(t.cacheSize),parseClassName:AM(t),...NM(t)}),OM=/\s+/,_M=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(OM);let c="";for(let u=o.length-1;u>=0;u-=1){const f=o[u],{modifiers:p,hasImportantModifier:m,baseClassName:x,maybePostfixModifierPosition:y}=n(f);let v=!!y,k=r(v?x.substring(0,y):x);if(!k){if(!v){c=f+(c.length>0?" "+c:c);continue}if(k=r(x),!k){c=f+(c.length>0?" "+c:c);continue}v=!1}const w=MM(p).join(":"),j=m?w+gN:w,C=j+k;if(i.includes(C))continue;i.push(C);const T=s(k,v);for(let A=0;A<T.length;++A){const M=T[A];i.push(j+M)}c=f+(c.length>0?" "+c:c)}return c};function PM(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=xN(e))&&(r&&(r+=" "),r+=n);return r}const xN=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=xN(t[r]))&&(n&&(n+=" "),n+=e);return n};function IM(t,...e){let n,r,s,i=o;function o(u){const f=e.reduce((p,m)=>m(p),t());return n=RM(f),r=n.cache.get,s=n.cache.set,i=c,c(u)}function c(u){const f=r(u);if(f)return f;const p=_M(u,n);return s(u,p),p}return function(){return i(PM.apply(null,arguments))}}const jt=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},yN=/^\[(?:([a-z-]+):)?(.+)\]$/i,DM=/^\d+\/\d+$/,LM=new Set(["px","full","screen"]),zM=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,BM=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,FM=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,$M=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,VM=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ms=t=>ja(t)||LM.has(t)||DM.test(t),yi=t=>Wa(t,"length",ZM),ja=t=>!!t&&!Number.isNaN(Number(t)),rm=t=>Wa(t,"number",ja),Il=t=>!!t&&Number.isInteger(Number(t)),UM=t=>t.endsWith("%")&&ja(t.slice(0,-1)),tt=t=>yN.test(t),vi=t=>zM.test(t),HM=new Set(["length","size","percentage"]),WM=t=>Wa(t,HM,vN),qM=t=>Wa(t,"position",vN),KM=new Set(["image","url"]),GM=t=>Wa(t,KM,YM),JM=t=>Wa(t,"",QM),Dl=()=>!0,Wa=(t,e,n)=>{const r=yN.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},ZM=t=>BM.test(t)&&!FM.test(t),vN=()=>!1,QM=t=>$M.test(t),YM=t=>VM.test(t),XM=()=>{const t=jt("colors"),e=jt("spacing"),n=jt("blur"),r=jt("brightness"),s=jt("borderColor"),i=jt("borderRadius"),o=jt("borderSpacing"),c=jt("borderWidth"),u=jt("contrast"),f=jt("grayscale"),p=jt("hueRotate"),m=jt("invert"),x=jt("gap"),y=jt("gradientColorStops"),v=jt("gradientColorStopPositions"),k=jt("inset"),w=jt("margin"),j=jt("opacity"),C=jt("padding"),T=jt("saturate"),A=jt("scale"),M=jt("sepia"),P=jt("skew"),F=jt("space"),ne=jt("translate"),O=()=>["auto","contain","none"],X=()=>["auto","hidden","clip","visible","scroll"],le=()=>["auto",tt,e],z=()=>[tt,e],te=()=>["",Ms,yi],ie=()=>["auto",ja,tt],oe=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],W=()=>["solid","dashed","dotted","double","none"],q=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],J=()=>["start","end","center","between","around","evenly","stretch"],fe=()=>["","0",tt],ce=()=>["auto","avoid","all","avoid-page","page","left","right","column"],D=()=>[ja,tt];return{cacheSize:500,separator:":",theme:{colors:[Dl],spacing:[Ms,yi],blur:["none","",vi,tt],brightness:D(),borderColor:[t],borderRadius:["none","","full",vi,tt],borderSpacing:z(),borderWidth:te(),contrast:D(),grayscale:fe(),hueRotate:D(),invert:fe(),gap:z(),gradientColorStops:[t],gradientColorStopPositions:[UM,yi],inset:le(),margin:le(),opacity:D(),padding:z(),saturate:D(),scale:D(),sepia:fe(),skew:D(),space:z(),translate:z()},classGroups:{aspect:[{aspect:["auto","square","video",tt]}],container:["container"],columns:[{columns:[vi]}],"break-after":[{"break-after":ce()}],"break-before":[{"break-before":ce()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...oe(),tt]}],overflow:[{overflow:X()}],"overflow-x":[{"overflow-x":X()}],"overflow-y":[{"overflow-y":X()}],overscroll:[{overscroll:O()}],"overscroll-x":[{"overscroll-x":O()}],"overscroll-y":[{"overscroll-y":O()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[k]}],"inset-x":[{"inset-x":[k]}],"inset-y":[{"inset-y":[k]}],start:[{start:[k]}],end:[{end:[k]}],top:[{top:[k]}],right:[{right:[k]}],bottom:[{bottom:[k]}],left:[{left:[k]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Il,tt]}],basis:[{basis:le()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",tt]}],grow:[{grow:fe()}],shrink:[{shrink:fe()}],order:[{order:["first","last","none",Il,tt]}],"grid-cols":[{"grid-cols":[Dl]}],"col-start-end":[{col:["auto",{span:["full",Il,tt]},tt]}],"col-start":[{"col-start":ie()}],"col-end":[{"col-end":ie()}],"grid-rows":[{"grid-rows":[Dl]}],"row-start-end":[{row:["auto",{span:[Il,tt]},tt]}],"row-start":[{"row-start":ie()}],"row-end":[{"row-end":ie()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",tt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",tt]}],gap:[{gap:[x]}],"gap-x":[{"gap-x":[x]}],"gap-y":[{"gap-y":[x]}],"justify-content":[{justify:["normal",...J()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...J(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...J(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[C]}],px:[{px:[C]}],py:[{py:[C]}],ps:[{ps:[C]}],pe:[{pe:[C]}],pt:[{pt:[C]}],pr:[{pr:[C]}],pb:[{pb:[C]}],pl:[{pl:[C]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[F]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[F]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",tt,e]}],"min-w":[{"min-w":[tt,e,"min","max","fit"]}],"max-w":[{"max-w":[tt,e,"none","full","min","max","fit","prose",{screen:[vi]},vi]}],h:[{h:[tt,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[tt,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[tt,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[tt,e,"auto","min","max","fit"]}],"font-size":[{text:["base",vi,yi]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",rm]}],"font-family":[{font:[Dl]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",tt]}],"line-clamp":[{"line-clamp":["none",ja,rm]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ms,tt]}],"list-image":[{"list-image":["none",tt]}],"list-style-type":[{list:["none","disc","decimal",tt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[j]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[j]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...W(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ms,yi]}],"underline-offset":[{"underline-offset":["auto",Ms,tt]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:z()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",tt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",tt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[j]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...oe(),qM]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",WM]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},GM]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[y]}],"gradient-via":[{via:[y]}],"gradient-to":[{to:[y]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[c]}],"border-w-x":[{"border-x":[c]}],"border-w-y":[{"border-y":[c]}],"border-w-s":[{"border-s":[c]}],"border-w-e":[{"border-e":[c]}],"border-w-t":[{"border-t":[c]}],"border-w-r":[{"border-r":[c]}],"border-w-b":[{"border-b":[c]}],"border-w-l":[{"border-l":[c]}],"border-opacity":[{"border-opacity":[j]}],"border-style":[{border:[...W(),"hidden"]}],"divide-x":[{"divide-x":[c]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[c]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[j]}],"divide-style":[{divide:W()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...W()]}],"outline-offset":[{"outline-offset":[Ms,tt]}],"outline-w":[{outline:[Ms,yi]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:te()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[j]}],"ring-offset-w":[{"ring-offset":[Ms,yi]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",vi,JM]}],"shadow-color":[{shadow:[Dl]}],opacity:[{opacity:[j]}],"mix-blend":[{"mix-blend":[...q(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":q()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[u]}],"drop-shadow":[{"drop-shadow":["","none",vi,tt]}],grayscale:[{grayscale:[f]}],"hue-rotate":[{"hue-rotate":[p]}],invert:[{invert:[m]}],saturate:[{saturate:[T]}],sepia:[{sepia:[M]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[u]}],"backdrop-grayscale":[{"backdrop-grayscale":[f]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[p]}],"backdrop-invert":[{"backdrop-invert":[m]}],"backdrop-opacity":[{"backdrop-opacity":[j]}],"backdrop-saturate":[{"backdrop-saturate":[T]}],"backdrop-sepia":[{"backdrop-sepia":[M]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",tt]}],duration:[{duration:D()}],ease:[{ease:["linear","in","out","in-out",tt]}],delay:[{delay:D()}],animate:[{animate:["none","spin","ping","pulse","bounce",tt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[A]}],"scale-x":[{"scale-x":[A]}],"scale-y":[{"scale-y":[A]}],rotate:[{rotate:[Il,tt]}],"translate-x":[{"translate-x":[ne]}],"translate-y":[{"translate-y":[ne]}],"skew-x":[{"skew-x":[P]}],"skew-y":[{"skew-y":[P]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",tt]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",tt]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":z()}],"scroll-mx":[{"scroll-mx":z()}],"scroll-my":[{"scroll-my":z()}],"scroll-ms":[{"scroll-ms":z()}],"scroll-me":[{"scroll-me":z()}],"scroll-mt":[{"scroll-mt":z()}],"scroll-mr":[{"scroll-mr":z()}],"scroll-mb":[{"scroll-mb":z()}],"scroll-ml":[{"scroll-ml":z()}],"scroll-p":[{"scroll-p":z()}],"scroll-px":[{"scroll-px":z()}],"scroll-py":[{"scroll-py":z()}],"scroll-ps":[{"scroll-ps":z()}],"scroll-pe":[{"scroll-pe":z()}],"scroll-pt":[{"scroll-pt":z()}],"scroll-pr":[{"scroll-pr":z()}],"scroll-pb":[{"scroll-pb":z()}],"scroll-pl":[{"scroll-pl":z()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",tt]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Ms,yi,rm]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},e5=IM(XM);function be(...t){return e5(hN(t))}const t5=pN("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg text-sm font-semibold transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-blue-600 text-white shadow-sm hover:bg-blue-700 focus:ring-blue-500",destructive:"bg-red-600 text-white shadow-sm hover:bg-red-700 focus:ring-red-500",outline:"border-2 border-slate-300 bg-white text-slate-700 hover:bg-slate-50 hover:border-slate-400 focus:ring-slate-500",secondary:"bg-slate-100 text-slate-700 shadow-sm hover:bg-slate-200 focus:ring-slate-500",ghost:"text-slate-700 hover:bg-slate-100",link:"text-blue-600 underline-offset-4 hover:underline",success:"bg-emerald-600 text-white shadow-sm hover:bg-emerald-700 focus:ring-emerald-500",orange:"bg-amber-500 text-white shadow-sm hover:bg-amber-600 focus:ring-amber-500"},size:{default:"h-11 px-5 py-2.5",sm:"h-9 rounded-lg px-4 text-xs",lg:"h-12 px-6 text-base",xl:"h-14 px-8 text-lg",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),xe=E.forwardRef(({className:t,variant:e,size:n,loading:r,children:s,disabled:i,...o},c)=>l.jsxs("button",{className:be(t5({variant:e,size:n,className:t})),ref:c,disabled:i||r,...o,children:[r&&l.jsxs("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s]}));xe.displayName="Button";const n5=[{icon:pn,title:"Sell Across India",description:"Reach over 50 crore+ customers across 27000+ pincodes"},{icon:_b,title:"Higher Profits",description:"With 0% commission*, you take 100% profits with you"},{icon:w0,title:"Account Management",description:"Our Dedicated managers will help your business on Bukizz"},{icon:lN,title:"Lower Return Charges",description:"With our flat and low return charges, ship your products stress-free"},{icon:_b,title:"Simple Pricing Calculator",description:"Use our simple pricing calculator to decide the best and competitive selling price for your product"},{icon:tM,title:"247 Seller Support",description:"All your queries and issues are answered by our dedicated Seller Support Team"},{icon:iN,title:"Fast & Regular Payments",description:"Get payments as fast as 7-10 days from the date of dispatch"},{icon:pM,title:"Business on the go",description:"Download our Bukizz Seller App to manage your business anywhere, anytime"}];function r5(){return l.jsxs("div",{className:"min-h-screen bg-white",children:[l.jsx("header",{className:"sticky top-0 z-50 bg-white border-b border-gray-100",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex items-center justify-between h-16",children:[l.jsxs(Dt,{to:"/",className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-9 h-9 bg-[#2874F0] rounded-lg flex items-center justify-center",children:l.jsx("span",{className:"text-white font-bold text-lg",children:"B"})}),l.jsx("span",{className:"text-xl font-bold text-[#212121]",children:"Bukizz"})]}),l.jsxs("nav",{className:"flex items-center gap-4",children:[l.jsx(Dt,{to:"/login",children:l.jsx(xe,{variant:"ghost",size:"sm",children:"Login"})}),l.jsx(Dt,{to:"/register",children:l.jsx(xe,{size:"sm",children:"Start Selling"})})]})]})})}),l.jsx("section",{className:"bg-gradient-to-r from-[#E8F0FE] to-white py-12",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center",children:[l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[l.jsx("div",{className:"flex items-center gap-2 text-sm text-[#878787] mb-4",children:l.jsx("span",{className:"text-[#26A541] font-medium",children:"Trusted by 500+ vendors across India"})}),l.jsx("h1",{className:"text-3xl font-bold text-[#212121] mb-4",children:"Sell School Supplies Directly to Parents"}),l.jsx("p",{className:"text-[#878787] mb-6",children:"Join India's fastest-growing platform for school vendors. Sell books, uniforms, and stationery to thousands of parents looking for quality school supplies."}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex gap-4",children:[l.jsx("input",{type:"tel",placeholder:"Enter Mobile Number *",className:"flex-1 h-12 px-4 border border-gray-300 rounded-md focus:outline-none focus:border-[#2874F0] focus:ring-2 focus:ring-[#2874F0]/10"}),l.jsx(xe,{children:"Send OTP"})]}),l.jsx("p",{className:"text-sm text-[#2874F0]",children:"Please verify your mobile number through OTP before you register"})]}),l.jsxs("div",{className:"mt-6 flex gap-4",children:[l.jsx(Dt,{to:"/register",className:"flex-1",children:l.jsxs(xe,{className:"w-full",size:"lg",children:["Register as Vendor",l.jsx(Eo,{className:"w-4 h-4"})]})}),l.jsx(Dt,{to:"/login",children:l.jsx(xe,{variant:"outline",size:"lg",children:"Sign In to Dashboard"})})]})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsx("div",{className:"w-12 h-12 bg-[#FFE500] rounded-full flex items-center justify-center",children:l.jsx("span",{className:"text-2xl",children:""})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-[#212121] mb-2",children:'"Starting with 1, Bukizz helped me expand to 6 categories with 5x growth year on year!"'}),l.jsx("p",{className:"text-sm text-[#878787]",children:"Raju Lunawath, Amazestore"})]})]})}),l.jsxs("div",{className:"bg-gradient-to-r from-[#2874F0] to-[#1F5FD9] rounded-xl p-6 text-white",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("span",{className:"text-sm text-[#FFE500] font-medium",children:"#KuchKhaasKamao"}),l.jsx("span",{className:"text-xs bg-white/20 px-2 py-1 rounded",children:"Bukizz Seller Hub"})]}),l.jsx("h3",{className:"text-2xl font-bold mb-2",children:"HAR CHEEZ BECHO SHAAN SE"}),l.jsx("p",{className:"text-sm text-white/80 mb-4",children:"Sell everything with pride on Bukizz"}),l.jsxs("div",{className:"flex gap-4 text-sm",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-bold",children:"50 Crore+"}),l.jsx("p",{className:"text-white/70",children:"Customers"})]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-bold",children:"19000+"}),l.jsx("p",{className:"text-white/70",children:"Pincodes"})]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-bold",children:"14 Lakh+"}),l.jsx("p",{className:"text-white/70",children:"Sellers"})]})]})]})]})]})})}),l.jsx("section",{className:"py-16 bg-[#F1F3F6]",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[l.jsx("h2",{className:"text-3xl font-bold text-[#212121] text-center mb-12",children:"Why sell on Bukizz?"}),l.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:n5.map((t,e)=>l.jsxs("div",{className:"bg-white rounded-xl p-6 text-center hover:shadow-md transition-shadow",children:[l.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-[#FFF8E1] rounded-full flex items-center justify-center",children:l.jsx(t.icon,{className:"w-8 h-8 text-[#FF9F00]"})}),l.jsx("h3",{className:"text-lg font-semibold text-[#212121] mb-2",children:t.title}),l.jsx("p",{className:"text-sm text-[#878787]",children:t.description})]},e))})]})}),l.jsx("section",{className:"py-16 bg-white",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-20 h-20 mx-auto mb-4 bg-[#E8F0FE] rounded-full flex items-center justify-center",children:l.jsx(pn,{className:"w-10 h-10 text-[#2874F0]"})}),l.jsx("h3",{className:"text-xl font-semibold text-[#212121] mb-2",children:"School Partnerships"}),l.jsx("p",{className:"text-[#878787]",children:"Get exclusive access to sell official school booksets and uniforms."})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-20 h-20 mx-auto mb-4 bg-[#E8F5EA] rounded-full flex items-center justify-center",children:l.jsx(_t,{className:"w-10 h-10 text-[#26A541]"})}),l.jsx("h3",{className:"text-xl font-semibold text-[#212121] mb-2",children:"Open Marketplace"}),l.jsx("p",{className:"text-[#878787]",children:"List general stationery and supplies for all students."})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-20 h-20 mx-auto mb-4 bg-[#FFF4E5] rounded-full flex items-center justify-center",children:l.jsx(un,{className:"w-10 h-10 text-[#FF9F00]"})}),l.jsx("h3",{className:"text-xl font-semibold text-[#212121] mb-2",children:"Easy Verification"}),l.jsx("p",{className:"text-[#878787]",children:"Simple registration with GSTIN or PAN based on your category."})]})]})})}),l.jsx("section",{className:"py-16 bg-[#2874F0]",children:l.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[l.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Ready to grow your business?"}),l.jsx("p",{className:"text-white/80 mb-8",children:"Join thousands of vendors already selling on Bukizz"}),l.jsx(Dt,{to:"/register",children:l.jsxs(xe,{variant:"secondary",size:"xl",children:["Start Selling Today",l.jsx(Eo,{className:"w-5 h-5"})]})})]})}),l.jsx("footer",{className:"bg-[#212121] text-white py-12",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[l.jsxs("div",{className:"grid md:grid-cols-4 gap-8 mb-8",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[l.jsx("div",{className:"w-8 h-8 bg-[#2874F0] rounded-lg flex items-center justify-center",children:l.jsx("span",{className:"text-white font-bold",children:"B"})}),l.jsx("span",{className:"text-lg font-bold",children:"Bukizz Vendor"})]}),l.jsx("p",{className:"text-sm text-gray-400",children:"India's trusted platform for school supplies vendors."})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold mb-4",children:"Quick Links"}),l.jsxs("ul",{className:"space-y-2 text-sm text-gray-400",children:[l.jsx("li",{children:l.jsx(Dt,{to:"/register",className:"hover:text-white",children:"Register"})}),l.jsx("li",{children:l.jsx(Dt,{to:"/login",className:"hover:text-white",children:"Login"})}),l.jsx("li",{children:l.jsx("a",{href:"#",className:"hover:text-white",children:"Pricing"})})]})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold mb-4",children:"Support"}),l.jsxs("ul",{className:"space-y-2 text-sm text-gray-400",children:[l.jsx("li",{children:l.jsx("a",{href:"#",className:"hover:text-white",children:"Help Center"})}),l.jsx("li",{children:l.jsx("a",{href:"#",className:"hover:text-white",children:"Contact Us"})}),l.jsx("li",{children:l.jsx("a",{href:"#",className:"hover:text-white",children:"FAQs"})})]})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold mb-4",children:"Legal"}),l.jsxs("ul",{className:"space-y-2 text-sm text-gray-400",children:[l.jsx("li",{children:l.jsx("a",{href:"#",className:"hover:text-white",children:"Privacy Policy"})}),l.jsx("li",{children:l.jsx("a",{href:"#",className:"hover:text-white",children:"Terms of Service"})}),l.jsx("li",{children:l.jsx("a",{href:"#",className:"hover:text-white",children:"Seller Policy"})})]})]})]}),l.jsx("div",{className:"border-t border-gray-800 pt-8 text-center text-sm text-gray-400",children:" 2024 Bukizz Technologies Pvt. Ltd. All rights reserved."})]})})]})}var Lc=t=>t.type==="checkbox",po=t=>t instanceof Date,er=t=>t==null;const bN=t=>typeof t=="object";var Yt=t=>!er(t)&&!Array.isArray(t)&&bN(t)&&!po(t),s5=t=>Yt(t)&&t.target?Lc(t.target)?t.target.checked:t.target.value:t,i5=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,o5=(t,e)=>t.has(i5(e)),a5=t=>{const e=t.constructor&&t.constructor.prototype;return Yt(e)&&e.hasOwnProperty("isPrototypeOf")},N0=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function rn(t){if(t instanceof Date)return new Date(t);const e=typeof FileList<"u"&&t instanceof FileList;if(N0&&(t instanceof Blob||e))return t;const n=Array.isArray(t);if(!n&&!(Yt(t)&&a5(t)))return t;const r=n?[]:Object.create(Object.getPrototypeOf(t));for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=rn(t[s]));return r}var Kf=t=>/^\w*$/.test(t),Ot=t=>t===void 0,j0=t=>Array.isArray(t)?t.filter(Boolean):[],S0=t=>j0(t.replace(/["|']|\]/g,"").split(/\.|\[/)),_e=(t,e,n)=>{if(!e||!Yt(t))return n;const r=(Kf(e)?[e]:S0(e)).reduce((s,i)=>er(s)?s:s[i],t);return Ot(r)||r===t?Ot(t[e])?n:t[e]:r},cs=t=>typeof t=="boolean",Ur=t=>typeof t=="function",pt=(t,e,n)=>{let r=-1;const s=Kf(e)?[e]:S0(e),i=s.length,o=i-1;for(;++r<i;){const c=s[r];let u=n;if(r!==o){const f=t[c];u=Yt(f)||Array.isArray(f)?f:isNaN(+s[r+1])?{}:[]}if(c==="__proto__"||c==="constructor"||c==="prototype")return;t[c]=u,t=t[c]}};const Bb={BLUR:"blur",FOCUS_OUT:"focusout"},Hr={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Rs={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},l5=dt.createContext(null);l5.displayName="HookFormControlContext";var c5=(t,e,n,r=!0)=>{const s={defaultValues:e._defaultValues};for(const i in t)Object.defineProperty(s,i,{get:()=>{const o=i;return e._proxyFormState[o]!==Hr.all&&(e._proxyFormState[o]=!r||Hr.all),t[o]}});return s};const d5=typeof window<"u"?dt.useLayoutEffect:dt.useEffect;var fr=t=>typeof t=="string",u5=(t,e,n,r,s)=>fr(t)?(r&&e.watch.add(t),_e(n,t,s)):Array.isArray(t)?t.map(i=>(r&&e.watch.add(i),_e(n,i))):(r&&(e.watchAll=!0),n),sg=t=>er(t)||!bN(t);function Ei(t,e,n=new WeakSet){if(sg(t)||sg(e))return Object.is(t,e);if(po(t)&&po(e))return Object.is(t.getTime(),e.getTime());const r=Object.keys(t),s=Object.keys(e);if(r.length!==s.length)return!1;if(n.has(t)||n.has(e))return!0;n.add(t),n.add(e);for(const i of r){const o=t[i];if(!s.includes(i))return!1;if(i!=="ref"){const c=e[i];if(po(o)&&po(c)||Yt(o)&&Yt(c)||Array.isArray(o)&&Array.isArray(c)?!Ei(o,c,n):!Object.is(o,c))return!1}}return!0}const f5=dt.createContext(null);f5.displayName="HookFormContext";var wN=(t,e,n,r,s)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:s||!0}}:{},Yl=t=>Array.isArray(t)?t:[t],Fb=()=>{let t=[];return{get observers(){return t},next:s=>{for(const i of t)i.next&&i.next(s)},subscribe:s=>(t.push(s),{unsubscribe:()=>{t=t.filter(i=>i!==s)}}),unsubscribe:()=>{t=[]}}};function kN(t,e){const n={};for(const r in t)if(t.hasOwnProperty(r)){const s=t[r],i=e[r];if(s&&Yt(s)&&i){const o=kN(s,i);Yt(o)&&(n[r]=o)}else t[r]&&(n[r]=i)}return n}var Fn=t=>Yt(t)&&!Object.keys(t).length,C0=t=>t.type==="file",Du=t=>{if(!N0)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},NN=t=>t.type==="select-multiple",E0=t=>t.type==="radio",h5=t=>E0(t)||Lc(t),sm=t=>Du(t)&&t.isConnected;function p5(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=Ot(t)?r++:t[e[r++]];return t}function m5(t){for(const e in t)if(t.hasOwnProperty(e)&&!Ot(t[e]))return!1;return!0}function Gt(t,e){const n=Array.isArray(e)?e:Kf(e)?[e]:S0(e),r=n.length===1?t:p5(t,n),s=n.length-1,i=n[s];return r&&delete r[i],s!==0&&(Yt(r)&&Fn(r)||Array.isArray(r)&&m5(r))&&Gt(t,n.slice(0,-1)),t}var g5=t=>{for(const e in t)if(Ur(t[e]))return!0;return!1};function jN(t){return Array.isArray(t)||Yt(t)&&!g5(t)}function ig(t,e={}){for(const n in t){const r=t[n];jN(r)?(e[n]=Array.isArray(r)?[]:{},ig(r,e[n])):Ot(r)||(e[n]=!0)}return e}function xa(t,e,n){n||(n=ig(e));for(const r in t){const s=t[r];if(jN(s))Ot(e)||sg(n[r])?n[r]=ig(s,Array.isArray(s)?[]:{}):xa(s,er(e)?{}:e[r],n[r]);else{const i=e[r];n[r]=!Ei(s,i)}}return n}const $b={value:!1,isValid:!1},Vb={value:!0,isValid:!0};var SN=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Ot(t[0].attributes.value)?Ot(t[0].value)||t[0].value===""?Vb:{value:t[0].value,isValid:!0}:Vb:$b}return $b},CN=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>Ot(t)?t:e?t===""?NaN:t&&+t:n&&fr(t)?new Date(t):r?r(t):t;const Ub={isValid:!1,value:null};var EN=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,Ub):Ub;function Hb(t){const e=t.ref;return C0(e)?e.files:E0(e)?EN(t.refs).value:NN(e)?[...e.selectedOptions].map(({value:n})=>n):Lc(e)?SN(t.refs).value:CN(Ot(e.value)?t.ref.value:e.value,t)}var x5=(t,e,n,r)=>{const s={};for(const i of t){const o=_e(e,i);o&&pt(s,i,o._f)}return{criteriaMode:n,names:[...t],fields:s,shouldUseNativeValidation:r}},Lu=t=>t instanceof RegExp,Ll=t=>Ot(t)?t:Lu(t)?t.source:Yt(t)?Lu(t.value)?t.value.source:t.value:t,Wb=t=>({isOnSubmit:!t||t===Hr.onSubmit,isOnBlur:t===Hr.onBlur,isOnChange:t===Hr.onChange,isOnAll:t===Hr.all,isOnTouch:t===Hr.onTouched});const qb="AsyncFunction";var y5=t=>!!t&&!!t.validate&&!!(Ur(t.validate)&&t.validate.constructor.name===qb||Yt(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===qb)),v5=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),Kb=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const Xl=(t,e,n,r)=>{for(const s of n||Object.keys(t)){const i=_e(t,s);if(i){const{_f:o,...c}=i;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],s)&&!r)return!0;if(o.ref&&e(o.ref,o.name)&&!r)return!0;if(Xl(c,e))break}else if(Yt(c)&&Xl(c,e))break}}};function Gb(t,e,n){const r=_e(t,n);if(r||Kf(n))return{error:r,name:n};const s=n.split(".");for(;s.length;){const i=s.join("."),o=_e(e,i),c=_e(t,i);if(o&&!Array.isArray(o)&&n!==i)return{name:n};if(c&&c.type)return{name:i,error:c};if(c&&c.root&&c.root.type)return{name:`${i}.root`,error:c.root};s.pop()}return{name:n}}var b5=(t,e,n,r)=>{n(t);const{name:s,...i}=t;return Fn(i)||Object.keys(i).length>=Object.keys(e).length||Object.keys(i).find(o=>e[o]===(!r||Hr.all))},w5=(t,e,n)=>!t||!e||t===e||Yl(t).some(r=>r&&(n?r===e:r.startsWith(e)||e.startsWith(r))),k5=(t,e,n,r,s)=>s.isOnAll?!1:!n&&s.isOnTouch?!(e||t):(n?r.isOnBlur:s.isOnBlur)?!t:(n?r.isOnChange:s.isOnChange)?t:!0,N5=(t,e)=>!j0(_e(t,e)).length&&Gt(t,e),j5=(t,e,n)=>{const r=Yl(_e(t,n));return pt(r,"root",e[n]),pt(t,n,r),t};function Jb(t,e,n="validate"){if(fr(t)||Array.isArray(t)&&t.every(fr)||cs(t)&&!t)return{type:n,message:fr(t)?t:"",ref:e}}var pa=t=>Yt(t)&&!Lu(t)?t:{value:t,message:""},Zb=async(t,e,n,r,s,i)=>{const{ref:o,refs:c,required:u,maxLength:f,minLength:p,min:m,max:x,pattern:y,validate:v,name:k,valueAsNumber:w,mount:j}=t._f,C=_e(n,k);if(!j||e.has(k))return{};const T=c?c[0]:o,A=z=>{s&&T.reportValidity&&(T.setCustomValidity(cs(z)?"":z||""),T.reportValidity())},M={},P=E0(o),F=Lc(o),ne=P||F,O=(w||C0(o))&&Ot(o.value)&&Ot(C)||Du(o)&&o.value===""||C===""||Array.isArray(C)&&!C.length,X=wN.bind(null,k,r,M),le=(z,te,ie,oe=Rs.maxLength,W=Rs.minLength)=>{const q=z?te:ie;M[k]={type:z?oe:W,message:q,ref:o,...X(z?oe:W,q)}};if(i?!Array.isArray(C)||!C.length:u&&(!ne&&(O||er(C))||cs(C)&&!C||F&&!SN(c).isValid||P&&!EN(c).isValid)){const{value:z,message:te}=fr(u)?{value:!!u,message:u}:pa(u);if(z&&(M[k]={type:Rs.required,message:te,ref:T,...X(Rs.required,te)},!r))return A(te),M}if(!O&&(!er(m)||!er(x))){let z,te;const ie=pa(x),oe=pa(m);if(!er(C)&&!isNaN(C)){const W=o.valueAsNumber||C&&+C;er(ie.value)||(z=W>ie.value),er(oe.value)||(te=W<oe.value)}else{const W=o.valueAsDate||new Date(C),q=ce=>new Date(new Date().toDateString()+" "+ce),J=o.type=="time",fe=o.type=="week";fr(ie.value)&&C&&(z=J?q(C)>q(ie.value):fe?C>ie.value:W>new Date(ie.value)),fr(oe.value)&&C&&(te=J?q(C)<q(oe.value):fe?C<oe.value:W<new Date(oe.value))}if((z||te)&&(le(!!z,ie.message,oe.message,Rs.max,Rs.min),!r))return A(M[k].message),M}if((f||p)&&!O&&(fr(C)||i&&Array.isArray(C))){const z=pa(f),te=pa(p),ie=!er(z.value)&&C.length>+z.value,oe=!er(te.value)&&C.length<+te.value;if((ie||oe)&&(le(ie,z.message,te.message),!r))return A(M[k].message),M}if(y&&!O&&fr(C)){const{value:z,message:te}=pa(y);if(Lu(z)&&!C.match(z)&&(M[k]={type:Rs.pattern,message:te,ref:o,...X(Rs.pattern,te)},!r))return A(te),M}if(v){if(Ur(v)){const z=await v(C,n),te=Jb(z,T);if(te&&(M[k]={...te,...X(Rs.validate,te.message)},!r))return A(te.message),M}else if(Yt(v)){let z={};for(const te in v){if(!Fn(z)&&!r)break;const ie=Jb(await v[te](C,n),T,te);ie&&(z={...ie,...X(te,ie.message)},A(ie.message),r&&(M[k]=z))}if(!Fn(z)&&(M[k]={ref:T,...z},!r))return M}}return A(!0),M};const S5={mode:Hr.onSubmit,reValidateMode:Hr.onChange,shouldFocusError:!0};function C5(t={}){let e={...S5,...t},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:Ur(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},s=Yt(e.defaultValues)||Yt(e.values)?rn(e.defaultValues||e.values)||{}:{},i=e.shouldUnregister?{}:rn(s),o={action:!1,mount:!1,watch:!1,keepIsValid:!1},c={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},u,f=0;const p={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},m={...p};let x={...m};const y={array:Fb(),state:Fb()},v=e.criteriaMode===Hr.all,k=_=>U=>{clearTimeout(f),f=setTimeout(_,U)},w=async _=>{if(!o.keepIsValid&&!e.disabled&&(m.isValid||x.isValid||_)){let U;e.resolver?(U=Fn((await ne()).errors),j()):U=await X(r,!0),U!==n.isValid&&y.state.next({isValid:U})}},j=(_,U)=>{!e.disabled&&(m.isValidating||m.validatingFields||x.isValidating||x.validatingFields)&&((_||Array.from(c.mount)).forEach(re=>{re&&(U?pt(n.validatingFields,re,U):Gt(n.validatingFields,re))}),y.state.next({validatingFields:n.validatingFields,isValidating:!Fn(n.validatingFields)}))},C=(_,U=[],re,I,B=!0,V=!0)=>{if(I&&re&&!e.disabled){if(o.action=!0,V&&Array.isArray(_e(r,_))){const Q=re(_e(r,_),I.argA,I.argB);B&&pt(r,_,Q)}if(V&&Array.isArray(_e(n.errors,_))){const Q=re(_e(n.errors,_),I.argA,I.argB);B&&pt(n.errors,_,Q),N5(n.errors,_)}if((m.touchedFields||x.touchedFields)&&V&&Array.isArray(_e(n.touchedFields,_))){const Q=re(_e(n.touchedFields,_),I.argA,I.argB);B&&pt(n.touchedFields,_,Q)}(m.dirtyFields||x.dirtyFields)&&(n.dirtyFields=xa(s,i)),y.state.next({name:_,isDirty:z(_,U),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else pt(i,_,U)},T=(_,U)=>{pt(n.errors,_,U),y.state.next({errors:n.errors})},A=_=>{n.errors=_,y.state.next({errors:n.errors,isValid:!1})},M=(_,U,re,I)=>{const B=_e(r,_);if(B){const V=_e(i,_,Ot(re)?_e(s,_):re);Ot(V)||I&&I.defaultChecked||U?pt(i,_,U?V:Hb(B._f)):oe(_,V),o.mount&&!o.action&&w()}},P=(_,U,re,I,B)=>{let V=!1,Q=!1;const pe={name:_};if(!e.disabled){if(!re||I){(m.isDirty||x.isDirty)&&(Q=n.isDirty,n.isDirty=pe.isDirty=z(),V=Q!==pe.isDirty);const Ee=Ei(_e(s,_),U);Q=!!_e(n.dirtyFields,_),Ee?Gt(n.dirtyFields,_):pt(n.dirtyFields,_,!0),pe.dirtyFields=n.dirtyFields,V=V||(m.dirtyFields||x.dirtyFields)&&Q!==!Ee}if(re){const Ee=_e(n.touchedFields,_);Ee||(pt(n.touchedFields,_,re),pe.touchedFields=n.touchedFields,V=V||(m.touchedFields||x.touchedFields)&&Ee!==re)}V&&B&&y.state.next(pe)}return V?pe:{}},F=(_,U,re,I)=>{const B=_e(n.errors,_),V=(m.isValid||x.isValid)&&cs(U)&&n.isValid!==U;if(e.delayError&&re?(u=k(()=>T(_,re)),u(e.delayError)):(clearTimeout(f),u=null,re?pt(n.errors,_,re):Gt(n.errors,_)),(re?!Ei(B,re):B)||!Fn(I)||V){const Q={...I,...V&&cs(U)?{isValid:U}:{},errors:n.errors,name:_};n={...n,...Q},y.state.next(Q)}},ne=async _=>(j(_,!0),await e.resolver(i,e.context,x5(_||c.mount,r,e.criteriaMode,e.shouldUseNativeValidation))),O=async _=>{const{errors:U}=await ne(_);if(j(_),_)for(const re of _){const I=_e(U,re);I?pt(n.errors,re,I):Gt(n.errors,re)}else n.errors=U;return U},X=async(_,U,re={valid:!0})=>{for(const I in _){const B=_[I];if(B){const{_f:V,...Q}=B;if(V){const pe=c.array.has(V.name),Ee=B._f&&y5(B._f);Ee&&m.validatingFields&&j([V.name],!0);const je=await Zb(B,c.disabled,i,v,e.shouldUseNativeValidation&&!U,pe);if(Ee&&m.validatingFields&&j([V.name]),je[V.name]&&(re.valid=!1,U||t.shouldUseNativeValidation))break;!U&&(_e(je,V.name)?pe?j5(n.errors,je,V.name):pt(n.errors,V.name,je[V.name]):Gt(n.errors,V.name))}!Fn(Q)&&await X(Q,U,re)}}return re.valid},le=()=>{for(const _ of c.unMount){const U=_e(r,_);U&&(U._f.refs?U._f.refs.every(re=>!sm(re)):!sm(U._f.ref))&&Ce(_)}c.unMount=new Set},z=(_,U)=>!e.disabled&&(_&&U&&pt(i,_,U),!Ei(D(),s)),te=(_,U,re)=>u5(_,c,{...o.mount?i:Ot(U)?s:fr(_)?{[_]:U}:U},re,U),ie=_=>j0(_e(o.mount?i:s,_,e.shouldUnregister?_e(s,_,[]):[])),oe=(_,U,re={})=>{const I=_e(r,_);let B=U;if(I){const V=I._f;V&&(!V.disabled&&pt(i,_,CN(U,V)),B=Du(V.ref)&&er(U)?"":U,NN(V.ref)?[...V.ref.options].forEach(Q=>Q.selected=B.includes(Q.value)):V.refs?Lc(V.ref)?V.refs.forEach(Q=>{(!Q.defaultChecked||!Q.disabled)&&(Array.isArray(B)?Q.checked=!!B.find(pe=>pe===Q.value):Q.checked=B===Q.value||!!B)}):V.refs.forEach(Q=>Q.checked=Q.value===B):C0(V.ref)?V.ref.value="":(V.ref.value=B,V.ref.type||y.state.next({name:_,values:rn(i)})))}(re.shouldDirty||re.shouldTouch)&&P(_,B,re.shouldTouch,re.shouldDirty,!0),re.shouldValidate&&ce(_)},W=(_,U,re)=>{for(const I in U){if(!U.hasOwnProperty(I))return;const B=U[I],V=_+"."+I,Q=_e(r,V);(c.array.has(_)||Yt(B)||Q&&!Q._f)&&!po(B)?W(V,B,re):oe(V,B,re)}},q=(_,U,re={})=>{const I=_e(r,_),B=c.array.has(_),V=rn(U);pt(i,_,V),B?(y.array.next({name:_,values:rn(i)}),(m.isDirty||m.dirtyFields||x.isDirty||x.dirtyFields)&&re.shouldDirty&&y.state.next({name:_,dirtyFields:xa(s,i),isDirty:z(_,V)})):I&&!I._f&&!er(V)?W(_,V,re):oe(_,V,re),Kb(_,c)?y.state.next({...n,name:_,values:rn(i)}):y.state.next({name:o.mount?_:void 0,values:rn(i)})},J=async _=>{o.mount=!0;const U=_.target;let re=U.name,I=!0;const B=_e(r,re),V=Ee=>{I=Number.isNaN(Ee)||po(Ee)&&isNaN(Ee.getTime())||Ei(Ee,_e(i,re,Ee))},Q=Wb(e.mode),pe=Wb(e.reValidateMode);if(B){let Ee,je;const Xe=U.type?Hb(B._f):s5(_),et=_.type===Bb.BLUR||_.type===Bb.FOCUS_OUT,qt=!v5(B._f)&&!e.resolver&&!_e(n.errors,re)&&!B._f.deps||k5(et,_e(n.touchedFields,re),n.isSubmitted,pe,Q),en=Kb(re,c,et);pt(i,re,Xe),et?(!U||!U.readOnly)&&(B._f.onBlur&&B._f.onBlur(_),u&&u(0)):B._f.onChange&&B._f.onChange(_);const ft=P(re,Xe,et),Kn=!Fn(ft)||en;if(!et&&y.state.next({name:re,type:_.type,values:rn(i)}),qt)return(m.isValid||x.isValid)&&(e.mode==="onBlur"?et&&w():et||w()),Kn&&y.state.next({name:re,...en?{}:ft});if(!et&&en&&y.state.next({...n}),e.resolver){const{errors:ys}=await ne([re]);if(j([re]),V(Xe),I){const Zs=Gb(n.errors,r,re),vs=Gb(ys,r,Zs.name||re);Ee=vs.error,re=vs.name,je=Fn(ys)}}else j([re],!0),Ee=(await Zb(B,c.disabled,i,v,e.shouldUseNativeValidation))[re],j([re]),V(Xe),I&&(Ee?je=!1:(m.isValid||x.isValid)&&(je=await X(r,!0)));I&&(B._f.deps&&(!Array.isArray(B._f.deps)||B._f.deps.length>0)&&ce(B._f.deps),F(re,je,Ee,ft))}},fe=(_,U)=>{if(_e(n.errors,U)&&_.focus)return _.focus(),1},ce=async(_,U={})=>{let re,I;const B=Yl(_);if(e.resolver){const V=await O(Ot(_)?_:B);re=Fn(V),I=_?!B.some(Q=>_e(V,Q)):re}else _?(I=(await Promise.all(B.map(async V=>{const Q=_e(r,V);return await X(Q&&Q._f?{[V]:Q}:Q)}))).every(Boolean),!(!I&&!n.isValid)&&w()):I=re=await X(r);return y.state.next({...!fr(_)||(m.isValid||x.isValid)&&re!==n.isValid?{}:{name:_},...e.resolver||!_?{isValid:re}:{},errors:n.errors}),U.shouldFocus&&!I&&Xl(r,fe,_?B:c.mount),I},D=(_,U)=>{let re={...o.mount?i:s};return U&&(re=kN(U.dirtyFields?n.dirtyFields:n.touchedFields,re)),Ot(_)?re:fr(_)?_e(re,_):_.map(I=>_e(re,I))},G=(_,U)=>({invalid:!!_e((U||n).errors,_),isDirty:!!_e((U||n).dirtyFields,_),error:_e((U||n).errors,_),isValidating:!!_e(n.validatingFields,_),isTouched:!!_e((U||n).touchedFields,_)}),Ne=_=>{_&&Yl(_).forEach(U=>Gt(n.errors,U)),y.state.next({errors:_?n.errors:{}})},Ae=(_,U,re)=>{const I=(_e(r,_,{_f:{}})._f||{}).ref,B=_e(n.errors,_)||{},{ref:V,message:Q,type:pe,...Ee}=B;pt(n.errors,_,{...Ee,...U,ref:I}),y.state.next({name:_,errors:n.errors,isValid:!1}),re&&re.shouldFocus&&I&&I.focus&&I.focus()},Ue=(_,U)=>Ur(_)?y.state.subscribe({next:re=>"values"in re&&_(te(void 0,U),re)}):te(_,U,!0),Ve=_=>y.state.subscribe({next:U=>{w5(_.name,U.name,_.exact)&&b5(U,_.formState||m,an,_.reRenderRoot)&&_.callback({values:{...i},...n,...U,defaultValues:s})}}).unsubscribe,Z=_=>(o.mount=!0,x={...x,..._.formState},Ve({..._,formState:{...p,..._.formState}})),Ce=(_,U={})=>{for(const re of _?Yl(_):c.mount)c.mount.delete(re),c.array.delete(re),U.keepValue||(Gt(r,re),Gt(i,re)),!U.keepError&&Gt(n.errors,re),!U.keepDirty&&Gt(n.dirtyFields,re),!U.keepTouched&&Gt(n.touchedFields,re),!U.keepIsValidating&&Gt(n.validatingFields,re),!e.shouldUnregister&&!U.keepDefaultValue&&Gt(s,re);y.state.next({values:rn(i)}),y.state.next({...n,...U.keepDirty?{isDirty:z()}:{}}),!U.keepIsValid&&w()},Fe=({disabled:_,name:U})=>{if(cs(_)&&o.mount||_||c.disabled.has(U)){const B=c.disabled.has(U)!==!!_;_?c.disabled.add(U):c.disabled.delete(U),B&&o.mount&&!o.action&&w()}},se=(_,U={})=>{let re=_e(r,_);const I=cs(U.disabled)||cs(e.disabled);return pt(r,_,{...re||{},_f:{...re&&re._f?re._f:{ref:{name:_}},name:_,mount:!0,...U}}),c.mount.add(_),re?Fe({disabled:cs(U.disabled)?U.disabled:e.disabled,name:_}):M(_,!0,U.value),{...I?{disabled:U.disabled||e.disabled}:{},...e.progressive?{required:!!U.required,min:Ll(U.min),max:Ll(U.max),minLength:Ll(U.minLength),maxLength:Ll(U.maxLength),pattern:Ll(U.pattern)}:{},name:_,onChange:J,onBlur:J,ref:B=>{if(B){se(_,U),re=_e(r,_);const V=Ot(B.value)&&B.querySelectorAll&&B.querySelectorAll("input,select,textarea")[0]||B,Q=h5(V),pe=re._f.refs||[];if(Q?pe.find(Ee=>Ee===V):V===re._f.ref)return;pt(r,_,{_f:{...re._f,...Q?{refs:[...pe.filter(sm),V,...Array.isArray(_e(s,_))?[{}]:[]],ref:{type:V.type,name:_}}:{ref:V}}}),M(_,!1,void 0,V)}else re=_e(r,_,{}),re._f&&(re._f.mount=!1),(e.shouldUnregister||U.shouldUnregister)&&!(o5(c.array,_)&&o.action)&&c.unMount.add(_)}}},Ye=()=>e.shouldFocusError&&Xl(r,fe,c.mount),wt=_=>{cs(_)&&(y.state.next({disabled:_}),Xl(r,(U,re)=>{const I=_e(r,re);I&&(U.disabled=I._f.disabled||_,Array.isArray(I._f.refs)&&I._f.refs.forEach(B=>{B.disabled=I._f.disabled||_}))},0,!1))},ht=(_,U)=>async re=>{let I;re&&(re.preventDefault&&re.preventDefault(),re.persist&&re.persist());let B=rn(i);if(y.state.next({isSubmitting:!0}),e.resolver){const{errors:V,values:Q}=await ne();j(),n.errors=V,B=rn(Q)}else await X(r);if(c.disabled.size)for(const V of c.disabled)Gt(B,V);if(Gt(n.errors,"root"),Fn(n.errors)){y.state.next({errors:{}});try{await _(B,re)}catch(V){I=V}}else U&&await U({...n.errors},re),Ye(),setTimeout(Ye);if(y.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Fn(n.errors)&&!I,submitCount:n.submitCount+1,errors:n.errors}),I)throw I},xr=(_,U={})=>{_e(r,_)&&(Ot(U.defaultValue)?q(_,rn(_e(s,_))):(q(_,U.defaultValue),pt(s,_,rn(U.defaultValue))),U.keepTouched||Gt(n.touchedFields,_),U.keepDirty||(Gt(n.dirtyFields,_),n.isDirty=U.defaultValue?z(_,rn(_e(s,_))):z()),U.keepError||(Gt(n.errors,_),m.isValid&&w()),y.state.next({...n}))},yr=(_,U={})=>{const re=_?rn(_):s,I=rn(re),B=Fn(_),V=B?s:I;if(U.keepDefaultValues||(s=re),!U.keepValues){if(U.keepDirtyValues){const Q=new Set([...c.mount,...Object.keys(xa(s,i))]);for(const pe of Array.from(Q)){const Ee=_e(n.dirtyFields,pe),je=_e(i,pe),Xe=_e(V,pe);Ee&&!Ot(je)?pt(V,pe,je):!Ee&&!Ot(Xe)&&q(pe,Xe)}}else{if(N0&&Ot(_))for(const Q of c.mount){const pe=_e(r,Q);if(pe&&pe._f){const Ee=Array.isArray(pe._f.refs)?pe._f.refs[0]:pe._f.ref;if(Du(Ee)){const je=Ee.closest("form");if(je){je.reset();break}}}}if(U.keepFieldsRef)for(const Q of c.mount)q(Q,_e(V,Q));else r={}}i=e.shouldUnregister?U.keepDefaultValues?rn(s):{}:rn(V),y.array.next({values:{...V}}),y.state.next({values:{...V}})}c={mount:U.keepDirtyValues?c.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!m.isValid||!!U.keepIsValid||!!U.keepDirtyValues||!e.shouldUnregister&&!Fn(V),o.watch=!!e.shouldUnregister,o.keepIsValid=!!U.keepIsValid,o.action=!1,U.keepErrors||(n.errors={}),y.state.next({submitCount:U.keepSubmitCount?n.submitCount:0,isDirty:B?!1:U.keepDirty?n.isDirty:!!(U.keepDefaultValues&&!Ei(_,s)),isSubmitted:U.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:B?{}:U.keepDirtyValues?U.keepDefaultValues&&i?xa(s,i):n.dirtyFields:U.keepDefaultValues&&_?xa(s,_):U.keepDirty?n.dirtyFields:{},touchedFields:U.keepTouched?n.touchedFields:{},errors:U.keepErrors?n.errors:{},isSubmitSuccessful:U.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:s})},vr=(_,U)=>yr(Ur(_)?_(i):_,{...e.resetOptions,...U}),Wt=(_,U={})=>{const re=_e(r,_),I=re&&re._f;if(I){const B=I.refs?I.refs[0]:I.ref;B.focus&&setTimeout(()=>{B.focus(),U.shouldSelect&&Ur(B.select)&&B.select()})}},an=_=>{n={...n,..._}},qn={control:{register:se,unregister:Ce,getFieldState:G,handleSubmit:ht,setError:Ae,_subscribe:Ve,_runSchema:ne,_updateIsValidating:j,_focusError:Ye,_getWatch:te,_getDirty:z,_setValid:w,_setFieldArray:C,_setDisabledField:Fe,_setErrors:A,_getFieldArray:ie,_reset:yr,_resetDefaultValues:()=>Ur(e.defaultValues)&&e.defaultValues().then(_=>{vr(_,e.resetOptions),y.state.next({isLoading:!1})}),_removeUnmounted:le,_disableForm:wt,_subjects:y,_proxyFormState:m,get _fields(){return r},get _formValues(){return i},get _state(){return o},set _state(_){o=_},get _defaultValues(){return s},get _names(){return c},set _names(_){c=_},get _formState(){return n},get _options(){return e},set _options(_){e={...e,..._}}},subscribe:Z,trigger:ce,register:se,handleSubmit:ht,watch:Ue,setValue:q,getValues:D,reset:vr,resetField:xr,clearErrors:Ne,unregister:Ce,setError:Ae,setFocus:Wt,getFieldState:G};return{...qn,formControl:qn}}function Sa(t={}){const e=dt.useRef(void 0),n=dt.useRef(void 0),[r,s]=dt.useState({isDirty:!1,isValidating:!1,isLoading:Ur(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:Ur(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:r},t.defaultValues&&!Ur(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:o,...c}=C5(t);e.current={...c,formState:r}}const i=e.current.control;return i._options=t,d5(()=>{const o=i._subscribe({formState:i._proxyFormState,callback:()=>s({...i._formState}),reRenderRoot:!0});return s(c=>({...c,isReady:!0})),i._formState.isReady=!0,o},[i]),dt.useEffect(()=>i._disableForm(t.disabled),[i,t.disabled]),dt.useEffect(()=>{t.mode&&(i._options.mode=t.mode),t.reValidateMode&&(i._options.reValidateMode=t.reValidateMode)},[i,t.mode,t.reValidateMode]),dt.useEffect(()=>{t.errors&&(i._setErrors(t.errors),i._focusError())},[i,t.errors]),dt.useEffect(()=>{t.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,t.shouldUnregister]),dt.useEffect(()=>{if(i._proxyFormState.isDirty){const o=i._getDirty();o!==r.isDirty&&i._subjects.state.next({isDirty:o})}},[i,r.isDirty]),dt.useEffect(()=>{var o;t.values&&!Ei(t.values,n.current)?(i._reset(t.values,{keepFieldsRef:!0,...i._options.resetOptions}),!((o=i._options.resetOptions)===null||o===void 0)&&o.keepIsValid||i._setValid(),n.current=t.values,s(c=>({...c}))):i._resetDefaultValues()},[i,t.values]),dt.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),e.current.formState=dt.useMemo(()=>c5(r,i),[i,r]),e.current}const Qb=(t,e,n)=>{if(t&&"reportValidity"in t){const r=_e(n,e);t.setCustomValidity(r&&r.message||""),t.reportValidity()}},TN=(t,e)=>{for(const n in e.fields){const r=e.fields[n];r&&r.ref&&"reportValidity"in r.ref?Qb(r.ref,n,t):r.refs&&r.refs.forEach(s=>Qb(s,n,t))}},E5=(t,e)=>{e.shouldUseNativeValidation&&TN(t,e);const n={};for(const r in t){const s=_e(e.fields,r),i=Object.assign(t[r]||{},{ref:s&&s.ref});if(T5(e.names||Object.keys(t),r)){const o=Object.assign({},_e(n,r));pt(o,"root",i),pt(n,r,o)}else pt(n,r,i)}return n},T5=(t,e)=>t.some(n=>n.startsWith(e+"."));var A5=function(t,e){for(var n={};t.length;){var r=t[0],s=r.code,i=r.message,o=r.path.join(".");if(!n[o])if("unionErrors"in r){var c=r.unionErrors[0].errors[0];n[o]={message:c.message,type:c.code}}else n[o]={message:i,type:s};if("unionErrors"in r&&r.unionErrors.forEach(function(p){return p.errors.forEach(function(m){return t.push(m)})}),e){var u=n[o].types,f=u&&u[r.code];n[o]=wN(o,e,n,s,f?[].concat(f,r.message):r.message)}t.shift()}return n},Ca=function(t,e,n){return n===void 0&&(n={}),function(r,s,i){try{return Promise.resolve((function(o,c){try{var u=Promise.resolve(t[n.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(f){return i.shouldUseNativeValidation&&TN({},i),{errors:{},values:n.raw?r:f}})}catch(f){return c(f)}return u&&u.then?u.then(void 0,c):u})(0,function(o){if((function(c){return Array.isArray(c==null?void 0:c.errors)})(o))return{values:{},errors:E5(A5(o.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw o}))}catch(o){return Promise.reject(o)}}},at;(function(t){t.assertEqual=s=>{};function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(c=>typeof s[s[c]]!="number"),o={};for(const c of i)o[c]=s[c];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(at||(at={}));var Yb;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(Yb||(Yb={}));const Re=at.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Ni=t=>{switch(typeof t){case"undefined":return Re.undefined;case"string":return Re.string;case"number":return Number.isNaN(t)?Re.nan:Re.number;case"boolean":return Re.boolean;case"function":return Re.function;case"bigint":return Re.bigint;case"symbol":return Re.symbol;case"object":return Array.isArray(t)?Re.array:t===null?Re.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Re.promise:typeof Map<"u"&&t instanceof Map?Re.map:typeof Set<"u"&&t instanceof Set?Re.set:typeof Date<"u"&&t instanceof Date?Re.date:Re.object;default:return Re.unknown}},ge=at.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Ks extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let c=r,u=0;for(;u<o.path.length;){const f=o.path[u];u===o.path.length-1?(c[f]=c[f]||{_errors:[]},c[f]._errors.push(n(o))):c[f]=c[f]||{_errors:[]},c=c[f],u++}}};return s(this),r}static assert(e){if(!(e instanceof Ks))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,at.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)if(s.path.length>0){const i=s.path[0];n[i]=n[i]||[],n[i].push(e(s))}else r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Ks.create=t=>new Ks(t);const og=(t,e)=>{let n;switch(t.code){case ge.invalid_type:t.received===Re.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case ge.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,at.jsonStringifyReplacer)}`;break;case ge.unrecognized_keys:n=`Unrecognized key(s) in object: ${at.joinValues(t.keys,", ")}`;break;case ge.invalid_union:n="Invalid input";break;case ge.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${at.joinValues(t.options)}`;break;case ge.invalid_enum_value:n=`Invalid enum value. Expected ${at.joinValues(t.options)}, received '${t.received}'`;break;case ge.invalid_arguments:n="Invalid function arguments";break;case ge.invalid_return_type:n="Invalid function return type";break;case ge.invalid_date:n="Invalid date";break;case ge.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:at.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case ge.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case ge.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case ge.custom:n="Invalid input";break;case ge.invalid_intersection_types:n="Intersection results could not be merged";break;case ge.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case ge.not_finite:n="Number must be finite";break;default:n=e.defaultError,at.assertNever(t)}return{message:n}};let M5=og;function R5(){return M5}const O5=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],o={...s,path:i};if(s.message!==void 0)return{...s,path:i,message:s.message};let c="";const u=r.filter(f=>!!f).slice().reverse();for(const f of u)c=f(o,{data:e,defaultError:c}).message;return{...s,path:i,message:c}};function Se(t,e){const n=R5(),r=O5({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===og?void 0:og].filter(s=>!!s)});t.common.issues.push(r)}class Un{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return Ze;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n){const i=await s.key,o=await s.value;r.push({key:i,value:o})}return Un.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return Ze;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const Ze=Object.freeze({status:"aborted"}),Hl=t=>({status:"dirty",value:t}),Ir=t=>({status:"valid",value:t}),Xb=t=>t.status==="aborted",e1=t=>t.status==="dirty",Ra=t=>t.status==="valid",zu=t=>typeof Promise<"u"&&t instanceof Promise;var Le;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Le||(Le={}));class hs{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const t1=(t,e)=>{if(Ra(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Ks(t.common.issues);return this._error=n,this._error}}};function nt(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,c)=>{const{message:u}=t;return o.code==="invalid_enum_value"?{message:u??c.defaultError}:typeof c.data>"u"?{message:u??r??c.defaultError}:o.code!=="invalid_type"?{message:c.defaultError}:{message:u??n??c.defaultError}},description:s}}class it{get description(){return this._def.description}_getType(e){return Ni(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Ni(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Un,ctx:{common:e.parent.common,data:e.data,parsedType:Ni(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(zu(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){const r={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ni(e)},s=this._parseSync({data:e,path:r.path,parent:r});return t1(r,s)}"~validate"(e){var r,s;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ni(e)};if(!this["~standard"].async)try{const i=this._parseSync({data:e,path:[],parent:n});return Ra(i)?{value:i.value}:{issues:n.common.issues}}catch(i){(s=(r=i==null?void 0:i.message)==null?void 0:r.toLowerCase())!=null&&s.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(i=>Ra(i)?{value:i.value}:{issues:n.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ni(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(zu(s)?s:Promise.resolve(s));return t1(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const o=e(s),c=()=>i.addIssue({code:ge.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(u=>u?!0:(c(),!1)):o?!0:(c(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new Mo({schema:this,typeName:Qe.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Vs.create(this,this._def)}nullable(){return Ro.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ds.create(this)}promise(){return Wu.create(this,this._def)}or(e){return $u.create([this,e],this._def)}and(e){return Vu.create(this,e,this._def)}transform(e){return new Mo({...nt(this._def),schema:this,typeName:Qe.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new qu({...nt(this._def),innerType:this,defaultValue:n,typeName:Qe.ZodDefault})}brand(){return new ON({typeName:Qe.ZodBranded,type:this,...nt(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new Ku({...nt(this._def),innerType:this,catchValue:n,typeName:Qe.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return A0.create(this,e)}readonly(){return Gu.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const _5=/^c[^\s-]{8,}$/i,P5=/^[0-9a-z]+$/,I5=/^[0-9A-HJKMNP-TV-Z]{26}$/i,D5=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,L5=/^[a-z0-9_-]{21}$/i,z5=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,B5=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,F5=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,$5="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let im;const V5=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,U5=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,H5=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,W5=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,q5=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,K5=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,AN="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",G5=new RegExp(`^${AN}$`);function MN(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function J5(t){return new RegExp(`^${MN(t)}$`)}function Z5(t){let e=`${AN}T${MN(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function Q5(t,e){return!!((e==="v4"||!e)&&V5.test(t)||(e==="v6"||!e)&&H5.test(t))}function Y5(t,e){if(!z5.test(t))return!1;try{const[n]=t.split(".");if(!n)return!1;const r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),s=JSON.parse(atob(r));return!(typeof s!="object"||s===null||"typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||e&&s.alg!==e)}catch{return!1}}function X5(t,e){return!!((e==="v4"||!e)&&U5.test(t)||(e==="v6"||!e)&&W5.test(t))}class Fs extends it{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Re.string){const i=this._getOrReturnCtx(e);return Se(i,{code:ge.invalid_type,expected:Re.string,received:i.parsedType}),Ze}const r=new Un;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),Se(s,{code:ge.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),Se(s,{code:ge.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,c=e.data.length<i.value;(o||c)&&(s=this._getOrReturnCtx(e,s),o?Se(s,{code:ge.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):c&&Se(s,{code:ge.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")F5.test(e.data)||(s=this._getOrReturnCtx(e,s),Se(s,{validation:"email",code:ge.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")im||(im=new RegExp($5,"u")),im.test(e.data)||(s=this._getOrReturnCtx(e,s),Se(s,{validation:"emoji",code:ge.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")D5.test(e.data)||(s=this._getOrReturnCtx(e,s),Se(s,{validation:"uuid",code:ge.invalid_string,message:i.message}),r.dirty());else if(i.kind==="nanoid")L5.test(e.data)||(s=this._getOrReturnCtx(e,s),Se(s,{validation:"nanoid",code:ge.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")_5.test(e.data)||(s=this._getOrReturnCtx(e,s),Se(s,{validation:"cuid",code:ge.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")P5.test(e.data)||(s=this._getOrReturnCtx(e,s),Se(s,{validation:"cuid2",code:ge.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")I5.test(e.data)||(s=this._getOrReturnCtx(e,s),Se(s,{validation:"ulid",code:ge.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),Se(s,{validation:"url",code:ge.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),Se(s,{validation:"regex",code:ge.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),Se(s,{code:ge.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),Se(s,{code:ge.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),Se(s,{code:ge.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?Z5(i).test(e.data)||(s=this._getOrReturnCtx(e,s),Se(s,{code:ge.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="date"?G5.test(e.data)||(s=this._getOrReturnCtx(e,s),Se(s,{code:ge.invalid_string,validation:"date",message:i.message}),r.dirty()):i.kind==="time"?J5(i).test(e.data)||(s=this._getOrReturnCtx(e,s),Se(s,{code:ge.invalid_string,validation:"time",message:i.message}),r.dirty()):i.kind==="duration"?B5.test(e.data)||(s=this._getOrReturnCtx(e,s),Se(s,{validation:"duration",code:ge.invalid_string,message:i.message}),r.dirty()):i.kind==="ip"?Q5(e.data,i.version)||(s=this._getOrReturnCtx(e,s),Se(s,{validation:"ip",code:ge.invalid_string,message:i.message}),r.dirty()):i.kind==="jwt"?Y5(e.data,i.alg)||(s=this._getOrReturnCtx(e,s),Se(s,{validation:"jwt",code:ge.invalid_string,message:i.message}),r.dirty()):i.kind==="cidr"?X5(e.data,i.version)||(s=this._getOrReturnCtx(e,s),Se(s,{validation:"cidr",code:ge.invalid_string,message:i.message}),r.dirty()):i.kind==="base64"?q5.test(e.data)||(s=this._getOrReturnCtx(e,s),Se(s,{validation:"base64",code:ge.invalid_string,message:i.message}),r.dirty()):i.kind==="base64url"?K5.test(e.data)||(s=this._getOrReturnCtx(e,s),Se(s,{validation:"base64url",code:ge.invalid_string,message:i.message}),r.dirty()):at.assertNever(i);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:ge.invalid_string,...Le.errToObj(r)})}_addCheck(e){return new Fs({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Le.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Le.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Le.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Le.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Le.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Le.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Le.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Le.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Le.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Le.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Le.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Le.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Le.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...Le.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Le.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Le.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Le.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...Le.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Le.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Le.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Le.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Le.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Le.errToObj(n)})}nonempty(e){return this.min(1,Le.errToObj(e))}trim(){return new Fs({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Fs({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Fs({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Fs.create=t=>new Fs({checks:[],typeName:Qe.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...nt(t)});function eR(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=Number.parseInt(t.toFixed(s).replace(".","")),o=Number.parseInt(e.toFixed(s).replace(".",""));return i%o/10**s}class Oa extends it{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Re.number){const i=this._getOrReturnCtx(e);return Se(i,{code:ge.invalid_type,expected:Re.number,received:i.parsedType}),Ze}let r;const s=new Un;for(const i of this._def.checks)i.kind==="int"?at.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),Se(r,{code:ge.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),Se(r,{code:ge.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),Se(r,{code:ge.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?eR(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),Se(r,{code:ge.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),Se(r,{code:ge.not_finite,message:i.message}),s.dirty()):at.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Le.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Le.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Le.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Le.toString(n))}setLimit(e,n,r,s){return new Oa({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Le.toString(s)}]})}_addCheck(e){return new Oa({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Le.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Le.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Le.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Le.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Le.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Le.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Le.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Le.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Le.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&at.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Oa.create=t=>new Oa({checks:[],typeName:Qe.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...nt(t)});class mc extends it{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Re.bigint)return this._getInvalidInput(e);let r;const s=new Un;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),Se(r,{code:ge.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),Se(r,{code:ge.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),Se(r,{code:ge.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):at.assertNever(i);return{status:s.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return Se(n,{code:ge.invalid_type,expected:Re.bigint,received:n.parsedType}),Ze}gte(e,n){return this.setLimit("min",e,!0,Le.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Le.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Le.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Le.toString(n))}setLimit(e,n,r,s){return new mc({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Le.toString(s)}]})}_addCheck(e){return new mc({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Le.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Le.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Le.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Le.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Le.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}mc.create=t=>new mc({checks:[],typeName:Qe.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...nt(t)});class n1 extends it{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Re.boolean){const r=this._getOrReturnCtx(e);return Se(r,{code:ge.invalid_type,expected:Re.boolean,received:r.parsedType}),Ze}return Ir(e.data)}}n1.create=t=>new n1({typeName:Qe.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...nt(t)});class Bu extends it{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Re.date){const i=this._getOrReturnCtx(e);return Se(i,{code:ge.invalid_type,expected:Re.date,received:i.parsedType}),Ze}if(Number.isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return Se(i,{code:ge.invalid_date}),Ze}const r=new Un;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),Se(s,{code:ge.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),Se(s,{code:ge.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):at.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Bu({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Le.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Le.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Bu.create=t=>new Bu({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Qe.ZodDate,...nt(t)});class r1 extends it{_parse(e){if(this._getType(e)!==Re.symbol){const r=this._getOrReturnCtx(e);return Se(r,{code:ge.invalid_type,expected:Re.symbol,received:r.parsedType}),Ze}return Ir(e.data)}}r1.create=t=>new r1({typeName:Qe.ZodSymbol,...nt(t)});class ag extends it{_parse(e){if(this._getType(e)!==Re.undefined){const r=this._getOrReturnCtx(e);return Se(r,{code:ge.invalid_type,expected:Re.undefined,received:r.parsedType}),Ze}return Ir(e.data)}}ag.create=t=>new ag({typeName:Qe.ZodUndefined,...nt(t)});class Fu extends it{_parse(e){if(this._getType(e)!==Re.null){const r=this._getOrReturnCtx(e);return Se(r,{code:ge.invalid_type,expected:Re.null,received:r.parsedType}),Ze}return Ir(e.data)}}Fu.create=t=>new Fu({typeName:Qe.ZodNull,...nt(t)});class s1 extends it{constructor(){super(...arguments),this._any=!0}_parse(e){return Ir(e.data)}}s1.create=t=>new s1({typeName:Qe.ZodAny,...nt(t)});class i1 extends it{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Ir(e.data)}}i1.create=t=>new i1({typeName:Qe.ZodUnknown,...nt(t)});class Vi extends it{_parse(e){const n=this._getOrReturnCtx(e);return Se(n,{code:ge.invalid_type,expected:Re.never,received:n.parsedType}),Ze}}Vi.create=t=>new Vi({typeName:Qe.ZodNever,...nt(t)});class o1 extends it{_parse(e){if(this._getType(e)!==Re.undefined){const r=this._getOrReturnCtx(e);return Se(r,{code:ge.invalid_type,expected:Re.void,received:r.parsedType}),Ze}return Ir(e.data)}}o1.create=t=>new o1({typeName:Qe.ZodVoid,...nt(t)});class ds extends it{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==Re.array)return Se(n,{code:ge.invalid_type,expected:Re.array,received:n.parsedType}),Ze;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,c=n.data.length<s.exactLength.value;(o||c)&&(Se(n,{code:o?ge.too_big:ge.too_small,minimum:c?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(Se(n,{code:ge.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(Se(n,{code:ge.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,c)=>s.type._parseAsync(new hs(n,o,n.path,c)))).then(o=>Un.mergeArray(r,o));const i=[...n.data].map((o,c)=>s.type._parseSync(new hs(n,o,n.path,c)));return Un.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new ds({...this._def,minLength:{value:e,message:Le.toString(n)}})}max(e,n){return new ds({...this._def,maxLength:{value:e,message:Le.toString(n)}})}length(e,n){return new ds({...this._def,exactLength:{value:e,message:Le.toString(n)}})}nonempty(e){return this.min(1,e)}}ds.create=(t,e)=>new ds({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Qe.ZodArray,...nt(e)});function ya(t){if(t instanceof Jt){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=Vs.create(ya(r))}return new Jt({...t._def,shape:()=>e})}else return t instanceof ds?new ds({...t._def,type:ya(t.element)}):t instanceof Vs?Vs.create(ya(t.unwrap())):t instanceof Ro?Ro.create(ya(t.unwrap())):t instanceof To?To.create(t.items.map(e=>ya(e))):t}class Jt extends it{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=at.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==Re.object){const f=this._getOrReturnCtx(e);return Se(f,{code:ge.invalid_type,expected:Re.object,received:f.parsedType}),Ze}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),c=[];if(!(this._def.catchall instanceof Vi&&this._def.unknownKeys==="strip"))for(const f in s.data)o.includes(f)||c.push(f);const u=[];for(const f of o){const p=i[f],m=s.data[f];u.push({key:{status:"valid",value:f},value:p._parse(new hs(s,m,s.path,f)),alwaysSet:f in s.data})}if(this._def.catchall instanceof Vi){const f=this._def.unknownKeys;if(f==="passthrough")for(const p of c)u.push({key:{status:"valid",value:p},value:{status:"valid",value:s.data[p]}});else if(f==="strict")c.length>0&&(Se(s,{code:ge.unrecognized_keys,keys:c}),r.dirty());else if(f!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const f=this._def.catchall;for(const p of c){const m=s.data[p];u.push({key:{status:"valid",value:p},value:f._parse(new hs(s,m,s.path,p)),alwaysSet:p in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const f=[];for(const p of u){const m=await p.key,x=await p.value;f.push({key:m,value:x,alwaysSet:p.alwaysSet})}return f}).then(f=>Un.mergeObjectSync(r,f)):Un.mergeObjectSync(r,u)}get shape(){return this._def.shape()}strict(e){return Le.errToObj,new Jt({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var i,o;const s=((o=(i=this._def).errorMap)==null?void 0:o.call(i,n,r).message)??r.defaultError;return n.code==="unrecognized_keys"?{message:Le.errToObj(e).message??s}:{message:s}}}:{}})}strip(){return new Jt({...this._def,unknownKeys:"strip"})}passthrough(){return new Jt({...this._def,unknownKeys:"passthrough"})}extend(e){return new Jt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Jt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Qe.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new Jt({...this._def,catchall:e})}pick(e){const n={};for(const r of at.objectKeys(e))e[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new Jt({...this._def,shape:()=>n})}omit(e){const n={};for(const r of at.objectKeys(this.shape))e[r]||(n[r]=this.shape[r]);return new Jt({...this._def,shape:()=>n})}deepPartial(){return ya(this)}partial(e){const n={};for(const r of at.objectKeys(this.shape)){const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}return new Jt({...this._def,shape:()=>n})}required(e){const n={};for(const r of at.objectKeys(this.shape))if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof Vs;)i=i._def.innerType;n[r]=i}return new Jt({...this._def,shape:()=>n})}keyof(){return RN(at.objectKeys(this.shape))}}Jt.create=(t,e)=>new Jt({shape:()=>t,unknownKeys:"strip",catchall:Vi.create(),typeName:Qe.ZodObject,...nt(e)});Jt.strictCreate=(t,e)=>new Jt({shape:()=>t,unknownKeys:"strict",catchall:Vi.create(),typeName:Qe.ZodObject,...nt(e)});Jt.lazycreate=(t,e)=>new Jt({shape:t,unknownKeys:"strip",catchall:Vi.create(),typeName:Qe.ZodObject,...nt(e)});class $u extends it{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const c of i)if(c.result.status==="valid")return c.result;for(const c of i)if(c.result.status==="dirty")return n.common.issues.push(...c.ctx.common.issues),c.result;const o=i.map(c=>new Ks(c.ctx.common.issues));return Se(n,{code:ge.invalid_union,unionErrors:o}),Ze}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const u of r){const f={...n,common:{...n.common,issues:[]},parent:null},p=u._parseSync({data:n.data,path:n.path,parent:f});if(p.status==="valid")return p;p.status==="dirty"&&!i&&(i={result:p,ctx:f}),f.common.issues.length&&o.push(f.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const c=o.map(u=>new Ks(u));return Se(n,{code:ge.invalid_union,unionErrors:c}),Ze}}get options(){return this._def.options}}$u.create=(t,e)=>new $u({options:t,typeName:Qe.ZodUnion,...nt(e)});const Ds=t=>t instanceof cg?Ds(t.schema):t instanceof Mo?Ds(t.innerType()):t instanceof Hu?[t.value]:t instanceof Ao?t.options:t instanceof dg?at.objectValues(t.enum):t instanceof qu?Ds(t._def.innerType):t instanceof ag?[void 0]:t instanceof Fu?[null]:t instanceof Vs?[void 0,...Ds(t.unwrap())]:t instanceof Ro?[null,...Ds(t.unwrap())]:t instanceof ON||t instanceof Gu?Ds(t.unwrap()):t instanceof Ku?Ds(t._def.innerType):[];class T0 extends it{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Re.object)return Se(n,{code:ge.invalid_type,expected:Re.object,received:n.parsedType}),Ze;const r=this.discriminator,s=n.data[r],i=this.optionsMap.get(s);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(Se(n,{code:ge.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),Ze)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const s=new Map;for(const i of n){const o=Ds(i.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const c of o){if(s.has(c))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(c)}`);s.set(c,i)}}return new T0({typeName:Qe.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:s,...nt(r)})}}function lg(t,e){const n=Ni(t),r=Ni(e);if(t===e)return{valid:!0,data:t};if(n===Re.object&&r===Re.object){const s=at.objectKeys(e),i=at.objectKeys(t).filter(c=>s.indexOf(c)!==-1),o={...t,...e};for(const c of i){const u=lg(t[c],e[c]);if(!u.valid)return{valid:!1};o[c]=u.data}return{valid:!0,data:o}}else if(n===Re.array&&r===Re.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],c=e[i],u=lg(o,c);if(!u.valid)return{valid:!1};s.push(u.data)}return{valid:!0,data:s}}else return n===Re.date&&r===Re.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Vu extends it{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,o)=>{if(Xb(i)||Xb(o))return Ze;const c=lg(i.value,o.value);return c.valid?((e1(i)||e1(o))&&n.dirty(),{status:n.value,value:c.data}):(Se(r,{code:ge.invalid_intersection_types}),Ze)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Vu.create=(t,e,n)=>new Vu({left:t,right:e,typeName:Qe.ZodIntersection,...nt(n)});class To extends it{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Re.array)return Se(r,{code:ge.invalid_type,expected:Re.array,received:r.parsedType}),Ze;if(r.data.length<this._def.items.length)return Se(r,{code:ge.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Ze;!this._def.rest&&r.data.length>this._def.items.length&&(Se(r,{code:ge.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,c)=>{const u=this._def.items[c]||this._def.rest;return u?u._parse(new hs(r,o,r.path,c)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>Un.mergeArray(n,o)):Un.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new To({...this._def,rest:e})}}To.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new To({items:t,typeName:Qe.ZodTuple,rest:null,...nt(e)})};class Uu extends it{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Re.object)return Se(r,{code:ge.invalid_type,expected:Re.object,received:r.parsedType}),Ze;const s=[],i=this._def.keyType,o=this._def.valueType;for(const c in r.data)s.push({key:i._parse(new hs(r,c,r.path,c)),value:o._parse(new hs(r,r.data[c],r.path,c)),alwaysSet:c in r.data});return r.common.async?Un.mergeObjectAsync(n,s):Un.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof it?new Uu({keyType:e,valueType:n,typeName:Qe.ZodRecord,...nt(r)}):new Uu({keyType:Fs.create(),valueType:e,typeName:Qe.ZodRecord,...nt(n)})}}class a1 extends it{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Re.map)return Se(r,{code:ge.invalid_type,expected:Re.map,received:r.parsedType}),Ze;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([c,u],f)=>({key:s._parse(new hs(r,c,r.path,[f,"key"])),value:i._parse(new hs(r,u,r.path,[f,"value"]))}));if(r.common.async){const c=new Map;return Promise.resolve().then(async()=>{for(const u of o){const f=await u.key,p=await u.value;if(f.status==="aborted"||p.status==="aborted")return Ze;(f.status==="dirty"||p.status==="dirty")&&n.dirty(),c.set(f.value,p.value)}return{status:n.value,value:c}})}else{const c=new Map;for(const u of o){const f=u.key,p=u.value;if(f.status==="aborted"||p.status==="aborted")return Ze;(f.status==="dirty"||p.status==="dirty")&&n.dirty(),c.set(f.value,p.value)}return{status:n.value,value:c}}}}a1.create=(t,e,n)=>new a1({valueType:e,keyType:t,typeName:Qe.ZodMap,...nt(n)});class gc extends it{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Re.set)return Se(r,{code:ge.invalid_type,expected:Re.set,received:r.parsedType}),Ze;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(Se(r,{code:ge.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(Se(r,{code:ge.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function o(u){const f=new Set;for(const p of u){if(p.status==="aborted")return Ze;p.status==="dirty"&&n.dirty(),f.add(p.value)}return{status:n.value,value:f}}const c=[...r.data.values()].map((u,f)=>i._parse(new hs(r,u,r.path,f)));return r.common.async?Promise.all(c).then(u=>o(u)):o(c)}min(e,n){return new gc({...this._def,minSize:{value:e,message:Le.toString(n)}})}max(e,n){return new gc({...this._def,maxSize:{value:e,message:Le.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}gc.create=(t,e)=>new gc({valueType:t,minSize:null,maxSize:null,typeName:Qe.ZodSet,...nt(e)});class cg extends it{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}cg.create=(t,e)=>new cg({getter:t,typeName:Qe.ZodLazy,...nt(e)});class Hu extends it{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return Se(n,{received:n.data,code:ge.invalid_literal,expected:this._def.value}),Ze}return{status:"valid",value:e.data}}get value(){return this._def.value}}Hu.create=(t,e)=>new Hu({value:t,typeName:Qe.ZodLiteral,...nt(e)});function RN(t,e){return new Ao({values:t,typeName:Qe.ZodEnum,...nt(e)})}class Ao extends it{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return Se(n,{expected:at.joinValues(r),received:n.parsedType,code:ge.invalid_type}),Ze}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return Se(n,{received:n.data,code:ge.invalid_enum_value,options:r}),Ze}return Ir(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return Ao.create(e,{...this._def,...n})}exclude(e,n=this._def){return Ao.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}Ao.create=RN;class dg extends it{_parse(e){const n=at.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Re.string&&r.parsedType!==Re.number){const s=at.objectValues(n);return Se(r,{expected:at.joinValues(s),received:r.parsedType,code:ge.invalid_type}),Ze}if(this._cache||(this._cache=new Set(at.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const s=at.objectValues(n);return Se(r,{received:r.data,code:ge.invalid_enum_value,options:s}),Ze}return Ir(e.data)}get enum(){return this._def.values}}dg.create=(t,e)=>new dg({values:t,typeName:Qe.ZodNativeEnum,...nt(e)});class Wu extends it{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Re.promise&&n.common.async===!1)return Se(n,{code:ge.invalid_type,expected:Re.promise,received:n.parsedType}),Ze;const r=n.parsedType===Re.promise?n.data:Promise.resolve(n.data);return Ir(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Wu.create=(t,e)=>new Wu({type:t,typeName:Qe.ZodPromise,...nt(e)});class Mo extends it{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Qe.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{Se(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);if(r.common.async)return Promise.resolve(o).then(async c=>{if(n.value==="aborted")return Ze;const u=await this._def.schema._parseAsync({data:c,path:r.path,parent:r});return u.status==="aborted"?Ze:u.status==="dirty"||n.value==="dirty"?Hl(u.value):u});{if(n.value==="aborted")return Ze;const c=this._def.schema._parseSync({data:o,path:r.path,parent:r});return c.status==="aborted"?Ze:c.status==="dirty"||n.value==="dirty"?Hl(c.value):c}}if(s.type==="refinement"){const o=c=>{const u=s.refinement(c,i);if(r.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return c};if(r.common.async===!1){const c=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return c.status==="aborted"?Ze:(c.status==="dirty"&&n.dirty(),o(c.value),{status:n.value,value:c.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(c=>c.status==="aborted"?Ze:(c.status==="dirty"&&n.dirty(),o(c.value).then(()=>({status:n.value,value:c.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Ra(o))return Ze;const c=s.transform(o.value,i);if(c instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:c}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>Ra(o)?Promise.resolve(s.transform(o.value,i)).then(c=>({status:n.value,value:c})):Ze);at.assertNever(s)}}Mo.create=(t,e,n)=>new Mo({schema:t,typeName:Qe.ZodEffects,effect:e,...nt(n)});Mo.createWithPreprocess=(t,e,n)=>new Mo({schema:e,effect:{type:"preprocess",transform:t},typeName:Qe.ZodEffects,...nt(n)});class Vs extends it{_parse(e){return this._getType(e)===Re.undefined?Ir(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Vs.create=(t,e)=>new Vs({innerType:t,typeName:Qe.ZodOptional,...nt(e)});class Ro extends it{_parse(e){return this._getType(e)===Re.null?Ir(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ro.create=(t,e)=>new Ro({innerType:t,typeName:Qe.ZodNullable,...nt(e)});class qu extends it{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===Re.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}qu.create=(t,e)=>new qu({innerType:t,typeName:Qe.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...nt(e)});class Ku extends it{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return zu(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Ks(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Ks(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Ku.create=(t,e)=>new Ku({innerType:t,typeName:Qe.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...nt(e)});class ug extends it{_parse(e){if(this._getType(e)!==Re.nan){const r=this._getOrReturnCtx(e);return Se(r,{code:ge.invalid_type,expected:Re.nan,received:r.parsedType}),Ze}return{status:"valid",value:e.data}}}ug.create=t=>new ug({typeName:Qe.ZodNaN,...nt(t)});class ON extends it{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class A0 extends it{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Ze:i.status==="dirty"?(n.dirty(),Hl(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?Ze:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new A0({in:e,out:n,typeName:Qe.ZodPipeline})}}class Gu extends it{_parse(e){const n=this._def.innerType._parse(e),r=s=>(Ra(s)&&(s.value=Object.freeze(s.value)),s);return zu(n)?n.then(s=>r(s)):r(n)}unwrap(){return this._def.innerType}}Gu.create=(t,e)=>new Gu({innerType:t,typeName:Qe.ZodReadonly,...nt(e)});var Qe;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Qe||(Qe={}));const ke=Fs.create,ec=Oa.create,l1=ug.create,c1=Fu.create;Vi.create;const tR=ds.create,sn=Jt.create,d1=$u.create,nR=T0.create;Vu.create;To.create;const rR=Uu.create,bo=Hu.create,sR=Ao.create;Wu.create;Vs.create;Ro.create;const Pe=E.forwardRef(({className:t,type:e,error:n,label:r,icon:s,rightElement:i,helperText:o,...c},u)=>l.jsxs("div",{className:"w-full",children:[r&&l.jsxs("label",{className:"mb-1.5 block text-sm font-medium text-slate-700",children:[r,c.required&&l.jsx("span",{className:"ml-0.5 text-red-500",children:"*"})]}),l.jsxs("div",{className:"relative",children:[s&&l.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3 text-slate-400",children:s}),l.jsx("input",{type:e,className:be("flex h-11 w-full rounded-lg border bg-white px-4 py-2.5 text-sm text-slate-900 transition-all duration-200","border-slate-300 placeholder:text-slate-400","hover:border-slate-400","focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20","disabled:cursor-not-allowed disabled:bg-slate-50 disabled:text-slate-500",s&&"pl-10",i&&"pr-28",n&&"border-red-500 focus:border-red-500 focus:ring-red-500/20",t),ref:u,...c}),i&&l.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3",children:i})]}),n&&l.jsxs("p",{className:"mt-1.5 flex items-center gap-1 text-sm text-red-600",children:[l.jsx("svg",{className:"h-4 w-4 flex-shrink-0",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),n]}),o&&!n&&l.jsx("p",{className:"mt-1 text-xs text-slate-500",children:o})]}));Pe.displayName="Input";const iR=sn({email:ke().email("Please enter a valid email"),password:ke().min(6,"Password must be at least 6 characters")});function oR(){var x,y,v,k;const t=Dn(),e=Pr(),{login:n,runPostLoginChecks:r,error:s,clearError:i}=Zt(),o=((y=(x=e.state)==null?void 0:x.from)==null?void 0:y.pathname)||"/dashboard",{register:c,handleSubmit:u,formState:{errors:f,isSubmitting:p}}=Sa({resolver:Ca(iR)}),m=async w=>{if(i(),!(await n(w.email,w.password)).success)return;const C=await r();switch(C.destination){case"dashboard":t(o==="/login"?"/dashboard":o,{replace:!0});break;case"onboarding":t("/register",{replace:!0,state:{resumeOnboarding:!0,missingFields:C.missingFields}});break;case"onboarding-warehouse":t("/register",{replace:!0,state:{resumeOnboarding:!0,resumeStep:"business"}});break;case"pending":default:t("/pending-approval",{replace:!0});break}};return l.jsxs("div",{className:"min-h-screen flex",children:[l.jsxs("div",{className:"hidden lg:flex lg:w-1/2 bg-gradient-to-br from-slate-900 via-violet-950 to-slate-900 relative overflow-hidden",children:[l.jsxs("div",{className:"absolute inset-0",children:[l.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-violet-500/20 rounded-full blur-3xl"}),l.jsx("div",{className:"absolute bottom-20 -left-20 w-96 h-96 bg-indigo-500/20 rounded-full blur-3xl"})]}),l.jsxs("div",{className:"relative z-10 flex flex-col justify-center p-12 text-white",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-12",children:[l.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-violet-500 to-indigo-600 rounded-xl flex items-center justify-center",children:l.jsx(fs,{className:"w-6 h-6"})}),l.jsx("span",{className:"text-2xl font-bold",children:"Bukizz Vendor"})]}),l.jsxs("h1",{className:"text-4xl font-bold mb-6",children:["Welcome back to your"," ",l.jsx("span",{className:"bg-gradient-to-r from-violet-400 to-indigo-400 bg-clip-text text-transparent",children:"Seller Dashboard"})]}),l.jsx("p",{className:"text-lg text-slate-400 mb-8",children:"Manage your products, track orders, and grow your school supplies business."}),l.jsx("div",{className:"grid grid-cols-2 gap-4",children:[{label:"Active Vendors",value:"500+"},{label:"Schools Connected",value:"1,200+"},{label:"Orders Fulfilled",value:"50K+"},{label:"Satisfaction Rate",value:"98%"}].map((w,j)=>l.jsxs("div",{className:"p-4 rounded-xl bg-white/5 backdrop-blur-sm border border-white/10",children:[l.jsx("p",{className:"text-2xl font-bold text-white",children:w.value}),l.jsx("p",{className:"text-sm text-slate-400",children:w.label})]},j))})]})]}),l.jsx("div",{className:"flex-1 flex items-center justify-center p-6 lg:p-12 bg-white dark:bg-slate-950",children:l.jsxs("div",{className:"w-full max-w-md",children:[l.jsxs("div",{className:"lg:hidden flex items-center gap-2 justify-center mb-8",children:[l.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-violet-500 to-indigo-600 rounded-xl flex items-center justify-center",children:l.jsx(fs,{className:"w-5 h-5 text-white"})}),l.jsx("span",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Bukizz"})]}),l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-2",children:"Sign in to your account"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Enter your credentials to access your dashboard"})]}),s&&l.jsx("div",{className:"mb-6 rounded-lg bg-red-50 border border-red-200 px-4 py-3 text-sm text-red-700 animate-fade-in",children:s}),l.jsxs("form",{onSubmit:u(m),className:"space-y-6",children:[l.jsx(Pe,{label:"Email Address",type:"email",placeholder:"you@business.com",icon:l.jsx(mr,{className:"w-5 h-5"}),...c("email"),error:(v=f.email)==null?void 0:v.message}),l.jsxs("div",{children:[l.jsx(Pe,{label:"Password",type:"password",placeholder:"",icon:l.jsx(pc,{className:"w-5 h-5"}),...c("password"),error:(k=f.password)==null?void 0:k.message}),l.jsx("div",{className:"mt-2 flex justify-end",children:l.jsx(Dt,{to:"/forgot-password",className:"text-sm text-violet-600 hover:text-violet-700 dark:text-violet-400",children:"Forgot password?"})})]}),l.jsxs(xe,{type:"submit",className:"w-full",size:"lg",loading:p,children:["Sign In",l.jsx(Eo,{className:"w-5 h-5"})]})]}),l.jsxs("p",{className:"mt-8 text-center text-sm text-slate-500 dark:text-slate-400",children:["Don't have an account?"," ",l.jsx(Dt,{to:"/register",className:"text-violet-600 hover:text-violet-700 dark:text-violet-400 font-medium",children:"Register as a vendor"})]})]})})]})}const om=[{id:"mobile",title:"Mobile & Email Verification",description:"Verify your contact details",substeps:["Mobile Verification","Email Verification"]},{id:"email",title:"ID & Signature Verification",description:"Upload your documents",substeps:["ID Verification","Signature Verification"]},{id:"business",title:"Store & Pickup Details",description:"Add your business information",substeps:["Display Name","Pickup Address"]}];function aR({currentStep:t,completedSteps:e}){const n=Math.round(e.length/om.length*100);return l.jsxs("div",{className:"h-full bg-white border-r border-gray-200 p-6 flex flex-col",children:[l.jsx("div",{className:"mb-6",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-8 h-8 bg-[#2874F0] rounded-lg flex items-center justify-center",children:l.jsx("span",{className:"text-white font-bold text-sm",children:"B"})}),l.jsx("span",{className:"text-lg font-bold text-[#212121]",children:"Bukizz"})]})}),l.jsxs("div",{className:"bg-[#FFF8E1] rounded-lg p-4 mb-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("span",{className:"text-sm font-medium text-[#212121]",children:"Your onboarding"}),l.jsx("span",{className:"text-xs text-[#878787]",children:"completion status"})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("div",{className:"relative w-14 h-14",children:[l.jsxs("svg",{className:"w-full h-full -rotate-90",children:[l.jsx("circle",{cx:"28",cy:"28",r:"24",stroke:"#E0E0E0",strokeWidth:"4",fill:"none"}),l.jsx("circle",{cx:"28",cy:"28",r:"24",stroke:"url(#progress-gradient)",strokeWidth:"4",fill:"none",strokeLinecap:"round",strokeDasharray:`${n*1.5} 150`,className:"transition-all duration-700 ease-out"}),l.jsx("defs",{children:l.jsxs("linearGradient",{id:"progress-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[l.jsx("stop",{offset:"0%",stopColor:"#FF9F00"}),l.jsx("stop",{offset:"100%",stopColor:"#FFE500"})]})})]}),l.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:l.jsxs("span",{className:"text-sm font-bold text-[#FF9F00]",children:[n,"%"]})})]}),l.jsx("div",{className:"h-2 flex-1 bg-gray-200 rounded-full overflow-hidden",children:l.jsx("div",{className:"h-full bg-gradient-to-r from-[#FF9F00] to-[#FFE500] rounded-full transition-all duration-500",style:{width:`${n}%`}})})]})]}),l.jsx("div",{className:"flex-1 overflow-y-auto",children:om.map((r,s)=>{const i=e.includes(r.id),o=t===r.id,c=om.findIndex(f=>f.id===t),u=s<c;return l.jsxs("div",{className:"mb-4",children:[l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:be("flex-shrink-0 w-6 h-6 rounded-full flex items-center justify-center text-xs font-medium transition-all",i||u?"bg-[#26A541] text-white":o?"bg-[#2874F0] text-white ring-2 ring-[#2874F0]/20":"bg-gray-200 text-gray-500"),children:i||u?l.jsx($i,{className:"w-3.5 h-3.5"}):s+1}),l.jsx("div",{className:"flex-1",children:l.jsx("p",{className:be("text-sm font-medium",o?"text-[#212121]":i||u?"text-[#26A541]":"text-[#878787]"),children:r.title})})]}),r.substeps&&l.jsx("div",{className:"ml-9 mt-2 space-y-1.5",children:r.substeps.map((f,p)=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:be("w-4 h-4 rounded-full flex items-center justify-center",i||u?"bg-[#26A541]":o&&p===0?"bg-[#2874F0]":"bg-transparent border border-gray-300"),children:(i||u||o&&p===0)&&l.jsx($i,{className:"w-2.5 h-2.5 text-white"})}),l.jsx("span",{className:be("text-xs",i||u?"text-[#26A541]":o&&p===0?"text-[#2874F0]":"text-[#ABABAB]"),children:f})]},p))})]},r.id)})}),l.jsx("div",{className:"pt-4 border-t border-gray-200",children:l.jsxs("p",{className:"text-xs text-[#878787]",children:["Need help?"," ",l.jsx("a",{href:"#",className:"text-[#2874F0] hover:underline",children:"Contact Support"})]})})]})}function lR({value:t,onChange:e,error:n}){const r=[{id:"all_categories",title:"All Categories",subtitle:"(GSTIN is mandatory)",icon:_t}];return l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-[#212121] mb-3",children:"What are you looking to sell on Bukizz?"}),l.jsx("div",{className:"flex gap-4",children:r.map(s=>{const i=t===s.id,o=s.icon;return l.jsxs("button",{type:"button",onClick:()=>e(s.id),className:be("relative flex items-center gap-3 px-5 py-4 rounded-lg border-2 text-left transition-all duration-200 flex-1",i?"border-[#2874F0] bg-[#E8F0FE]":"border-gray-200 bg-white hover:border-gray-300"),children:[i&&l.jsx("div",{className:"absolute top-2 right-2 w-5 h-5 rounded-full bg-[#2874F0] flex items-center justify-center",children:l.jsx($i,{className:"w-3 h-3 text-white"})}),l.jsx("div",{className:be("w-10 h-10 rounded-lg flex items-center justify-center",i?"bg-[#2874F0]":"bg-gray-100"),children:l.jsx(o,{className:be("w-5 h-5",i?"text-white":"text-gray-500")})}),l.jsxs("div",{children:[l.jsx("p",{className:be("font-medium text-sm",i?"text-[#2874F0]":"text-[#212121]"),children:s.title}),l.jsx("p",{className:"text-xs text-[#878787]",children:s.subtitle})]})]},s.id)})}),n&&l.jsxs("p",{className:"mt-2 text-sm text-[#FF6161] flex items-center gap-1",children:[l.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),n]})]})}const cR=Ff(Ek((t,e)=>({name:"",contactEmail:"",contactPhone:"",website:"",isVerified:!1,metadata:{},address:{line1:"",line2:"",city:"",state:"",postalCode:"",country:"India",lat:null,lng:null},warehouseId:null,isSubmitting:!1,error:null,isCreated:!1,updateField:(n,r)=>t({[n]:r}),updateAddress:(n,r)=>t(s=>({address:{...s.address,[n]:r}})),setAddress:n=>t(r=>({address:{...r.address,...n}})),setFields:n=>t(n),createWarehouse:async()=>{var f,p,m,x,y;t({isSubmitting:!0,error:null});const{name:n,contactEmail:r,contactPhone:s,website:i,metadata:o,address:c}=e(),u={name:n,contactEmail:r||void 0,contactPhone:s||void 0,website:i||void 0,isVerified:!1,metadata:o&&Object.keys(o).length>0?o:void 0,address:{line1:c.line1,line2:c.line2||void 0,city:c.city,state:c.state,postalCode:c.postalCode,country:c.country||"India",lat:c.lat||void 0,lng:c.lng||void 0}};try{const v=await $e.post("/warehouses/",u),k=((f=v.data)==null?void 0:f.data)||v.data;return t({warehouseId:k.id||k.warehouseId||null,isCreated:!0,isSubmitting:!1,error:null}),{success:!0,data:k}}catch(v){const k=((m=(p=v.response)==null?void 0:p.data)==null?void 0:m.message)||((y=(x=v.response)==null?void 0:x.data)==null?void 0:y.error)||"Failed to create warehouse. Please try again.";return t({isSubmitting:!1,error:k}),{success:!1,error:k}}},createWarehouseAdmin:async n=>{var p,m,x,y,v;t({isSubmitting:!0,error:null});const{name:r,contactEmail:s,contactPhone:i,website:o,metadata:c,address:u}=e(),f={retailerId:n,name:r,contactEmail:s||void 0,contactPhone:i||void 0,website:o||void 0,isVerified:!1,metadata:c&&Object.keys(c).length>0?c:void 0,address:{line1:u.line1,line2:u.line2||void 0,city:u.city,state:u.state,postalCode:u.postalCode,country:u.country||"India",lat:u.lat||void 0,lng:u.lng||void 0}};try{const k=await $e.post("/warehouses/admin",f),w=((p=k.data)==null?void 0:p.data)||k.data;return t({warehouseId:w.id||w.warehouseId||null,isCreated:!0,isSubmitting:!1,error:null}),{success:!0,data:w}}catch(k){const w=((x=(m=k.response)==null?void 0:m.data)==null?void 0:x.message)||((v=(y=k.response)==null?void 0:y.data)==null?void 0:v.error)||"Failed to create warehouse. Please try again.";return t({isSubmitting:!1,error:w}),{success:!1,error:w}}},clearError:()=>t({error:null}),reset:()=>t({name:"",contactEmail:"",contactPhone:"",website:"",isVerified:!1,metadata:{},address:{line1:"",line2:"",city:"",state:"",postalCode:"",country:"India",lat:null,lng:null},warehouseId:null,isSubmitting:!1,error:null,isCreated:!1})}),{name:"bukizz-warehouse",partialize:t=>({name:t.name,contactEmail:t.contactEmail,contactPhone:t.contactPhone,website:t.website,metadata:t.metadata,address:t.address,warehouseId:t.warehouseId,isCreated:t.isCreated})})),dR=sn({mobile:ke().min(10,"Mobile number must be 10 digits").max(10,"Mobile number must be 10 digits").regex(/^[6-9]\d{9}$/,"Please enter a valid Indian mobile number"),otp:ke().length(6,"OTP must be 6 digits").optional()}),uR=sn({email:ke().email("Please enter a valid email address"),otp:ke().length(6,"OTP must be 6 digits").optional()}),fR=sn({fullName:ke().min(2,"Full name is required"),mobile:ke().min(10,"Mobile number must be 10 digits").max(10,"Mobile number must be 10 digits").regex(/^[6-9]\d{9}$/,"Please enter a valid Indian mobile number"),email:ke().email("Please enter a valid email address"),password:ke().min(6,"Password must be at least 6 characters"),confirmPassword:ke()}).refine(t=>t.password===t.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]}),hR=sn({businessCategory:bo("individual"),businessName:ke().min(3,"Business name is required"),ownerName:ke().min(2,"Owner name is required"),panNumber:ke().regex(/^[A-Z]{5}[0-9]{4}[A-Z]{1}$/,"Please enter a valid PAN number"),address:sn({line1:ke().min(5,"Address is required"),line2:ke().optional(),city:ke().min(2,"City is required"),state:ke().min(2,"State is required"),pincode:ke().regex(/^[1-9][0-9]{5}$/,"Please enter a valid 6-digit pincode")})}),pR=sn({businessCategory:bo("company"),businessName:ke().min(3,"Business name is required"),ownerName:ke().min(2,"Owner name is required"),gstin:ke().regex(/^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$/,"Please enter a valid GSTIN"),panNumber:ke().regex(/^[A-Z]{5}[0-9]{4}[A-Z]{1}$/,"Please enter a valid PAN number"),address:sn({line1:ke().min(5,"Address is required"),line2:ke().optional(),city:ke().min(2,"City is required"),state:ke().min(2,"State is required"),pincode:ke().regex(/^[1-9][0-9]{5}$/,"Please enter a valid 6-digit pincode")})}),mR=sn({businessCategory:bo("partnership"),businessName:ke().min(3,"Business name is required"),ownerName:ke().min(2,"Owner name is required"),gstin:ke().regex(/^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$/,"Please enter a valid GSTIN"),panNumber:ke().regex(/^[A-Z]{5}[0-9]{4}[A-Z]{1}$/,"Please enter a valid PAN number"),partnershipDeed:ke().optional(),address:sn({line1:ke().min(5,"Address is required"),line2:ke().optional(),city:ke().min(2,"City is required"),state:ke().min(2,"State is required"),pincode:ke().regex(/^[1-9][0-9]{5}$/,"Please enter a valid 6-digit pincode")})}),gR=sn({businessCategory:bo("all_categories"),businessName:ke().min(3,"Business name is required"),ownerName:ke().min(2,"Owner name is required"),gstin:ke().regex(/^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$/,"Please enter a valid GSTIN"),panNumber:ke().regex(/^[A-Z]{5}[0-9]{4}[A-Z]{1}$/,"Please enter a valid PAN number"),address:sn({line1:ke().min(5,"Address is required"),line2:ke().optional(),city:ke().min(2,"City is required"),state:ke().min(2,"State is required"),pincode:ke().regex(/^[1-9][0-9]{5}$/,"Please enter a valid 6-digit pincode")})}),_N=nR("businessCategory",[hR,pR,mR,gR]),xR=sn({name:ke().min(2,"Warehouse / Store name is required"),contactEmail:ke().email("Please enter a valid email").or(bo("")).optional(),contactPhone:ke().regex(/^\+?\d[\d\s-]{7,15}$/,"Please enter a valid phone number").or(bo("")).optional(),website:ke().url("Please enter a valid URL").or(bo("")).optional(),address:sn({line1:ke().min(5,"Address line 1 is required"),line2:ke().optional(),city:ke().min(2,"City is required"),state:ke().min(2,"State is required"),postalCode:ke().regex(/^[1-9][0-9]{5}$/,"Please enter a valid 6-digit pincode"),country:ke().min(2,"Country is required").default("India"),lat:d1([ec(),l1(),c1()]).optional(),lng:d1([ec(),l1(),c1()]).optional()})}),yR=sn({accountHolderName:ke().min(3,"Account holder name is required"),accountNumber:ke().min(9,"Account number must be at least 9 digits").max(18,"Account number must not exceed 18 digits").regex(/^\d+$/,"Account number must contain only digits"),confirmAccountNumber:ke(),ifscCode:ke().regex(/^[A-Z]{4}0[A-Z0-9]{6}$/,"Please enter a valid IFSC code"),bankName:ke().min(2,"Bank name is required"),branchName:ke().optional(),accountType:sR(["savings","current"],{required_error:"Please select account type"})}).refine(t=>t.accountNumber===t.confirmAccountNumber,{message:"Account numbers don't match",path:["confirmAccountNumber"]});sn({mobile:dR,email:uR,business:_N,bank:yR});const PN=sn({name:ke().min(3,"Product name must be at least 3 characters"),sku:ke().min(3,"SKU must be at least 3 characters").regex(/^[A-Z0-9-]+$/,"SKU must contain only uppercase letters, numbers, and hyphens"),description:ke().max(500,"Description must not exceed 500 characters").optional(),category:ke().min(1,"Category is required"),brand:ke().optional(),mrp:ec().positive("MRP must be positive"),sellingPrice:ec().positive("Selling price must be positive"),stockQuantity:ec().int().min(0,"Stock cannot be negative"),images:tR(ke().url("Invalid image URL")).min(1,"At least one image is required").max(5,"Maximum 5 images allowed").optional(),specifications:rR(ke()).optional()}),IN=t=>t.sellingPrice<=t.mrp,DN={message:"Selling price cannot exceed MRP",path:["sellingPrice"]};PN.refine(IN,DN);PN.extend({schoolId:ke().min(1,"School is required"),classId:ke().min(1,"Class is required"),subject:ke().optional()}).refine(IN,DN);function vR({isOpen:t,onClose:e,onSave:n,defaultTab:r="draw"}){const[s,i]=E.useState(r),[o,c]=E.useState(""),u=E.useRef(null),[f,p]=E.useState(!1),[m,x]=E.useState(!1);E.useEffect(()=>{t&&(i(r),c(""),x(!1),setTimeout(()=>w(),100))},[t,r]);const y=C=>{const T=u.current;if(!T)return;const A=T.getContext("2d"),M=T.getBoundingClientRect(),P=(C.clientX||C.touches[0].clientX)-M.left,F=(C.clientY||C.touches[0].clientY)-M.top;A.beginPath(),A.moveTo(P,F),p(!0),x(!0)},v=C=>{if(!f)return;const T=u.current;if(!T)return;const A=T.getContext("2d"),M=T.getBoundingClientRect(),P=(C.clientX||C.touches[0].clientX)-M.left,F=(C.clientY||C.touches[0].clientY)-M.top;A.lineTo(P,F),A.stroke()},k=()=>{p(!1)},w=()=>{const C=u.current;if(!C)return;C.getContext("2d").clearRect(0,0,C.width,C.height),x(!1)},j=()=>{if(s==="draw"){if(!m)return;const C=u.current;n({type:"drawn",data:C.toDataURL()})}else{if(!o.trim())return;n({type:"typed",data:o})}e()};return t?l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 animate-fade-in",children:l.jsxs("div",{className:"bg-white rounded-lg w-full max-w-lg mx-4 relative shadow-xl flex flex-col max-h-[90vh]",children:[l.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[l.jsx("h3",{className:"text-lg font-semibold text-[#212121]",children:"Add Your e-Signature"}),l.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:l.jsx(On,{className:"w-5 h-5"})})]}),l.jsxs("div",{className:"flex border-b border-gray-200",children:[l.jsxs("button",{className:be("flex-1 py-3 text-sm font-medium transition-colors relative",s==="draw"?"text-[#2874F0]":"text-gray-500 hover:text-gray-700"),onClick:()=>i("draw"),children:["Draw",s==="draw"&&l.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-[#2874F0]"})]}),l.jsxs("button",{className:be("flex-1 py-3 text-sm font-medium transition-colors relative",s==="create"?"text-[#2874F0]":"text-gray-500 hover:text-gray-700"),onClick:()=>i("create"),children:["Create",s==="create"&&l.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-[#2874F0]"})]})]}),l.jsxs("div",{className:"p-6 flex-1 overflow-auto",children:[s==="draw"?l.jsx("div",{className:"space-y-4",children:l.jsxs("div",{className:"border border-dashed border-gray-300 rounded-lg p-2 bg-gray-50 relative",children:[l.jsx("canvas",{ref:u,width:450,height:200,className:"w-full h-48 cursor-crosshair touch-none",onMouseDown:y,onMouseMove:v,onMouseUp:k,onMouseLeave:k,onTouchStart:y,onTouchMove:v,onTouchEnd:k}),l.jsx("button",{onClick:w,className:"absolute top-2 right-2 text-xs font-medium text-[#2874F0] hover:underline bg-white/80 px-2 py-1 rounded",children:"Clear"}),!m&&!f&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none text-gray-400",children:l.jsx("span",{className:"text-sm",children:"Draw Signature"})})]})}):l.jsxs("div",{className:"space-y-6",children:[l.jsx(Pe,{label:"Enter your name to create a signature *",placeholder:"Enter name",value:o,onChange:C=>c(C.target.value)}),o&&l.jsxs("div",{className:"p-8 bg-gray-50 rounded-lg text-center",children:[l.jsx("p",{className:"text-4xl text-[#212121]",style:{fontFamily:"cursive"},children:o}),l.jsx("p",{className:"text-xs text-gray-400 mt-4",children:"Your signature will appear here"})]})]}),l.jsx("div",{className:"mt-6 text-xs text-gray-500 text-center px-4",children:'By clicking on "Add", I understand that this is my electronic signature and is valid when used by me or my agent.'})]}),l.jsxs("div",{className:"p-4 border-t border-gray-200 flex justify-end gap-3",children:[l.jsx(xe,{variant:"outline",onClick:e,className:"w-24",children:"Cancel"}),l.jsx(xe,{onClick:j,className:"w-24 bg-[#2874F0] hover:bg-[#1f63d6]",disabled:s==="draw"?!m:!o.trim(),children:"Add"})]})]})}):null}const bR=({isOpen:t,onClose:e,email:n,onVerify:r,onResend:s,isLoading:i,error:o})=>{const[c,u]=E.useState("");return t?l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 animate-fade-in",children:l.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-sm mx-4 relative shadow-xl",children:[l.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",children:l.jsx(On,{className:"w-5 h-5"})}),l.jsx("h3",{className:"text-xl font-semibold mb-2 text-[#212121]",children:"Verify Email"}),l.jsxs("p",{className:"text-sm text-gray-600 mb-6",children:["Enter the 6-digit code sent to ",l.jsx("br",{}),l.jsx("strong",{className:"text-[#212121]",children:n})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx(Pe,{placeholder:"Enter 6-digit OTP",value:c,onChange:f=>u(f.target.value.replace(/\D/g,"").slice(0,6)),className:"text-center text-lg tracking-widest",maxLength:6}),o&&l.jsx("p",{className:"text-red-500 text-sm text-center",children:o}),l.jsx(xe,{className:"w-full",onClick:()=>r(c),disabled:i||c.length!==6,children:i?"Verifying...":"Verify OTP"}),l.jsxs("div",{className:"text-center mt-4",children:[l.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Didn't receive the code?"}),l.jsx("button",{className:"text-[#2874F0] text-sm font-medium hover:underline disabled:opacity-50",onClick:s,disabled:i,children:"Resend OTP"})]})]})]})}):null},LN=(t,e)=>{let n=t.split(","),r=n[0].match(/:(.*?);/)[1],s=atob(n[1]),i=s.length,o=new Uint8Array(i);for(;i--;)o[i]=s.charCodeAt(i);return new File([o],e,{type:r})},wR=(t,e)=>{const n=document.createElement("canvas"),r=n.getContext("2d"),s=48;r.font=`${s}px cursive`;const i=r.measureText(t).width;n.width=i+40,n.height=100,r.font=`${s}px cursive`,r.fillStyle="black",r.textBaseline="middle",r.fillText(t,20,50);const o=n.toDataURL("image/png");return LN(o,e)};function kR(){var U,re;const t=Pr(),e=((U=t.state)==null?void 0:U.resumeOnboarding)||!1,n=((re=t.state)==null?void 0:re.resumeStep)||null,r=()=>e?n==="business"?"business":"email":"mobile",s=()=>e?n==="business"?["mobile","email"]:["mobile"]:[],[i,o]=E.useState(r),[c,u]=E.useState(s),[f,p]=E.useState(!!e),[m,x]=E.useState(!1),[y,v]=E.useState(""),[k,w]=E.useState(null),[j,C]=E.useState(!1),[T,A]=E.useState("draw"),[M,P]=E.useState("all_categories"),[F,ne]=E.useState(!1),[O,X]=E.useState(!1),{sendOtp:le,verifyOtp:z,completeOnboarding:te,logout:ie}=Zt(),oe=Dn(),W=Sa({resolver:Ca(fR),mode:"onChange"}),q=Sa({resolver:Ca(_N),mode:"onChange",defaultValues:{businessCategory:"all_categories",address:{}}}),{name:J,contactEmail:fe,contactPhone:ce,website:D,address:G,isSubmitting:Ne,error:Ae,isCreated:Ue,updateField:Ve,updateAddress:Z,createWarehouse:Ce,clearError:Fe}=cR(),se=Sa({resolver:Ca(xR),mode:"onChange",defaultValues:{name:J||"",contactEmail:fe||"",contactPhone:ce||"",website:D||"",address:{line1:(G==null?void 0:G.line1)||"",line2:(G==null?void 0:G.line2)||"",city:(G==null?void 0:G.city)||"",state:(G==null?void 0:G.state)||"",postalCode:(G==null?void 0:G.postalCode)||"",country:(G==null?void 0:G.country)||"India",lat:(G==null?void 0:G.lat)||null,lng:(G==null?void 0:G.lng)||null}}});E.useEffect(()=>{const I=se.watch(B=>{B.name!==void 0&&Ve("name",B.name),B.contactEmail!==void 0&&Ve("contactEmail",B.contactEmail),B.contactPhone!==void 0&&Ve("contactPhone",B.contactPhone),B.website!==void 0&&Ve("website",B.website),B.address&&Object.entries(B.address).forEach(([V,Q])=>{Q!==void 0&&Z(V,Q)})});return()=>I.unsubscribe()},[se,Ve,Z]);const Ye=async()=>{var B,V;if(await W.trigger()){ne(!0),v("");try{const Q=W.getValues(),pe=await le(Q.fullName,Q.email,Q.password,Q.mobile);pe.success?x(!0):alert(pe.error||"Failed to send OTP. Please try again.")}catch(Q){console.error("Registration error:",Q),alert(((V=(B=Q.response)==null?void 0:B.data)==null?void 0:V.message)||"Failed to send OTP. Please try again.")}finally{ne(!1)}}},wt=async I=>{var B,V;if(!I||I.length!==6){v("Please enter a valid 6-digit OTP");return}ne(!0),v("");try{const Q=W.getValues("email"),pe=await z(Q,I);pe.success?(p(!0),x(!1)):v(pe.error||"Invalid OTP. Please try again.")}catch(Q){console.error("OTP Verification error:",Q),v(((V=(B=Q.response)==null?void 0:B.data)==null?void 0:V.message)||"Invalid OTP. Please try again.")}finally{ne(!1)}},ht=async I=>{if(!f){alert("Please verify your email address before continuing.");return}u(B=>Array.from(new Set([...B,"mobile"]))),o("email")},xr=()=>{window.confirm("Editing your email will require re-verification. Continue?")&&p(!1)},yr=async()=>{var B,V;if(await q.trigger(["businessCategory","ownerName","gstin","panNumber"])){if(!k){alert("Please add your e-signature to continue.");return}ne(!0);try{const Q=new FormData,pe=q.getValues();Q.append("displayName",pe.businessName||pe.ownerName),Q.append("ownerName",pe.ownerName),Q.append("gstin",pe.gstin),pe.panNumber&&Q.append("pan",pe.panNumber);let Ee;k.type==="drawn"?Ee=LN(k.data,"signature.png"):k.type==="typed"&&(Ee=wR(k.data,"signature.png")),Q.append("signature",Ee);const je=await $e.post("/retailer/data",Q,{headers:{"Content-Type":"multipart/form-data"}});console.log("Business details saved:",je.data),u(Xe=>Array.from(new Set([...Xe,"email"]))),o("business")}catch(Q){console.error("Failed to save business details:",Q),alert(((V=(B=Q.response)==null?void 0:B.data)==null?void 0:V.message)||"Failed to save details. Please try again.")}finally{ne(!1)}}},vr=async I=>{Fe(),(await Ce()).success&&(u(V=>Array.from(new Set([...V,"business"]))),te(),X(!0))},Wt=async()=>{await ie(),oe("/login",{replace:!0})},an=()=>{const I=["mobile","email","business"],B=I.indexOf(i);B>0&&o(I[B-1])},Yr=()=>l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx(xe,{variant:"outline",size:"sm",className:"w-full justify-center",children:"Go to Listing "}),l.jsx(xe,{variant:"orange",size:"sm",className:"w-full justify-center",children:"GO LIVE NOW "})]}),l.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[l.jsx("h4",{className:"font-semibold text-[#212121] mb-2",children:"Do you need help?"}),l.jsx("p",{className:"text-sm text-[#878787] mb-3",children:"Our team of specialists would be happy to help you setup your shop on Bukizz."}),l.jsx("p",{className:"text-sm text-[#878787] mb-3",children:"If you would like their assistance,"}),l.jsx(xe,{variant:"outline",size:"sm",className:"w-full",children:"Request a Callback"})]})]}),qn=()=>l.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:`w-5 h-5 rounded-full flex items-center justify-center ${c.includes("mobile")?"bg-[#26A541]":"bg-[#2874F0]"}`,children:c.includes("mobile")?l.jsx(un,{className:"w-3 h-3 text-white"}):l.jsx("span",{className:"text-xs text-white font-medium",children:"1"})}),l.jsx("span",{className:`text-sm font-medium ${c.includes("mobile")?"text-[#26A541]":"text-[#212121]"}`,children:"EMAIL & PASSWORD"})]}),l.jsx("div",{className:"h-px w-8 bg-gray-300"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:`w-5 h-5 rounded-full flex items-center justify-center ${c.includes("email")?"bg-[#26A541]":i==="email"||i==="business"?"bg-[#2874F0]":"bg-gray-300"}`,children:c.includes("email")&&c.includes("business")?l.jsx(un,{className:"w-3 h-3 text-white"}):l.jsx("span",{className:"text-xs text-white font-medium",children:"2"})}),l.jsx("span",{className:`text-sm font-medium ${c.includes("email")?"text-[#26A541]":i==="email"||i==="business"?"text-[#212121]":"text-[#878787]"}`,children:"BUSINESS DETAILS"})]})]}),_=()=>{var I,B,V,Q,pe,Ee,je,Xe,et,qt,en,ft,Kn,ys,Zs,vs,Uo,bs,ws,Ka,Ga,Ja,Za,Qa,Ho,Ya,Qs,Wo,Ys;switch(i){case"mobile":return l.jsxs("div",{className:"animate-fade-in relative",children:[l.jsx(bR,{isOpen:m,onClose:()=>x(!1),email:W.getValues("email"),onVerify:wt,onResend:Ye,isLoading:F,error:y}),l.jsx("h1",{className:"text-2xl font-semibold text-[#212121] mb-6",children:"Hello"}),l.jsx("h2",{className:"text-lg font-medium text-[#212121] mb-4",children:"Register as Retailer"}),l.jsxs("form",{onSubmit:W.handleSubmit(ht),className:"space-y-5",children:[l.jsx(Pe,{placeholder:"Full Name",className:"flex-1",...W.register("fullName"),error:(I=W.formState.errors.fullName)==null?void 0:I.message,leftElement:l.jsx(Na,{className:"w-5 h-5 text-[#878787]"})}),l.jsx(Pe,{placeholder:"+91 Enter Mobile Number",className:"flex-1",...W.register("mobile"),error:(B=W.formState.errors.mobile)==null?void 0:B.message,leftElement:l.jsx(Gr,{className:"w-5 h-5 text-[#878787]"})}),l.jsx(Pe,{type:"email",placeholder:"Email ID",className:"flex-1",...W.register("email"),error:(V=W.formState.errors.email)==null?void 0:V.message,leftElement:l.jsx(mr,{className:"w-5 h-5 text-[#878787]"}),disabled:f,rightElement:f?l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("span",{className:"flex items-center gap-1 bg-[#E8F5EA] text-[#26A541] px-2 py-0.5 rounded text-xs font-medium",children:[l.jsx(un,{className:"w-3 h-3"}),"Verified"]}),l.jsx("button",{type:"button",onClick:xr,className:"text-[#2874F0] text-sm font-medium hover:underline",children:"Edit"})]}):l.jsx("button",{type:"button",onClick:Ye,className:"text-[#2874F0] text-sm font-medium hover:underline",disabled:F,children:F?"Verifying...":"Verify"})}),l.jsx(Pe,{type:"password",placeholder:"Create Password",...W.register("password"),error:(Q=W.formState.errors.password)==null?void 0:Q.message,leftElement:l.jsx(pc,{className:"w-5 h-5 text-[#878787]"})}),l.jsx(Pe,{type:"password",placeholder:"Confirm Password",...W.register("confirmPassword"),error:(pe=W.formState.errors.confirmPassword)==null?void 0:pe.message,leftElement:l.jsx(pc,{className:"w-5 h-5 text-[#878787]"})}),l.jsxs("p",{className:"text-xs text-[#878787]",children:["By continuing, I agree to Bukizz's ",l.jsx("a",{href:"#",className:"text-[#2874F0] hover:underline",children:"Terms of Use"})," & ",l.jsx("a",{href:"#",className:"text-[#2874F0] hover:underline",children:"Privacy Policy"})]}),l.jsxs(xe,{type:"submit",className:"w-auto",children:["Register & Continue ",l.jsx(Eo,{className:"w-4 h-4"})]})]})]});case"email":return l.jsxs("div",{className:"animate-fade-in",children:[l.jsx("h1",{className:"text-2xl font-semibold text-[#212121] mb-2",children:"Business Details"}),l.jsxs("div",{className:"mb-6 bg-green-50 p-3 rounded-md border border-green-100 flex items-center gap-2",children:[l.jsx(un,{className:"w-5 h-5 text-green-600"}),l.jsx("span",{className:"text-green-800 text-sm font-medium",children:"Email Verified Successfully"})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-medium text-[#212121] mb-4",children:"ID & Signature Verification"}),l.jsx(lR,{value:M,onChange:Xr=>{P(Xr),q.setValue("businessCategory",Xr)},error:(Ee=q.formState.errors.businessCategory)==null?void 0:Ee.message})]}),l.jsx(Pe,{label:"Owner Name",placeholder:"Enter Owner Name",...q.register("ownerName"),error:(je=q.formState.errors.ownerName)==null?void 0:je.message}),l.jsx(Pe,{label:"Enter GSTIN",placeholder:"Enter GSTIN",...q.register("gstin"),error:(Xe=q.formState.errors.gstin)==null?void 0:Xe.message}),l.jsx(Pe,{label:"Enter PAN Number",placeholder:"Enter PAN Number",...q.register("panNumber"),error:(et=q.formState.errors.panNumber)==null?void 0:et.message}),l.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[l.jsx("h3",{className:"text-lg font-medium text-[#212121] mb-4",children:"Add Your e-Signature"}),k?l.jsxs("div",{className:"relative border rounded-lg p-6 bg-gray-50 flex flex-col items-center justify-center group",children:[k.type==="drawn"?l.jsx("img",{src:k.data,alt:"Signature",className:"max-h-24"}):l.jsx("p",{className:"text-4xl text-[#212121]",style:{fontFamily:"cursive"},children:k.data}),l.jsx("button",{onClick:()=>w(null),className:"absolute top-2 right-2 text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",children:l.jsx(On,{className:"w-5 h-5"})}),l.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Click X to remove and add new"})]}):l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("button",{type:"button",onClick:()=>{A("draw"),C(!0)},className:"flex-1 flex items-center justify-center gap-2 py-4 border border-gray-300 rounded-lg text-[#2874F0] font-medium hover:bg-blue-50 transition-colors",children:[l.jsx(dM,{className:"w-5 h-5"}),"Draw your signature"]}),l.jsx("span",{className:"text-sm text-gray-500",children:"OR"}),l.jsxs("button",{type:"button",onClick:()=>{A("create"),C(!0)},className:"flex-1 flex items-center justify-center gap-2 py-4 border border-gray-300 rounded-lg text-[#2874F0] font-medium hover:bg-blue-50 transition-colors",children:[l.jsx(cN,{className:"w-5 h-5"}),"Choose your signature"]})]})]}),l.jsxs(xe,{type:"button",onClick:yr,children:["Save & Continue ",l.jsx(Eo,{className:"w-4 h-4"})]}),l.jsx(vR,{isOpen:j,onClose:()=>C(!1),onSave:Xr=>w(Xr),defaultTab:T})]})]});case"business":return l.jsxs("div",{className:"animate-fade-in",children:[l.jsxs(xe,{variant:"ghost",className:"mb-4 pl-0",onClick:an,children:[l.jsx(us,{className:"w-4 h-4 mr-2"})," Back"]}),l.jsx("h1",{className:"text-2xl font-semibold text-[#212121] mb-2",children:"Store & Pickup Details"}),l.jsx("p",{className:"text-sm text-[#878787] mb-6",children:"Set up your warehouse / store details and pickup address for order fulfilment."}),Ae&&l.jsxs("div",{className:"mb-4 flex items-center gap-2 p-3 rounded-md bg-red-50 border border-red-200 text-red-700 text-sm",children:[l.jsx(sr,{className:"w-4 h-4 flex-shrink-0"}),Ae]}),Ue&&l.jsxs("div",{className:"mb-4 flex items-center gap-2 p-3 rounded-md bg-green-50 border border-green-100 text-green-800 text-sm",children:[l.jsx(un,{className:"w-5 h-5 text-green-600 flex-shrink-0"}),"Warehouse already saved. You can update and re-submit, or continue to the next step."]}),l.jsxs("form",{onSubmit:se.handleSubmit(vr),className:"space-y-6",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2 text-[#212121]",children:[l.jsx(Ha,{className:"w-5 h-5 text-[#2874F0]"}),l.jsx("h2",{className:"text-lg font-medium",children:"Store Information"})]}),l.jsx(Pe,{label:"Store / Warehouse Name *",placeholder:"e.g. My Main Warehouse",...se.register("name"),error:(qt=se.formState.errors.name)==null?void 0:qt.message}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsx(Pe,{label:"Contact Email",placeholder:"warehouse@example.com",type:"email",...se.register("contactEmail"),error:(en=se.formState.errors.contactEmail)==null?void 0:en.message,leftElement:l.jsx(mr,{className:"w-4 h-4 text-[#878787]"})}),l.jsx(Pe,{label:"Contact Phone",placeholder:"+91-9999999999",...se.register("contactPhone"),error:(ft=se.formState.errors.contactPhone)==null?void 0:ft.message,leftElement:l.jsx(Gr,{className:"w-4 h-4 text-[#878787]"})})]}),l.jsx(Pe,{label:"Website",placeholder:"https://example.com",...se.register("website"),error:(Kn=se.formState.errors.website)==null?void 0:Kn.message,leftElement:l.jsx(Ma,{className:"w-4 h-4 text-[#878787]"})})]}),l.jsxs("div",{className:"space-y-4 pt-4 border-t border-gray-200",children:[l.jsxs("div",{className:"flex items-center gap-2 text-[#212121]",children:[l.jsx(Rn,{className:"w-5 h-5 text-[#2874F0]"}),l.jsx("h2",{className:"text-lg font-medium",children:"Pickup Address"})]}),l.jsx(Pe,{label:"Address Line 1 *",placeholder:"123 Street, Building Name",...se.register("address.line1"),error:(Zs=(ys=se.formState.errors.address)==null?void 0:ys.line1)==null?void 0:Zs.message}),l.jsx(Pe,{label:"Address Line 2",placeholder:"Floor, Landmark (optional)",...se.register("address.line2"),error:(Uo=(vs=se.formState.errors.address)==null?void 0:vs.line2)==null?void 0:Uo.message}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsx(Pe,{label:"City *",placeholder:"e.g. Delhi",...se.register("address.city"),error:(ws=(bs=se.formState.errors.address)==null?void 0:bs.city)==null?void 0:ws.message}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-[#212121] mb-1.5",children:"State *"}),l.jsxs("select",{...se.register("address.state"),className:`w-full rounded-lg border px-3 py-2.5 text-sm outline-none transition-colors bg-white ${(Ka=se.formState.errors.address)!=null&&Ka.state?"border-red-400 focus:border-red-500 focus:ring-1 focus:ring-red-500":"border-gray-300 focus:border-[#2874F0] focus:ring-1 focus:ring-[#2874F0]"}`,children:[l.jsx("option",{value:"",children:"Select State"}),["Andhra Pradesh","Arunachal Pradesh","Assam","Bihar","Chhattisgarh","Goa","Gujarat","Haryana","Himachal Pradesh","Jharkhand","Karnataka","Kerala","Madhya Pradesh","Maharashtra","Manipur","Meghalaya","Mizoram","Nagaland","Odisha","Punjab","Rajasthan","Sikkim","Tamil Nadu","Telangana","Tripura","Uttar Pradesh","Uttarakhand","West Bengal","Andaman and Nicobar Islands","Chandigarh","Dadra and Nagar Haveli and Daman and Diu","Delhi","Jammu and Kashmir","Ladakh","Lakshadweep","Puducherry"].map(Xr=>l.jsx("option",{value:Xr,children:Xr},Xr))]}),((Ga=se.formState.errors.address)==null?void 0:Ga.state)&&l.jsx("p",{className:"mt-1 text-xs text-red-500",children:se.formState.errors.address.state.message})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsx(Pe,{label:"Postal Code (Pincode) *",placeholder:"e.g. 110001",...se.register("address.postalCode"),error:(Za=(Ja=se.formState.errors.address)==null?void 0:Ja.postalCode)==null?void 0:Za.message}),l.jsx(Pe,{label:"Country",placeholder:"India",...se.register("address.country"),error:(Ho=(Qa=se.formState.errors.address)==null?void 0:Qa.country)==null?void 0:Ho.message})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsx(Pe,{label:"Latitude (optional)",placeholder:"e.g. 28.6139",type:"number",step:"any",...se.register("address.lat",{valueAsNumber:!0}),error:(Qs=(Ya=se.formState.errors.address)==null?void 0:Ya.lat)==null?void 0:Qs.message}),l.jsx(Pe,{label:"Longitude (optional)",placeholder:"e.g. 77.2090",type:"number",step:"any",...se.register("address.lng",{valueAsNumber:!0}),error:(Ys=(Wo=se.formState.errors.address)==null?void 0:Wo.lng)==null?void 0:Ys.message})]})]}),l.jsxs("div",{className:"flex gap-3 pt-2",children:[l.jsxs(xe,{type:"button",variant:"outline",onClick:an,children:[l.jsx(us,{className:"w-4 h-4"})," Back"]}),l.jsxs(xe,{type:"submit",disabled:Ne,variant:"success",children:[Ne?"Saving":Ue?"Update & Complete":"Save & Complete Registration",!Ne&&l.jsx(un,{className:"w-4 h-4"})]})]})]})]})}};return O?l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-50 via-white to-violet-50 p-6",children:l.jsx("div",{className:"w-full max-w-lg animate-fade-in",children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-slate-100 overflow-hidden",children:[l.jsx("div",{className:"h-2 bg-gradient-to-r from-emerald-500 via-violet-500 to-indigo-500"}),l.jsxs("div",{className:"p-8 sm:p-10 text-center",children:[l.jsx("div",{className:"flex justify-center mb-6",children:l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"w-20 h-20 rounded-full bg-emerald-50 flex items-center justify-center",children:l.jsx(aN,{className:"w-10 h-10 text-emerald-500"})}),l.jsx("div",{className:"absolute -top-1 -right-1 w-6 h-6 rounded-full bg-emerald-500 flex items-center justify-center",children:l.jsx(un,{className:"w-4 h-4 text-white"})})]})}),l.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Registration Complete!"}),l.jsx("p",{className:"text-slate-500 mb-6",children:"Your store has been successfully registered on Bukizz."}),l.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-5 mb-6 text-left",children:l.jsxs("div",{className:"flex gap-3",children:[l.jsx("div",{className:"flex-shrink-0 mt-0.5",children:l.jsx("div",{className:"w-8 h-8 rounded-full bg-amber-100 flex items-center justify-center",children:l.jsx(mr,{className:"w-4 h-4 text-amber-600"})})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-semibold text-amber-900 mb-1",children:"Pending Admin Approval"}),l.jsxs("p",{className:"text-sm text-amber-700 leading-relaxed",children:["Your application is now under review by our admin team. You will receive a",l.jsx("strong",{children:" confirmation email"})," once your account has been approved. This typically takes ",l.jsx("strong",{children:"2448 hours"}),"."]})]})]})}),l.jsxs("div",{className:"bg-slate-50 rounded-xl p-5 mb-8 text-left",children:[l.jsx("h4",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider mb-3",children:"What happens next?"}),l.jsx("div",{className:"space-y-3",children:[{step:"1",text:"Admin reviews your business details & documents"},{step:"2",text:"You receive an approval email from Bukizz"},{step:"3",text:"Log in and start managing your inventory & orders"}].map(({step:I,text:B})=>l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"w-6 h-6 rounded-full bg-violet-100 text-violet-700 flex items-center justify-center text-xs font-bold flex-shrink-0",children:I}),l.jsx("p",{className:"text-sm text-slate-600",children:B})]},I))})]}),l.jsxs(xe,{onClick:Wt,className:"w-full",size:"lg",children:[l.jsx(g0,{className:"w-5 h-5"}),"Got it, Sign me out"]}),l.jsx("p",{className:"mt-4 text-xs text-slate-400",children:"You will be redirected to the login page."})]})]})})}):l.jsxs("div",{className:"flex min-h-screen bg-[#F1F3F6]",children:[l.jsx("div",{className:"hidden lg:block w-64 flex-shrink-0",children:l.jsx("div",{className:"fixed w-64 h-full",children:l.jsx(aR,{currentStep:i,completedSteps:c})})}),l.jsx("div",{className:"flex-1 p-6 lg:p-8",children:l.jsxs("div",{className:"max-w-4xl mx-auto",children:[l.jsx(qn,{}),l.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[l.jsx("div",{className:"lg:col-span-2 bg-white rounded-lg p-6 shadow-sm",children:_()}),l.jsx("div",{className:"hidden lg:block",children:l.jsx(Yr,{})})]})]})})]})}const NR=sn({email:ke().email("Please enter a valid email address")});function jR(){var p;const[t,e]=E.useState(!1),{forgotPassword:n,error:r,clearError:s}=Zt(),{register:i,handleSubmit:o,formState:{errors:c,isSubmitting:u}}=Sa({resolver:Ca(NR)}),f=async m=>{s(),(await n(m.email)).success&&e(!0)};return l.jsxs("div",{className:"min-h-screen flex",children:[l.jsxs("div",{className:"hidden lg:flex lg:w-1/2 bg-gradient-to-br from-slate-900 via-violet-950 to-slate-900 relative overflow-hidden",children:[l.jsxs("div",{className:"absolute inset-0",children:[l.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-violet-500/20 rounded-full blur-3xl"}),l.jsx("div",{className:"absolute bottom-20 -left-20 w-96 h-96 bg-indigo-500/20 rounded-full blur-3xl"})]}),l.jsxs("div",{className:"relative z-10 flex flex-col justify-center p-12 text-white",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-12",children:[l.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-violet-500 to-indigo-600 rounded-xl flex items-center justify-center",children:l.jsx(fs,{className:"w-6 h-6"})}),l.jsx("span",{className:"text-2xl font-bold",children:"Bukizz Vendor"})]}),l.jsxs("h1",{className:"text-4xl font-bold mb-6",children:["Reset your"," ",l.jsx("span",{className:"bg-gradient-to-r from-violet-400 to-indigo-400 bg-clip-text text-transparent",children:"password"})]}),l.jsx("p",{className:"text-lg text-slate-400",children:"Don't worry, it happens to the best of us. Enter your email and we'll send you a reset link."})]})]}),l.jsx("div",{className:"flex-1 flex items-center justify-center p-6 lg:p-12 bg-white dark:bg-slate-950",children:l.jsxs("div",{className:"w-full max-w-md",children:[l.jsxs("div",{className:"lg:hidden flex items-center gap-2 justify-center mb-8",children:[l.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-violet-500 to-indigo-600 rounded-xl flex items-center justify-center",children:l.jsx(fs,{className:"w-5 h-5 text-white"})}),l.jsx("span",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Bukizz"})]}),t?l.jsxs("div",{className:"text-center animate-fade-in",children:[l.jsx("div",{className:"mx-auto mb-6 flex h-16 w-16 items-center justify-center rounded-full bg-emerald-100",children:l.jsx(un,{className:"h-8 w-8 text-emerald-600"})}),l.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-2",children:"Check your email"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"We've sent a password reset link to your email address. Please check your inbox and spam folder."}),l.jsxs(Dt,{to:"/login",className:"inline-flex items-center gap-2 text-violet-600 hover:text-violet-700 font-medium",children:[l.jsx(us,{className:"w-4 h-4"}),"Back to Sign In"]})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-2",children:"Forgot your password?"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Enter your email address and we'll send you a link to reset your password."})]}),r&&l.jsx("div",{className:"mb-6 rounded-lg bg-red-50 border border-red-200 px-4 py-3 text-sm text-red-700",children:r}),l.jsxs("form",{onSubmit:o(f),className:"space-y-6",children:[l.jsx(Pe,{label:"Email Address",type:"email",placeholder:"you@business.com",icon:l.jsx(mr,{className:"w-5 h-5"}),...i("email"),error:(p=c.email)==null?void 0:p.message}),l.jsx(xe,{type:"submit",className:"w-full",size:"lg",loading:u,children:"Send Reset Link"})]}),l.jsxs("p",{className:"mt-8 text-center text-sm text-slate-500 dark:text-slate-400",children:["Remember your password?"," ",l.jsx(Dt,{to:"/login",className:"text-violet-600 hover:text-violet-700 dark:text-violet-400 font-medium",children:"Sign in"})]})]})]})})]})}const SR=sn({newPassword:ke().min(6,"Password must be at least 6 characters"),confirmPassword:ke().min(6,"Please confirm your password")}).refine(t=>t.newPassword===t.confirmPassword,{message:"Passwords do not match",path:["confirmPassword"]});function CR(){var y,v;const[t]=eA(),e=t.get("token"),n=Dn(),[r,s]=E.useState(!1),{resetPassword:i,error:o,clearError:c}=Zt(),{register:u,handleSubmit:f,formState:{errors:p,isSubmitting:m}}=Sa({resolver:Ca(SR)}),x=async k=>{c(),(await i(e,k.newPassword)).success&&(s(!0),setTimeout(()=>n("/login"),3e3))};return e?l.jsxs("div",{className:"min-h-screen flex",children:[l.jsxs("div",{className:"hidden lg:flex lg:w-1/2 bg-gradient-to-br from-slate-900 via-violet-950 to-slate-900 relative overflow-hidden",children:[l.jsxs("div",{className:"absolute inset-0",children:[l.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-violet-500/20 rounded-full blur-3xl"}),l.jsx("div",{className:"absolute bottom-20 -left-20 w-96 h-96 bg-indigo-500/20 rounded-full blur-3xl"})]}),l.jsxs("div",{className:"relative z-10 flex flex-col justify-center p-12 text-white",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-12",children:[l.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-violet-500 to-indigo-600 rounded-xl flex items-center justify-center",children:l.jsx(fs,{className:"w-6 h-6"})}),l.jsx("span",{className:"text-2xl font-bold",children:"Bukizz Vendor"})]}),l.jsxs("h1",{className:"text-4xl font-bold mb-6",children:["Create a new"," ",l.jsx("span",{className:"bg-gradient-to-r from-violet-400 to-indigo-400 bg-clip-text text-transparent",children:"password"})]}),l.jsx("p",{className:"text-lg text-slate-400",children:"Choose a strong password that you haven't used before."})]})]}),l.jsx("div",{className:"flex-1 flex items-center justify-center p-6 lg:p-12 bg-white dark:bg-slate-950",children:l.jsxs("div",{className:"w-full max-w-md",children:[l.jsxs("div",{className:"lg:hidden flex items-center gap-2 justify-center mb-8",children:[l.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-violet-500 to-indigo-600 rounded-xl flex items-center justify-center",children:l.jsx(fs,{className:"w-5 h-5 text-white"})}),l.jsx("span",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Bukizz"})]}),r?l.jsxs("div",{className:"text-center animate-fade-in",children:[l.jsx("div",{className:"mx-auto mb-6 flex h-16 w-16 items-center justify-center rounded-full bg-emerald-100",children:l.jsx(un,{className:"h-8 w-8 text-emerald-600"})}),l.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-2",children:"Password reset successful!"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Your password has been updated. Redirecting you to sign in..."}),l.jsxs(Dt,{to:"/login",className:"inline-flex items-center gap-2 text-violet-600 hover:text-violet-700 font-medium",children:[l.jsx(us,{className:"w-4 h-4"}),"Go to Sign In"]})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-2",children:"Set new password"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Your new password must be at least 6 characters long."})]}),o&&l.jsx("div",{className:"mb-6 rounded-lg bg-red-50 border border-red-200 px-4 py-3 text-sm text-red-700",children:o}),l.jsxs("form",{onSubmit:f(x),className:"space-y-6",children:[l.jsx(Pe,{label:"New Password",type:"password",placeholder:"",icon:l.jsx(pc,{className:"w-5 h-5"}),...u("newPassword"),error:(y=p.newPassword)==null?void 0:y.message}),l.jsx(Pe,{label:"Confirm Password",type:"password",placeholder:"",icon:l.jsx(pc,{className:"w-5 h-5"}),...u("confirmPassword"),error:(v=p.confirmPassword)==null?void 0:v.message}),l.jsx(xe,{type:"submit",className:"w-full",size:"lg",loading:m,children:"Reset Password"})]}),l.jsxs("p",{className:"mt-8 text-center text-sm text-slate-500 dark:text-slate-400",children:["Remember your password?"," ",l.jsx(Dt,{to:"/login",className:"text-violet-600 hover:text-violet-700 dark:text-violet-400 font-medium",children:"Sign in"})]})]})]})})]}):l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-white dark:bg-slate-950 p-6",children:l.jsxs("div",{className:"text-center max-w-md",children:[l.jsx("div",{className:"mx-auto mb-6 flex h-16 w-16 items-center justify-center rounded-full bg-amber-100",children:l.jsx(Dc,{className:"h-8 w-8 text-amber-600"})}),l.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-2",children:"Invalid Reset Link"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"This password reset link is invalid or missing a token. Please request a new one."}),l.jsxs(Dt,{to:"/forgot-password",className:"inline-flex items-center gap-2 text-violet-600 hover:text-violet-700 font-medium",children:[l.jsx(us,{className:"w-4 h-4"}),"Request new reset link"]})]})})}function ER(){const t=Dn(),{logout:e,verificationStatus:n}=Zt(),r=(n==null?void 0:n.status)||"pending",s=(n==null?void 0:n.message)||"Your account is pending admin approval.",i=n==null?void 0:n.deactivationReason,o=r==="deactivated",c=async()=>{await e(),t("/login",{replace:!0})};return l.jsxs("div",{className:"min-h-screen flex",children:[l.jsxs("div",{className:"hidden lg:flex lg:w-1/2 bg-gradient-to-br from-slate-900 via-violet-950 to-slate-900 relative overflow-hidden",children:[l.jsxs("div",{className:"absolute inset-0",children:[l.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-violet-500/20 rounded-full blur-3xl"}),l.jsx("div",{className:"absolute bottom-20 -left-20 w-96 h-96 bg-indigo-500/20 rounded-full blur-3xl"})]}),l.jsxs("div",{className:"relative z-10 flex flex-col justify-center p-12 text-white",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-12",children:[l.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-violet-500 to-indigo-600 rounded-xl flex items-center justify-center",children:l.jsx(fs,{className:"w-6 h-6"})}),l.jsx("span",{className:"text-2xl font-bold",children:"Bukizz Vendor"})]}),l.jsxs("h1",{className:"text-4xl font-bold mb-6",children:["Account"," ",l.jsx("span",{className:"bg-gradient-to-r from-amber-400 to-orange-400 bg-clip-text text-transparent",children:o?"Deactivated":"Under Review"})]}),l.jsx("p",{className:"text-lg text-slate-400 mb-8",children:o?"Your account has been deactivated by the admin. Please reach out to our support team for assistance.":"Our team is reviewing your application. This usually takes 24-48 hours. We'll notify you once your account is approved."}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"p-4 rounded-xl bg-white/5 backdrop-blur-sm border border-white/10",children:[l.jsx("p",{className:"text-2xl font-bold text-white",children:"24-48h"}),l.jsx("p",{className:"text-sm text-slate-400",children:"Typical review time"})]}),l.jsxs("div",{className:"p-4 rounded-xl bg-white/5 backdrop-blur-sm border border-white/10",children:[l.jsx("p",{className:"text-2xl font-bold text-white",children:"Email"}),l.jsx("p",{className:"text-sm text-slate-400",children:"Notification on approval"})]})]})]})]}),l.jsx("div",{className:"flex-1 flex items-center justify-center p-6 lg:p-12 bg-white dark:bg-slate-950",children:l.jsxs("div",{className:"w-full max-w-md",children:[l.jsxs("div",{className:"lg:hidden flex items-center gap-2 justify-center mb-8",children:[l.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-violet-500 to-indigo-600 rounded-xl flex items-center justify-center",children:l.jsx(fs,{className:"w-5 h-5 text-white"})}),l.jsx("span",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Bukizz"})]}),l.jsx("div",{className:"flex justify-center mb-6",children:l.jsx("div",{className:`w-20 h-20 rounded-full flex items-center justify-center ${o?"bg-red-50 dark:bg-red-950/30":"bg-amber-50 dark:bg-amber-950/30"}`,children:o?l.jsx(hM,{className:"w-10 h-10 text-red-500"}):l.jsx(d0,{className:"w-10 h-10 text-amber-500"})})}),l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-2",children:o?"Account Deactivated":"Pending Approval"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:s})]}),o&&i&&i!=="unauthorized"&&l.jsxs("div",{className:"mb-6 rounded-lg bg-red-50 dark:bg-red-950/20 border border-red-200 dark:border-red-800 px-4 py-3",children:[l.jsx("p",{className:"text-sm font-medium text-red-800 dark:text-red-300 mb-1",children:"Reason:"}),l.jsx("p",{className:"text-sm text-red-700 dark:text-red-400",children:i})]}),!o&&l.jsx("div",{className:"mb-6 rounded-lg bg-amber-50 dark:bg-amber-950/20 border border-amber-200 dark:border-amber-800 px-4 py-3",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-2 h-2 rounded-full bg-amber-500 animate-pulse"}),l.jsx("p",{className:"text-sm font-medium text-amber-800 dark:text-amber-300",children:"Your application is being reviewed by our admin team"})]})}),l.jsxs("div",{className:"rounded-lg bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 p-4 mb-6",children:[l.jsx("h3",{className:"text-sm font-semibold text-slate-900 dark:text-white mb-3",children:"Need help? Contact Support"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("a",{href:"mailto:support@bukizz.com",className:"flex items-center gap-2 text-sm text-violet-600 dark:text-violet-400 hover:underline",children:[l.jsx(mr,{className:"w-4 h-4"}),"support@bukizz.com"]}),l.jsxs("a",{href:"tel:+911234567890",className:"flex items-center gap-2 text-sm text-violet-600 dark:text-violet-400 hover:underline",children:[l.jsx(Gr,{className:"w-4 h-4"}),"+91 12345 67890"]})]})]}),l.jsx("div",{className:"space-y-3",children:l.jsxs(xe,{variant:"outline",className:"w-full",size:"lg",onClick:c,children:[l.jsx(g0,{className:"w-5 h-5"}),"Sign Out & Try Later"]})})]})})]})}function TR(){const t=Dn(),{warehouses:e,activeWarehouse:n,loading:r,switchWarehouse:s}=Zr(),[i,o]=E.useState(!1);return r?l.jsx("div",{className:"h-9 w-32 bg-slate-100 animate-pulse rounded-lg"}):e.length===0?null:l.jsxs("div",{className:"relative",children:[l.jsxs("button",{onClick:()=>o(!i),className:"flex items-center gap-2 rounded-lg border border-slate-200 bg-white px-3 py-1.5 text-sm font-medium text-slate-700 hover:bg-slate-50 transition-colors shadow-sm",children:[l.jsx("div",{className:"flex h-6 w-6 items-center justify-center rounded bg-orange-100 text-orange-600",children:l.jsx(Ha,{className:"h-4 w-4"})}),l.jsx("span",{className:"max-w-[150px] truncate",children:n?n.name:"Select Warehouse"}),l.jsx(tN,{className:be("h-4 w-4 text-slate-400 transition-transform",i&&"rotate-180")})]}),i&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>o(!1)}),l.jsxs("div",{className:"absolute right-0 top-full z-50 mt-1 w-56 rounded-lg border border-slate-200 bg-white shadow-lg p-1",children:[l.jsx("div",{className:"px-2 py-1.5 text-xs font-semibold text-slate-400 uppercase tracking-wider",children:"Switch Warehouse"}),e.map(c=>l.jsxs("button",{onClick:()=>{o(!1),s(c)},className:be("flex w-full items-center gap-2 rounded-md px-2 py-2 text-sm text-left transition-colors",(n==null?void 0:n.id)===c.id?"bg-orange-50 text-orange-700":"text-slate-700 hover:bg-slate-50"),children:[l.jsx("span",{className:be("flex h-2 w-2 rounded-full",(n==null?void 0:n.id)===c.id?"bg-orange-500":"bg-transparent")}),c.name]},c.id)),l.jsx("div",{className:"my-1 border-t border-slate-100"}),l.jsxs("button",{onClick:()=>{o(!1),t("/dashboard/settings/warehouses")},className:"flex w-full items-center gap-2 rounded-md px-2 py-2 text-sm text-left text-slate-500 hover:bg-slate-50 hover:text-slate-700 transition-colors",children:[l.jsx(v0,{className:"h-3.5 w-3.5"}),"Manage Warehouses"]})]})]})]})}const AR=[{label:"Overview",href:"/dashboard/overview",icon:iM},{label:"My Schools",href:"/dashboard/inventory/schools",icon:pn},{label:"General Store",href:"/dashboard/inventory/general",icon:Ha,subItems:[{label:"My Products",href:"/dashboard/inventory/general",icon:m0},{label:"Add Product",href:"/dashboard/inventory/general/add",icon:J4},{label:"Track Approvals",href:"/dashboard/inventory/general/approvals",icon:nN}]},{label:"Inventory Health",href:"/dashboard/inventory/health",icon:q4},{label:"Orders",href:"/dashboard/orders",icon:_u,subItems:[{label:"Active Orders",href:"/dashboard/orders",icon:Z4},{label:"Returns",href:"/dashboard/orders/returns",icon:tg},{label:"Cancellations",href:"/dashboard/orders/cancelled",icon:Ou}]},{label:"Notifications",href:"/dashboard/notifications",icon:c0},{label:"Settings",href:"/dashboard/settings",icon:v0,subItems:[{label:"My Profile",href:"/dashboard/settings/profile",icon:vM},{label:"Warehouses",href:"/dashboard/settings/warehouses",icon:Iu}]}];function MR({item:t,pathname:e}){const[n,r]=E.useState(!1),[s,i]=E.useState({top:0,left:0}),o=E.useRef(null),c=E.useRef(null),u=e===t.href||e.startsWith(t.href+"/"),f=t.subItems&&t.subItems.length>0,p=E.useCallback(()=>{if(o.current){const k=o.current.getBoundingClientRect();i({top:k.top,left:k.right+8})}},[]),m=()=>{f&&(clearTimeout(c.current),p(),r(!0))},x=()=>{f&&(c.current=setTimeout(()=>r(!1),150))},y=()=>{clearTimeout(c.current)},v=()=>{c.current=setTimeout(()=>r(!1),150)};return l.jsxs("div",{ref:o,onMouseEnter:m,onMouseLeave:x,children:[l.jsxs(Dt,{to:f?t.subItems[0].href:t.href,className:be("flex items-center gap-3 rounded-xl px-3 py-2.5 text-[15px] font-medium transition-all duration-200",u?"bg-blue-50 text-blue-700":"text-slate-500 hover:bg-slate-50 hover:text-slate-700"),children:[l.jsx(t.icon,{className:be("h-5 w-5 flex-shrink-0",u?"text-blue-600":"text-slate-400")}),l.jsx("span",{className:"flex-1",children:t.label}),f&&l.jsx(Ws,{className:be("h-4 w-4 flex-shrink-0 transition-transform duration-200",u?"text-blue-500":"text-slate-400")})]}),f&&n&&Qg.createPortal(l.jsx("div",{className:"fixed z-[9999]",style:{top:s.top,left:s.left},onMouseEnter:y,onMouseLeave:v,children:l.jsx("div",{className:"w-48 rounded-xl border border-slate-200 bg-white py-2 shadow-lg",children:t.subItems.map(k=>{const w=e===k.href;return l.jsxs(Dt,{to:k.href,className:be("flex items-center gap-2.5 px-4 py-2.5 text-sm transition-colors",w?"bg-blue-50 text-blue-700 font-medium":"text-slate-600 hover:bg-slate-50 hover:text-slate-900"),children:[l.jsx(k.icon,{className:be("h-4 w-4 flex-shrink-0",w?"text-blue-600":"text-slate-400")}),k.label]},k.href)})})}),document.body)]})}function RR(){const t=Pr(),e=Dn(),n=t.pathname,[r,s]=E.useState(!1),{user:i,logout:o}=Zt(),c=(i==null?void 0:i.full_name)||"User",u=c.split(" ").map(p=>p[0]).join("").toUpperCase().slice(0,2),f=async()=>{await o(),e("/login",{replace:!0})};return l.jsxs("div",{className:"flex min-h-screen bg-slate-50",children:[r&&l.jsx("div",{className:"fixed inset-0 z-40 bg-slate-900/50 backdrop-blur-sm lg:hidden",onClick:()=>s(!1)}),l.jsxs("aside",{className:be("fixed inset-y-0 left-0 z-50 flex w-64 flex-col bg-white border-r border-slate-200 shadow-sm transition-transform duration-300 ease-in-out overflow-visible","lg:translate-x-0",r?"translate-x-0":"-translate-x-full"),children:[l.jsxs("div",{className:"flex h-16 items-center gap-3 px-6",children:[l.jsx("div",{className:"flex h-9 w-9 items-center justify-center rounded-lg bg-blue-600",children:l.jsx(pn,{className:"h-5 w-5 text-white"})}),l.jsx("h1",{className:"text-xl font-bold text-slate-900",children:"Bukizz"})]}),l.jsx("nav",{className:"flex-1 overflow-y-auto px-4 py-2 space-y-1",children:AR.map(p=>l.jsx(MR,{item:p,pathname:n},p.label))}),l.jsx("div",{className:"border-t border-slate-200 p-4",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-gradient-to-br from-blue-500 to-blue-700 text-sm font-bold text-white",children:u}),l.jsxs("div",{className:"min-w-0 flex-1",children:[l.jsx("p",{className:"truncate text-sm font-semibold text-slate-900",children:c}),l.jsx("p",{className:"truncate text-xs text-slate-500",children:(i==null?void 0:i.email)||""})]}),l.jsx("button",{onClick:f,title:"Sign out",className:"rounded-lg p-1.5 text-slate-400 hover:bg-red-50 hover:text-red-600 transition-colors",children:l.jsx(g0,{className:"h-4 w-4"})})]})})]}),l.jsxs("div",{className:"flex flex-1 flex-col min-w-0 lg:ml-64",children:[l.jsxs("header",{className:"sticky top-0 z-30 flex h-16 items-center gap-4 border-b border-slate-200 bg-white px-4 shadow-sm lg:px-6",children:[l.jsx("button",{onClick:()=>s(!0),className:"rounded-lg p-2 text-slate-400 hover:bg-slate-100 lg:hidden",children:l.jsx(cM,{className:"h-5 w-5"})}),l.jsxs("div",{className:"relative hidden flex-1 md:flex",children:[l.jsx(Gs,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-slate-400"}),l.jsx("input",{type:"text",placeholder:"Search products, orders, schools...",className:"h-10 w-full max-w-md rounded-lg border border-slate-200 bg-slate-50 pl-10 pr-4 text-sm placeholder:text-slate-400 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20"})]}),l.jsxs("div",{className:"flex items-center gap-2 ml-auto",children:[l.jsx(TR,{}),l.jsx("button",{className:"relative rounded-lg p-2 text-slate-400 hover:bg-slate-100 hover:text-slate-600",children:l.jsx(G4,{className:"h-5 w-5"})}),l.jsxs(Dt,{to:"/dashboard/notifications",className:"relative rounded-lg p-2 text-slate-400 hover:bg-slate-100 hover:text-slate-600",children:[l.jsx(c0,{className:"h-5 w-5"}),l.jsx("span",{className:"absolute right-1.5 top-1.5 h-2 w-2 rounded-full bg-red-500"})]}),l.jsxs("div",{className:"hidden sm:flex items-center gap-2 ml-2 rounded-lg border border-slate-200 px-3 py-1.5",children:[l.jsx("div",{className:"h-7 w-7 rounded-full bg-gradient-to-br from-blue-500 to-blue-700 flex items-center justify-center text-xs font-bold text-white",children:u}),l.jsx("span",{className:"text-sm font-medium text-slate-700",children:c.split(" ")[0]})]})]})]}),l.jsx("main",{className:"flex-1 p-4 lg:p-6",children:l.jsx("div",{className:"mx-auto max-w-7xl",children:l.jsx(r0,{})})})]})]})}function OR(){return l.jsx(r0,{})}function _R(){return l.jsx(r0,{})}const PR=pN("inline-flex items-center gap-1.5 rounded-full px-2.5 py-1 text-xs font-medium transition-colors",{variants:{variant:{default:"bg-slate-100 text-slate-700",pending:"bg-amber-100 text-amber-700",approved:"bg-emerald-100 text-emerald-700",rejected:"bg-red-100 text-red-700",live:"bg-emerald-100 text-emerald-700",draft:"bg-slate-100 text-slate-600",info:"bg-blue-100 text-blue-700",warning:"bg-amber-100 text-amber-700",success:"bg-emerald-100 text-emerald-700",confirmed:"bg-blue-100 text-blue-700",processing:"bg-violet-100 text-violet-700",shipped:"bg-indigo-100 text-indigo-700",delivered:"bg-emerald-100 text-emerald-700",cancelled:"bg-red-100 text-red-700",initialized:"bg-amber-100 text-amber-700",out_for_delivery:"bg-teal-100 text-teal-700",refunded:"bg-rose-100 text-rose-700"}},defaultVariants:{variant:"default"}}),IR={default:"bg-slate-500",pending:"bg-amber-500",approved:"bg-emerald-500",rejected:"bg-red-500",live:"bg-emerald-500",draft:"bg-slate-400",info:"bg-blue-500",warning:"bg-amber-500",success:"bg-emerald-500",confirmed:"bg-blue-500",processing:"bg-violet-500",shipped:"bg-indigo-500",delivered:"bg-emerald-500",cancelled:"bg-red-500",initialized:"bg-amber-500",out_for_delivery:"bg-teal-500",refunded:"bg-rose-500"};function yt({className:t,variant:e,dot:n,children:r,...s}){return l.jsxs("span",{className:be(PR({variant:e}),t),...s,children:[n&&l.jsx("span",{className:be("h-1.5 w-1.5 rounded-full",IR[e||"default"])}),r]})}const zl={getSchoolsByCity:async(t,{page:e=1,limit:n=50,search:r=""}={})=>{var c;const s={city:t,page:e,limit:n};r&&(s.search=r);const i=await $e.get("/schools",{params:s});return((c=i.data)==null?void 0:c.data)||i.data},getSchoolById:async t=>{var n;const e=await $e.get(`/schools/${t}`);return((n=e.data)==null?void 0:n.data)||e.data},searchSchools:async({search:t="",city:e="",state:n="",board:r="",page:s=1,limit:i=50}={})=>{var u;const o={page:s,limit:i};t&&(o.search=t),e&&(o.city=e),n&&(o.state=n),r&&(o.board=r);const c=await $e.get("/schools",{params:o});return((u=c.data)==null?void 0:u.data)||c.data},getConnectedSchools:async t=>{const e={};return t&&(e.status=t),(await $e.get("/retailer-schools/connected-schools",{params:e})).data},getSchoolCatalog:async(t,{page:e=1,limit:n=50,search:r="",category:s=""}={})=>{var c;const i={page:e,limit:n};r&&(i.search=r),s&&s!=="all"&&(i.category=s);const o=await $e.get(`/schools/${t}/catalog`,{params:i});return((c=o.data)==null?void 0:c.data)||o.data},getSchoolAnalytics:async t=>{var n;const e=await $e.get(`/schools/${t}/analytics`);return((n=e.data)==null?void 0:n.data)||e.data},getSchoolProducts:async(t,{page:e=1,limit:n=50,search:r="",productType:s=""}={})=>{var c;const i={page:e,limit:n};r&&(i.search=r),s&&s!=="all"&&(i.productType=s);const o=await $e.get(`/products/school/${t}`,{params:i});return((c=o.data)==null?void 0:c.data)||o.data},requestSchoolAccess:async(t,{productType:e=[]}={})=>(await $e.post("/retailer-schools/link",{schoolId:t,status:"pending",productType:e})).data},Gf=Ff((t,e)=>({schools:[],isLoadingSchools:!1,schoolsError:null,searchQuery:"",selectedCity:"",isRequestModalOpen:!1,selectedSchoolId:null,selectedCategories:[],isSubmitting:!1,submitError:null,connectedSchools:{approved:[],pending:[],rejected:[]},isLoadingConnected:{approved:!1,pending:!1,rejected:!1},connectedError:{approved:null,pending:null,rejected:null},schoolDetail:null,schoolProducts:[],schoolAnalytics:null,isLoadingSchoolDetail:!1,schoolDetailError:null,fetchSchoolsByCity:async n=>{var r,s,i,o;if(!n){t({schools:[],schoolsError:"No warehouse city found."});return}t({isLoadingSchools:!0,schoolsError:null,selectedCity:n});try{const c=await zl.getSchoolsByCity(n,{search:e().searchQuery}),u=Array.isArray(c)?c:c.schools||c.data||[];t({schools:u,isLoadingSchools:!1})}catch(c){const u=((s=(r=c.response)==null?void 0:r.data)==null?void 0:s.message)||((o=(i=c.response)==null?void 0:i.data)==null?void 0:o.error)||"Failed to fetch schools. Please try again.";t({schools:[],isLoadingSchools:!1,schoolsError:u})}},searchSchools:async n=>{var s,i,o,c;t({searchQuery:n});const r=e().selectedCity;if(r){t({isLoadingSchools:!0,schoolsError:null});try{const u=await zl.getSchoolsByCity(r,{search:n}),f=Array.isArray(u)?u:u.schools||u.data||[];t({schools:f,isLoadingSchools:!1})}catch(u){const f=((i=(s=u.response)==null?void 0:s.data)==null?void 0:i.message)||((c=(o=u.response)==null?void 0:o.data)==null?void 0:c.error)||"Failed to search schools.";t({isLoadingSchools:!1,schoolsError:f})}}},openRequestModal:n=>{t({isRequestModalOpen:!0,selectedSchoolId:null,selectedCategories:[],searchQuery:"",submitError:null}),e().fetchSchoolsByCity(n)},closeRequestModal:()=>{t({isRequestModalOpen:!1,selectedSchoolId:null,selectedCategories:[],searchQuery:"",submitError:null})},selectSchool:n=>t({selectedSchoolId:n}),toggleCategory:n=>{const r=e().selectedCategories;r.includes(n)?t({selectedCategories:r.filter(s=>s!==n)}):t({selectedCategories:[...r,n]})},submitSchoolAccessRequest:async()=>{var s,i,o,c;const{selectedSchoolId:n,selectedCategories:r}=e();if(!n||r.length===0)return t({submitError:"Please select a school and at least one product type."}),{success:!1};t({isSubmitting:!0,submitError:null});try{return await zl.requestSchoolAccess(n,{productType:r}),t({isSubmitting:!1,isRequestModalOpen:!1,selectedSchoolId:null,selectedCategories:[],searchQuery:""}),e().refreshAllConnectedSchools(),{success:!0}}catch(u){const f=((i=(s=u.response)==null?void 0:s.data)==null?void 0:i.message)||((c=(o=u.response)==null?void 0:o.data)==null?void 0:c.error)||"Failed to submit school access request.";return t({isSubmitting:!1,submitError:f}),{success:!1,error:f}}},fetchConnectedSchools:async n=>{var r,s,i,o;t(c=>({isLoadingConnected:{...c.isLoadingConnected,[n]:!0},connectedError:{...c.connectedError,[n]:null}}));try{const c=await zl.getConnectedSchools(n),u=(c==null?void 0:c.schools)||[];t(f=>({connectedSchools:{...f.connectedSchools,[n]:u},isLoadingConnected:{...f.isLoadingConnected,[n]:!1}}))}catch(c){const u=((s=(r=c.response)==null?void 0:r.data)==null?void 0:s.message)||((o=(i=c.response)==null?void 0:i.data)==null?void 0:o.error)||`Failed to load ${n} schools.`;t(f=>({isLoadingConnected:{...f.isLoadingConnected,[n]:!1},connectedError:{...f.connectedError,[n]:u}}))}},refreshAllConnectedSchools:()=>{const{fetchConnectedSchools:n}=e();n("approved"),n("pending"),n("rejected")},fetchAllSchoolData:async n=>{var r,s,i,o;t({isLoadingSchoolDetail:!0,schoolDetailError:null});try{const c=await zl.getSchoolById(n),u=(c==null?void 0:c.school)||c,f=(u==null?void 0:u.products)||[],p=(u==null?void 0:u.analytics)||null;return t({schoolDetail:u,schoolProducts:f,schoolAnalytics:p,isLoadingSchoolDetail:!1}),u}catch(c){const u=((s=(r=c.response)==null?void 0:r.data)==null?void 0:s.message)||((o=(i=c.response)==null?void 0:i.data)==null?void 0:o.error)||"Failed to load school details.";return t({schoolDetail:null,schoolProducts:[],schoolAnalytics:null,isLoadingSchoolDetail:!1,schoolDetailError:u}),null}},clearSchoolDetail:()=>{t({schoolDetail:null,schoolProducts:[],schoolAnalytics:null,isLoadingSchoolDetail:!1,schoolDetailError:null})},clearError:()=>t({schoolsError:null,submitError:null,connectedError:{approved:null,pending:null,rejected:null}}),reset:()=>t({schools:[],isLoadingSchools:!1,schoolsError:null,searchQuery:"",selectedCity:"",isRequestModalOpen:!1,selectedSchoolId:null,selectedCategories:[],isSubmitting:!1,submitError:null,connectedSchools:{approved:[],pending:[],rejected:[]},isLoadingConnected:{approved:!1,pending:!1,rejected:!1},connectedError:{approved:null,pending:null,rejected:null},schoolDetail:null,schoolProducts:[],schoolAnalytics:null,isLoadingSchoolDetail:!1,schoolDetailError:null})})),DR=[{label:"Bookset",value:"bookset"},{label:"Uniform",value:"uniform"},{label:"Stationary",value:"stationary"}];function zN({onSuccess:t}){var T;const{activeWarehouse:e}=Zr(),{isRequestModalOpen:n,closeRequestModal:r,schools:s,isLoadingSchools:i,schoolsError:o,searchQuery:c,searchSchools:u,selectedSchoolId:f,selectSchool:p,selectedCategories:m,toggleCategory:x,isSubmitting:y,submitError:v,submitSchoolAccessRequest:k}=Gf(),w=E.useCallback(A=>{const M=A.target.value;u(M)},[u]),j=async()=>{(await k()).success&&t&&t()};if(!n)return null;const C=((T=e==null?void 0:e.address)==null?void 0:T.city)||(e==null?void 0:e.city)||"";return l.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[l.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm",onClick:r}),l.jsxs("div",{className:"relative z-50 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto rounded-2xl bg-white shadow-xl",children:[l.jsxs("div",{className:"sticky top-0 z-10 flex items-center justify-between border-b border-slate-200 bg-white px-6 py-4 rounded-t-2xl",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Request School Access"}),C&&l.jsxs("p",{className:"mt-0.5 text-sm text-slate-500 flex items-center gap-1",children:[l.jsx(Rn,{className:"h-3.5 w-3.5"}),"Showing schools in ",l.jsx("span",{className:"font-medium text-slate-700",children:C})]})]}),l.jsx("button",{onClick:r,className:"rounded-lg p-2 text-slate-400 hover:bg-slate-100 hover:text-slate-600",children:l.jsx(On,{className:"h-5 w-5"})})]}),l.jsxs("div",{className:"p-6 space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Search for a school"}),l.jsx(Pe,{placeholder:"Search by school name or location...",value:c,onChange:w,icon:l.jsx(Gs,{className:"h-4 w-4"})})]}),o&&l.jsxs("div",{className:"flex items-center gap-3 rounded-lg border border-red-200 bg-red-50 p-4",children:[l.jsx(sr,{className:"h-5 w-5 flex-shrink-0 text-red-500"}),l.jsx("p",{className:"text-sm text-red-700",children:o})]}),i&&l.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[l.jsx(At,{className:"h-8 w-8 animate-spin text-blue-500"}),l.jsxs("p",{className:"mt-3 text-sm text-slate-500",children:["Loading schools in ",C,""]})]}),!i&&!o&&l.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:s.length===0?l.jsxs("div",{className:"py-8 text-center",children:[l.jsx(pn,{className:"mx-auto h-10 w-10 text-slate-300"}),l.jsx("p",{className:"mt-3 text-sm font-medium text-slate-600",children:"No schools found"}),l.jsx("p",{className:"mt-1 text-xs text-slate-400",children:c?`No results for "${c}" in ${C}`:`No schools available in ${C}`})]}):s.map(A=>{var M,P,F,ne,O;return l.jsxs("button",{onClick:()=>p(A.id),className:be("w-full flex items-start gap-4 rounded-xl border-2 p-4 text-left transition-all",f===A.id?"border-blue-600 bg-blue-50":"border-slate-200 hover:border-blue-300"),children:[l.jsx("div",{className:"flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-lg bg-violet-100",children:l.jsx(pn,{className:"h-6 w-6 text-violet-600"})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"font-medium text-slate-900",children:A.name}),l.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[l.jsx(Rn,{className:"h-3.5 w-3.5 text-slate-400"}),l.jsxs("p",{className:"text-sm text-slate-500 truncate",children:[A.city||((M=A.address)==null?void 0:M.city),(A.state||((P=A.address)==null?void 0:P.state))&&`, ${A.state||((F=A.address)==null?void 0:F.state)}`,(A.postalCode||((ne=A.address)==null?void 0:ne.postalCode)||A.pincode)&&` - ${A.postalCode||((O=A.address)==null?void 0:O.postalCode)||A.pincode}`]})]}),A.board&&l.jsxs("span",{className:"mt-1.5 inline-flex items-center gap-1 rounded-full bg-slate-100 px-2 py-0.5 text-xs font-medium text-slate-600",children:[l.jsx(pn,{className:"h-3 w-3"}),A.board]})]}),f===A.id&&l.jsx("div",{className:"flex h-6 w-6 items-center justify-center rounded-full bg-blue-600 text-white flex-shrink-0",children:l.jsx($i,{className:"h-4 w-4"})})]},A.id)})}),f&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-3",children:"Select product types you want to sell"}),l.jsx("div",{className:"flex flex-wrap gap-2",children:DR.map(A=>l.jsxs("button",{onClick:()=>x(A.value),className:be("rounded-full px-4 py-2 text-sm font-medium transition-colors border",m.includes(A.value)?"bg-blue-600 text-white border-blue-600":"bg-white text-slate-600 border-slate-300 hover:border-blue-300"),children:[m.includes(A.value)&&l.jsx($i,{className:"h-3.5 w-3.5 inline-block mr-1"}),A.label]},A.value))})]}),v&&l.jsxs("div",{className:"flex items-center gap-3 rounded-lg border border-red-200 bg-red-50 p-4",children:[l.jsx(sr,{className:"h-5 w-5 flex-shrink-0 text-red-500"}),l.jsx("p",{className:"text-sm text-red-700",children:v})]})]}),l.jsx("div",{className:"sticky bottom-0 border-t border-slate-200 bg-slate-50 px-6 py-4 rounded-b-2xl",children:l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx(xe,{variant:"outline",onClick:r,children:"Cancel"}),l.jsx(xe,{disabled:!f||m.length===0||y,onClick:j,children:y?l.jsxs(l.Fragment,{children:[l.jsx(At,{className:"h-4 w-4 animate-spin"}),"Submitting"]}):l.jsxs(l.Fragment,{children:["Submit Request",l.jsx(Ws,{className:"h-4 w-4"})]})})]})})]})]})}const LR=[{id:"sch_001",name:"St. Xavier's High School",code:"STXAV-GGN",board:"CBSE",city:"Gurugram",state:"Haryana",pincode:"122001",studentCount:2500,logo:null},{id:"sch_002",name:"Delhi Public School",code:"DPS-DEL",board:"CBSE",city:"New Delhi",state:"Delhi",pincode:"110001",studentCount:4e3,logo:null},{id:"sch_003",name:"Ryan International School",code:"RYAN-NOI",board:"ICSE",city:"Noida",state:"Uttar Pradesh",pincode:"201301",studentCount:3200,logo:null},{id:"sch_004",name:"Amity International School",code:"AMTY-GGN",board:"CBSE",city:"Gurugram",state:"Haryana",pincode:"122002",studentCount:2800,logo:null},{id:"sch_005",name:"The Shri Ram School",code:"SRS-DEL",board:"CBSE",city:"New Delhi",state:"Delhi",pincode:"110075",studentCount:1800,logo:null}],zR=[{id:"prod_001",vendorId:"vendor_001",type:"school",schoolId:"sch_001",category:"booksets",name:"Class 10 CBSE Complete Book Set (2024-25)",sku:"SCH-BK-001",description:"Complete set of NCERT textbooks for Class 10 CBSE board",mrp:3500,price:2800,stockQuantity:150,images:[],approvalStatus:"live",createdAt:"2024-01-20",updatedAt:"2024-03-01"},{id:"prod_002",vendorId:"vendor_001",type:"school",schoolId:"sch_001",category:"booksets",name:"Class 9 CBSE Complete Book Set (2024-25)",sku:"SCH-BK-002",description:"Complete set of NCERT textbooks for Class 9 CBSE board",mrp:3200,price:2560,stockQuantity:120,images:[],approvalStatus:"live",createdAt:"2024-01-20",updatedAt:"2024-03-01"},{id:"prod_003",vendorId:"vendor_001",type:"school",schoolId:"sch_001",category:"uniforms",name:"Summer Uniform Set - Boys",sku:"SCH-UNI-001",description:"Complete summer uniform set including shirt and trousers",mrp:1200,price:960,stockQuantity:200,images:[],approvalStatus:"pending",createdAt:"2024-02-15",updatedAt:"2024-03-01"},{id:"prod_004",vendorId:"vendor_001",type:"school",schoolId:"sch_001",category:"uniforms",name:"Winter Uniform Set - Girls",sku:"SCH-UNI-002",description:"Complete winter uniform set including blazer and skirt",mrp:2500,price:2e3,stockQuantity:80,images:[],approvalStatus:"rejected",rejectionReason:"Images do not match school uniform specifications.",createdAt:"2024-02-18",updatedAt:"2024-03-01"},{id:"prod_005",vendorId:"vendor_001",type:"school",schoolId:"sch_001",category:"merchandise",name:"School Backpack - Premium",sku:"SCH-MERCH-001",description:"Premium school backpack with school logo",mrp:1800,price:1440,stockQuantity:100,images:[],approvalStatus:"live",createdAt:"2024-01-25",updatedAt:"2024-03-01"},{id:"prod_006",vendorId:"vendor_001",type:"school",schoolId:"sch_002",category:"booksets",name:"Class 12 Science Complete Book Set",sku:"SCH-BK-003",description:"Complete set of NCERT textbooks for Class 12 Science stream",mrp:4500,price:3600,stockQuantity:75,images:[],approvalStatus:"live",createdAt:"2024-02-05",updatedAt:"2024-03-01"}],BR=[{id:"ORD-2024-001",vendorId:"vendor_001",customerName:"Rahul Sharma",orderType:"school_bundle",schoolName:"St. Xavier's High School",status:"pending",items:[{productId:"prod_001",productName:"Class 10 CBSE Complete Book Set",quantity:1,price:2800,sku:"SCH-BK-001"}],totalAmount:2800,shippingAddress:{line1:"A-123, Sector 56",city:"Gurugram",state:"Haryana",pincode:"122001"},createdAt:"2024-03-01",estimatedDelivery:"2024-03-05"},{id:"ORD-2024-002",vendorId:"vendor_001",customerName:"Priya Patel",orderType:"school_bundle",schoolName:"St. Xavier's High School",status:"confirmed",items:[{productId:"prod_003",productName:"Summer Uniform Set - Boys",quantity:2,price:960,sku:"SCH-UNI-001"}],totalAmount:1920,shippingAddress:{line1:"B-45, DLF Phase 3",city:"Gurugram",state:"Haryana",pincode:"122002"},createdAt:"2024-02-28",estimatedDelivery:"2024-03-04"},{id:"ORD-2024-003",vendorId:"vendor_001",customerName:"Amit Kumar",orderType:"general",schoolName:null,status:"shipped",items:[{productId:"gen_001",productName:"Premium School Backpack - Navy Blue",quantity:1,price:1899,sku:"GEN-BAG-001"},{productId:"gen_002",productName:"Stainless Steel Water Bottle 750ml",quantity:2,price:549,sku:"GEN-BOT-001"}],totalAmount:2997,shippingAddress:{line1:"C-78, Vasant Kunj",city:"New Delhi",state:"Delhi",pincode:"110070"},createdAt:"2024-02-25",estimatedDelivery:"2024-03-02"},{id:"ORD-2024-004",vendorId:"vendor_001",customerName:"Sneha Agarwal",orderType:"general",schoolName:null,status:"delivered",items:[{productId:"gen_003",productName:"Geometry Box - Classic Set",quantity:5,price:199,sku:"GEN-STAT-001"}],totalAmount:995,shippingAddress:{line1:"D-23, Sector 18",city:"Noida",state:"Uttar Pradesh",pincode:"201301"},createdAt:"2024-02-20",estimatedDelivery:"2024-02-25",deliveredAt:"2024-02-24"},{id:"ORD-2024-005",vendorId:"vendor_001",customerName:"Vikram Singh",orderType:"school_bundle",schoolName:"Delhi Public School",status:"pending",items:[{productId:"prod_006",productName:"Class 12 Science Complete Book Set",quantity:1,price:3600,sku:"SCH-BK-003"}],totalAmount:3600,shippingAddress:{line1:"E-56, Dwarka Sector 7",city:"New Delhi",state:"Delhi",pincode:"110075"},createdAt:"2024-03-02",estimatedDelivery:"2024-03-06"},{id:"ORD-2024-006",vendorId:"vendor_001",customerName:"Neha Gupta",orderType:"general",schoolName:null,status:"delivered",items:[{productId:"gen_004",productName:"Watercolor Paint Set - 24 Shades",quantity:3,price:380,sku:"GEN-ART-001"}],totalAmount:1140,shippingAddress:{line1:"F-12, Lajpat Nagar",city:"New Delhi",state:"Delhi",pincode:"110024"},createdAt:"2024-02-18",estimatedDelivery:"2024-02-22",deliveredAt:"2024-02-21"},{id:"ORD-2024-007",vendorId:"vendor_001",customerName:"Ravi Mishra",orderType:"general",schoolName:null,status:"cancelled",items:[{productId:"gen_005",productName:"NCERT Mathematics Textbook - Class 8",quantity:10,price:99,sku:"GEN-BOOK-001"}],totalAmount:990,shippingAddress:{line1:"G-34, Saket",city:"New Delhi",state:"Delhi",pincode:"110017"},createdAt:"2024-02-15",cancelledAt:"2024-02-16",cancellationReason:"Customer requested cancellation"},{id:"ORD-2024-008",vendorId:"vendor_001",customerName:"Anjali Verma",orderType:"school_bundle",schoolName:"St. Xavier's High School",status:"delivered",items:[{productId:"prod_005",productName:"School Backpack - Premium",quantity:1,price:1440,sku:"SCH-MERCH-001"},{productId:"prod_001",productName:"Class 10 CBSE Complete Book Set",quantity:1,price:2800,sku:"SCH-BK-001"}],totalAmount:4240,shippingAddress:{line1:"H-67, Sushant Lok",city:"Gurugram",state:"Haryana",pincode:"122001"},createdAt:"2024-02-10",estimatedDelivery:"2024-02-14",deliveredAt:"2024-02-13"}],Qd={totalRevenue:18682,totalOrders:8,pendingActions:4,schoolPartnerships:2},FR=[{id:"action_001",type:"order",title:"Process pending order",description:"ORD-2024-001 - Rahul Sharma - Class 10 Book Set",urgency:"high",actionLabel:"Process Now",actionHref:"/dashboard/orders"},{id:"action_002",type:"order",title:"Process pending order",description:"ORD-2024-005 - Vikram Singh - Class 12 Book Set",urgency:"high",actionLabel:"Process Now",actionHref:"/dashboard/orders"},{id:"action_003",type:"product",title:"Product approval pending",description:"Summer Uniform Set - Boys (SCH-UNI-001)",urgency:"medium",actionLabel:"View Status",actionHref:"/dashboard/inventory/schools/sch_001"},{id:"action_004",type:"inventory",title:"Low stock alert",description:"Watercolor Paint Set - Only 15 units left",urgency:"medium",actionLabel:"Update Stock",actionHref:"/dashboard/inventory/health"}];LR.map(t=>({...t,address:`${t.city}, ${t.state} - ${t.pincode}`}));zR.filter(t=>t.schoolId==="sch_001").length;const $R=[{title:"Total Sales",value:`${(Qd.totalRevenue/1e3).toFixed(1)}K`,change:"+12.5%",changeType:"positive",icon:b0,iconBg:"bg-emerald-100",iconColor:"text-emerald-600"},{title:"Active Orders",value:Qd.totalOrders.toString(),change:"+3 today",changeType:"positive",icon:_u,iconBg:"bg-blue-100",iconColor:"text-blue-600"},{title:"Low Stock Alerts",value:Qd.pendingActions.toString(),change:"Need attention",changeType:"warning",icon:Dc,iconBg:"bg-amber-100",iconColor:"text-amber-600"},{title:"Active Schools",value:Qd.schoolPartnerships.toString(),change:"1 pending",changeType:"neutral",icon:pn,iconBg:"bg-violet-100",iconColor:"text-violet-600"}];function VR(){const{activeWarehouse:t}=Zr(),{openRequestModal:e}=Gf(),n=()=>{var s;const r=((s=t==null?void 0:t.address)==null?void 0:s.city)||(t==null?void 0:t.city)||"";e(r)};return l.jsxs("div",{className:"space-y-6 animate-fade-in",children:[l.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Welcome back, Rahul "}),l.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Here's what's happening with your store today."})]}),l.jsxs("div",{className:"flex flex-wrap gap-3",children:[l.jsxs(xe,{variant:"outline",size:"sm",children:[l.jsx(_t,{className:"h-4 w-4"}),"Add Product"]}),l.jsxs(xe,{size:"sm",onClick:n,children:[l.jsx(_n,{className:"h-4 w-4"}),"Request School Access"]})]})]}),l.jsx("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4",children:$R.map((r,s)=>l.jsx("div",{className:"rounded-lg border border-slate-200 bg-white p-6 shadow-sm transition-all duration-200 hover:shadow-md",children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("p",{className:"text-sm font-medium text-slate-500",children:r.title}),l.jsx("p",{className:"text-3xl font-bold text-slate-900",children:r.value}),l.jsxs("p",{className:`flex items-center gap-1 text-sm ${r.changeType==="positive"?"text-emerald-600":r.changeType==="warning"?"text-amber-600":"text-slate-500"}`,children:[r.changeType==="positive"&&l.jsx(V4,{className:"h-4 w-4"}),r.change]})]}),l.jsx("div",{className:`rounded-lg p-3 ${r.iconBg}`,children:l.jsx(r.icon,{className:`h-6 w-6 ${r.iconColor}`})})]})},s))}),l.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[l.jsx("div",{className:"lg:col-span-2",children:l.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white shadow-sm",children:[l.jsxs("div",{className:"flex items-center justify-between border-b border-slate-200 px-6 py-4",children:[l.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Action Center"}),l.jsxs(Dt,{to:"/dashboard/notifications",className:"flex items-center gap-1 text-sm font-medium text-blue-600 hover:text-blue-700",children:["View all ",l.jsx(Ws,{className:"h-4 w-4"})]})]}),l.jsx("div",{className:"divide-y divide-slate-100 p-4",children:FR.slice(0,4).map(r=>l.jsxs("div",{className:"flex items-start gap-4 rounded-lg p-4 transition-colors hover:bg-slate-50",children:[l.jsxs("div",{className:`flex-shrink-0 rounded-lg p-2.5 ${r.type==="school_request"?"bg-violet-100":r.type==="product_approval"?"bg-blue-100":r.type==="low_stock"?"bg-amber-100":"bg-slate-100"}`,children:[r.type==="school_request"&&l.jsx(pn,{className:"h-5 w-5 text-violet-600"}),r.type==="product_approval"&&l.jsx(_t,{className:"h-5 w-5 text-blue-600"}),r.type==="low_stock"&&l.jsx(Dc,{className:"h-5 w-5 text-amber-600"}),r.type==="order"&&l.jsx(_u,{className:"h-5 w-5 text-slate-600"})]}),l.jsxs("div",{className:"min-w-0 flex-1",children:[l.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[l.jsx("p",{className:"font-medium text-slate-900",children:r.title}),l.jsx(yt,{variant:(r.urgency||"medium")==="high"?"pending":(r.urgency||"medium")==="medium"?"warning":"default",dot:!0,children:r.urgency||"medium"})]}),l.jsx("p",{className:"mt-1 text-sm text-slate-500",children:r.description})]}),l.jsx(Eo,{className:"h-5 w-5 flex-shrink-0 text-slate-400"})]},r.id))})]})}),l.jsx("div",{className:"lg:col-span-1",children:l.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white shadow-sm",children:[l.jsxs("div",{className:"flex items-center justify-between border-b border-slate-200 px-6 py-4",children:[l.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Recent Orders"}),l.jsxs(Dt,{to:"/dashboard/orders",className:"flex items-center gap-1 text-sm font-medium text-blue-600 hover:text-blue-700",children:["View all ",l.jsx(Ws,{className:"h-4 w-4"})]})]}),l.jsx("div",{className:"divide-y divide-slate-100 p-4",children:BR.slice(0,4).map(r=>l.jsxs("div",{className:"flex items-center gap-3 rounded-lg p-3 transition-colors hover:bg-slate-50",children:[l.jsx("div",{className:`flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg ${r.orderType==="school_bundle"?"bg-violet-100":"bg-slate-100"}`,children:r.orderType==="school_bundle"?l.jsx(pn,{className:"h-5 w-5 text-violet-600"}):l.jsx(_t,{className:"h-5 w-5 text-slate-600"})}),l.jsxs("div",{className:"min-w-0 flex-1",children:[l.jsx("p",{className:"truncate text-sm font-medium text-slate-900",children:r.id}),l.jsxs("p",{className:"text-xs text-slate-500",children:["",r.totalAmount.toLocaleString()]})]}),l.jsx(yt,{variant:r.status,className:"flex-shrink-0 text-xs",children:r.status})]},r.id))})]})})]}),l.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[{label:"Add School Product",href:"/dashboard/inventory/schools",icon:pn,bgColor:"bg-violet-100",iconColor:"text-violet-600"},{label:"Add General Product",href:"/dashboard/inventory/general",icon:_t,bgColor:"bg-blue-100",iconColor:"text-blue-600"},{label:"View All Orders",href:"/dashboard/orders",icon:_u,bgColor:"bg-emerald-100",iconColor:"text-emerald-600"},{label:"Update Profile",href:"/dashboard/settings",icon:b0,bgColor:"bg-amber-100",iconColor:"text-amber-600"}].map((r,s)=>l.jsx(Dt,{to:r.href,children:l.jsxs("div",{className:"flex items-center gap-4 rounded-lg border border-slate-200 bg-white p-4 shadow-sm transition-all duration-200 hover:border-slate-300 hover:shadow-md",children:[l.jsx("div",{className:`rounded-lg p-3 ${r.bgColor}`,children:l.jsx(r.icon,{className:`h-5 w-5 ${r.iconColor}`})}),l.jsx("span",{className:"flex-1 font-medium text-slate-900",children:r.label}),l.jsx(Eo,{className:"h-4 w-4 text-slate-400"})]})},s))}),l.jsx(zN,{})]})}const Mn={getProductsByWarehouseId:async({warehouseId:t,page:e=1,limit:n=10,search:r="",categoryId:s="",status:i=""}={})=>{const o={page:e,limit:n};r&&(o.search=r),s&&s!=="all"&&(o.categoryId=s),i&&(o.status=i);const c={};return t&&(c["x-warehouse-id"]=t),(await $e.get("/products/warehouse",{params:o,...t&&{headers:c}})).data},getCategories:async({parentId:t=null}={})=>{const e={};t?e.parentId=t:e.rootOnly=!0;const n=await $e.get("/categories",{params:e});return n.data.data||n.data},getBrands:async({limit:t=100,search:e=""}={})=>{const n={limit:t};e&&(n.search=e);const r=await $e.get("/brands",{params:n});return r.data.data||r.data},getCategoryById:async t=>{const e=await $e.get(`/categories/${t}`);return e.data.data||e.data},uploadImage:async t=>{const e=new FormData;return e.append("image",t),(await $e.post("/images/upload",e,{headers:{"Content-Type":"multipart/form-data"}})).data},createProduct:async t=>(await $e.post("/products/comprehensive",t)).data,createBrand:async t=>(await $e.post("/brands",t)).data,updateVariantStock:async(t,{quantity:e,operation:n="set"})=>(console.log("[updateVariantStock] variantId:",t,"quantity:",e,"operation:",n),(await $e.patch(`/products/variants/${t}/stock`,{quantity:e,operation:n})).data),bulkUpdateVariantStock:async t=>(console.log("[bulkUpdateVariantStock] updates:",JSON.stringify(t,null,2)),(await $e.put("/products/variants/bulk-stock",{updates:t})).data)},UR=[{value:"set",label:"Set to"},{value:"increment",label:"Add"},{value:"decrement",label:"Remove"}];function HR({product:t,onClose:e,onUpdated:n,toast:r}){const s=(t==null?void 0:t.variants)||[],i=s.length>0,[o,c]=E.useState([]),[u,f]=E.useState(!1);E.useEffect(()=>{t&&c(i?s.map(w=>({variantId:w.id,sku:w.sku||t.sku,label:p(w),currentStock:w.stock??0,quantity:"",operation:"set",dirty:!1})):[])},[t]);function p(w){const j=[w.optionValue1,w.optionValue2,w.optionValue3].filter(Boolean);return j.length>0?j.join(" / "):w.sku||"Variant"}const m=(w,j,C)=>{c(T=>T.map((A,M)=>M===w?{...A,[j]:C,dirty:!0}:A))},x=(w,j)=>{(j===""||/^\d+$/.test(j))&&m(w,"quantity",j)},y=(w,j)=>{c(C=>C.map((T,A)=>{if(A!==w)return T;const M=parseInt(T.quantity,10)||0,P=Math.max(0,M+j);return{...T,quantity:String(P),operation:"set",dirty:!0}}))},v=o.filter(w=>w.dirty&&w.quantity!==""),k=async()=>{var w,j;if(v.length!==0){f(!0);try{if(v.length===1){const C=v[0];await Mn.updateVariantStock(C.variantId,{quantity:parseInt(C.quantity,10),operation:C.operation})}else{const C=v.map(T=>({variantId:T.variantId,quantity:parseInt(T.quantity,10),operation:T.operation}));await Mn.bulkUpdateVariantStock(C)}r==null||r({title:"Stock updated",description:`Successfully updated stock for ${v.length} variant${v.length>1?"s":""}.`,variant:"success"}),n==null||n(),e()}catch(C){console.error("Stock update failed:",C),r==null||r({title:"Stock update failed",description:((j=(w=C.response)==null?void 0:w.data)==null?void 0:j.error)||"Please try again.",variant:"destructive"})}finally{f(!1)}}};return t?l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm p-4",children:l.jsxs("div",{className:"relative w-full max-w-2xl rounded-2xl bg-white shadow-2xl animate-in fade-in zoom-in-95",children:[l.jsxs("div",{className:"flex items-start justify-between border-b border-slate-200 px-6 py-5",children:[l.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[l.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg bg-blue-50",children:l.jsx(_t,{className:"h-5 w-5 text-blue-600"})}),l.jsxs("div",{className:"min-w-0",children:[l.jsx("h2",{className:"truncate text-lg font-semibold text-slate-900",children:"Update Stock"}),l.jsx("p",{className:"truncate text-sm text-slate-500",children:t.title})]})]}),l.jsx("button",{onClick:e,className:"rounded-lg p-2 text-slate-400 transition-colors hover:bg-slate-100 hover:text-slate-600",children:l.jsx(On,{className:"h-5 w-5"})})]}),l.jsx("div",{className:"max-h-[60vh] overflow-y-auto px-6 py-5",children:o.length===0?l.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[l.jsx(_t,{className:"h-10 w-10 text-slate-300 mb-3"}),l.jsx("p",{className:"text-sm font-medium text-slate-700",children:"No variants found"}),l.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"This product has no variants. Add variants to manage stock levels."})]}):l.jsx("div",{className:"space-y-4",children:o.map((w,j)=>l.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50/50 p-4 space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between gap-4",children:[l.jsxs("div",{className:"min-w-0",children:[l.jsx("p",{className:"truncate text-sm font-medium text-slate-900",children:w.label}),l.jsxs("p",{className:"text-xs text-slate-500",children:["SKU: ",w.sku]})]}),l.jsxs(yt,{variant:w.currentStock<20?"warning":"success",children:["Current: ",w.currentStock]})]}),l.jsxs("div",{className:"flex flex-wrap items-end gap-3",children:[l.jsxs("div",{className:"w-36",children:[l.jsx("label",{className:"mb-1.5 block text-xs font-medium text-slate-600",children:"Operation"}),l.jsx("select",{value:w.operation,onChange:C=>m(j,"operation",C.target.value),className:"flex h-10 w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm text-slate-900 transition-all focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20",children:UR.map(C=>l.jsx("option",{value:C.value,children:C.label},C.value))})]}),l.jsxs("div",{className:"flex-1 min-w-[120px]",children:[l.jsx("label",{className:"mb-1.5 block text-xs font-medium text-slate-600",children:"Quantity"}),l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx("button",{type:"button",onClick:()=>y(j,-1),disabled:parseInt(w.quantity,10)<=0,className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg border border-slate-300 bg-white text-slate-600 transition-colors hover:bg-slate-50 disabled:opacity-40",children:l.jsx(oN,{className:"h-4 w-4"})}),l.jsx("input",{type:"text",inputMode:"numeric",value:w.quantity,onChange:C=>x(j,C.target.value),placeholder:"0",className:"flex h-10 w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-center text-sm text-slate-900 transition-all focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20"}),l.jsx("button",{type:"button",onClick:()=>y(j,1),className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg border border-slate-300 bg-white text-slate-600 transition-colors hover:bg-slate-50",children:l.jsx(_n,{className:"h-4 w-4"})})]})]}),w.quantity!==""&&l.jsxs("div",{className:"flex-shrink-0 text-right",children:[l.jsx("label",{className:"mb-1.5 block text-xs font-medium text-slate-600",children:"New Stock"}),l.jsx("p",{className:"h-10 flex items-center justify-end text-sm font-semibold text-blue-600",children:WR(w)})]})]})]},w.variantId))})}),l.jsxs("div",{className:"flex items-center justify-between border-t border-slate-200 px-6 py-4",children:[l.jsx("p",{className:"text-xs text-slate-500",children:v.length>0?`${v.length} variant${v.length>1?"s":""} will be updated`:"Enter a quantity to update"}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(xe,{variant:"outline",size:"sm",onClick:e,children:"Cancel"}),l.jsxs(xe,{size:"sm",disabled:v.length===0,loading:u,onClick:k,children:[l.jsx(fM,{className:"h-4 w-4"}),v.length>1?"Bulk Update":"Update Stock"]})]})]})]})}):null}function WR(t){const e=parseInt(t.quantity,10)||0;switch(t.operation){case"increment":return t.currentStock+e;case"decrement":return Math.max(0,t.currentStock-e);case"set":default:return e}}const qR=[{id:"all",label:"All Products",icon:""},{id:"bags",label:"Bags",icon:""},{id:"bottles",label:"Bottles",icon:""},{id:"stationery",label:"Stationery",icon:""},{id:"art_supplies",label:"Art Supplies",icon:""},{id:"general_books",label:"General Books",icon:""}];function KR(){const{activeWarehouse:t}=Zr(),{toast:e}=qf(),[n,r]=E.useState([]),[s,i]=E.useState(!1),[o,c]=E.useState({page:1,limit:10,totalItems:0,totalPages:1}),[u,f]=E.useState({search:"",category:"all",status:""}),[p,m]=E.useState(null),[x,y]=E.useState("");E.useEffect(()=>{const j=setTimeout(()=>{y(u.search)},500);return()=>clearTimeout(j)},[u.search]);const v=E.useCallback(async()=>{var j,C;if(t!=null&&t.id){i(!0);try{const T=await Mn.getProductsByWarehouseId({warehouseId:t.id,page:o.page,limit:o.limit,search:x,categoryId:u.category==="all"?"":u.category,status:u.status});console.log(T),T.success&&(r(T.data.products),c(A=>({...A,...T.data.pagination})))}catch(T){console.error("Failed to fetch products:",T),e({title:"Failed to load products",description:((C=(j=T.response)==null?void 0:j.data)==null?void 0:C.error)||"Please try again later.",variant:"destructive"})}finally{i(!1)}}},[t,o.page,o.limit,x,u.category,u.status]);E.useEffect(()=>{v()},[v]);const k=j=>{f(C=>({...C,search:j.target.value})),c(C=>({...C,page:1}))},w=j=>{f(C=>({...C,category:j})),c(C=>({...C,page:1}))};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"General Store"}),l.jsxs("p",{className:"mt-1 text-sm text-slate-500",children:["Manage your product catalog and inventory for"," ",(t==null?void 0:t.name)||"Loading..."]})]}),l.jsxs(Dt,{to:"/dashboard/inventory/general/add",className:"inline-flex items-center justify-center gap-2 rounded-lg bg-blue-600 px-4 py-2.5 text-sm font-semibold text-white shadow-sm transition-all hover:bg-blue-700 hover:shadow-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:[l.jsx(_n,{className:"h-4 w-4"}),"Add Product"]})]}),l.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:qR.map(j=>l.jsxs("button",{onClick:()=>w(j.id),className:`flex flex-shrink-0 items-center gap-2 rounded-lg px-4 py-2.5 text-sm font-medium transition-all ${u.category===j.id?"bg-blue-600 text-white shadow-sm":"border border-slate-200 bg-white text-slate-600 hover:border-slate-300 hover:bg-slate-50"}`,children:[l.jsx("span",{children:j.icon}),j.label]},j.id))}),l.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row",children:[l.jsx("div",{className:"flex-1",children:l.jsx(Pe,{placeholder:"Search by name or SKU...",value:u.search,onChange:k,icon:l.jsx(Gs,{className:"h-5 w-5"})})}),l.jsxs(xe,{variant:"outline",children:[l.jsx(Y4,{className:"h-4 w-4"}),"Filters"]})]}),l.jsx("div",{className:"overflow-hidden rounded-lg border border-slate-200 bg-white shadow-sm min-h-[400px]",children:l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b border-slate-200 bg-slate-50",children:[l.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-slate-900",children:"Product"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-slate-900",children:"SKU"}),l.jsx("th",{className:"hidden px-6 py-4 text-left text-sm font-semibold text-slate-900 md:table-cell",children:"Type"}),l.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-slate-900",children:"Price"}),l.jsx("th",{className:"hidden px-6 py-4 text-right text-sm font-semibold text-slate-900 sm:table-cell",children:"Stock"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-slate-900",children:"Status"}),l.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-slate-900",children:"Actions"})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100",children:s?l.jsx("tr",{children:l.jsx("td",{colSpan:"7",className:"px-6 py-20 text-center text-slate-500",children:l.jsxs("div",{className:"flex flex-col items-center justify-center",children:[l.jsx(At,{className:"h-8 w-8 animate-spin text-blue-600 mb-2"}),l.jsx("p",{children:"Loading inventory..."})]})})}):n.length===0?l.jsx("tr",{children:l.jsxs("td",{colSpan:"7",className:"px-6 py-12 text-center text-slate-500",children:[l.jsx(_t,{className:"mx-auto mb-4 h-12 w-12 text-slate-300"}),l.jsx("p",{className:"text-slate-500 font-medium",children:"No products found"}),l.jsx("p",{className:"text-xs mt-1",children:"Try adjusting your search or filters."}),l.jsxs(xe,{variant:"outline",className:"mt-4",children:[l.jsx(_n,{className:"h-4 w-4"}),"Add your first product"]})]})}):n.map(j=>{var C,T;return l.jsxs("tr",{className:"group transition-colors hover:bg-slate-50",children:[l.jsx("td",{className:"px-6 py-4",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-lg bg-slate-100",children:l.jsx(_t,{className:"h-6 w-6 text-slate-400"})}),l.jsxs("div",{className:"min-w-0",children:[l.jsx("p",{className:"truncate font-medium text-slate-900",children:j.title}),l.jsxs("p",{className:"text-sm text-slate-500",children:[((C=j.variants)==null?void 0:C.length)||0," variants"]})]})]})}),l.jsx("td",{className:"px-6 py-4",children:l.jsx("code",{className:"rounded bg-slate-100 px-2 py-1 text-sm text-slate-600",children:j.sku})}),l.jsx("td",{className:"hidden px-6 py-4 md:table-cell",children:l.jsx(yt,{variant:"default",className:"capitalize",children:j.productType||"Standard"})}),l.jsx("td",{className:"px-6 py-4 text-right",children:l.jsx("div",{className:"flex flex-col items-end",children:l.jsxs("span",{className:"font-semibold text-slate-900",children:["",(T=j.basePrice)==null?void 0:T.toLocaleString()]})})}),l.jsx("td",{className:"hidden px-6 py-4 text-right sm:table-cell",children:l.jsxs("button",{onClick:()=>m(j),className:`inline-flex items-center gap-1.5 rounded-md px-2 py-1 font-medium transition-colors hover:bg-blue-50 hover:text-blue-700 cursor-pointer ${j.stock<20?"text-amber-600":"text-slate-900"}`,title:"Click to update stock",children:[j.stock,l.jsx(Pu,{className:"h-3 w-3 opacity-0 group-hover:opacity-100 text-slate-400"})]})}),l.jsx("td",{className:"px-6 py-4",children:l.jsx(yt,{variant:"live",dot:!0,children:"Active"})}),l.jsx("td",{className:"px-6 py-4",children:l.jsxs("div",{className:"flex items-center justify-end gap-1",children:[l.jsx("button",{className:"rounded-lg p-2 text-slate-400 transition-colors hover:bg-slate-100 hover:text-slate-600",children:l.jsx(eg,{className:"h-4 w-4"})}),l.jsx("button",{className:"rounded-lg p-2 text-slate-400 transition-colors hover:bg-slate-100 hover:text-slate-600",children:l.jsx(Pu,{className:"h-4 w-4"})}),l.jsx("button",{className:"rounded-lg p-2 text-slate-400 transition-colors hover:bg-red-50 hover:text-red-600",children:l.jsx(qs,{className:"h-4 w-4"})})]})})]},j.id)})})]})})}),o.totalPages>1&&l.jsxs("div",{className:"flex flex-col items-center justify-between gap-4 text-sm text-slate-500 sm:flex-row",children:[l.jsxs("span",{children:["Showing ",(o.page-1)*o.limit+1," to"," ",Math.min(o.page*o.limit,o.totalItems)," ","of ",o.totalItems," products"]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(xe,{variant:"outline",size:"sm",disabled:o.page<=1,onClick:()=>c(j=>({...j,page:j.page-1})),children:"Previous"}),l.jsxs("span",{className:"px-2",children:["Page ",o.page," of ",o.totalPages]}),l.jsx(xe,{variant:"outline",size:"sm",disabled:o.page>=o.totalPages,onClick:()=>c(j=>({...j,page:j.page+1})),children:"Next"})]})]}),p&&l.jsx(HR,{product:p,onClose:()=>m(null),onUpdated:v,toast:e})]})}function GR({steps:t,currentStep:e,onStepClick:n,className:r}){return l.jsx("div",{className:be("w-full",r),children:l.jsx("div",{className:"flex items-center justify-between",children:t.map((s,i)=>{const o=i<e,c=i===e,u=n&&i<=e;return l.jsxs(dt.Fragment,{children:[l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("button",{type:"button",onClick:()=>u&&n(i),disabled:!u,className:be("flex h-10 w-10 items-center justify-center rounded-full border-2 text-sm font-semibold transition-all duration-300",o&&"border-emerald-500 bg-emerald-500 text-white",c&&"border-blue-600 bg-blue-600 text-white shadow-lg shadow-blue-200",!o&&!c&&"border-slate-300 bg-white text-slate-400",u&&"cursor-pointer hover:scale-105"),children:o?l.jsx($i,{className:"h-5 w-5"}):i+1}),l.jsxs("div",{className:"mt-2 text-center",children:[l.jsx("p",{className:be("text-sm font-medium",c?"text-blue-600":o?"text-emerald-600":"text-slate-500"),children:s.label}),s.description&&l.jsx("p",{className:"mt-0.5 text-xs text-slate-400",children:s.description})]})]}),i<t.length-1&&l.jsx("div",{className:"flex-1 px-4",children:l.jsx("div",{className:be("h-0.5 w-full transition-colors duration-300",i<e?"bg-emerald-500":"bg-slate-200")})})]},s.id)})})})}function JR({onSelect:t}){const[e,n]=E.useState([]),[r,s]=E.useState(!1);E.useEffect(()=>{i(null,0)},[]);const i=async(m,x)=>{s(!0);try{const v=(await Mn.getCategories({parentId:m})).categories;console.log("data",v),n(k=>{const w=k.slice(0,x);return v&&v.length>0&&w.push({parentId:m,categories:v,selectedId:null}),w})}catch(y){console.error("Failed to fetch categories:",y)}finally{s(!1)}},o=(m,x)=>{n(y=>{const v=[...y];return v[x].selectedId=m.id,v.slice(0,x+1)}),i(m.id,x+1)},u=(()=>{if(e.length===0)return null;const m=[...e].reverse().find(x=>x.selectedId);return m?m.categories.find(x=>x.id===m.selectedId):null})(),f=e.findIndex(m=>m.selectedId===(u==null?void 0:u.id)),p=e.length>f+1;return l.jsx("div",{className:"flex flex-col h-[600px] w-full",children:l.jsxs("div",{className:"flex-1 flex overflow-x-auto gap-px border bg-slate-200 rounded-lg",children:[e.map((m,x)=>l.jsxs("div",{className:"w-80 flex-shrink-0 bg-white first:rounded-l-lg last:rounded-r-lg border-r border-slate-100 overflow-y-auto",children:[l.jsx("div",{className:"p-3 sticky top-0 bg-white border-b border-slate-100 font-medium text-sm text-slate-500",children:x===0?"Root Categories":"Sub Categories"}),l.jsx("div",{className:"p-2 space-y-1",children:m.categories.map(y=>l.jsxs("button",{onClick:()=>o(y,x),className:be("w-full flex items-center justify-between px-3 py-2 rounded-md text-sm text-left transition-colors",m.selectedId===y.id?"bg-blue-50 text-blue-700 font-medium":"text-slate-700 hover:bg-slate-50"),children:[l.jsx("span",{children:y.name}),m.selectedId===y.id&&l.jsx(Ws,{className:"h-4 w-4 text-blue-400"})]},y.id))})]},m.parentId||"root")),l.jsx("div",{className:"flex-1 min-w-[300px] bg-slate-50 flex items-center justify-center p-8",children:r?l.jsxs("div",{className:"text-center",children:[l.jsx(At,{className:"h-8 w-8 animate-spin text-slate-400 mx-auto mb-2"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Loading Categories..."})]}):u&&!p?l.jsxs("div",{className:"text-center max-w-sm",children:[l.jsx("div",{className:"h-16 w-16 bg-green-100 text-green-600 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx($i,{className:"h-8 w-8"})}),l.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-1",children:u.name}),l.jsx("p",{className:"text-sm text-slate-500 mb-6",children:"Correct category selected? Click confirm to proceed with this category."}),l.jsx(xe,{onClick:()=>t(u),className:"bg-blue-600 hover:bg-blue-700 text-white w-full",children:"Confirm & Proceed"})]}):l.jsx("div",{className:"text-center text-slate-400",children:l.jsx("p",{children:"Select a category to view sub-categories"})})})]})})}const $n=E.forwardRef(({className:t,hover:e,...n},r)=>l.jsx("div",{ref:r,className:be("rounded-xl border border-slate-200 bg-white shadow-sm",e&&"transition-all duration-200 hover:shadow-lg hover:border-slate-300 hover:-translate-y-0.5 cursor-pointer",t),...n}));$n.displayName="Card";const dr=E.forwardRef(({className:t,...e},n)=>l.jsx("div",{ref:n,className:be("flex flex-col space-y-1.5 p-6",t),...e}));dr.displayName="CardHeader";const ur=E.forwardRef(({className:t,...e},n)=>l.jsx("h3",{ref:n,className:be("text-lg font-semibold leading-none tracking-tight text-slate-900",t),...e}));ur.displayName="CardTitle";const ZR=E.forwardRef(({className:t,...e},n)=>l.jsx("p",{ref:n,className:be("text-sm text-slate-500",t),...e}));ZR.displayName="CardDescription";const Vn=E.forwardRef(({className:t,...e},n)=>l.jsx("div",{ref:n,className:be("p-6 pt-0",t),...e}));Vn.displayName="CardContent";const QR=E.forwardRef(({className:t,...e},n)=>l.jsx("div",{ref:n,className:be("flex items-center p-6 pt-0",t),...e}));QR.displayName="CardFooter";var am={exports:{}},lm={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u1;function YR(){if(u1)return lm;u1=1;var t=Ac();function e(m,x){return m===x&&(m!==0||1/m===1/x)||m!==m&&x!==x}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,s=t.useEffect,i=t.useLayoutEffect,o=t.useDebugValue;function c(m,x){var y=x(),v=r({inst:{value:y,getSnapshot:x}}),k=v[0].inst,w=v[1];return i(function(){k.value=y,k.getSnapshot=x,u(k)&&w({inst:k})},[m,y,x]),s(function(){return u(k)&&w({inst:k}),m(function(){u(k)&&w({inst:k})})},[m]),o(y),y}function u(m){var x=m.getSnapshot;m=m.value;try{var y=x();return!n(m,y)}catch{return!0}}function f(m,x){return x()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:c;return lm.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:p,lm}var f1;function BN(){return f1||(f1=1,am.exports=YR()),am.exports}var FN=BN();function vn(t){this.content=t}vn.prototype={constructor:vn,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,s=r.find(t),i=r.content.slice();return s==-1?i.push(n||t,e):(i[s+1]=e,n&&(i[s]=n)),new vn(i)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new vn(n)},addToStart:function(t,e){return new vn([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new vn(n)},addBefore:function(t,e,n){var r=this.remove(e),s=r.content.slice(),i=r.find(t);return s.splice(i==-1?s.length:i,0,e,n),new vn(s)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=vn.from(t),t.size?new vn(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=vn.from(t),t.size?new vn(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=vn.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};vn.from=function(t){if(t instanceof vn)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new vn(e)};function $N(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let s=t.child(r),i=e.child(r);if(s==i){n+=s.nodeSize;continue}if(!s.sameMarkup(i))return n;if(s.isText&&s.text!=i.text){for(let o=0;s.text[o]==i.text[o];o++)n++;return n}if(s.content.size||i.content.size){let o=$N(s.content,i.content,n+1);if(o!=null)return o}n+=s.nodeSize}}function VN(t,e,n,r){for(let s=t.childCount,i=e.childCount;;){if(s==0||i==0)return s==i?null:{a:n,b:r};let o=t.child(--s),c=e.child(--i),u=o.nodeSize;if(o==c){n-=u,r-=u;continue}if(!o.sameMarkup(c))return{a:n,b:r};if(o.isText&&o.text!=c.text){let f=0,p=Math.min(o.text.length,c.text.length);for(;f<p&&o.text[o.text.length-f-1]==c.text[c.text.length-f-1];)f++,n--,r--;return{a:n,b:r}}if(o.content.size||c.content.size){let f=VN(o.content,c.content,n-1,r-1);if(f)return f}n-=u,r-=u}}class ae{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,s=0,i){for(let o=0,c=0;c<n;o++){let u=this.content[o],f=c+u.nodeSize;if(f>e&&r(u,s+c,i||null,o)!==!1&&u.content.size){let p=c+1;u.nodesBetween(Math.max(0,e-p),Math.min(u.content.size,n-p),r,s+p)}c=f}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,s){let i="",o=!0;return this.nodesBetween(e,n,(c,u)=>{let f=c.isText?c.text.slice(Math.max(e,u)-u,n-u):c.isLeaf?s?typeof s=="function"?s(c):s:c.type.spec.leafText?c.type.spec.leafText(c):"":"";c.isBlock&&(c.isLeaf&&f||c.isTextblock)&&r&&(o?o=!1:i+=r),i+=f},0),i}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,s=this.content.slice(),i=0;for(n.isText&&n.sameMarkup(r)&&(s[s.length-1]=n.withText(n.text+r.text),i=1);i<e.content.length;i++)s.push(e.content[i]);return new ae(s,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],s=0;if(n>e)for(let i=0,o=0;o<n;i++){let c=this.content[i],u=o+c.nodeSize;u>e&&((o<e||u>n)&&(c.isText?c=c.cut(Math.max(0,e-o),Math.min(c.text.length,n-o)):c=c.cut(Math.max(0,e-o-1),Math.min(c.content.size,n-o-1))),r.push(c),s+=c.nodeSize),o=u}return new ae(r,s)}cutByIndex(e,n){return e==n?ae.empty:e==0&&n==this.content.length?this:new ae(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let s=this.content.slice(),i=this.size+n.nodeSize-r.nodeSize;return s[e]=n,new ae(s,i)}addToStart(e){return new ae([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new ae(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let s=this.content[n];e(s,r,n),r+=s.nodeSize}}findDiffStart(e,n=0){return $N(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return VN(this,e,n,r)}findIndex(e){if(e==0)return Yd(0,e);if(e==this.size)return Yd(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,r=0;;n++){let s=this.child(n),i=r+s.nodeSize;if(i>=e)return i==e?Yd(n+1,i):Yd(n,r);r=i}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return ae.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new ae(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return ae.empty;let n,r=0;for(let s=0;s<e.length;s++){let i=e[s];r+=i.nodeSize,s&&i.isText&&e[s-1].sameMarkup(i)?(n||(n=e.slice(0,s)),n[n.length-1]=i.withText(n[n.length-1].text+i.text)):n&&n.push(i)}return new ae(n||e,r)}static from(e){if(!e)return ae.empty;if(e instanceof ae)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new ae([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}ae.empty=new ae([],0);const cm={index:0,offset:0};function Yd(t,e){return cm.index=t,cm.offset=e,cm}function Ju(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!Ju(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!Ju(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let mt=class fg{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let s=0;s<e.length;s++){let i=e[s];if(this.eq(i))return e;if(this.type.excludes(i.type))n||(n=e.slice(0,s));else{if(i.type.excludes(this.type))return e;!r&&i.type.rank>this.type.rank&&(n||(n=e.slice(0,s)),n.push(this),r=!0),n&&n.push(i)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Ju(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let s=r.create(n.attrs);return r.checkAttrs(s.attrs),s}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return fg.none;if(e instanceof fg)return[e];let n=e.slice();return n.sort((r,s)=>r.type.rank-s.type.rank),n}};mt.none=[];class Zu extends Error{}class we{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=HN(this.content,e+this.openStart,n);return r&&new we(r,this.openStart,this.openEnd)}removeBetween(e,n){return new we(UN(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return we.empty;let r=n.openStart||0,s=n.openEnd||0;if(typeof r!="number"||typeof s!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new we(ae.fromJSON(e,n.content),r,s)}static maxOpen(e,n=!0){let r=0,s=0;for(let i=e.firstChild;i&&!i.isLeaf&&(n||!i.type.spec.isolating);i=i.firstChild)r++;for(let i=e.lastChild;i&&!i.isLeaf&&(n||!i.type.spec.isolating);i=i.lastChild)s++;return new we(e,r,s)}}we.empty=new we(ae.empty,0,0);function UN(t,e,n){let{index:r,offset:s}=t.findIndex(e),i=t.maybeChild(r),{index:o,offset:c}=t.findIndex(n);if(s==e||i.isText){if(c!=n&&!t.child(o).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=o)throw new RangeError("Removing non-flat range");return t.replaceChild(r,i.copy(UN(i.content,e-s-1,n-s-1)))}function HN(t,e,n,r){let{index:s,offset:i}=t.findIndex(e),o=t.maybeChild(s);if(i==e||o.isText)return r&&!r.canReplace(s,s,n)?null:t.cut(0,e).append(n).append(t.cut(e));let c=HN(o.content,e-i-1,n,o);return c&&t.replaceChild(s,o.copy(c))}function XR(t,e,n){if(n.openStart>t.depth)throw new Zu("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new Zu("Inconsistent open depths");return WN(t,e,n,0)}function WN(t,e,n,r){let s=t.index(r),i=t.node(r);if(s==e.index(r)&&r<t.depth-n.openStart){let o=WN(t,e,n,r+1);return i.copy(i.content.replaceChild(s,o))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let o=t.parent,c=o.content;return ko(o,c.cut(0,t.parentOffset).append(n.content).append(c.cut(e.parentOffset)))}else{let{start:o,end:c}=eO(n,t);return ko(i,KN(t,o,c,e,r))}else return ko(i,Qu(t,e,r))}function qN(t,e){if(!e.type.compatibleContent(t.type))throw new Zu("Cannot join "+e.type.name+" onto "+t.type.name)}function hg(t,e,n){let r=t.node(n);return qN(r,e.node(n)),r}function wo(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function tc(t,e,n,r){let s=(e||t).node(n),i=0,o=e?e.index(n):s.childCount;t&&(i=t.index(n),t.depth>n?i++:t.textOffset&&(wo(t.nodeAfter,r),i++));for(let c=i;c<o;c++)wo(s.child(c),r);e&&e.depth==n&&e.textOffset&&wo(e.nodeBefore,r)}function ko(t,e){return t.type.checkContent(e),t.copy(e)}function KN(t,e,n,r,s){let i=t.depth>s&&hg(t,e,s+1),o=r.depth>s&&hg(n,r,s+1),c=[];return tc(null,t,s,c),i&&o&&e.index(s)==n.index(s)?(qN(i,o),wo(ko(i,KN(t,e,n,r,s+1)),c)):(i&&wo(ko(i,Qu(t,e,s+1)),c),tc(e,n,s,c),o&&wo(ko(o,Qu(n,r,s+1)),c)),tc(r,null,s,c),new ae(c)}function Qu(t,e,n){let r=[];if(tc(null,t,n,r),t.depth>n){let s=hg(t,e,n+1);wo(ko(s,Qu(t,e,n+1)),r)}return tc(e,null,n,r),new ae(r)}function eO(t,e){let n=e.depth-t.openStart,s=e.node(n).copy(t.content);for(let i=n-1;i>=0;i--)s=e.node(i).copy(ae.from(s));return{start:s.resolveNoCache(t.openStart+n),end:s.resolveNoCache(s.content.size-t.openEnd-n)}}class xc{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],s=e.child(n);return r?e.child(n).cut(r):s}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],s=n==0?0:this.path[n*3-1]+1;for(let i=0;i<e;i++)s+=r.child(i).nodeSize;return s}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return mt.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),s=e.maybeChild(n);if(!r){let c=r;r=s,s=c}let i=r.marks;for(var o=0;o<i.length;o++)i[o].type.spec.inclusive===!1&&(!s||!i[o].isInSet(s.marks))&&(i=i[o--].removeFromSet(i));return i}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,s=e.parent.maybeChild(e.index());for(var i=0;i<r.length;i++)r[i].type.spec.inclusive===!1&&(!s||!r[i].isInSet(s.marks))&&(r=r[i--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new Yu(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],s=0,i=n;for(let o=e;;){let{index:c,offset:u}=o.content.findIndex(i),f=i-u;if(r.push(o,c,s+u),!f||(o=o.child(c),o.isText))break;i=f-1,s+=u+1}return new xc(n,r,i)}static resolveCached(e,n){let r=h1.get(e);if(r)for(let i=0;i<r.elts.length;i++){let o=r.elts[i];if(o.pos==n)return o}else h1.set(e,r=new tO);let s=r.elts[r.i]=xc.resolve(e,n);return r.i=(r.i+1)%nO,s}}class tO{constructor(){this.elts=[],this.i=0}}const nO=12,h1=new WeakMap;class Yu{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const rO=Object.create(null);class Kr{constructor(e,n,r,s=mt.none){this.type=e,this.attrs=n,this.marks=s,this.content=r||ae.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,s=0){this.content.nodesBetween(e,n,r,s,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,s){return this.content.textBetween(e,n,r,s)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&Ju(this.attrs,n||e.defaultAttrs||rO)&&mt.sameSet(this.marks,r||mt.none)}copy(e=null){return e==this.content?this:new Kr(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Kr(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return we.empty;let s=this.resolve(e),i=this.resolve(n),o=r?0:s.sharedDepth(n),c=s.start(o),f=s.node(o).content.cut(s.pos-c,i.pos-c);return new we(f,s.depth-o,i.depth-o)}replace(e,n,r){return XR(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:s}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(s==e||n.isText)return n;e-=s+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let s=this.content.child(n-1);return{node:s,index:n-1,offset:r-s.nodeSize}}resolve(e){return xc.resolveCached(this,e)}resolveNoCache(e){return xc.resolve(this,e)}rangeHasMark(e,n,r){let s=!1;return n>e&&this.nodesBetween(e,n,i=>(r.isInSet(i.marks)&&(s=!0),!s)),s}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),GN(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=ae.empty,s=0,i=r.childCount){let o=this.contentMatchAt(e).matchFragment(r,s,i),c=o&&o.matchFragment(this.content,n);if(!c||!c.validEnd)return!1;for(let u=s;u<i;u++)if(!this.type.allowsMarks(r.child(u).marks))return!1;return!0}canReplaceWith(e,n,r,s){if(s&&!this.type.allowsMarks(s))return!1;let i=this.contentMatchAt(e).matchType(r),o=i&&i.matchFragment(this.content,n);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=mt.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!mt.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let s=ae.fromJSON(e,n.content),i=e.nodeType(n.type).create(n.attrs,s,r);return i.type.checkAttrs(i.attrs),i}}Kr.prototype.text=void 0;class Xu extends Kr{constructor(e,n,r,s){if(super(e,n,null,s),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):GN(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Xu(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Xu(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function GN(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class Oo{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new sO(e,n);if(r.next==null)return Oo.empty;let s=JN(r);r.next&&r.err("Unexpected trailing text");let i=uO(dO(s));return fO(i,r),i}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let s=this;for(let i=n;s&&i<r;i++)s=s.matchType(e.child(i).type);return s}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let s=[this];function i(o,c){let u=o.matchFragment(e,r);if(u&&(!n||u.validEnd))return ae.from(c.map(f=>f.createAndFill()));for(let f=0;f<o.next.length;f++){let{type:p,next:m}=o.next[f];if(!(p.isText||p.hasRequiredAttrs())&&s.indexOf(m)==-1){s.push(m);let x=i(m,c.concat(p));if(x)return x}}return null}return i(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let s=r.shift(),i=s.match;if(i.matchType(e)){let o=[];for(let c=s;c.type;c=c.via)o.push(c.type);return o.reverse()}for(let o=0;o<i.next.length;o++){let{type:c,next:u}=i.next[o];!c.isLeaf&&!c.hasRequiredAttrs()&&!(c.name in n)&&(!s.type||u.validEnd)&&(r.push({match:c.contentMatch,type:c,via:s}),n[c.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let s=0;s<r.next.length;s++)e.indexOf(r.next[s].next)==-1&&n(r.next[s].next)}return n(this),e.map((r,s)=>{let i=s+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)i+=(o?", ":"")+r.next[o].type.name+"->"+e.indexOf(r.next[o].next);return i}).join(`
`)}}Oo.empty=new Oo(!0);class sO{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function JN(t){let e=[];do e.push(iO(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function iO(t){let e=[];do e.push(oO(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function oO(t){let e=cO(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=aO(t,e);else break;return e}function p1(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function aO(t,e){let n=p1(t),r=n;return t.eat(",")&&(t.next!="}"?r=p1(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function lO(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let s=[];for(let i in n){let o=n[i];o.isInGroup(e)&&s.push(o)}return s.length==0&&t.err("No node type or group '"+e+"' found"),s}function cO(t){if(t.eat("(")){let e=JN(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=lO(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function dO(t){let e=[[]];return s(i(t,0),n()),e;function n(){return e.push([])-1}function r(o,c,u){let f={term:u,to:c};return e[o].push(f),f}function s(o,c){o.forEach(u=>u.to=c)}function i(o,c){if(o.type=="choice")return o.exprs.reduce((u,f)=>u.concat(i(f,c)),[]);if(o.type=="seq")for(let u=0;;u++){let f=i(o.exprs[u],c);if(u==o.exprs.length-1)return f;s(f,c=n())}else if(o.type=="star"){let u=n();return r(c,u),s(i(o.expr,u),u),[r(u)]}else if(o.type=="plus"){let u=n();return s(i(o.expr,c),u),s(i(o.expr,u),u),[r(u)]}else{if(o.type=="opt")return[r(c)].concat(i(o.expr,c));if(o.type=="range"){let u=c;for(let f=0;f<o.min;f++){let p=n();s(i(o.expr,u),p),u=p}if(o.max==-1)s(i(o.expr,u),u);else for(let f=o.min;f<o.max;f++){let p=n();r(u,p),s(i(o.expr,u),p),u=p}return[r(u)]}else{if(o.type=="name")return[r(c,void 0,o.value)];throw new Error("Unknown expr type")}}}}function ZN(t,e){return e-t}function m1(t,e){let n=[];return r(e),n.sort(ZN);function r(s){let i=t[s];if(i.length==1&&!i[0].term)return r(i[0].to);n.push(s);for(let o=0;o<i.length;o++){let{term:c,to:u}=i[o];!c&&n.indexOf(u)==-1&&r(u)}}}function uO(t){let e=Object.create(null);return n(m1(t,0));function n(r){let s=[];r.forEach(o=>{t[o].forEach(({term:c,to:u})=>{if(!c)return;let f;for(let p=0;p<s.length;p++)s[p][0]==c&&(f=s[p][1]);m1(t,u).forEach(p=>{f||s.push([c,f=[]]),f.indexOf(p)==-1&&f.push(p)})})});let i=e[r.join(",")]=new Oo(r.indexOf(t.length-1)>-1);for(let o=0;o<s.length;o++){let c=s[o][1].sort(ZN);i.next.push({type:s[o][0],next:e[c.join(",")]||n(c)})}return i}}function fO(t,e){for(let n=0,r=[t];n<r.length;n++){let s=r[n],i=!s.validEnd,o=[];for(let c=0;c<s.next.length;c++){let{type:u,next:f}=s.next[c];o.push(u.name),i&&!(u.isText||u.hasRequiredAttrs())&&(i=!1),r.indexOf(f)==-1&&r.push(f)}i&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function QN(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function YN(t,e){let n=Object.create(null);for(let r in t){let s=e&&e[r];if(s===void 0){let i=t[r];if(i.hasDefault)s=i.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=s}return n}function XN(t,e,n,r){for(let s in e)if(!(s in t))throw new RangeError(`Unsupported attribute ${s} for ${n} of type ${s}`);for(let s in t){let i=t[s];i.validate&&i.validate(e[s])}}function ej(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new pO(t,r,e[r]);return n}let g1=class tj{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=ej(e,r.attrs),this.defaultAttrs=QN(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Oo.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:YN(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Kr(this,this.computeAttrs(e),ae.from(n),mt.setFrom(r))}createChecked(e=null,n,r){return n=ae.from(n),this.checkContent(n),new Kr(this,this.computeAttrs(e),n,mt.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=ae.from(n),n.size){let o=this.contentMatch.fillBefore(n);if(!o)return null;n=o.append(n)}let s=this.contentMatch.matchFragment(n),i=s&&s.fillBefore(ae.empty,!0);return i?new Kr(this,e,n.append(i),mt.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){XN(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:mt.none:e}static compile(e,n){let r=Object.create(null);e.forEach((i,o)=>r[i]=new tj(i,n,o));let s=n.spec.topNode||"doc";if(!r[s])throw new RangeError("Schema is missing its top node type ('"+s+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let i in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function hO(t,e,n){let r=n.split("|");return s=>{let i=s===null?"null":typeof s;if(r.indexOf(i)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${i}`)}}class pO{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?hO(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class Jf{constructor(e,n,r,s){this.name=e,this.rank=n,this.schema=r,this.spec=s,this.attrs=ej(e,s.attrs),this.excluded=null;let i=QN(this.attrs);this.instance=i?new mt(this,i):null}create(e=null){return!e&&this.instance?this.instance:new mt(this,YN(this.attrs,e))}static compile(e,n){let r=Object.create(null),s=0;return e.forEach((i,o)=>r[i]=new Jf(i,s++,n,o)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){XN(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class nj{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let s in e)n[s]=e[s];n.nodes=vn.from(e.nodes),n.marks=vn.from(e.marks||{}),this.nodes=g1.compile(this.spec.nodes,this),this.marks=Jf.compile(this.spec.marks,this);let r=Object.create(null);for(let s in this.nodes){if(s in this.marks)throw new RangeError(s+" can not be both a node and a mark");let i=this.nodes[s],o=i.spec.content||"",c=i.spec.marks;if(i.contentMatch=r[o]||(r[o]=Oo.parse(o,this.nodes)),i.inlineContent=i.contentMatch.inlineContent,i.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!i.isInline||!i.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=i}i.markSet=c=="_"?null:c?x1(this,c.split(" ")):c==""||!i.inlineContent?[]:null}for(let s in this.marks){let i=this.marks[s],o=i.spec.excludes;i.excluded=o==null?[i]:o==""?[]:x1(this,o.split(" "))}this.nodeFromJSON=s=>Kr.fromJSON(this,s),this.markFromJSON=s=>mt.fromJSON(this,s),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,s){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof g1){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,s)}text(e,n){let r=this.nodes.text;return new Xu(r,r.defaultAttrs,e,mt.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function x1(t,e){let n=[];for(let r=0;r<e.length;r++){let s=e[r],i=t.marks[s],o=i;if(i)n.push(i);else for(let c in t.marks){let u=t.marks[c];(s=="_"||u.spec.group&&u.spec.group.split(" ").indexOf(s)>-1)&&n.push(o=u)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function mO(t){return t.tag!=null}function gO(t){return t.style!=null}class Di{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(s=>{if(mO(s))this.tags.push(s);else if(gO(s)){let i=/[^=]*/.exec(s.style)[0];r.indexOf(i)<0&&r.push(i),this.styles.push(s)}}),this.normalizeLists=!this.tags.some(s=>{if(!/^(ul|ol)\b/.test(s.tag)||!s.node)return!1;let i=e.nodes[s.node];return i.contentMatch.matchType(i)})}parse(e,n={}){let r=new v1(this,n,!1);return r.addAll(e,mt.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new v1(this,n,!0);return r.addAll(e,mt.none,n.from,n.to),we.maxOpen(r.finish())}matchTag(e,n,r){for(let s=r?this.tags.indexOf(r)+1:0;s<this.tags.length;s++){let i=this.tags[s];if(vO(e,i.tag)&&(i.namespace===void 0||e.namespaceURI==i.namespace)&&(!i.context||n.matchesContext(i.context))){if(i.getAttrs){let o=i.getAttrs(e);if(o===!1)continue;i.attrs=o||void 0}return i}}}matchStyle(e,n,r,s){for(let i=s?this.styles.indexOf(s)+1:0;i<this.styles.length;i++){let o=this.styles[i],c=o.style;if(!(c.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||c.length>e.length&&(c.charCodeAt(e.length)!=61||c.slice(e.length+1)!=n))){if(o.getAttrs){let u=o.getAttrs(n);if(u===!1)continue;o.attrs=u||void 0}return o}}}static schemaRules(e){let n=[];function r(s){let i=s.priority==null?50:s.priority,o=0;for(;o<n.length;o++){let c=n[o];if((c.priority==null?50:c.priority)<i)break}n.splice(o,0,s)}for(let s in e.marks){let i=e.marks[s].spec.parseDOM;i&&i.forEach(o=>{r(o=b1(o)),o.mark||o.ignore||o.clearMark||(o.mark=s)})}for(let s in e.nodes){let i=e.nodes[s].spec.parseDOM;i&&i.forEach(o=>{r(o=b1(o)),o.node||o.ignore||o.mark||(o.node=s)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Di(e,Di.schemaRules(e)))}}const rj={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},xO={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},sj={ol:!0,ul:!0},yc=1,pg=2,nc=4;function y1(t,e,n){return e!=null?(e?yc:0)|(e==="full"?pg:0):t&&t.whitespace=="pre"?yc|pg:n&~nc}class Xd{constructor(e,n,r,s,i,o){this.type=e,this.attrs=n,this.marks=r,this.solid=s,this.options=o,this.content=[],this.activeMarks=mt.none,this.match=i||(o&nc?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(ae.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,s;return(s=r.findWrapping(e.type))?(this.match=r,s):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&yc)){let r=this.content[this.content.length-1],s;if(r&&r.isText&&(s=/[ \t\r\n\u000c]+$/.exec(r.text))){let i=r;r.text.length==s[0].length?this.content.pop():this.content[this.content.length-1]=i.withText(i.text.slice(0,i.text.length-s[0].length))}}let n=ae.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(ae.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!rj.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class v1{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let s=n.topNode,i,o=y1(null,n.preserveWhitespace,0)|(r?nc:0);s?i=new Xd(s.type,s.attrs,mt.none,!0,n.topMatch||s.type.contentMatch,o):r?i=new Xd(null,null,mt.none,!0,null,o):i=new Xd(e.schema.topNodeType,null,mt.none,!0,null,o),this.nodes=[i],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,s=this.top,i=s.options&pg?"full":this.localPreserveWS||(s.options&yc)>0,{schema:o}=this.parser;if(i==="full"||s.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(i)if(i==="full")r=r.replace(/\r\n?/g,`
`);else if(o.linebreakReplacement&&/[\r\n]/.test(r)&&this.top.findWrapping(o.linebreakReplacement.create())){let c=r.split(/\r?\n|\r/);for(let u=0;u<c.length;u++)u&&this.insertNode(o.linebreakReplacement.create(),n,!0),c[u]&&this.insertNode(o.text(c[u]),n,!/\S/.test(c[u]));r=""}else r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let c=s.content[s.content.length-1],u=e.previousSibling;(!c||u&&u.nodeName=="BR"||c.isText&&/[ \t\r\n\u000c]$/.test(c.text))&&(r=r.slice(1))}r&&this.insertNode(o.text(r),n,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let s=this.localPreserveWS,i=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let o=e.nodeName.toLowerCase(),c;sj.hasOwnProperty(o)&&this.parser.normalizeLists&&yO(e);let u=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(c=this.parser.matchTag(e,this,r));e:if(u?u.ignore:xO.hasOwnProperty(o))this.findInside(e),this.ignoreFallback(e,n);else if(!u||u.skip||u.closeParent){u&&u.closeParent?this.open=Math.max(0,this.open-1):u&&u.skip.nodeType&&(e=u.skip);let f,p=this.needsBlock;if(rj.hasOwnProperty(o))i.content.length&&i.content[0].isInline&&this.open&&(this.open--,i=this.top),f=!0,i.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let m=u&&u.skip?n:this.readStyles(e,n);m&&this.addAll(e,m),f&&this.sync(i),this.needsBlock=p}else{let f=this.readStyles(e,n);f&&this.addElementByRule(e,u,f,u.consuming===!1?c:void 0)}this.localPreserveWS=s}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let s=0;s<this.parser.matchedStyles.length;s++){let i=this.parser.matchedStyles[s],o=r.getPropertyValue(i);if(o)for(let c=void 0;;){let u=this.parser.matchStyle(i,o,this,c);if(!u)break;if(u.ignore)return null;if(u.clearMark?n=n.filter(f=>!u.clearMark(f)):n=n.concat(this.parser.schema.marks[u.mark].create(u.attrs)),u.consuming===!1)c=u;else break}}return n}addElementByRule(e,n,r,s){let i,o;if(n.node)if(o=this.parser.schema.nodes[n.node],o.isLeaf)this.insertNode(o.create(n.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let u=this.enter(o,n.attrs||null,r,n.preserveWhitespace);u&&(i=!0,r=u)}else{let u=this.parser.schema.marks[n.mark];r=r.concat(u.create(n.attrs))}let c=this.top;if(o&&o.isLeaf)this.findInside(e);else if(s)this.addElement(e,r,s);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(u=>this.insertNode(u,r,!1));else{let u=e;typeof n.contentElement=="string"?u=e.querySelector(n.contentElement):typeof n.contentElement=="function"?u=n.contentElement(e):n.contentElement&&(u=n.contentElement),this.findAround(e,u,!0),this.addAll(u,r),this.findAround(e,u,!1)}i&&this.sync(c)&&this.open--}addAll(e,n,r,s){let i=r||0;for(let o=r?e.childNodes[r]:e.firstChild,c=s==null?null:e.childNodes[s];o!=c;o=o.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(o,n);this.findAtPoint(e,i)}findPlace(e,n,r){let s,i;for(let o=this.open,c=0;o>=0;o--){let u=this.nodes[o],f=u.findWrapping(e);if(f&&(!s||s.length>f.length+c)&&(s=f,i=u,!f.length))break;if(u.solid){if(r)break;c+=2}}if(!s)return null;this.sync(i);for(let o=0;o<s.length;o++)n=this.enterInner(s[o],null,n,!1);return n}insertNode(e,n,r){if(e.isInline&&this.needsBlock&&!this.top.type){let i=this.textblockFromContext();i&&(n=this.enterInner(i,null,n))}let s=this.findPlace(e,n,r);if(s){this.closeExtra();let i=this.top;i.match&&(i.match=i.match.matchType(e.type));let o=mt.none;for(let c of s.concat(e.marks))(i.type?i.type.allowsMarkType(c.type):w1(c.type,e.type))&&(o=c.addToSet(o));return i.content.push(e.mark(o)),!0}return!1}enter(e,n,r,s){let i=this.findPlace(e.create(n),r,!1);return i&&(i=this.enterInner(e,n,r,!0,s)),i}enterInner(e,n,r,s=!1,i){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let c=y1(e,i,o.options);o.options&nc&&o.content.length==0&&(c|=nc);let u=mt.none;return r=r.filter(f=>(o.type?o.type.allowsMarkType(f.type):w1(f.type,e))?(u=f.addToSet(u),!1):!0),this.nodes.push(new Xd(e,n,u,s,null,c)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=yc)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let s=r.length-1;s>=0;s--)e+=r[s].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let s=0;s<this.find.length;s++)this.find[s].pos==null&&e.nodeType==1&&e.contains(this.find[s].node)&&n.compareDocumentPosition(this.find[s].node)&(r?2:4)&&(this.find[s].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,s=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),i=-(r?r.depth+1:0)+(s?0:1),o=(c,u)=>{for(;c>=0;c--){let f=n[c];if(f==""){if(c==n.length-1||c==0)continue;for(;u>=i;u--)if(o(c-1,u))return!0;return!1}else{let p=u>0||u==0&&s?this.nodes[u].type:r&&u>=i?r.node(u-i).type:null;if(!p||p.name!=f&&!p.isInGroup(f))return!1;u--}}return!0};return o(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function yO(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&sj.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function vO(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function b1(t){let e={};for(let n in t)e[n]=t[n];return e}function w1(t,e){let n=e.schema.nodes;for(let r in n){let s=n[r];if(!s.allowsMarkType(t))continue;let i=[],o=c=>{i.push(c);for(let u=0;u<c.edgeCount;u++){let{type:f,next:p}=c.edge(u);if(f==e||i.indexOf(p)<0&&o(p))return!0}};if(o(s.contentMatch))return!0}}class Fo{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=dm(n).createDocumentFragment());let s=r,i=[];return e.forEach(o=>{if(i.length||o.marks.length){let c=0,u=0;for(;c<i.length&&u<o.marks.length;){let f=o.marks[u];if(!this.marks[f.type.name]){u++;continue}if(!f.eq(i[c][0])||f.type.spec.spanning===!1)break;c++,u++}for(;c<i.length;)s=i.pop()[1];for(;u<o.marks.length;){let f=o.marks[u++],p=this.serializeMark(f,o.isInline,n);p&&(i.push([f,s]),s.appendChild(p.dom),s=p.contentDOM||p.dom)}}s.appendChild(this.serializeNodeInner(o,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:s}=Nu(dm(n),this.nodes[e.type.name](e),null,e.attrs);if(s){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,s)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let s=e.marks.length-1;s>=0;s--){let i=this.serializeMark(e.marks[s],e.isInline,n);i&&((i.contentDOM||i.dom).appendChild(r),r=i.dom)}return r}serializeMark(e,n,r={}){let s=this.marks[e.type.name];return s&&Nu(dm(r),s(e,n),null,e.attrs)}static renderSpec(e,n,r=null,s){return Nu(e,n,r,s)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Fo(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=k1(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return k1(e.marks)}}function k1(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function dm(t){return t.document||window.document}const N1=new WeakMap;function bO(t){let e=N1.get(t);return e===void 0&&N1.set(t,e=wO(t)),e}function wO(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let s=0;s<r.length;s++)n(r[s]);else for(let s in r)n(r[s])}return n(t),e}function Nu(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let s=e[0],i;if(typeof s!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(i=bO(r))&&i.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=s.indexOf(" ");o>0&&(n=s.slice(0,o),s=s.slice(o+1));let c,u=n?t.createElementNS(n,s):t.createElement(s),f=e[1],p=1;if(f&&typeof f=="object"&&f.nodeType==null&&!Array.isArray(f)){p=2;for(let m in f)if(f[m]!=null){let x=m.indexOf(" ");x>0?u.setAttributeNS(m.slice(0,x),m.slice(x+1),f[m]):m=="style"&&u.style?u.style.cssText=f[m]:u.setAttribute(m,f[m])}}for(let m=p;m<e.length;m++){let x=e[m];if(x===0){if(m<e.length-1||m>p)throw new RangeError("Content hole must be the only child of its parent node");return{dom:u,contentDOM:u}}else{let{dom:y,contentDOM:v}=Nu(t,x,n,r);if(u.appendChild(y),v){if(c)throw new RangeError("Multiple content holes");c=v}}}return{dom:u,contentDOM:c}}const ij=65535,oj=Math.pow(2,16);function kO(t,e){return t+e*oj}function j1(t){return t&ij}function NO(t){return(t-(t&ij))/oj}const aj=1,lj=2,ju=4,cj=8;class mg{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&cj)>0}get deletedBefore(){return(this.delInfo&(aj|ju))>0}get deletedAfter(){return(this.delInfo&(lj|ju))>0}get deletedAcross(){return(this.delInfo&ju)>0}}class hr{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&hr.empty)return hr.empty}recover(e){let n=0,r=j1(e);if(!this.inverted)for(let s=0;s<r;s++)n+=this.ranges[s*3+2]-this.ranges[s*3+1];return this.ranges[r*3]+n+NO(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let s=0,i=this.inverted?2:1,o=this.inverted?1:2;for(let c=0;c<this.ranges.length;c+=3){let u=this.ranges[c]-(this.inverted?s:0);if(u>e)break;let f=this.ranges[c+i],p=this.ranges[c+o],m=u+f;if(e<=m){let x=f?e==u?-1:e==m?1:n:n,y=u+s+(x<0?0:p);if(r)return y;let v=e==(n<0?u:m)?null:kO(c/3,e-u),k=e==u?lj:e==m?aj:ju;return(n<0?e!=u:e!=m)&&(k|=cj),new mg(y,k,v)}s+=p-f}return r?e+s:new mg(e+s,0,null)}touches(e,n){let r=0,s=j1(n),i=this.inverted?2:1,o=this.inverted?1:2;for(let c=0;c<this.ranges.length;c+=3){let u=this.ranges[c]-(this.inverted?r:0);if(u>e)break;let f=this.ranges[c+i],p=u+f;if(e<=p&&c==s*3)return!0;r+=this.ranges[c+o]-f}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let s=0,i=0;s<this.ranges.length;s+=3){let o=this.ranges[s],c=o-(this.inverted?i:0),u=o+(this.inverted?0:i),f=this.ranges[s+n],p=this.ranges[s+r];e(c,c+f,u,u+p),i+=p-f}}invert(){return new hr(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?hr.empty:new hr(e<0?[0,-e,0]:[0,0,e])}}hr.empty=new hr([]);class vc{constructor(e,n,r=0,s=e?e.length:0){this.mirror=n,this.from=r,this.to=s,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new vc(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let s=e.getMirror(n);this.appendMap(e._maps[n],s!=null&&s<n?r+s:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let s=e.getMirror(n);this.appendMap(e._maps[n].invert(),s!=null&&s>n?r-s-1:void 0)}}invert(){let e=new vc;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let s=0;for(let i=this.from;i<this.to;i++){let o=this._maps[i],c=o.mapResult(e,n);if(c.recover!=null){let u=this.getMirror(i);if(u!=null&&u>i&&u<this.to){i=u,e=this._maps[u].recover(c.recover);continue}}s|=c.delInfo,e=c.pos}return r?e:new mg(e,s,null)}}const um=Object.create(null);class Ln{getMap(){return hr.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=um[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in um)throw new RangeError("Duplicate use of step JSON ID "+e);return um[e]=n,n.prototype.jsonID=e,n}}class Qt{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new Qt(e,null)}static fail(e){return new Qt(null,e)}static fromReplace(e,n,r,s){try{return Qt.ok(e.replace(n,r,s))}catch(i){if(i instanceof Zu)return Qt.fail(i.message);throw i}}}function M0(t,e,n){let r=[];for(let s=0;s<t.childCount;s++){let i=t.child(s);i.content.size&&(i=i.copy(M0(i.content,e,i))),i.isInline&&(i=e(i,n,s)),r.push(i)}return ae.fromArray(r)}class Oi extends Ln{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),s=r.node(r.sharedDepth(this.to)),i=new we(M0(n.content,(o,c)=>!o.isAtom||!c.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),s),n.openStart,n.openEnd);return Qt.fromReplace(e,this.from,this.to,i)}invert(){return new qr(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Oi(n.pos,r.pos,this.mark)}merge(e){return e instanceof Oi&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Oi(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Oi(n.from,n.to,e.markFromJSON(n.mark))}}Ln.jsonID("addMark",Oi);class qr extends Ln{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new we(M0(n.content,s=>s.mark(this.mark.removeFromSet(s.marks)),e),n.openStart,n.openEnd);return Qt.fromReplace(e,this.from,this.to,r)}invert(){return new Oi(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new qr(n.pos,r.pos,this.mark)}merge(e){return e instanceof qr&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new qr(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new qr(n.from,n.to,e.markFromJSON(n.mark))}}Ln.jsonID("removeMark",qr);class _i extends Ln{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Qt.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return Qt.fromReplace(e,this.pos,this.pos+1,new we(ae.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let s=0;s<n.marks.length;s++)if(!n.marks[s].isInSet(r))return new _i(this.pos,n.marks[s]);return new _i(this.pos,this.mark)}}return new _o(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new _i(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new _i(n.pos,e.markFromJSON(n.mark))}}Ln.jsonID("addNodeMark",_i);class _o extends Ln{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Qt.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return Qt.fromReplace(e,this.pos,this.pos+1,new we(ae.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new _i(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new _o(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new _o(n.pos,e.markFromJSON(n.mark))}}Ln.jsonID("removeNodeMark",_o);class fn extends Ln{constructor(e,n,r,s=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=s}apply(e){return this.structure&&gg(e,this.from,this.to)?Qt.fail("Structure replace would overwrite content"):Qt.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new hr([this.from,this.to-this.from,this.slice.size])}invert(e){return new fn(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new fn(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof fn)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?we.empty:new we(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new fn(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?we.empty:new we(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new fn(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new fn(n.from,n.to,we.fromJSON(e,n.slice),!!n.structure)}}Ln.jsonID("replace",fn);class mn extends Ln{constructor(e,n,r,s,i,o,c=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=s,this.slice=i,this.insert=o,this.structure=c}apply(e){if(this.structure&&(gg(e,this.from,this.gapFrom)||gg(e,this.gapTo,this.to)))return Qt.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return Qt.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?Qt.fromReplace(e,this.from,this.to,r):Qt.fail("Content does not fit in gap")}getMap(){return new hr([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new mn(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),s=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),i=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||s<n.pos||i>r.pos?null:new mn(n.pos,r.pos,s,i,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new mn(n.from,n.to,n.gapFrom,n.gapTo,we.fromJSON(e,n.slice),n.insert,!!n.structure)}}Ln.jsonID("replaceAround",mn);function gg(t,e,n){let r=t.resolve(e),s=n-e,i=r.depth;for(;s>0&&i>0&&r.indexAfter(i)==r.node(i).childCount;)i--,s--;if(s>0){let o=r.node(i).maybeChild(r.indexAfter(i));for(;s>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,s--}}return!1}function jO(t,e,n,r){let s=[],i=[],o,c;t.doc.nodesBetween(e,n,(u,f,p)=>{if(!u.isInline)return;let m=u.marks;if(!r.isInSet(m)&&p.type.allowsMarkType(r.type)){let x=Math.max(f,e),y=Math.min(f+u.nodeSize,n),v=r.addToSet(m);for(let k=0;k<m.length;k++)m[k].isInSet(v)||(o&&o.to==x&&o.mark.eq(m[k])?o.to=y:s.push(o=new qr(x,y,m[k])));c&&c.to==x?c.to=y:i.push(c=new Oi(x,y,r))}}),s.forEach(u=>t.step(u)),i.forEach(u=>t.step(u))}function SO(t,e,n,r){let s=[],i=0;t.doc.nodesBetween(e,n,(o,c)=>{if(!o.isInline)return;i++;let u=null;if(r instanceof Jf){let f=o.marks,p;for(;p=r.isInSet(f);)(u||(u=[])).push(p),f=p.removeFromSet(f)}else r?r.isInSet(o.marks)&&(u=[r]):u=o.marks;if(u&&u.length){let f=Math.min(c+o.nodeSize,n);for(let p=0;p<u.length;p++){let m=u[p],x;for(let y=0;y<s.length;y++){let v=s[y];v.step==i-1&&m.eq(s[y].style)&&(x=v)}x?(x.to=f,x.step=i):s.push({style:m,from:Math.max(c,e),to:f,step:i})}}}),s.forEach(o=>t.step(new qr(o.from,o.to,o.style)))}function R0(t,e,n,r=n.contentMatch,s=!0){let i=t.doc.nodeAt(e),o=[],c=e+1;for(let u=0;u<i.childCount;u++){let f=i.child(u),p=c+f.nodeSize,m=r.matchType(f.type);if(!m)o.push(new fn(c,p,we.empty));else{r=m;for(let x=0;x<f.marks.length;x++)n.allowsMarkType(f.marks[x].type)||t.step(new qr(c,p,f.marks[x]));if(s&&f.isText&&n.whitespace!="pre"){let x,y=/\r?\n|\r/g,v;for(;x=y.exec(f.text);)v||(v=new we(ae.from(n.schema.text(" ",n.allowedMarks(f.marks))),0,0)),o.push(new fn(c+x.index,c+x.index+x[0].length,v))}}c=p}if(!r.validEnd){let u=r.fillBefore(ae.empty,!0);t.replace(c,c,new we(u,0,0))}for(let u=o.length-1;u>=0;u--)t.step(o[u])}function CO(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function qa(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth,s=0,i=0;;--r){let o=t.$from.node(r),c=t.$from.index(r)+s,u=t.$to.indexAfter(r)-i;if(r<t.depth&&o.canReplace(c,u,n))return r;if(r==0||o.type.spec.isolating||!CO(o,c,u))break;c&&(s=1),u<o.childCount&&(i=1)}return null}function EO(t,e,n){let{$from:r,$to:s,depth:i}=e,o=r.before(i+1),c=s.after(i+1),u=o,f=c,p=ae.empty,m=0;for(let v=i,k=!1;v>n;v--)k||r.index(v)>0?(k=!0,p=ae.from(r.node(v).copy(p)),m++):u--;let x=ae.empty,y=0;for(let v=i,k=!1;v>n;v--)k||s.after(v+1)<s.end(v)?(k=!0,x=ae.from(s.node(v).copy(x)),y++):f++;t.step(new mn(u,f,o,c,new we(p.append(x),m,y),p.size-m,!0))}function O0(t,e,n=null,r=t){let s=TO(t,e),i=s&&AO(r,e);return i?s.map(S1).concat({type:e,attrs:n}).concat(i.map(S1)):null}function S1(t){return{type:t,attrs:null}}function TO(t,e){let{parent:n,startIndex:r,endIndex:s}=t,i=n.contentMatchAt(r).findWrapping(e);if(!i)return null;let o=i.length?i[0]:e;return n.canReplaceWith(r,s,o)?i:null}function AO(t,e){let{parent:n,startIndex:r,endIndex:s}=t,i=n.child(r),o=e.contentMatch.findWrapping(i.type);if(!o)return null;let u=(o.length?o[o.length-1]:e).contentMatch;for(let f=r;u&&f<s;f++)u=u.matchType(n.child(f).type);return!u||!u.validEnd?null:o}function MO(t,e,n){let r=ae.empty;for(let o=n.length-1;o>=0;o--){if(r.size){let c=n[o].type.contentMatch.matchFragment(r);if(!c||!c.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=ae.from(n[o].type.create(n[o].attrs,r))}let s=e.start,i=e.end;t.step(new mn(s,i,s,i,new we(r,0,0),n.length,!0))}function RO(t,e,n,r,s){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let i=t.steps.length;t.doc.nodesBetween(e,n,(o,c)=>{let u=typeof s=="function"?s(o):s;if(o.isTextblock&&!o.hasMarkup(r,u)&&OO(t.doc,t.mapping.slice(i).map(c),r)){let f=null;if(r.schema.linebreakReplacement){let y=r.whitespace=="pre",v=!!r.contentMatch.matchType(r.schema.linebreakReplacement);y&&!v?f=!1:!y&&v&&(f=!0)}f===!1&&uj(t,o,c,i),R0(t,t.mapping.slice(i).map(c,1),r,void 0,f===null);let p=t.mapping.slice(i),m=p.map(c,1),x=p.map(c+o.nodeSize,1);return t.step(new mn(m,x,m+1,x-1,new we(ae.from(r.create(u,null,o.marks)),0,0),1,!0)),f===!0&&dj(t,o,c,i),!1}})}function dj(t,e,n,r){e.forEach((s,i)=>{if(s.isText){let o,c=/\r?\n|\r/g;for(;o=c.exec(s.text);){let u=t.mapping.slice(r).map(n+1+i+o.index);t.replaceWith(u,u+1,e.type.schema.linebreakReplacement.create())}}})}function uj(t,e,n,r){e.forEach((s,i)=>{if(s.type==s.type.schema.linebreakReplacement){let o=t.mapping.slice(r).map(n+1+i);t.replaceWith(o,o+1,e.type.schema.text(`
`))}})}function OO(t,e,n){let r=t.resolve(e),s=r.index();return r.parent.canReplaceWith(s,s+1,n)}function _O(t,e,n,r,s){let i=t.doc.nodeAt(e);if(!i)throw new RangeError("No node at given position");n||(n=i.type);let o=n.create(r,null,s||i.marks);if(i.isLeaf)return t.replaceWith(e,e+i.nodeSize,o);if(!n.validContent(i.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new mn(e,e+i.nodeSize,e+1,e+i.nodeSize-1,new we(ae.from(o),0,0),1,!0))}function Us(t,e,n=1,r){let s=t.resolve(e),i=s.depth-n,o=r&&r[r.length-1]||s.parent;if(i<0||s.parent.type.spec.isolating||!s.parent.canReplace(s.index(),s.parent.childCount)||!o.type.validContent(s.parent.content.cutByIndex(s.index(),s.parent.childCount)))return!1;for(let f=s.depth-1,p=n-2;f>i;f--,p--){let m=s.node(f),x=s.index(f);if(m.type.spec.isolating)return!1;let y=m.content.cutByIndex(x,m.childCount),v=r&&r[p+1];v&&(y=y.replaceChild(0,v.type.create(v.attrs)));let k=r&&r[p]||m;if(!m.canReplace(x+1,m.childCount)||!k.type.validContent(y))return!1}let c=s.indexAfter(i),u=r&&r[0];return s.node(i).canReplaceWith(c,c,u?u.type:s.node(i+1).type)}function PO(t,e,n=1,r){let s=t.doc.resolve(e),i=ae.empty,o=ae.empty;for(let c=s.depth,u=s.depth-n,f=n-1;c>u;c--,f--){i=ae.from(s.node(c).copy(i));let p=r&&r[f];o=ae.from(p?p.type.create(p.attrs,o):s.node(c).copy(o))}t.step(new fn(e,e,new we(i.append(o),n,n),!0))}function qi(t,e){let n=t.resolve(e),r=n.index();return fj(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function IO(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let s=0;s<e.childCount;s++){let i=e.child(s),o=i.type==r?t.type.schema.nodes.text:i.type;if(n=n.matchType(o),!n||!t.type.allowsMarks(i.marks))return!1}return n.validEnd}function fj(t,e){return!!(t&&e&&!t.isLeaf&&IO(t,e))}function Zf(t,e,n=-1){let r=t.resolve(e);for(let s=r.depth;;s--){let i,o,c=r.index(s);if(s==r.depth?(i=r.nodeBefore,o=r.nodeAfter):n>0?(i=r.node(s+1),c++,o=r.node(s).maybeChild(c)):(i=r.node(s).maybeChild(c-1),o=r.node(s+1)),i&&!i.isTextblock&&fj(i,o)&&r.node(s).canReplace(c,c+1))return e;if(s==0)break;e=n<0?r.before(s):r.after(s)}}function DO(t,e,n){let r=null,{linebreakReplacement:s}=t.doc.type.schema,i=t.doc.resolve(e-n),o=i.node().type;if(s&&o.inlineContent){let p=o.whitespace=="pre",m=!!o.contentMatch.matchType(s);p&&!m?r=!1:!p&&m&&(r=!0)}let c=t.steps.length;if(r===!1){let p=t.doc.resolve(e+n);uj(t,p.node(),p.before(),c)}o.inlineContent&&R0(t,e+n-1,o,i.node().contentMatchAt(i.index()),r==null);let u=t.mapping.slice(c),f=u.map(e-n);if(t.step(new fn(f,u.map(e+n,-1),we.empty,!0)),r===!0){let p=t.doc.resolve(f);dj(t,p.node(),p.before(),t.steps.length)}return t}function LO(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let s=r.depth-1;s>=0;s--){let i=r.index(s);if(r.node(s).canReplaceWith(i,i,n))return r.before(s+1);if(i>0)return null}if(r.parentOffset==r.parent.content.size)for(let s=r.depth-1;s>=0;s--){let i=r.indexAfter(s);if(r.node(s).canReplaceWith(i,i,n))return r.after(s+1);if(i<r.node(s).childCount)return null}return null}function hj(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let s=n.content;for(let i=0;i<n.openStart;i++)s=s.firstChild.content;for(let i=1;i<=(n.openStart==0&&n.size?2:1);i++)for(let o=r.depth;o>=0;o--){let c=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,u=r.index(o)+(c>0?1:0),f=r.node(o),p=!1;if(i==1)p=f.canReplace(u,u,s);else{let m=f.contentMatchAt(u).findWrapping(s.firstChild.type);p=m&&f.canReplaceWith(u,u,m[0])}if(p)return c==0?r.pos:c<0?r.before(o+1):r.after(o+1)}return null}function Qf(t,e,n=e,r=we.empty){if(e==n&&!r.size)return null;let s=t.resolve(e),i=t.resolve(n);return pj(s,i,r)?new fn(e,n,r):new zO(s,i,r).fit()}function pj(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class zO{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=ae.empty;for(let s=0;s<=e.depth;s++){let i=e.node(s);this.frontier.push({type:i.type,match:i.contentMatchAt(e.indexAfter(s))})}for(let s=e.depth;s>0;s--)this.placed=ae.from(e.node(s).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let f=this.findFittable();f?this.placeNodes(f):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,s=this.close(e<0?this.$to:r.doc.resolve(e));if(!s)return null;let i=this.placed,o=r.depth,c=s.depth;for(;o&&c&&i.childCount==1;)i=i.firstChild.content,o--,c--;let u=new we(i,o,c);return e>-1?new mn(r.pos,e,this.$to.pos,this.$to.end(),u,n):u.size||r.pos!=this.$to.pos?new fn(r.pos,s.pos,u):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,s=this.unplaced.openEnd;r<e;r++){let i=n.firstChild;if(n.childCount>1&&(s=0),i.type.spec.isolating&&s<=r){e=r;break}n=i.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let s,i=null;r?(i=fm(this.unplaced.content,r-1).firstChild,s=i.content):s=this.unplaced.content;let o=s.firstChild;for(let c=this.depth;c>=0;c--){let{type:u,match:f}=this.frontier[c],p,m=null;if(n==1&&(o?f.matchType(o.type)||(m=f.fillBefore(ae.from(o),!1)):i&&u.compatibleContent(i.type)))return{sliceDepth:r,frontierDepth:c,parent:i,inject:m};if(n==2&&o&&(p=f.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:c,parent:i,wrap:p};if(i&&f.matchType(i.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,s=fm(e,n);return!s.childCount||s.firstChild.isLeaf?!1:(this.unplaced=new we(e,n+1,Math.max(r,s.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,s=fm(e,n);if(s.childCount<=1&&n>0){let i=e.size-n<=n+s.size;this.unplaced=new we(Wl(e,n-1,1),n-1,i?n-1:r)}else this.unplaced=new we(Wl(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:s,wrap:i}){for(;this.depth>n;)this.closeFrontierNode();if(i)for(let k=0;k<i.length;k++)this.openFrontierNode(i[k]);let o=this.unplaced,c=r?r.content:o.content,u=o.openStart-e,f=0,p=[],{match:m,type:x}=this.frontier[n];if(s){for(let k=0;k<s.childCount;k++)p.push(s.child(k));m=m.matchFragment(s)}let y=c.size+e-(o.content.size-o.openEnd);for(;f<c.childCount;){let k=c.child(f),w=m.matchType(k.type);if(!w)break;f++,(f>1||u==0||k.content.size)&&(m=w,p.push(mj(k.mark(x.allowedMarks(k.marks)),f==1?u:0,f==c.childCount?y:-1)))}let v=f==c.childCount;v||(y=-1),this.placed=ql(this.placed,n,ae.from(p)),this.frontier[n].match=m,v&&y<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let k=0,w=c;k<y;k++){let j=w.lastChild;this.frontier.push({type:j.type,match:j.contentMatchAt(j.childCount)}),w=j.content}this.unplaced=v?e==0?we.empty:new we(Wl(o.content,e-1,1),e-1,y<0?o.openEnd:e-1):new we(Wl(o.content,e,f),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!hm(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,s=this.$to.after(r);for(;r>1&&s==this.$to.end(--r);)++s;return s}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:s}=this.frontier[n],i=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),o=hm(e,n,s,r,i);if(o){for(let c=n-1;c>=0;c--){let{match:u,type:f}=this.frontier[c],p=hm(e,c,f,u,!0);if(!p||p.childCount)continue e}return{depth:n,fit:o,move:i?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=ql(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let s=e.node(r),i=s.type.contentMatch.fillBefore(s.content,!0,e.index(r));this.openFrontierNode(s.type,s.attrs,i)}return e}openFrontierNode(e,n=null,r){let s=this.frontier[this.depth];s.match=s.match.matchType(e),this.placed=ql(this.placed,this.depth,ae.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(ae.empty,!0);n.childCount&&(this.placed=ql(this.placed,this.frontier.length,n))}}function Wl(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(Wl(t.firstChild.content,e-1,n)))}function ql(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(ql(t.lastChild.content,e-1,n)))}function fm(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function mj(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,mj(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(ae.empty,!0)))),t.copy(r)}function hm(t,e,n,r,s){let i=t.node(e),o=s?t.indexAfter(e):t.index(e);if(o==i.childCount&&!n.compatibleContent(i.type))return null;let c=r.fillBefore(i.content,!0,o);return c&&!BO(n,i.content,o)?c:null}function BO(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function FO(t){return t.spec.defining||t.spec.definingForContent}function $O(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let s=t.doc.resolve(e),i=t.doc.resolve(n);if(pj(s,i,r))return t.step(new fn(e,n,r));let o=xj(s,i);o[o.length-1]==0&&o.pop();let c=-(s.depth+1);o.unshift(c);for(let x=s.depth,y=s.pos-1;x>0;x--,y--){let v=s.node(x).type.spec;if(v.defining||v.definingAsContext||v.isolating)break;o.indexOf(x)>-1?c=x:s.before(x)==y&&o.splice(1,0,-x)}let u=o.indexOf(c),f=[],p=r.openStart;for(let x=r.content,y=0;;y++){let v=x.firstChild;if(f.push(v),y==r.openStart)break;x=v.content}for(let x=p-1;x>=0;x--){let y=f[x],v=FO(y.type);if(v&&!y.sameMarkup(s.node(Math.abs(c)-1)))p=x;else if(v||!y.type.isTextblock)break}for(let x=r.openStart;x>=0;x--){let y=(x+p+1)%(r.openStart+1),v=f[y];if(v)for(let k=0;k<o.length;k++){let w=o[(k+u)%o.length],j=!0;w<0&&(j=!1,w=-w);let C=s.node(w-1),T=s.index(w-1);if(C.canReplaceWith(T,T,v.type,v.marks))return t.replace(s.before(w),j?i.after(w):n,new we(gj(r.content,0,r.openStart,y),y,r.openEnd))}}let m=t.steps.length;for(let x=o.length-1;x>=0&&(t.replace(e,n,r),!(t.steps.length>m));x--){let y=o[x];y<0||(e=s.before(y),n=i.after(y))}}function gj(t,e,n,r,s){if(e<n){let i=t.firstChild;t=t.replaceChild(0,i.copy(gj(i.content,e+1,n,r,i)))}if(e>r){let i=s.contentMatchAt(0),o=i.fillBefore(t).append(t);t=o.append(i.matchFragment(o).fillBefore(ae.empty,!0))}return t}function VO(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let s=LO(t.doc,e,r.type);s!=null&&(e=n=s)}t.replaceRange(e,n,new we(ae.from(r),0,0))}function UO(t,e,n){let r=t.doc.resolve(e),s=t.doc.resolve(n),i=xj(r,s);for(let o=0;o<i.length;o++){let c=i[o],u=o==i.length-1;if(u&&c==0||r.node(c).type.contentMatch.validEnd)return t.delete(r.start(c),s.end(c));if(c>0&&(u||r.node(c-1).canReplace(r.index(c-1),s.indexAfter(c-1))))return t.delete(r.before(c),s.after(c))}for(let o=1;o<=r.depth&&o<=s.depth;o++)if(e-r.start(o)==r.depth-o&&n>r.end(o)&&s.end(o)-n!=s.depth-o&&r.start(o-1)==s.start(o-1)&&r.node(o-1).canReplace(r.index(o-1),s.index(o-1)))return t.delete(r.before(o),n);t.delete(e,n)}function xj(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let s=r;s>=0;s--){let i=t.start(s);if(i<t.pos-(t.depth-s)||e.end(s)>e.pos+(e.depth-s)||t.node(s).type.spec.isolating||e.node(s).type.spec.isolating)break;(i==e.start(s)||s==t.depth&&s==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&s&&e.start(s-1)==i-1)&&n.push(s)}return n}class Ea extends Ln{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return Qt.fail("No node at attribute step's position");let r=Object.create(null);for(let i in n.attrs)r[i]=n.attrs[i];r[this.attr]=this.value;let s=n.type.create(r,null,n.marks);return Qt.fromReplace(e,this.pos,this.pos+1,new we(ae.from(s),0,n.isLeaf?0:1))}getMap(){return hr.empty}invert(e){return new Ea(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Ea(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Ea(n.pos,n.attr,n.value)}}Ln.jsonID("attr",Ea);class bc extends Ln{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let s in e.attrs)n[s]=e.attrs[s];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return Qt.ok(r)}getMap(){return hr.empty}invert(e){return new bc(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new bc(n.attr,n.value)}}Ln.jsonID("docAttr",bc);let _a=class extends Error{};_a=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};_a.prototype=Object.create(Error.prototype);_a.prototype.constructor=_a;_a.prototype.name="TransformError";class _0{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new vc}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new _a(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}changedRange(){let e=1e9,n=-1e9;for(let r=0;r<this.mapping.maps.length;r++){let s=this.mapping.maps[r];r&&(e=s.map(e,1),n=s.map(n,-1)),s.forEach((i,o,c,u)=>{e=Math.min(e,c),n=Math.max(n,u)})}return e==1e9?null:{from:e,to:n}}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=we.empty){let s=Qf(this.doc,e,n,r);return s&&this.step(s),this}replaceWith(e,n,r){return this.replace(e,n,new we(ae.from(r),0,0))}delete(e,n){return this.replace(e,n,we.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return $O(this,e,n,r),this}replaceRangeWith(e,n,r){return VO(this,e,n,r),this}deleteRange(e,n){return UO(this,e,n),this}lift(e,n){return EO(this,e,n),this}join(e,n=1){return DO(this,e,n),this}wrap(e,n){return MO(this,e,n),this}setBlockType(e,n=e,r,s=null){return RO(this,e,n,r,s),this}setNodeMarkup(e,n,r=null,s){return _O(this,e,n,r,s),this}setNodeAttribute(e,n,r){return this.step(new Ea(e,n,r)),this}setDocAttribute(e,n){return this.step(new bc(e,n)),this}addNodeMark(e,n){return this.step(new _i(e,n)),this}removeNodeMark(e,n){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n instanceof mt)n.isInSet(r.marks)&&this.step(new _o(e,n));else{let s=r.marks,i,o=[];for(;i=n.isInSet(s);)o.push(new _o(e,i)),s=i.removeFromSet(s);for(let c=o.length-1;c>=0;c--)this.step(o[c])}return this}split(e,n=1,r){return PO(this,e,n,r),this}addMark(e,n,r){return jO(this,e,n,r),this}removeMark(e,n,r){return SO(this,e,n,r),this}clearIncompatible(e,n,r){return R0(this,e,n,r),this}}const pm=Object.create(null);class Ke{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new yj(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=we.empty){let r=n.content.lastChild,s=null;for(let c=0;c<n.openEnd;c++)s=r,r=r.lastChild;let i=e.steps.length,o=this.ranges;for(let c=0;c<o.length;c++){let{$from:u,$to:f}=o[c],p=e.mapping.slice(i);e.replaceRange(p.map(u.pos),p.map(f.pos),c?we.empty:n),c==0&&T1(e,i,(r?r.isInline:s&&s.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,s=this.ranges;for(let i=0;i<s.length;i++){let{$from:o,$to:c}=s[i],u=e.mapping.slice(r),f=u.map(o.pos),p=u.map(c.pos);i?e.deleteRange(f,p):(e.replaceRangeWith(f,p,n),T1(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let s=e.parent.inlineContent?new He(e):va(e.node(0),e.parent,e.pos,e.index(),n,r);if(s)return s;for(let i=e.depth-1;i>=0;i--){let o=n<0?va(e.node(0),e.node(i),e.before(i+1),e.index(i),n,r):va(e.node(0),e.node(i),e.after(i+1),e.index(i)+1,n,r);if(o)return o}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new gr(e.node(0))}static atStart(e){return va(e,e,0,0,1)||new gr(e)}static atEnd(e){return va(e,e,e.content.size,e.childCount,-1)||new gr(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=pm[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in pm)throw new RangeError("Duplicate use of selection JSON ID "+e);return pm[e]=n,n.prototype.jsonID=e,n}getBookmark(){return He.between(this.$anchor,this.$head).getBookmark()}}Ke.prototype.visible=!0;class yj{constructor(e,n){this.$from=e,this.$to=n}}let C1=!1;function E1(t){!C1&&!t.parent.inlineContent&&(C1=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class He extends Ke{constructor(e,n=e){E1(e),E1(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return Ke.near(r);let s=e.resolve(n.map(this.anchor));return new He(s.parent.inlineContent?s:r,r)}replace(e,n=we.empty){if(super.replace(e,n),n==we.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof He&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Yf(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new He(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let s=e.resolve(n);return new this(s,r==n?s:e.resolve(r))}static between(e,n,r){let s=e.pos-n.pos;if((!r||s)&&(r=s>=0?1:-1),!n.parent.inlineContent){let i=Ke.findFrom(n,r,!0)||Ke.findFrom(n,-r,!0);if(i)n=i.$head;else return Ke.near(n,r)}return e.parent.inlineContent||(s==0?e=n:(e=(Ke.findFrom(e,-r,!0)||Ke.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=s<0&&(e=n))),new He(e,n)}}Ke.jsonID("text",He);class Yf{constructor(e,n){this.anchor=e,this.head=n}map(e){return new Yf(e.map(this.anchor),e.map(this.head))}resolve(e){return He.between(e.resolve(this.anchor),e.resolve(this.head))}}class Be extends Ke{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:s}=n.mapResult(this.anchor),i=e.resolve(s);return r?Ke.near(i):new Be(i)}content(){return new we(ae.from(this.node),0,0)}eq(e){return e instanceof Be&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new P0(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Be(e.resolve(n.anchor))}static create(e,n){return new Be(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}Be.prototype.visible=!1;Ke.jsonID("node",Be);class P0{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new Yf(r,r):new P0(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&Be.isSelectable(r)?new Be(n):Ke.near(n)}}class gr extends Ke{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=we.empty){if(n==we.empty){e.delete(0,e.doc.content.size);let r=Ke.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new gr(e)}map(e){return new gr(e)}eq(e){return e instanceof gr}getBookmark(){return HO}}Ke.jsonID("all",gr);const HO={map(){return this},resolve(t){return new gr(t)}};function va(t,e,n,r,s,i=!1){if(e.inlineContent)return He.create(t,n);for(let o=r-(s>0?0:1);s>0?o<e.childCount:o>=0;o+=s){let c=e.child(o);if(c.isAtom){if(!i&&Be.isSelectable(c))return Be.create(t,n-(s<0?c.nodeSize:0))}else{let u=va(t,c,n+s,s<0?c.childCount:0,s,i);if(u)return u}n+=c.nodeSize*s}return null}function T1(t,e,n){let r=t.steps.length-1;if(r<e)return;let s=t.steps[r];if(!(s instanceof fn||s instanceof mn))return;let i=t.mapping.maps[r],o;i.forEach((c,u,f,p)=>{o==null&&(o=p)}),t.setSelection(Ke.near(t.doc.resolve(o),n))}const A1=1,eu=2,M1=4;class WO extends _0{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|A1)&~eu,this.storedMarks=null,this}get selectionSet(){return(this.updated&A1)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=eu,this}ensureMarks(e){return mt.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&eu)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~eu,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||mt.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let s=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(s.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),!e)return this.deleteRange(n,r);let i=this.storedMarks;if(!i){let o=this.doc.resolve(n);i=r==n?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,s.text(e,i)),!this.selection.empty&&this.selection.to==n+e.length&&this.setSelection(Ke.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=M1,this}get scrolledIntoView(){return(this.updated&M1)>0}}function R1(t,e){return!e||!t?t:t.bind(e)}class Kl{constructor(e,n,r){this.name=e,this.init=R1(n.init,r),this.apply=R1(n.apply,r)}}const qO=[new Kl("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new Kl("selection",{init(t,e){return t.selection||Ke.atStart(e.doc)},apply(t){return t.selection}}),new Kl("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new Kl("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class mm{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=qO.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Kl(r.key,r.spec.state,r))})}}class ka{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let s=this.config.plugins[r];if(s.spec.filterTransaction&&!s.spec.filterTransaction.call(s,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),s=null;for(;;){let i=!1;for(let o=0;o<this.config.plugins.length;o++){let c=this.config.plugins[o];if(c.spec.appendTransaction){let u=s?s[o].n:0,f=s?s[o].state:this,p=u<n.length&&c.spec.appendTransaction.call(c,u?n.slice(u):n,f,r);if(p&&r.filterTransaction(p,o)){if(p.setMeta("appendedTransaction",e),!s){s=[];for(let m=0;m<this.config.plugins.length;m++)s.push(m<o?{state:r,n:n.length}:{state:this,n:0})}n.push(p),r=r.applyInner(p),i=!0}s&&(s[o]={state:r,n:n.length})}}if(!i)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new ka(this.config),r=this.config.fields;for(let s=0;s<r.length;s++){let i=r[s];n[i.name]=i.apply(e,this[i.name],this,n)}return n}get tr(){return new WO(this)}static create(e){let n=new mm(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new ka(n);for(let s=0;s<n.fields.length;s++)r[n.fields[s].name]=n.fields[s].init(e,r);return r}reconfigure(e){let n=new mm(this.schema,e.plugins),r=n.fields,s=new ka(n);for(let i=0;i<r.length;i++){let o=r[i].name;s[o]=this.hasOwnProperty(o)?this[o]:r[i].init(e,s)}return s}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let s=e[r],i=s.spec.state;i&&i.toJSON&&(n[r]=i.toJSON.call(s,this[s.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let s=new mm(e.schema,e.plugins),i=new ka(s);return s.fields.forEach(o=>{if(o.name=="doc")i.doc=Kr.fromJSON(e.schema,n.doc);else if(o.name=="selection")i.selection=Ke.fromJSON(i.doc,n.selection);else if(o.name=="storedMarks")n.storedMarks&&(i.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let c in r){let u=r[c],f=u.spec.state;if(u.key==o.name&&f&&f.fromJSON&&Object.prototype.hasOwnProperty.call(n,c)){i[o.name]=f.fromJSON.call(u,e,n[c],i);return}}i[o.name]=o.init(e,i)}}),i}}function vj(t,e,n){for(let r in t){let s=t[r];s instanceof Function?s=s.bind(e):r=="handleDOMEvents"&&(s=vj(s,e,{})),n[r]=s}return n}class Et{constructor(e){this.spec=e,this.props={},e.props&&vj(e.props,this,this.props),this.key=e.key?e.key.key:bj("plugin")}getState(e){return e[this.key]}}const gm=Object.create(null);function bj(t){return t in gm?t+"$"+ ++gm[t]:(gm[t]=0,t+"$")}class Ft{constructor(e="key"){this.key=bj(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const I0=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function wj(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const kj=(t,e,n)=>{let r=wj(t,n);if(!r)return!1;let s=D0(r);if(!s){let o=r.blockRange(),c=o&&qa(o);return c==null?!1:(e&&e(t.tr.lift(o,c).scrollIntoView()),!0)}let i=s.nodeBefore;if(Rj(t,s,e,-1))return!0;if(r.parent.content.size==0&&(Pa(i,"end")||Be.isSelectable(i)))for(let o=r.depth;;o--){let c=Qf(t.doc,r.before(o),r.after(o),we.empty);if(c&&c.slice.size<c.to-c.from){if(e){let u=t.tr.step(c);u.setSelection(Pa(i,"end")?Ke.findFrom(u.doc.resolve(u.mapping.map(s.pos,-1)),-1):Be.create(u.doc,s.pos-i.nodeSize)),e(u.scrollIntoView())}return!0}if(o==1||r.node(o-1).childCount>1)break}return i.isAtom&&s.depth==r.depth-1?(e&&e(t.tr.delete(s.pos-i.nodeSize,s.pos).scrollIntoView()),!0):!1},KO=(t,e,n)=>{let r=wj(t,n);if(!r)return!1;let s=D0(r);return s?Nj(t,s,e):!1},GO=(t,e,n)=>{let r=Sj(t,n);if(!r)return!1;let s=L0(r);return s?Nj(t,s,e):!1};function Nj(t,e,n){let r=e.nodeBefore,s=r,i=e.pos-1;for(;!s.isTextblock;i--){if(s.type.spec.isolating)return!1;let p=s.lastChild;if(!p)return!1;s=p}let o=e.nodeAfter,c=o,u=e.pos+1;for(;!c.isTextblock;u++){if(c.type.spec.isolating)return!1;let p=c.firstChild;if(!p)return!1;c=p}let f=Qf(t.doc,i,u,we.empty);if(!f||f.from!=i||f instanceof fn&&f.slice.size>=u-i)return!1;if(n){let p=t.tr.step(f);p.setSelection(He.create(p.doc,i)),n(p.scrollIntoView())}return!0}function Pa(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const jj=(t,e,n)=>{let{$head:r,empty:s}=t.selection,i=r;if(!s)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;i=D0(r)}let o=i&&i.nodeBefore;return!o||!Be.isSelectable(o)?!1:(e&&e(t.tr.setSelection(Be.create(t.doc,i.pos-o.nodeSize)).scrollIntoView()),!0)};function D0(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function Sj(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const Cj=(t,e,n)=>{let r=Sj(t,n);if(!r)return!1;let s=L0(r);if(!s)return!1;let i=s.nodeAfter;if(Rj(t,s,e,1))return!0;if(r.parent.content.size==0&&(Pa(i,"start")||Be.isSelectable(i))){let o=Qf(t.doc,r.before(),r.after(),we.empty);if(o&&o.slice.size<o.to-o.from){if(e){let c=t.tr.step(o);c.setSelection(Pa(i,"start")?Ke.findFrom(c.doc.resolve(c.mapping.map(s.pos)),1):Be.create(c.doc,c.mapping.map(s.pos))),e(c.scrollIntoView())}return!0}}return i.isAtom&&s.depth==r.depth-1?(e&&e(t.tr.delete(s.pos,s.pos+i.nodeSize).scrollIntoView()),!0):!1},Ej=(t,e,n)=>{let{$head:r,empty:s}=t.selection,i=r;if(!s)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;i=L0(r)}let o=i&&i.nodeAfter;return!o||!Be.isSelectable(o)?!1:(e&&e(t.tr.setSelection(Be.create(t.doc,i.pos)).scrollIntoView()),!0)};function L0(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const JO=(t,e)=>{let n=t.selection,r=n instanceof Be,s;if(r){if(n.node.isTextblock||!qi(t.doc,n.from))return!1;s=n.from}else if(s=Zf(t.doc,n.from,-1),s==null)return!1;if(e){let i=t.tr.join(s);r&&i.setSelection(Be.create(i.doc,s-t.doc.resolve(s).nodeBefore.nodeSize)),e(i.scrollIntoView())}return!0},ZO=(t,e)=>{let n=t.selection,r;if(n instanceof Be){if(n.node.isTextblock||!qi(t.doc,n.to))return!1;r=n.to}else if(r=Zf(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},QO=(t,e)=>{let{$from:n,$to:r}=t.selection,s=n.blockRange(r),i=s&&qa(s);return i==null?!1:(e&&e(t.tr.lift(s,i).scrollIntoView()),!0)},Tj=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function z0(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const YO=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let s=n.node(-1),i=n.indexAfter(-1),o=z0(s.contentMatchAt(i));if(!o||!s.canReplaceWith(i,i,o))return!1;if(e){let c=n.after(),u=t.tr.replaceWith(c,c,o.createAndFill());u.setSelection(Ke.near(u.doc.resolve(c),1)),e(u.scrollIntoView())}return!0},Aj=(t,e)=>{let n=t.selection,{$from:r,$to:s}=n;if(n instanceof gr||r.parent.inlineContent||s.parent.inlineContent)return!1;let i=z0(s.parent.contentMatchAt(s.indexAfter()));if(!i||!i.isTextblock)return!1;if(e){let o=(!r.parentOffset&&s.index()<s.parent.childCount?r:s).pos,c=t.tr.insert(o,i.createAndFill());c.setSelection(He.create(c.doc,o+1)),e(c.scrollIntoView())}return!0},Mj=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let i=n.before();if(Us(t.doc,i))return e&&e(t.tr.split(i).scrollIntoView()),!0}let r=n.blockRange(),s=r&&qa(r);return s==null?!1:(e&&e(t.tr.lift(r,s).scrollIntoView()),!0)};function XO(t){return(e,n)=>{let{$from:r,$to:s}=e.selection;if(e.selection instanceof Be&&e.selection.node.isBlock)return!r.parentOffset||!Us(e.doc,r.pos)?!1:(n&&n(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let i=[],o,c,u=!1,f=!1;for(let y=r.depth;;y--)if(r.node(y).isBlock){u=r.end(y)==r.pos+(r.depth-y),f=r.start(y)==r.pos-(r.depth-y),c=z0(r.node(y-1).contentMatchAt(r.indexAfter(y-1))),i.unshift(u&&c?{type:c}:null),o=y;break}else{if(y==1)return!1;i.unshift(null)}let p=e.tr;(e.selection instanceof He||e.selection instanceof gr)&&p.deleteSelection();let m=p.mapping.map(r.pos),x=Us(p.doc,m,i.length,i);if(x||(i[0]=c?{type:c}:null,x=Us(p.doc,m,i.length,i)),!x)return!1;if(p.split(m,i.length,i),!u&&f&&r.node(o).type!=c){let y=p.mapping.map(r.before(o)),v=p.doc.resolve(y);c&&r.node(o-1).canReplaceWith(v.index(),v.index()+1,c)&&p.setNodeMarkup(p.mapping.map(r.before(o)),c)}return n&&n(p.scrollIntoView()),!0}}const e_=XO(),t_=(t,e)=>{let{$from:n,to:r}=t.selection,s,i=n.sharedDepth(r);return i==0?!1:(s=n.before(i),e&&e(t.tr.setSelection(Be.create(t.doc,s))),!0)};function n_(t,e,n){let r=e.nodeBefore,s=e.nodeAfter,i=e.index();return!r||!s||!r.type.compatibleContent(s.type)?!1:!r.content.size&&e.parent.canReplace(i-1,i)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(i,i+1)||!(s.isTextblock||qi(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function Rj(t,e,n,r){let s=e.nodeBefore,i=e.nodeAfter,o,c,u=s.type.spec.isolating||i.type.spec.isolating;if(!u&&n_(t,e,n))return!0;let f=!u&&e.parent.canReplace(e.index(),e.index()+1);if(f&&(o=(c=s.contentMatchAt(s.childCount)).findWrapping(i.type))&&c.matchType(o[0]||i.type).validEnd){if(n){let y=e.pos+i.nodeSize,v=ae.empty;for(let j=o.length-1;j>=0;j--)v=ae.from(o[j].create(null,v));v=ae.from(s.copy(v));let k=t.tr.step(new mn(e.pos-1,y,e.pos,y,new we(v,1,0),o.length,!0)),w=k.doc.resolve(y+2*o.length);w.nodeAfter&&w.nodeAfter.type==s.type&&qi(k.doc,w.pos)&&k.join(w.pos),n(k.scrollIntoView())}return!0}let p=i.type.spec.isolating||r>0&&u?null:Ke.findFrom(e,1),m=p&&p.$from.blockRange(p.$to),x=m&&qa(m);if(x!=null&&x>=e.depth)return n&&n(t.tr.lift(m,x).scrollIntoView()),!0;if(f&&Pa(i,"start",!0)&&Pa(s,"end")){let y=s,v=[];for(;v.push(y),!y.isTextblock;)y=y.lastChild;let k=i,w=1;for(;!k.isTextblock;k=k.firstChild)w++;if(y.canReplace(y.childCount,y.childCount,k.content)){if(n){let j=ae.empty;for(let T=v.length-1;T>=0;T--)j=ae.from(v[T].copy(j));let C=t.tr.step(new mn(e.pos-v.length,e.pos+i.nodeSize,e.pos+w,e.pos+i.nodeSize-w,new we(j,v.length,0),0,!0));n(C.scrollIntoView())}return!0}}return!1}function Oj(t){return function(e,n){let r=e.selection,s=t<0?r.$from:r.$to,i=s.depth;for(;s.node(i).isInline;){if(!i)return!1;i--}return s.node(i).isTextblock?(n&&n(e.tr.setSelection(He.create(e.doc,t<0?s.start(i):s.end(i)))),!0):!1}}const r_=Oj(-1),s_=Oj(1);function i_(t,e=null){return function(n,r){let{$from:s,$to:i}=n.selection,o=s.blockRange(i),c=o&&O0(o,t,e);return c?(r&&r(n.tr.wrap(o,c).scrollIntoView()),!0):!1}}function O1(t,e=null){return function(n,r){let s=!1;for(let i=0;i<n.selection.ranges.length&&!s;i++){let{$from:{pos:o},$to:{pos:c}}=n.selection.ranges[i];n.doc.nodesBetween(o,c,(u,f)=>{if(s)return!1;if(!(!u.isTextblock||u.hasMarkup(t,e)))if(u.type==t)s=!0;else{let p=n.doc.resolve(f),m=p.index();s=p.parent.canReplaceWith(m,m+1,t)}})}if(!s)return!1;if(r){let i=n.tr;for(let o=0;o<n.selection.ranges.length;o++){let{$from:{pos:c},$to:{pos:u}}=n.selection.ranges[o];i.setBlockType(c,u,t,e)}r(i.scrollIntoView())}return!0}}function B0(...t){return function(e,n,r){for(let s=0;s<t.length;s++)if(t[s](e,n,r))return!0;return!1}}B0(I0,kj,jj);B0(I0,Cj,Ej);B0(Tj,Aj,Mj,e_);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function o_(t,e=null){return function(n,r){let{$from:s,$to:i}=n.selection,o=s.blockRange(i);if(!o)return!1;let c=r?n.tr:null;return a_(c,o,t,e)?(r&&r(c.scrollIntoView()),!0):!1}}function a_(t,e,n,r=null){let s=!1,i=e,o=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let u=o.resolve(e.start-2);i=new Yu(u,u,e.depth),e.endIndex<e.parent.childCount&&(e=new Yu(e.$from,o.resolve(e.$to.end(e.depth)),e.depth)),s=!0}let c=O0(i,n,r,e);return c?(t&&l_(t,e,c,s,n),!0):!1}function l_(t,e,n,r,s){let i=ae.empty;for(let p=n.length-1;p>=0;p--)i=ae.from(n[p].type.create(n[p].attrs,i));t.step(new mn(e.start-(r?2:0),e.end,e.start,e.end,new we(i,0,0),n.length,!0));let o=0;for(let p=0;p<n.length;p++)n[p].type==s&&(o=p+1);let c=n.length-o,u=e.start+n.length-(r?2:0),f=e.parent;for(let p=e.startIndex,m=e.endIndex,x=!0;p<m;p++,x=!1)!x&&Us(t.doc,u,c)&&(t.split(u,c),u+=2*c),u+=f.child(p).nodeSize;return t}function c_(t){return function(e,n){let{$from:r,$to:s}=e.selection,i=r.blockRange(s,o=>o.childCount>0&&o.firstChild.type==t);return i?n?r.node(i.depth-1).type==t?d_(e,n,t,i):u_(e,n,i):!0:!1}}function d_(t,e,n,r){let s=t.tr,i=r.end,o=r.$to.end(r.depth);i<o&&(s.step(new mn(i-1,o,i,o,new we(ae.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Yu(s.doc.resolve(r.$from.pos),s.doc.resolve(o),r.depth));const c=qa(r);if(c==null)return!1;s.lift(r,c);let u=s.doc.resolve(s.mapping.map(i,-1)-1);return qi(s.doc,u.pos)&&u.nodeBefore.type==u.nodeAfter.type&&s.join(u.pos),e(s.scrollIntoView()),!0}function u_(t,e,n){let r=t.tr,s=n.parent;for(let y=n.end,v=n.endIndex-1,k=n.startIndex;v>k;v--)y-=s.child(v).nodeSize,r.delete(y-1,y+1);let i=r.doc.resolve(n.start),o=i.nodeAfter;if(r.mapping.map(n.end)!=n.start+i.nodeAfter.nodeSize)return!1;let c=n.startIndex==0,u=n.endIndex==s.childCount,f=i.node(-1),p=i.index(-1);if(!f.canReplace(p+(c?0:1),p+1,o.content.append(u?ae.empty:ae.from(s))))return!1;let m=i.pos,x=m+o.nodeSize;return r.step(new mn(m-(c?1:0),x+(u?1:0),m+1,x-1,new we((c?ae.empty:ae.from(s.copy(ae.empty))).append(u?ae.empty:ae.from(s.copy(ae.empty))),c?0:1,u?0:1),c?0:1)),e(r.scrollIntoView()),!0}function f_(t){return function(e,n){let{$from:r,$to:s}=e.selection,i=r.blockRange(s,f=>f.childCount>0&&f.firstChild.type==t);if(!i)return!1;let o=i.startIndex;if(o==0)return!1;let c=i.parent,u=c.child(o-1);if(u.type!=t)return!1;if(n){let f=u.lastChild&&u.lastChild.type==c.type,p=ae.from(f?t.create():null),m=new we(ae.from(t.create(null,ae.from(c.type.create(null,p)))),f?3:1,0),x=i.start,y=i.end;n(e.tr.step(new mn(x-(f?3:1),y,x,y,m,1,!0)).scrollIntoView())}return!0}}const bn=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},Ia=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let xg=null;const Bs=function(t,e,n){let r=xg||(xg=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},h_=function(){xg=null},Po=function(t,e,n,r){return n&&(_1(t,e,n,r,-1)||_1(t,e,n,r,1))},p_=/^(img|br|input|textarea|hr)$/i;function _1(t,e,n,r,s){for(var i;;){if(t==n&&e==r)return!0;if(e==(s<0?0:Rr(t))){let o=t.parentNode;if(!o||o.nodeType!=1||zc(t)||p_.test(t.nodeName)||t.contentEditable=="false")return!1;e=bn(t)+(s<0?0:1),t=o}else if(t.nodeType==1){let o=t.childNodes[e+(s<0?-1:0)];if(o.nodeType==1&&o.contentEditable=="false")if(!((i=o.pmViewDesc)===null||i===void 0)&&i.ignoreForSelection)e+=s;else return!1;else t=o,e=s<0?Rr(t):0}else return!1}}function Rr(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function m_(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=Rr(t)}else if(t.parentNode&&!zc(t))e=bn(t),t=t.parentNode;else return null}}function g_(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!zc(t))e=bn(t)+1,t=t.parentNode;else return null}}function x_(t,e,n){for(let r=e==0,s=e==Rr(t);r||s;){if(t==n)return!0;let i=bn(t);if(t=t.parentNode,!t)return!1;r=r&&i==0,s=s&&i==Rr(t)}}function zc(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const Xf=function(t){return t.focusNode&&Po(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function uo(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function y_(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function v_(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(Rr(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(Rr(r.startContainer),r.startOffset)}}}const ps=typeof navigator<"u"?navigator:null,P1=typeof document<"u"?document:null,Ki=ps&&ps.userAgent||"",yg=/Edge\/(\d+)/.exec(Ki),_j=/MSIE \d/.exec(Ki),vg=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Ki),ir=!!(_j||vg||yg),Li=_j?document.documentMode:vg?+vg[1]:yg?+yg[1]:0,Or=!ir&&/gecko\/(\d+)/i.test(Ki);Or&&+(/Firefox\/(\d+)/.exec(Ki)||[0,0])[1];const bg=!ir&&/Chrome\/(\d+)/.exec(Ki),kn=!!bg,Pj=bg?+bg[1]:0,Pn=!ir&&!!ps&&/Apple Computer/.test(ps.vendor),Da=Pn&&(/Mobile\/\w+/.test(Ki)||!!ps&&ps.maxTouchPoints>2),Mr=Da||(ps?/Mac/.test(ps.platform):!1),Ij=ps?/Win/.test(ps.platform):!1,$s=/Android \d/.test(Ki),Bc=!!P1&&"webkitFontSmoothing"in P1.documentElement.style,b_=Bc?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function w_(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function Os(t,e){return typeof t=="number"?t:t[e]}function k_(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function I1(t,e,n){let r=t.someProp("scrollThreshold")||0,s=t.someProp("scrollMargin")||5,i=t.dom.ownerDocument;for(let o=n||t.dom;o;){if(o.nodeType!=1){o=Ia(o);continue}let c=o,u=c==i.body,f=u?w_(i):k_(c),p=0,m=0;if(e.top<f.top+Os(r,"top")?m=-(f.top-e.top+Os(s,"top")):e.bottom>f.bottom-Os(r,"bottom")&&(m=e.bottom-e.top>f.bottom-f.top?e.top+Os(s,"top")-f.top:e.bottom-f.bottom+Os(s,"bottom")),e.left<f.left+Os(r,"left")?p=-(f.left-e.left+Os(s,"left")):e.right>f.right-Os(r,"right")&&(p=e.right-f.right+Os(s,"right")),p||m)if(u)i.defaultView.scrollBy(p,m);else{let y=c.scrollLeft,v=c.scrollTop;m&&(c.scrollTop+=m),p&&(c.scrollLeft+=p);let k=c.scrollLeft-y,w=c.scrollTop-v;e={left:e.left-k,top:e.top-w,right:e.right-k,bottom:e.bottom-w}}let x=u?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(x))break;o=x=="absolute"?o.offsetParent:Ia(o)}}function N_(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,s;for(let i=(e.left+e.right)/2,o=n+1;o<Math.min(innerHeight,e.bottom);o+=5){let c=t.root.elementFromPoint(i,o);if(!c||c==t.dom||!t.dom.contains(c))continue;let u=c.getBoundingClientRect();if(u.top>=n-20){r=c,s=u.top;break}}return{refDOM:r,refTop:s,stack:Dj(t.dom)}}function Dj(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=Ia(r));return e}function j_({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;Lj(n,r==0?0:r-e)}function Lj(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:s,left:i}=t[n];r.scrollTop!=s+e&&(r.scrollTop=s+e),r.scrollLeft!=i&&(r.scrollLeft=i)}}let ma=null;function S_(t){if(t.setActive)return t.setActive();if(ma)return t.focus(ma);let e=Dj(t);t.focus(ma==null?{get preventScroll(){return ma={preventScroll:!0},!0}}:void 0),ma||(ma=!1,Lj(e,0))}function zj(t,e){let n,r=2e8,s,i=0,o=e.top,c=e.top,u,f;for(let p=t.firstChild,m=0;p;p=p.nextSibling,m++){let x;if(p.nodeType==1)x=p.getClientRects();else if(p.nodeType==3)x=Bs(p).getClientRects();else continue;for(let y=0;y<x.length;y++){let v=x[y];if(v.top<=o&&v.bottom>=c){o=Math.max(v.bottom,o),c=Math.min(v.top,c);let k=v.left>e.left?v.left-e.left:v.right<e.left?e.left-v.right:0;if(k<r){n=p,r=k,s=k&&n.nodeType==3?{left:v.right<e.left?v.right:v.left,top:e.top}:e,p.nodeType==1&&k&&(i=m+(e.left>=(v.left+v.right)/2?1:0));continue}}else v.top>e.top&&!u&&v.left<=e.left&&v.right>=e.left&&(u=p,f={left:Math.max(v.left,Math.min(v.right,e.left)),top:v.top});!n&&(e.left>=v.right&&e.top>=v.top||e.left>=v.left&&e.top>=v.bottom)&&(i=m+1)}}return!n&&u&&(n=u,s=f,r=0),n&&n.nodeType==3?C_(n,s):!n||r&&n.nodeType==1?{node:t,offset:i}:zj(n,s)}function C_(t,e){let n=t.nodeValue.length,r=document.createRange(),s;for(let i=0;i<n;i++){r.setEnd(t,i+1),r.setStart(t,i);let o=ki(r,1);if(o.top!=o.bottom&&F0(e,o)){s={node:t,offset:i+(e.left>=(o.left+o.right)/2?1:0)};break}}return r.detach(),s||{node:t,offset:0}}function F0(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function E_(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function T_(t,e,n){let{node:r,offset:s}=zj(e,n),i=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();i=o.left!=o.right&&n.left>(o.left+o.right)/2?1:-1}return t.docView.posFromDOM(r,s,i)}function A_(t,e,n,r){let s=-1;for(let i=e,o=!1;i!=t.dom;){let c=t.docView.nearestDesc(i,!0),u;if(!c)return null;if(c.dom.nodeType==1&&(c.node.isBlock&&c.parent||!c.contentDOM)&&((u=c.dom.getBoundingClientRect()).width||u.height)&&(c.node.isBlock&&c.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(c.dom.nodeName)&&(!o&&u.left>r.left||u.top>r.top?s=c.posBefore:(!o&&u.right<r.left||u.bottom<r.top)&&(s=c.posAfter),o=!0),!c.contentDOM&&s<0&&!c.node.isText))return(c.node.isBlock?r.top<(u.top+u.bottom)/2:r.left<(u.left+u.right)/2)?c.posBefore:c.posAfter;i=c.dom.parentNode}return s>-1?s:t.docView.posFromDOM(e,n,-1)}function Bj(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let s=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),i=s;;){let o=t.childNodes[i];if(o.nodeType==1){let c=o.getClientRects();for(let u=0;u<c.length;u++){let f=c[u];if(F0(e,f))return Bj(o,e,f)}}if((i=(i+1)%r)==s)break}return t}function M_(t,e){let n=t.dom.ownerDocument,r,s=0,i=v_(n,e.left,e.top);i&&({node:r,offset:s}=i);let o=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),c;if(!o||!t.dom.contains(o.nodeType!=1?o.parentNode:o)){let f=t.dom.getBoundingClientRect();if(!F0(e,f)||(o=Bj(t.dom,e,f),!o))return null}if(Pn)for(let f=o;r&&f;f=Ia(f))f.draggable&&(r=void 0);if(o=E_(o,e),r){if(Or&&r.nodeType==1&&(s=Math.min(s,r.childNodes.length),s<r.childNodes.length)){let p=r.childNodes[s],m;p.nodeName=="IMG"&&(m=p.getBoundingClientRect()).right<=e.left&&m.bottom>e.top&&s++}let f;Bc&&s&&r.nodeType==1&&(f=r.childNodes[s-1]).nodeType==1&&f.contentEditable=="false"&&f.getBoundingClientRect().top>=e.top&&s--,r==t.dom&&s==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?c=t.state.doc.content.size:(s==0||r.nodeType!=1||r.childNodes[s-1].nodeName!="BR")&&(c=A_(t,r,s,e))}c==null&&(c=T_(t,o,e));let u=t.docView.nearestDesc(o,!0);return{pos:c,inside:u?u.posAtStart-u.border:-1}}function D1(t){return t.top<t.bottom||t.left<t.right}function ki(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(D1(r))return r}return Array.prototype.find.call(n,D1)||t.getBoundingClientRect()}const R_=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Fj(t,e,n){let{node:r,offset:s,atom:i}=t.docView.domFromPos(e,n<0?-1:1),o=Bc||Or;if(r.nodeType==3)if(o&&(R_.test(r.nodeValue)||(n<0?!s:s==r.nodeValue.length))){let u=ki(Bs(r,s,s),n);if(Or&&s&&/\s/.test(r.nodeValue[s-1])&&s<r.nodeValue.length){let f=ki(Bs(r,s-1,s-1),-1);if(f.top==u.top){let p=ki(Bs(r,s,s+1),-1);if(p.top!=u.top)return Bl(p,p.left<f.left)}}return u}else{let u=s,f=s,p=n<0?1:-1;return n<0&&!s?(f++,p=-1):n>=0&&s==r.nodeValue.length?(u--,p=1):n<0?u--:f++,Bl(ki(Bs(r,u,f),p),p<0)}if(!t.state.doc.resolve(e-(i||0)).parent.inlineContent){if(i==null&&s&&(n<0||s==Rr(r))){let u=r.childNodes[s-1];if(u.nodeType==1)return xm(u.getBoundingClientRect(),!1)}if(i==null&&s<Rr(r)){let u=r.childNodes[s];if(u.nodeType==1)return xm(u.getBoundingClientRect(),!0)}return xm(r.getBoundingClientRect(),n>=0)}if(i==null&&s&&(n<0||s==Rr(r))){let u=r.childNodes[s-1],f=u.nodeType==3?Bs(u,Rr(u)-(o?0:1)):u.nodeType==1&&(u.nodeName!="BR"||!u.nextSibling)?u:null;if(f)return Bl(ki(f,1),!1)}if(i==null&&s<Rr(r)){let u=r.childNodes[s];for(;u.pmViewDesc&&u.pmViewDesc.ignoreForCoords;)u=u.nextSibling;let f=u?u.nodeType==3?Bs(u,0,o?0:1):u.nodeType==1?u:null:null;if(f)return Bl(ki(f,-1),!0)}return Bl(ki(r.nodeType==3?Bs(r):r,-n),n>=0)}function Bl(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function xm(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function $j(t,e,n){let r=t.state,s=t.root.activeElement;r!=e&&t.updateState(e),s!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),s!=t.dom&&s&&s.focus()}}function O_(t,e,n){let r=e.selection,s=n=="up"?r.$from:r.$to;return $j(t,e,()=>{let{node:i}=t.docView.domFromPos(s.pos,n=="up"?-1:1);for(;;){let c=t.docView.nearestDesc(i,!0);if(!c)break;if(c.node.isBlock){i=c.contentDOM||c.dom;break}i=c.dom.parentNode}let o=Fj(t,s.pos,1);for(let c=i.firstChild;c;c=c.nextSibling){let u;if(c.nodeType==1)u=c.getClientRects();else if(c.nodeType==3)u=Bs(c,0,c.nodeValue.length).getClientRects();else continue;for(let f=0;f<u.length;f++){let p=u[f];if(p.bottom>p.top+1&&(n=="up"?o.top-p.top>(p.bottom-o.top)*2:p.bottom-o.bottom>(o.bottom-p.top)*2))return!1}}return!0})}const __=/[\u0590-\u08ac]/;function P_(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let s=r.parentOffset,i=!s,o=s==r.parent.content.size,c=t.domSelection();return c?!__.test(r.parent.textContent)||!c.modify?n=="left"||n=="backward"?i:o:$j(t,e,()=>{let{focusNode:u,focusOffset:f,anchorNode:p,anchorOffset:m}=t.domSelectionRange(),x=c.caretBidiLevel;c.modify("move",n,"character");let y=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:v,focusOffset:k}=t.domSelectionRange(),w=v&&!y.contains(v.nodeType==1?v:v.parentNode)||u==v&&f==k;try{c.collapse(p,m),u&&(u!=p||f!=m)&&c.extend&&c.extend(u,f)}catch{}return x!=null&&(c.caretBidiLevel=x),w}):r.pos==r.start()||r.pos==r.end()}let L1=null,z1=null,B1=!1;function I_(t,e,n){return L1==e&&z1==n?B1:(L1=e,z1=n,B1=n=="up"||n=="down"?O_(t,e,n):P_(t,e,n))}const _r=0,F1=1,mo=2,ms=3;class Fc{constructor(e,n,r,s){this.parent=e,this.children=n,this.dom=r,this.contentDOM=s,this.dirty=_r,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let s=this.children[n];if(s==e)return r;r+=s.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let i,o;if(e==this.contentDOM)i=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.previousSibling}for(;i&&!((o=i.pmViewDesc)&&o.parent==this);)i=i.previousSibling;return i?this.posBeforeChild(o)+o.size:this.posAtStart}else{let i,o;if(e==this.contentDOM)i=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.nextSibling}for(;i&&!((o=i.pmViewDesc)&&o.parent==this);)i=i.nextSibling;return i?this.posBeforeChild(o):this.posAtEnd}let s;if(e==this.dom&&this.contentDOM)s=n>bn(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))s=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let i=e;;i=i.parentNode){if(i==this.dom){s=!1;break}if(i.previousSibling)break}if(s==null&&n==e.childNodes.length)for(let i=e;;i=i.parentNode){if(i==this.dom){s=!0;break}if(i.nextSibling)break}}return s??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,s=e;s;s=s.parentNode){let i=this.getDesc(s),o;if(i&&(!n||i.node))if(r&&(o=i.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))r=!1;else return i}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let s=e;s;s=s.parentNode){let i=this.getDesc(s);if(i)return i.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let s=this.children[n],i=r+s.size;if(r==e&&i!=r){for(;!s.border&&s.children.length;)for(let o=0;o<s.children.length;o++){let c=s.children[o];if(c.size){s=c;break}}return s}if(e<i)return s.descAt(e-r-s.border);r=i}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,s=0;for(let i=0;r<this.children.length;r++){let o=this.children[r],c=i+o.size;if(c>e||o instanceof Uj){s=e-i;break}i=c}if(s)return this.children[r].domFromPos(s-this.children[r].border,n);for(let i;r&&!(i=this.children[r-1]).size&&i instanceof Vj&&i.side>=0;r--);if(n<=0){let i,o=!0;for(;i=r?this.children[r-1]:null,!(!i||i.dom.parentNode==this.contentDOM);r--,o=!1);return i&&n&&o&&!i.border&&!i.domAtom?i.domFromPos(i.size,n):{node:this.contentDOM,offset:i?bn(i.dom)+1:0}}else{let i,o=!0;for(;i=r<this.children.length?this.children[r]:null,!(!i||i.dom.parentNode==this.contentDOM);r++,o=!1);return i&&o&&!i.border&&!i.domAtom?i.domFromPos(0,n):{node:this.contentDOM,offset:i?bn(i.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let s=-1,i=-1;for(let o=r,c=0;;c++){let u=this.children[c],f=o+u.size;if(s==-1&&e<=f){let p=o+u.border;if(e>=p&&n<=f-u.border&&u.node&&u.contentDOM&&this.contentDOM.contains(u.contentDOM))return u.parseRange(e,n,p);e=o;for(let m=c;m>0;m--){let x=this.children[m-1];if(x.size&&x.dom.parentNode==this.contentDOM&&!x.emptyChildAt(1)){s=bn(x.dom)+1;break}e-=x.size}s==-1&&(s=0)}if(s>-1&&(f>n||c==this.children.length-1)){n=f;for(let p=c+1;p<this.children.length;p++){let m=this.children[p];if(m.size&&m.dom.parentNode==this.contentDOM&&!m.emptyChildAt(-1)){i=bn(m.dom);break}n+=m.size}i==-1&&(i=this.contentDOM.childNodes.length);break}o=f}return{node:this.contentDOM,from:e,to:n,fromOffset:s,toOffset:i}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,s=!1){let i=Math.min(e,n),o=Math.max(e,n);for(let y=0,v=0;y<this.children.length;y++){let k=this.children[y],w=v+k.size;if(i>v&&o<w)return k.setSelection(e-v-k.border,n-v-k.border,r,s);v=w}let c=this.domFromPos(e,e?-1:1),u=n==e?c:this.domFromPos(n,n?-1:1),f=r.root.getSelection(),p=r.domSelectionRange(),m=!1;if((Or||Pn)&&e==n){let{node:y,offset:v}=c;if(y.nodeType==3){if(m=!!(v&&y.nodeValue[v-1]==`
`),m&&v==y.nodeValue.length)for(let k=y,w;k;k=k.parentNode){if(w=k.nextSibling){w.nodeName=="BR"&&(c=u={node:w.parentNode,offset:bn(w)+1});break}let j=k.pmViewDesc;if(j&&j.node&&j.node.isBlock)break}}else{let k=y.childNodes[v-1];m=k&&(k.nodeName=="BR"||k.contentEditable=="false")}}if(Or&&p.focusNode&&p.focusNode!=u.node&&p.focusNode.nodeType==1){let y=p.focusNode.childNodes[p.focusOffset];y&&y.contentEditable=="false"&&(s=!0)}if(!(s||m&&Pn)&&Po(c.node,c.offset,p.anchorNode,p.anchorOffset)&&Po(u.node,u.offset,p.focusNode,p.focusOffset))return;let x=!1;if((f.extend||e==n)&&!(m&&Or)){f.collapse(c.node,c.offset);try{e!=n&&f.extend(u.node,u.offset),x=!0}catch{}}if(!x){if(e>n){let v=c;c=u,u=v}let y=document.createRange();y.setEnd(u.node,u.offset),y.setStart(c.node,c.offset),f.removeAllRanges(),f.addRange(y)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,s=0;s<this.children.length;s++){let i=this.children[s],o=r+i.size;if(r==o?e<=o&&n>=r:e<o&&n>r){let c=r+i.border,u=o-i.border;if(e>=c&&n<=u){this.dirty=e==r||n==o?mo:F1,e==c&&n==u&&(i.contentLost||i.dom.parentNode!=this.contentDOM)?i.dirty=ms:i.markDirty(e-c,n-c);return}else i.dirty=i.dom==i.contentDOM&&i.dom.parentNode==this.contentDOM&&!i.children.length?mo:ms}r=o}this.dirty=mo}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?mo:F1;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class Vj extends Fc{constructor(e,n,r,s){let i,o=n.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!i)return s;if(i.parent)return i.parent.posBeforeChild(i)})),!n.type.spec.raw){if(o.nodeType!=1){let c=document.createElement("span");c.appendChild(o),o=c}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=n,this.widget=n,i=this}matchesWidget(e){return this.dirty==_r&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class D_ extends Fc{constructor(e,n,r,s){super(e,[],n,null),this.textDOM=r,this.text=s}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Io extends Fc{constructor(e,n,r,s,i){super(e,[],r,s),this.mark=n,this.spec=i}static create(e,n,r,s){let i=s.nodeViews[n.type.name],o=i&&i(n,s,r);return(!o||!o.dom)&&(o=Fo.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new Io(e,n,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&ms||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=ms&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=_r){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=_r}}slice(e,n,r){let s=Io.create(this.parent,this.mark,!0,r),i=this.children,o=this.size;n<o&&(i=kg(i,n,o,r)),e>0&&(i=kg(i,0,e,r));for(let c=0;c<i.length;c++)i[c].parent=s;return s.children=i,s}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class zi extends Fc{constructor(e,n,r,s,i,o,c,u,f){super(e,[],i,o),this.node=n,this.outerDeco=r,this.innerDeco=s,this.nodeDOM=c}static create(e,n,r,s,i,o){let c=i.nodeViews[n.type.name],u,f=c&&c(n,i,()=>{if(!u)return o;if(u.parent)return u.parent.posBeforeChild(u)},r,s),p=f&&f.dom,m=f&&f.contentDOM;if(n.isText){if(!p)p=document.createTextNode(n.text);else if(p.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else p||({dom:p,contentDOM:m}=Fo.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!m&&!n.isText&&p.nodeName!="BR"&&(p.hasAttribute("contenteditable")||(p.contentEditable="false"),n.type.spec.draggable&&(p.draggable=!0));let x=p;return p=qj(p,r,n),f?u=new L_(e,n,r,s,p,m||null,x,f,i,o+1):n.isText?new eh(e,n,r,s,p,x,i):new zi(e,n,r,s,p,m||null,x,i,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>ae.empty)}return e}matchesNode(e,n,r){return this.dirty==_r&&e.eq(this.node)&&ef(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,s=n,i=e.composing?this.localCompositionInfo(e,n):null,o=i&&i.pos>-1?i:null,c=i&&i.pos<0,u=new B_(this,o&&o.node,e);V_(this.node,this.innerDeco,(f,p,m)=>{f.spec.marks?u.syncToMarks(f.spec.marks,r,e,p):f.type.side>=0&&!m&&u.syncToMarks(p==this.node.childCount?mt.none:this.node.child(p).marks,r,e,p),u.placeWidget(f,e,s)},(f,p,m,x)=>{u.syncToMarks(f.marks,r,e,x);let y;u.findNodeMatch(f,p,m,x)||c&&e.state.selection.from>s&&e.state.selection.to<s+f.nodeSize&&(y=u.findIndexWithChild(i.node))>-1&&u.updateNodeAt(f,p,m,y,e)||u.updateNextNode(f,p,m,e,x,s)||u.addNode(f,p,m,e,s),s+=f.nodeSize}),u.syncToMarks([],r,e,0),this.node.isTextblock&&u.addTextblockHacks(),u.destroyRest(),(u.changed||this.dirty==mo)&&(o&&this.protectLocalComposition(e,o),Hj(this.contentDOM,this.children,e),Da&&U_(this.dom))}localCompositionInfo(e,n){let{from:r,to:s}=e.state.selection;if(!(e.state.selection instanceof He)||r<n||s>n+this.node.content.size)return null;let i=e.input.compositionNode;if(!i||!this.dom.contains(i.parentNode))return null;if(this.node.inlineContent){let o=i.nodeValue,c=H_(this.node.content,o,r-n,s-n);return c<0?null:{node:i,pos:c,text:o}}else return{node:i,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:s}){if(this.getDesc(n))return;let i=n;for(;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=void 0)}let o=new D_(this,i,n,s);e.input.compositionNodes.push(o),this.children=kg(this.children,r,r+s.length,e,o)}update(e,n,r,s){return this.dirty==ms||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,s),!0)}updateInner(e,n,r,s){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(s,this.posAtStart),this.dirty=_r}updateOuterDeco(e){if(ef(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=Wj(this.dom,this.nodeDOM,wg(this.outerDeco,this.node,n),wg(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function $1(t,e,n,r,s){qj(r,e,t);let i=new zi(void 0,t,e,n,r,r,r,s,0);return i.contentDOM&&i.updateChildren(s,0),i}class eh extends zi{constructor(e,n,r,s,i,o,c){super(e,n,r,s,i,null,o,c,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,s){return this.dirty==ms||this.dirty!=_r&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=_r||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,s.trackWrites==this.nodeDOM&&(s.trackWrites=null)),this.node=e,this.dirty=_r,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let s=this.node.cut(e,n),i=document.createTextNode(s.text);return new eh(this.parent,s,this.outerDeco,this.innerDeco,i,i,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=ms)}get domAtom(){return!1}isText(e){return this.node.text==e}}class Uj extends Fc{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==_r&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class L_ extends zi{constructor(e,n,r,s,i,o,c,u,f,p){super(e,n,r,s,i,o,c,f,p),this.spec=u}update(e,n,r,s){if(this.dirty==ms)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let i=this.spec.update(e,n,r);return i&&this.updateInner(e,n,r,s),i}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,s)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,s){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,s)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function Hj(t,e,n){let r=t.firstChild,s=!1;for(let i=0;i<e.length;i++){let o=e[i],c=o.dom;if(c.parentNode==t){for(;c!=r;)r=V1(r),s=!0;r=r.nextSibling}else s=!0,t.insertBefore(c,r);if(o instanceof Io){let u=r?r.previousSibling:t.lastChild;Hj(o.contentDOM,o.children,n),r=u?u.nextSibling:t.firstChild}}for(;r;)r=V1(r),s=!0;s&&n.trackWrites==t&&(n.trackWrites=null)}const rc=function(t){t&&(this.nodeName=t)};rc.prototype=Object.create(null);const go=[new rc];function wg(t,e,n){if(t.length==0)return go;let r=n?go[0]:new rc,s=[r];for(let i=0;i<t.length;i++){let o=t[i].type.attrs;if(o){o.nodeName&&s.push(r=new rc(o.nodeName));for(let c in o){let u=o[c];u!=null&&(n&&s.length==1&&s.push(r=new rc(e.isInline?"span":"div")),c=="class"?r.class=(r.class?r.class+" ":"")+u:c=="style"?r.style=(r.style?r.style+";":"")+u:c!="nodeName"&&(r[c]=u))}}}return s}function Wj(t,e,n,r){if(n==go&&r==go)return e;let s=e;for(let i=0;i<r.length;i++){let o=r[i],c=n[i];if(i){let u;c&&c.nodeName==o.nodeName&&s!=t&&(u=s.parentNode)&&u.nodeName.toLowerCase()==o.nodeName||(u=document.createElement(o.nodeName),u.pmIsDeco=!0,u.appendChild(s),c=go[0]),s=u}z_(s,c||go[0],o)}return s}function z_(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],s=n.class?n.class.split(" ").filter(Boolean):[];for(let i=0;i<r.length;i++)s.indexOf(r[i])==-1&&t.classList.remove(r[i]);for(let i=0;i<s.length;i++)r.indexOf(s[i])==-1&&t.classList.add(s[i]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,s;for(;s=r.exec(e.style);)t.style.removeProperty(s[1])}n.style&&(t.style.cssText+=n.style)}}function qj(t,e,n){return Wj(t,t,go,wg(e,n,t.nodeType!=1))}function ef(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function V1(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class B_{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=F_(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r,s){let i=0,o=this.stack.length>>1,c=Math.min(o,e.length);for(;i<c&&(i==o-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<o;)this.destroyRest(),this.top.dirty=_r,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<e.length;){this.stack.push(this.top,this.index+1);let u=-1,f=this.top.children.length;s<this.preMatch.index&&(f=Math.min(this.index+3,f));for(let p=this.index;p<f;p++){let m=this.top.children[p];if(m.matchesMark(e[o])&&!this.isLocked(m.dom)){u=p;break}}if(u>-1)u>this.index&&(this.changed=!0,this.destroyBetween(this.index,u)),this.top=this.top.children[this.index];else{let p=Io.create(this.top,e[o],n,r);this.top.children.splice(this.index,0,p),this.top=p,this.changed=!0}this.index=0,o++}}findNodeMatch(e,n,r,s){let i=-1,o;if(s>=this.preMatch.index&&(o=this.preMatch.matches[s-this.preMatch.index]).parent==this.top&&o.matchesNode(e,n,r))i=this.top.children.indexOf(o,this.index);else for(let c=this.index,u=Math.min(this.top.children.length,c+5);c<u;c++){let f=this.top.children[c];if(f.matchesNode(e,n,r)&&!this.preMatch.matched.has(f)){i=c;break}}return i<0?!1:(this.destroyBetween(this.index,i),this.index++,!0)}updateNodeAt(e,n,r,s,i){let o=this.top.children[s];return o.dirty==ms&&o.dom==o.contentDOM&&(o.dirty=mo),o.update(e,n,r,i)?(this.destroyBetween(this.index,s),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let s=this.index;s<this.top.children.length;s++)if(this.top.children[s]==r)return s}return-1}e=n}}updateNextNode(e,n,r,s,i,o){for(let c=this.index;c<this.top.children.length;c++){let u=this.top.children[c];if(u instanceof zi){let f=this.preMatch.matched.get(u);if(f!=null&&f!=i)return!1;let p=u.dom,m,x=this.isLocked(p)&&!(e.isText&&u.node&&u.node.isText&&u.nodeDOM.nodeValue==e.text&&u.dirty!=ms&&ef(n,u.outerDeco));if(!x&&u.update(e,n,r,s))return this.destroyBetween(this.index,c),u.dom!=p&&(this.changed=!0),this.index++,!0;if(!x&&(m=this.recreateWrapper(u,e,n,r,s,o)))return this.destroyBetween(this.index,c),this.top.children[this.index]=m,m.contentDOM&&(m.dirty=mo,m.updateChildren(s,o+1),m.dirty=_r),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,s,i,o){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!ef(r,e.outerDeco)||!s.eq(e.innerDeco))return null;let c=zi.create(this.top,n,r,s,i,o);if(c.contentDOM){c.children=e.children,e.children=[];for(let u of c.children)u.parent=c}return e.destroy(),c}addNode(e,n,r,s,i){let o=zi.create(this.top,e,n,r,s,i);o.contentDOM&&o.updateChildren(s,i+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,n,r){let s=this.index<this.top.children.length?this.top.children[this.index]:null;if(s&&s.matchesWidget(e)&&(e==s.widget||!s.widget.type.toDOM.parentNode))this.index++;else{let i=new Vj(this.top,e,n,r);this.top.children.splice(this.index++,0,i),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof Io;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof eh)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Pn||kn)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let s=new Uj(this.top,[],r,null);n!=this.top?n.children.push(s):n.children.splice(this.index++,0,s),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function F_(t,e){let n=e,r=n.children.length,s=t.childCount,i=new Map,o=[];e:for(;s>0;){let c;for(;;)if(r){let f=n.children[r-1];if(f instanceof Io)n=f,r=f.children.length;else{c=f,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let u=c.node;if(u){if(u!=t.child(s-1))break;--s,i.set(c,s),o.push(c)}}return{index:s,matched:i,matches:o.reverse()}}function $_(t,e){return t.type.side-e.type.side}function V_(t,e,n,r){let s=e.locals(t),i=0;if(s.length==0){for(let f=0;f<t.childCount;f++){let p=t.child(f);r(p,s,e.forChild(i,p),f),i+=p.nodeSize}return}let o=0,c=[],u=null;for(let f=0;;){let p,m;for(;o<s.length&&s[o].to==i;){let w=s[o++];w.widget&&(p?(m||(m=[p])).push(w):p=w)}if(p)if(m){m.sort($_);for(let w=0;w<m.length;w++)n(m[w],f,!!u)}else n(p,f,!!u);let x,y;if(u)y=-1,x=u,u=null;else if(f<t.childCount)y=f,x=t.child(f++);else break;for(let w=0;w<c.length;w++)c[w].to<=i&&c.splice(w--,1);for(;o<s.length&&s[o].from<=i&&s[o].to>i;)c.push(s[o++]);let v=i+x.nodeSize;if(x.isText){let w=v;o<s.length&&s[o].from<w&&(w=s[o].from);for(let j=0;j<c.length;j++)c[j].to<w&&(w=c[j].to);w<v&&(u=x.cut(w-i),x=x.cut(0,w-i),v=w,y=-1)}else for(;o<s.length&&s[o].to<v;)o++;let k=x.isInline&&!x.isLeaf?c.filter(w=>!w.inline):c.slice();r(x,k,e.forChild(i,x),y),i=v}}function U_(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function H_(t,e,n,r){for(let s=0,i=0;s<t.childCount&&i<=r;){let o=t.child(s++),c=i;if(i+=o.nodeSize,!o.isText)continue;let u=o.text;for(;s<t.childCount;){let f=t.child(s++);if(i+=f.nodeSize,!f.isText)break;u+=f.text}if(i>=n){if(i>=r&&u.slice(r-e.length-c,r-c)==e)return r-e.length;let f=c<r?u.lastIndexOf(e,r-c-1):-1;if(f>=0&&f+e.length+c>=n)return c+f;if(n==r&&u.length>=r+e.length-c&&u.slice(r-c,r-c+e.length)==e)return r}}return-1}function kg(t,e,n,r,s){let i=[];for(let o=0,c=0;o<t.length;o++){let u=t[o],f=c,p=c+=u.size;f>=n||p<=e?i.push(u):(f<e&&i.push(u.slice(0,e-f,r)),s&&(i.push(s),s=void 0),p>n&&i.push(u.slice(n-f,u.size,r)))}return i}function $0(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let s=t.docView.nearestDesc(n.focusNode),i=s&&s.size==0,o=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(o<0)return null;let c=r.resolve(o),u,f;if(Xf(n)){for(u=o;s&&!s.node;)s=s.parent;let m=s.node;if(s&&m.isAtom&&Be.isSelectable(m)&&s.parent&&!(m.isInline&&x_(n.focusNode,n.focusOffset,s.dom))){let x=s.posBefore;f=new Be(o==x?c:r.resolve(x))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let m=o,x=o;for(let y=0;y<n.rangeCount;y++){let v=n.getRangeAt(y);m=Math.min(m,t.docView.posFromDOM(v.startContainer,v.startOffset,1)),x=Math.max(x,t.docView.posFromDOM(v.endContainer,v.endOffset,-1))}if(m<0)return null;[u,o]=x==t.state.selection.anchor?[x,m]:[m,x],c=r.resolve(o)}else u=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(u<0)return null}let p=r.resolve(u);if(!f){let m=e=="pointer"||t.state.selection.head<c.pos&&!i?1:-1;f=V0(t,p,c,m)}return f}function Kj(t){return t.editable?t.hasFocus():Jj(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function Hs(t,e=!1){let n=t.state.selection;if(Gj(t,n),!!Kj(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&kn){let r=t.domSelectionRange(),s=t.domObserver.currentSelection;if(r.anchorNode&&s.anchorNode&&Po(r.anchorNode,r.anchorOffset,s.anchorNode,s.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)q_(t);else{let{anchor:r,head:s}=n,i,o;U1&&!(n instanceof He)&&(n.$from.parent.inlineContent||(i=H1(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(o=H1(t,n.to))),t.docView.setSelection(r,s,t,e),U1&&(i&&W1(i),o&&W1(o)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&W_(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const U1=Pn||kn&&Pj<63;function H1(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),s=r<n.childNodes.length?n.childNodes[r]:null,i=r?n.childNodes[r-1]:null;if(Pn&&s&&s.contentEditable=="false")return ym(s);if((!s||s.contentEditable=="false")&&(!i||i.contentEditable=="false")){if(s)return ym(s);if(i)return ym(i)}}function ym(t){return t.contentEditable="true",Pn&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function W1(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function W_(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,s=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=s)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!Kj(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function q_(t){let e=t.domSelection();if(!e)return;let n=t.cursorWrapper.dom,r=n.nodeName=="IMG";r?e.collapse(n.parentNode,bn(n)+1):e.collapse(n,0),!r&&!t.state.selection.visible&&ir&&Li<=11&&(n.disabled=!0,n.disabled=!1)}function Gj(t,e){if(e instanceof Be){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(q1(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else q1(t)}function q1(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function V0(t,e,n,r){return t.someProp("createSelectionBetween",s=>s(t,e,n))||He.between(e,n,r)}function K1(t){return t.editable&&!t.hasFocus()?!1:Jj(t)}function Jj(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function K_(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return Po(e.node,e.offset,n.anchorNode,n.anchorOffset)}function Ng(t,e){let{$anchor:n,$head:r}=t.selection,s=e>0?n.max(r):n.min(r),i=s.parent.inlineContent?s.depth?t.doc.resolve(e>0?s.after():s.before()):null:s;return i&&Ke.findFrom(i,e)}function ji(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function G1(t,e,n){let r=t.state.selection;if(r instanceof He)if(n.indexOf("s")>-1){let{$head:s}=r,i=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter;if(!i||i.isText||!i.isLeaf)return!1;let o=t.state.doc.resolve(s.pos+i.nodeSize*(e<0?-1:1));return ji(t,new He(r.$anchor,o))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let s=Ng(t.state,e);return s&&s instanceof Be?ji(t,s):!1}else if(!(Mr&&n.indexOf("m")>-1)){let s=r.$head,i=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter,o;if(!i||i.isText)return!1;let c=e<0?s.pos-i.nodeSize:s.pos;return i.isAtom||(o=t.docView.descAt(c))&&!o.contentDOM?Be.isSelectable(i)?ji(t,new Be(e<0?t.state.doc.resolve(s.pos-i.nodeSize):s)):Bc?ji(t,new He(t.state.doc.resolve(e<0?c:c+i.nodeSize))):!1:!1}}else return!1;else{if(r instanceof Be&&r.node.isInline)return ji(t,new He(e>0?r.$to:r.$from));{let s=Ng(t.state,e);return s?ji(t,s):!1}}}function tf(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function sc(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function ga(t,e){return e<0?G_(t):J_(t)}function G_(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let s,i,o=!1;for(Or&&n.nodeType==1&&r<tf(n)&&sc(n.childNodes[r],-1)&&(o=!0);;)if(r>0){if(n.nodeType!=1)break;{let c=n.childNodes[r-1];if(sc(c,-1))s=n,i=--r;else if(c.nodeType==3)n=c,r=n.nodeValue.length;else break}}else{if(Zj(n))break;{let c=n.previousSibling;for(;c&&sc(c,-1);)s=n.parentNode,i=bn(c),c=c.previousSibling;if(c)n=c,r=tf(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}o?jg(t,n,r):s&&jg(t,s,i)}function J_(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let s=tf(n),i,o;for(;;)if(r<s){if(n.nodeType!=1)break;let c=n.childNodes[r];if(sc(c,1))i=n,o=++r;else break}else{if(Zj(n))break;{let c=n.nextSibling;for(;c&&sc(c,1);)i=c.parentNode,o=bn(c)+1,c=c.nextSibling;if(c)n=c,r=0,s=tf(n);else{if(n=n.parentNode,n==t.dom)break;r=s=0}}}i&&jg(t,i,o)}function Zj(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function Z_(t,e){for(;t&&e==t.childNodes.length&&!zc(t);)e=bn(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function Q_(t,e){for(;t&&!e&&!zc(t);)e=bn(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function jg(t,e,n){if(e.nodeType!=3){let i,o;(o=Z_(e,n))?(e=o,n=0):(i=Q_(e,n))&&(e=i,n=i.nodeValue.length)}let r=t.domSelection();if(!r)return;if(Xf(r)){let i=document.createRange();i.setEnd(e,n),i.setStart(e,n),r.removeAllRanges(),r.addRange(i)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:s}=t;setTimeout(()=>{t.state==s&&Hs(t)},50)}function J1(t,e){let n=t.state.doc.resolve(e);if(!(kn||Ij)&&n.parent.inlineContent){let s=t.coordsAtPos(e);if(e>n.start()){let i=t.coordsAtPos(e-1),o=(i.top+i.bottom)/2;if(o>s.top&&o<s.bottom&&Math.abs(i.left-s.left)>1)return i.left<s.left?"ltr":"rtl"}if(e<n.end()){let i=t.coordsAtPos(e+1),o=(i.top+i.bottom)/2;if(o>s.top&&o<s.bottom&&Math.abs(i.left-s.left)>1)return i.left>s.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function Z1(t,e,n){let r=t.state.selection;if(r instanceof He&&!r.empty||n.indexOf("s")>-1||Mr&&n.indexOf("m")>-1)return!1;let{$from:s,$to:i}=r;if(!s.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let o=Ng(t.state,e);if(o&&o instanceof Be)return ji(t,o)}if(!s.parent.inlineContent){let o=e<0?s:i,c=r instanceof gr?Ke.near(o,e):Ke.findFrom(o,e);return c?ji(t,c):!1}return!1}function Q1(t,e){if(!(t.state.selection instanceof He))return!0;let{$head:n,$anchor:r,empty:s}=t.state.selection;if(!n.sameParent(r))return!0;if(!s)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let i=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(i&&!i.isText){let o=t.state.tr;return e<0?o.delete(n.pos-i.nodeSize,n.pos):o.delete(n.pos,n.pos+i.nodeSize),t.dispatch(o),!0}return!1}function Y1(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function Y_(t){if(!Pn||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;Y1(t,r,"true"),setTimeout(()=>Y1(t,r,"false"),20)}return!1}function X_(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function eP(t,e){let n=e.keyCode,r=X_(e);if(n==8||Mr&&n==72&&r=="c")return Q1(t,-1)||ga(t,-1);if(n==46&&!e.shiftKey||Mr&&n==68&&r=="c")return Q1(t,1)||ga(t,1);if(n==13||n==27)return!0;if(n==37||Mr&&n==66&&r=="c"){let s=n==37?J1(t,t.state.selection.from)=="ltr"?-1:1:-1;return G1(t,s,r)||ga(t,s)}else if(n==39||Mr&&n==70&&r=="c"){let s=n==39?J1(t,t.state.selection.from)=="ltr"?1:-1:1;return G1(t,s,r)||ga(t,s)}else{if(n==38||Mr&&n==80&&r=="c")return Z1(t,-1,r)||ga(t,-1);if(n==40||Mr&&n==78&&r=="c")return Y_(t)||Z1(t,1,r)||ga(t,1);if(r==(Mr?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function U0(t,e){t.someProp("transformCopied",y=>{e=y(e,t)});let n=[],{content:r,openStart:s,openEnd:i}=e;for(;s>1&&i>1&&r.childCount==1&&r.firstChild.childCount==1;){s--,i--;let y=r.firstChild;n.push(y.type.name,y.attrs!=y.type.defaultAttrs?y.attrs:null),r=y.content}let o=t.someProp("clipboardSerializer")||Fo.fromSchema(t.state.schema),c=nS(),u=c.createElement("div");u.appendChild(o.serializeFragment(r,{document:c}));let f=u.firstChild,p,m=0;for(;f&&f.nodeType==1&&(p=tS[f.nodeName.toLowerCase()]);){for(let y=p.length-1;y>=0;y--){let v=c.createElement(p[y]);for(;u.firstChild;)v.appendChild(u.firstChild);u.appendChild(v),m++}f=u.firstChild}f&&f.nodeType==1&&f.setAttribute("data-pm-slice",`${s} ${i}${m?` -${m}`:""} ${JSON.stringify(n)}`);let x=t.someProp("clipboardTextSerializer",y=>y(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:u,text:x,slice:e}}function Qj(t,e,n,r,s){let i=s.parent.type.spec.code,o,c;if(!n&&!e)return null;let u=!!e&&(r||i||!n);if(u){if(t.someProp("transformPastedText",x=>{e=x(e,i||r,t)}),i)return c=new we(ae.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),t.someProp("transformPasted",x=>{c=x(c,t,!0)}),c;let m=t.someProp("clipboardTextParser",x=>x(e,s,r,t));if(m)c=m;else{let x=s.marks(),{schema:y}=t.state,v=Fo.fromSchema(y);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(k=>{let w=o.appendChild(document.createElement("p"));k&&w.appendChild(v.serializeNode(y.text(k,x)))})}}else t.someProp("transformPastedHTML",m=>{n=m(n,t)}),o=sP(n),Bc&&iP(o);let f=o&&o.querySelector("[data-pm-slice]"),p=f&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(f.getAttribute("data-pm-slice")||"");if(p&&p[3])for(let m=+p[3];m>0;m--){let x=o.firstChild;for(;x&&x.nodeType!=1;)x=x.nextSibling;if(!x)break;o=x}if(c||(c=(t.someProp("clipboardParser")||t.someProp("domParser")||Di.fromSchema(t.state.schema)).parseSlice(o,{preserveWhitespace:!!(u||p),context:s,ruleFromNode(x){return x.nodeName=="BR"&&!x.nextSibling&&x.parentNode&&!tP.test(x.parentNode.nodeName)?{ignore:!0}:null}})),p)c=oP(X1(c,+p[1],+p[2]),p[4]);else if(c=we.maxOpen(nP(c.content,s),!0),c.openStart||c.openEnd){let m=0,x=0;for(let y=c.content.firstChild;m<c.openStart&&!y.type.spec.isolating;m++,y=y.firstChild);for(let y=c.content.lastChild;x<c.openEnd&&!y.type.spec.isolating;x++,y=y.lastChild);c=X1(c,m,x)}return t.someProp("transformPasted",m=>{c=m(c,t,u)}),c}const tP=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function nP(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let s=e.node(n).contentMatchAt(e.index(n)),i,o=[];if(t.forEach(c=>{if(!o)return;let u=s.findWrapping(c.type),f;if(!u)return o=null;if(f=o.length&&i.length&&Xj(u,i,c,o[o.length-1],0))o[o.length-1]=f;else{o.length&&(o[o.length-1]=eS(o[o.length-1],i.length));let p=Yj(c,u);o.push(p),s=s.matchType(p.type),i=u}}),o)return ae.from(o)}return t}function Yj(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,ae.from(t));return t}function Xj(t,e,n,r,s){if(s<t.length&&s<e.length&&t[s]==e[s]){let i=Xj(t,e,n,r.lastChild,s+1);if(i)return r.copy(r.content.replaceChild(r.childCount-1,i));if(r.contentMatchAt(r.childCount).matchType(s==t.length-1?n.type:t[s+1]))return r.copy(r.content.append(ae.from(Yj(n,t,s+1))))}}function eS(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,eS(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(ae.empty,!0);return t.copy(n.append(r))}function Sg(t,e,n,r,s,i){let o=e<0?t.firstChild:t.lastChild,c=o.content;return t.childCount>1&&(i=0),s<r-1&&(c=Sg(c,e,n,r,s+1,i)),s>=n&&(c=e<0?o.contentMatchAt(0).fillBefore(c,i<=s).append(c):c.append(o.contentMatchAt(o.childCount).fillBefore(ae.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,o.copy(c))}function X1(t,e,n){return e<t.openStart&&(t=new we(Sg(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new we(Sg(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const tS={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let ew=null;function nS(){return ew||(ew=document.implementation.createHTMLDocument("title"))}let vm=null;function rP(t){let e=window.trustedTypes;return e?(vm||(vm=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),vm.createHTML(t)):t}function sP(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=nS().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),s;if((s=r&&tS[r[1].toLowerCase()])&&(t=s.map(i=>"<"+i+">").join("")+t+s.map(i=>"</"+i+">").reverse().join("")),n.innerHTML=rP(t),s)for(let i=0;i<s.length;i++)n=n.querySelector(s[i])||n;return n}function iP(t){let e=t.querySelectorAll(kn?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function oP(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:s,openStart:i,openEnd:o}=t;for(let c=r.length-2;c>=0;c-=2){let u=n.nodes[r[c]];if(!u||u.hasRequiredAttrs())break;s=ae.from(u.create(r[c+1],s)),i++,o++}return new we(s,i,o)}const Hn={},Wn={},aP={touchstart:!0,touchmove:!0};class lP{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.badSafariComposition=!1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function cP(t){for(let e in Hn){let n=Hn[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{uP(t,r)&&!H0(t,r)&&(t.editable||!(r.type in Wn))&&n(t,r)},aP[e]?{passive:!0}:void 0)}Pn&&t.dom.addEventListener("input",()=>null),Cg(t)}function Pi(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function dP(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function Cg(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>H0(t,r))})}function H0(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function uP(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function fP(t,e){!H0(t,e)&&Hn[e.type]&&(t.editable||!(e.type in Wn))&&Hn[e.type](t,e)}Wn.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!sS(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!($s&&kn&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),Da&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",s=>s(t,uo(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||eP(t,n)?n.preventDefault():Pi(t,"key")};Wn.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};Wn.keypress=(t,e)=>{let n=e;if(sS(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||Mr&&n.metaKey)return;if(t.someProp("handleKeyPress",s=>s(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof He)||!r.$from.sameParent(r.$to)){let s=String.fromCharCode(n.charCode),i=()=>t.state.tr.insertText(s).scrollIntoView();!/[\r\n]/.test(s)&&!t.someProp("handleTextInput",o=>o(t,r.$from.pos,r.$to.pos,s,i))&&t.dispatch(i()),n.preventDefault()}};function th(t){return{left:t.clientX,top:t.clientY}}function hP(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function W0(t,e,n,r,s){if(r==-1)return!1;let i=t.state.doc.resolve(r);for(let o=i.depth+1;o>0;o--)if(t.someProp(e,c=>o>i.depth?c(t,n,i.nodeAfter,i.before(o),s,!0):c(t,n,i.node(o),i.before(o),s,!1)))return!0;return!1}function Ta(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function pP(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&Be.isSelectable(r)?(Ta(t,new Be(n)),!0):!1}function mP(t,e){if(e==-1)return!1;let n=t.state.selection,r,s;n instanceof Be&&(r=n.node);let i=t.state.doc.resolve(e);for(let o=i.depth+1;o>0;o--){let c=o>i.depth?i.nodeAfter:i.node(o);if(Be.isSelectable(c)){r&&n.$from.depth>0&&o>=n.$from.depth&&i.before(n.$from.depth+1)==n.$from.pos?s=i.before(n.$from.depth):s=i.before(o);break}}return s!=null?(Ta(t,Be.create(t.state.doc,s)),!0):!1}function gP(t,e,n,r,s){return W0(t,"handleClickOn",e,n,r)||t.someProp("handleClick",i=>i(t,e,r))||(s?mP(t,n):pP(t,n))}function xP(t,e,n,r){return W0(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",s=>s(t,e,r))}function yP(t,e,n,r){return W0(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",s=>s(t,e,r))||vP(t,n,r)}function vP(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(Ta(t,He.create(r,0,r.content.size)),!0):!1;let s=r.resolve(e);for(let i=s.depth+1;i>0;i--){let o=i>s.depth?s.nodeAfter:s.node(i),c=s.before(i);if(o.inlineContent)Ta(t,He.create(r,c+1,c+1+o.content.size));else if(Be.isSelectable(o))Ta(t,Be.create(r,c));else continue;return!0}}function q0(t){return nf(t)}const rS=Mr?"metaKey":"ctrlKey";Hn.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=q0(t),s=Date.now(),i="singleClick";s-t.input.lastClick.time<500&&hP(n,t.input.lastClick)&&!n[rS]&&t.input.lastClick.button==n.button&&(t.input.lastClick.type=="singleClick"?i="doubleClick":t.input.lastClick.type=="doubleClick"&&(i="tripleClick")),t.input.lastClick={time:s,x:n.clientX,y:n.clientY,type:i,button:n.button};let o=t.posAtCoords(th(n));o&&(i=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new bP(t,o,n,!!r)):(i=="doubleClick"?xP:yP)(t,o.pos,o.inside,n)?n.preventDefault():Pi(t,"pointer"))};class bP{constructor(e,n,r,s){this.view=e,this.pos=n,this.event=r,this.flushed=s,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[rS],this.allowDefault=r.shiftKey;let i,o;if(n.inside>-1)i=e.state.doc.nodeAt(n.inside),o=n.inside;else{let p=e.state.doc.resolve(n.pos);i=p.parent,o=p.depth?p.before():0}const c=s?null:r.target,u=c?e.docView.nearestDesc(c,!0):null;this.target=u&&u.nodeDOM.nodeType==1?u.nodeDOM:null;let{selection:f}=e.state;(r.button==0&&i.type.spec.draggable&&i.type.spec.selectable!==!1||f instanceof Be&&f.from<=o&&f.to>o)&&(this.mightDrag={node:i,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Or&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Pi(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Hs(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(th(e))),this.updateAllowDefault(e),this.allowDefault||!n?Pi(this.view,"pointer"):gP(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Pn&&this.mightDrag&&!this.mightDrag.node.isAtom||kn&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Ta(this.view,Ke.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):Pi(this.view,"pointer")}move(e){this.updateAllowDefault(e),Pi(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Hn.touchstart=t=>{t.input.lastTouch=Date.now(),q0(t),Pi(t,"pointer")};Hn.touchmove=t=>{t.input.lastTouch=Date.now(),Pi(t,"pointer")};Hn.contextmenu=t=>q0(t);function sS(t,e){return t.composing?!0:Pn&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const wP=$s?5e3:-1;Wn.compositionstart=Wn.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof He&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)||kn&&Ij&&kP(t)))t.markCursor=t.state.storedMarks||n.marks(),nf(t,!0),t.markCursor=null;else if(nf(t,!e.selection.empty),Or&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let s=r.focusNode,i=r.focusOffset;s&&s.nodeType==1&&i!=0;){let o=i<0?s.lastChild:s.childNodes[i-1];if(!o)break;if(o.nodeType==3){let c=t.domSelection();c&&c.collapse(o,o.nodeValue.length);break}else s=o,i=-1}}t.input.composing=!0}iS(t,wP)};function kP(t){let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(!e||e.nodeType!=1||n>=e.childNodes.length)return!1;let r=e.childNodes[n];return r.nodeType==1&&r.contentEditable=="false"}Wn.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.badSafariComposition?t.domObserver.forceFlush():t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,iS(t,20))};function iS(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>nf(t),e))}function oS(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=jP());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function NP(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=m_(e.focusNode,e.focusOffset),r=g_(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let s=r.pmViewDesc,i=t.domObserver.lastChangedTextNode;if(n==i||r==i)return i;if(!s||!s.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let o=n.pmViewDesc;if(!(!o||!o.isText(n.nodeValue)))return r}}return n||r}function jP(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function nf(t,e=!1){if(!($s&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),oS(t),e||t.docView&&t.docView.dirty){let n=$0(t),r=t.state.selection;return n&&!n.eq(r)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function SP(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),s=document.createRange();s.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(s),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const wc=ir&&Li<15||Da&&b_<604;Hn.copy=Wn.cut=(t,e)=>{let n=e,r=t.state.selection,s=n.type=="cut";if(r.empty)return;let i=wc?null:n.clipboardData,o=r.content(),{dom:c,text:u}=U0(t,o);i?(n.preventDefault(),i.clearData(),i.setData("text/html",c.innerHTML),i.setData("text/plain",u)):SP(t,c),s&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function CP(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function EP(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let s=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?kc(t,r.value,null,s,e):kc(t,r.textContent,r.innerHTML,s,e)},50)}function kc(t,e,n,r,s){let i=Qj(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",u=>u(t,s,i||we.empty)))return!0;if(!i)return!1;let o=CP(i),c=o?t.state.tr.replaceSelectionWith(o,r):t.state.tr.replaceSelection(i);return t.dispatch(c.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function aS(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Wn.paste=(t,e)=>{let n=e;if(t.composing&&!$s)return;let r=wc?null:n.clipboardData,s=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&kc(t,aS(r),r.getData("text/html"),s,n)?n.preventDefault():EP(t,n)};class lS{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const TP=Mr?"altKey":"ctrlKey";function cS(t,e){let n=t.someProp("dragCopies",r=>!r(e));return n??!e[TP]}Hn.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let s=t.state.selection,i=s.empty?null:t.posAtCoords(th(n)),o;if(!(i&&i.pos>=s.from&&i.pos<=(s instanceof Be?s.to-1:s.to))){if(r&&r.mightDrag)o=Be.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let m=t.docView.nearestDesc(n.target,!0);m&&m.node.type.spec.draggable&&m!=t.docView&&(o=Be.create(t.state.doc,m.posBefore))}}let c=(o||t.state.selection).content(),{dom:u,text:f,slice:p}=U0(t,c);(!n.dataTransfer.files.length||!kn||Pj>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(wc?"Text":"text/html",u.innerHTML),n.dataTransfer.effectAllowed="copyMove",wc||n.dataTransfer.setData("text/plain",f),t.dragging=new lS(p,cS(t,n),o)};Hn.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};Wn.dragover=Wn.dragenter=(t,e)=>e.preventDefault();Wn.drop=(t,e)=>{try{AP(t,e,t.dragging)}finally{t.dragging=null}};function AP(t,e,n){if(!e.dataTransfer)return;let r=t.posAtCoords(th(e));if(!r)return;let s=t.state.doc.resolve(r.pos),i=n&&n.slice;i?t.someProp("transformPasted",y=>{i=y(i,t,!1)}):i=Qj(t,aS(e.dataTransfer),wc?null:e.dataTransfer.getData("text/html"),!1,s);let o=!!(n&&cS(t,e));if(t.someProp("handleDrop",y=>y(t,e,i||we.empty,o))){e.preventDefault();return}if(!i)return;e.preventDefault();let c=i?hj(t.state.doc,s.pos,i):s.pos;c==null&&(c=s.pos);let u=t.state.tr;if(o){let{node:y}=n;y?y.replace(u):u.deleteSelection()}let f=u.mapping.map(c),p=i.openStart==0&&i.openEnd==0&&i.content.childCount==1,m=u.doc;if(p?u.replaceRangeWith(f,f,i.content.firstChild):u.replaceRange(f,f,i),u.doc.eq(m))return;let x=u.doc.resolve(f);if(p&&Be.isSelectable(i.content.firstChild)&&x.nodeAfter&&x.nodeAfter.sameMarkup(i.content.firstChild))u.setSelection(new Be(x));else{let y=u.mapping.map(c);u.mapping.maps[u.mapping.maps.length-1].forEach((v,k,w,j)=>y=j),u.setSelection(V0(t,x,u.doc.resolve(y)))}t.focus(),t.dispatch(u.setMeta("uiEvent","drop"))}Hn.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&Hs(t)},20))};Hn.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};Hn.beforeinput=(t,e)=>{if(kn&&$s&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",i=>i(t,uo(8,"Backspace")))))return;let{$cursor:s}=t.state.selection;s&&s.pos>0&&t.dispatch(t.state.tr.delete(s.pos-1,s.pos).scrollIntoView())},50)}};for(let t in Wn)Hn[t]=Wn[t];function Nc(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class rf{constructor(e,n){this.toDOM=e,this.spec=n||No,this.side=this.spec.side||0}map(e,n,r,s){let{pos:i,deleted:o}=e.mapResult(n.from+s,this.side<0?-1:1);return o?null:new hn(i-r,i-r,this)}valid(){return!0}eq(e){return this==e||e instanceof rf&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Nc(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Bi{constructor(e,n){this.attrs=e,this.spec=n||No}map(e,n,r,s){let i=e.map(n.from+s,this.spec.inclusiveStart?-1:1)-r,o=e.map(n.to+s,this.spec.inclusiveEnd?1:-1)-r;return i>=o?null:new hn(i,o,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof Bi&&Nc(this.attrs,e.attrs)&&Nc(this.spec,e.spec)}static is(e){return e.type instanceof Bi}destroy(){}}class K0{constructor(e,n){this.attrs=e,this.spec=n||No}map(e,n,r,s){let i=e.mapResult(n.from+s,1);if(i.deleted)return null;let o=e.mapResult(n.to+s,-1);return o.deleted||o.pos<=i.pos?null:new hn(i.pos-r,o.pos-r,this)}valid(e,n){let{index:r,offset:s}=e.content.findIndex(n.from),i;return s==n.from&&!(i=e.child(r)).isText&&s+i.nodeSize==n.to}eq(e){return this==e||e instanceof K0&&Nc(this.attrs,e.attrs)&&Nc(this.spec,e.spec)}destroy(){}}class hn{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new hn(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new hn(e,e,new rf(n,r))}static inline(e,n,r,s){return new hn(e,n,new Bi(r,s))}static node(e,n,r,s){return new hn(e,n,new K0(r,s))}get spec(){return this.type.spec}get inline(){return this.type instanceof Bi}get widget(){return this.type instanceof rf}}const ba=[],No={};class xt{constructor(e,n){this.local=e.length?e:ba,this.children=n.length?n:ba}static create(e,n){return n.length?sf(n,e,0,No):En}find(e,n,r){let s=[];return this.findInner(e??0,n??1e9,s,0,r),s}findInner(e,n,r,s,i){for(let o=0;o<this.local.length;o++){let c=this.local[o];c.from<=n&&c.to>=e&&(!i||i(c.spec))&&r.push(c.copy(c.from+s,c.to+s))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<n&&this.children[o+1]>e){let c=this.children[o]+1;this.children[o+2].findInner(e-c,n-c,r,s+c,i)}}map(e,n,r){return this==En||e.maps.length==0?this:this.mapInner(e,n,0,0,r||No)}mapInner(e,n,r,s,i){let o;for(let c=0;c<this.local.length;c++){let u=this.local[c].map(e,r,s);u&&u.type.valid(n,u)?(o||(o=[])).push(u):i.onRemove&&i.onRemove(this.local[c].spec)}return this.children.length?MP(this.children,o||[],e,n,r,s,i):o?new xt(o.sort(jo),ba):En}add(e,n){return n.length?this==En?xt.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let s,i=0;e.forEach((c,u)=>{let f=u+r,p;if(p=uS(n,c,f)){for(s||(s=this.children.slice());i<s.length&&s[i]<u;)i+=3;s[i]==u?s[i+2]=s[i+2].addInner(c,p,f+1):s.splice(i,0,u,u+c.nodeSize,sf(p,c,f+1,No)),i+=3}});let o=dS(i?fS(n):n,-r);for(let c=0;c<o.length;c++)o[c].type.valid(e,o[c])||o.splice(c--,1);return new xt(o.length?this.local.concat(o).sort(jo):this.local,s||this.children)}remove(e){return e.length==0||this==En?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,s=this.local;for(let i=0;i<r.length;i+=3){let o,c=r[i]+n,u=r[i+1]+n;for(let p=0,m;p<e.length;p++)(m=e[p])&&m.from>c&&m.to<u&&(e[p]=null,(o||(o=[])).push(m));if(!o)continue;r==this.children&&(r=this.children.slice());let f=r[i+2].removeInner(o,c+1);f!=En?r[i+2]=f:(r.splice(i,3),i-=3)}if(s.length){for(let i=0,o;i<e.length;i++)if(o=e[i])for(let c=0;c<s.length;c++)s[c].eq(o,n)&&(s==this.local&&(s=this.local.slice()),s.splice(c--,1))}return r==this.children&&s==this.local?this:s.length||r.length?new xt(s,r):En}forChild(e,n){if(this==En)return this;if(n.isLeaf)return xt.empty;let r,s;for(let c=0;c<this.children.length;c+=3)if(this.children[c]>=e){this.children[c]==e&&(r=this.children[c+2]);break}let i=e+1,o=i+n.content.size;for(let c=0;c<this.local.length;c++){let u=this.local[c];if(u.from<o&&u.to>i&&u.type instanceof Bi){let f=Math.max(i,u.from)-i,p=Math.min(o,u.to)-i;f<p&&(s||(s=[])).push(u.copy(f,p))}}if(s){let c=new xt(s.sort(jo),ba);return r?new Ti([c,r]):c}return r||En}eq(e){if(this==e)return!0;if(!(e instanceof xt)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return G0(this.localsInner(e))}localsInner(e){if(this==En)return ba;if(e.inlineContent||!this.local.some(Bi.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Bi||n.push(this.local[r]);return n}forEachSet(e){e(this)}}xt.empty=new xt([],[]);xt.removeOverlap=G0;const En=xt.empty;class Ti{constructor(e){this.members=e}map(e,n){const r=this.members.map(s=>s.map(e,n,No));return Ti.from(r)}forChild(e,n){if(n.isLeaf)return xt.empty;let r=[];for(let s=0;s<this.members.length;s++){let i=this.members[s].forChild(e,n);i!=En&&(i instanceof Ti?r=r.concat(i.members):r.push(i))}return Ti.from(r)}eq(e){if(!(e instanceof Ti)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let s=0;s<this.members.length;s++){let i=this.members[s].localsInner(e);if(i.length)if(!n)n=i;else{r&&(n=n.slice(),r=!1);for(let o=0;o<i.length;o++)n.push(i[o])}}return n?G0(r?n:n.sort(jo)):ba}static from(e){switch(e.length){case 0:return En;case 1:return e[0];default:return new Ti(e.every(n=>n instanceof xt)?e:e.reduce((n,r)=>n.concat(r instanceof xt?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function MP(t,e,n,r,s,i,o){let c=t.slice();for(let f=0,p=i;f<n.maps.length;f++){let m=0;n.maps[f].forEach((x,y,v,k)=>{let w=k-v-(y-x);for(let j=0;j<c.length;j+=3){let C=c[j+1];if(C<0||x>C+p-m)continue;let T=c[j]+p-m;y>=T?c[j+1]=x<=T?-2:-1:x>=p&&w&&(c[j]+=w,c[j+1]+=w)}m+=w}),p=n.maps[f].map(p,-1)}let u=!1;for(let f=0;f<c.length;f+=3)if(c[f+1]<0){if(c[f+1]==-2){u=!0,c[f+1]=-1;continue}let p=n.map(t[f]+i),m=p-s;if(m<0||m>=r.content.size){u=!0;continue}let x=n.map(t[f+1]+i,-1),y=x-s,{index:v,offset:k}=r.content.findIndex(m),w=r.maybeChild(v);if(w&&k==m&&k+w.nodeSize==y){let j=c[f+2].mapInner(n,w,p+1,t[f]+i+1,o);j!=En?(c[f]=m,c[f+1]=y,c[f+2]=j):(c[f+1]=-2,u=!0)}else u=!0}if(u){let f=RP(c,t,e,n,s,i,o),p=sf(f,r,0,o);e=p.local;for(let m=0;m<c.length;m+=3)c[m+1]<0&&(c.splice(m,3),m-=3);for(let m=0,x=0;m<p.children.length;m+=3){let y=p.children[m];for(;x<c.length&&c[x]<y;)x+=3;c.splice(x,0,p.children[m],p.children[m+1],p.children[m+2])}}return new xt(e.sort(jo),c)}function dS(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let s=t[r];n.push(new hn(s.from+e,s.to+e,s.type))}return n}function RP(t,e,n,r,s,i,o){function c(u,f){for(let p=0;p<u.local.length;p++){let m=u.local[p].map(r,s,f);m?n.push(m):o.onRemove&&o.onRemove(u.local[p].spec)}for(let p=0;p<u.children.length;p+=3)c(u.children[p+2],u.children[p]+f+1)}for(let u=0;u<t.length;u+=3)t[u+1]==-1&&c(t[u+2],e[u]+i+1);return n}function uS(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,s=null;for(let i=0,o;i<t.length;i++)(o=t[i])&&o.from>n&&o.to<r&&((s||(s=[])).push(o),t[i]=null);return s}function fS(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function sf(t,e,n,r){let s=[],i=!1;e.forEach((c,u)=>{let f=uS(t,c,u+n);if(f){i=!0;let p=sf(f,c,n+u+1,r);p!=En&&s.push(u,u+c.nodeSize,p)}});let o=dS(i?fS(t):t,-n).sort(jo);for(let c=0;c<o.length;c++)o[c].type.valid(e,o[c])||(r.onRemove&&r.onRemove(o[c].spec),o.splice(c--,1));return o.length||s.length?new xt(o,s):En}function jo(t,e){return t.from-e.from||t.to-e.to}function G0(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let s=n+1;s<e.length;s++){let i=e[s];if(i.from==r.from){i.to!=r.to&&(e==t&&(e=t.slice()),e[s]=i.copy(i.from,r.to),tw(e,s+1,i.copy(r.to,i.to)));continue}else{i.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,i.from),tw(e,s,r.copy(i.from,r.to)));break}}}return e}function tw(t,e,n){for(;e<t.length&&jo(n,t[e])>0;)e++;t.splice(e,0,n)}function bm(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=En&&e.push(r)}),t.cursorWrapper&&e.push(xt.create(t.state.doc,[t.cursorWrapper.deco])),Ti.from(e)}const OP={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},_P=ir&&Li<=11;class PP{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class IP{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new PP,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let s=0;s<r.length;s++)this.queue.push(r[s]);ir&&Li<=11&&r.some(s=>s.type=="childList"&&s.removedNodes.length||s.type=="characterData"&&s.oldValue.length>s.target.nodeValue.length)?this.flushSoon():Pn&&e.composing&&r.some(s=>s.type=="childList"&&s.target.nodeName=="TR")?(e.input.badSafariComposition=!0,this.flushSoon()):this.flush()}),_P&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,OP)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(K1(this.view)){if(this.suppressingSelectionUpdates)return Hs(this.view);if(ir&&Li<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Po(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let i=e.focusNode;i;i=Ia(i))n.add(i);for(let i=e.anchorNode;i;i=Ia(i))if(n.has(i)){r=i;break}let s=r&&this.view.docView.nearestDesc(r);if(s&&s.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),s=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&K1(e)&&!this.ignoreSelectionChange(r),i=-1,o=-1,c=!1,u=[];if(e.editable)for(let p=0;p<n.length;p++){let m=this.registerMutation(n[p],u);m&&(i=i<0?m.from:Math.min(m.from,i),o=o<0?m.to:Math.max(m.to,o),m.typeOver&&(c=!0))}if(u.some(p=>p.nodeName=="BR")&&(e.input.lastKeyCode==8||e.input.lastKeyCode==46)){for(let p of u)if(p.nodeName=="BR"&&p.parentNode){let m=p.nextSibling;m&&m.nodeType==1&&m.contentEditable=="false"&&p.parentNode.removeChild(p)}}else if(Or&&u.length){let p=u.filter(m=>m.nodeName=="BR");if(p.length==2){let[m,x]=p;m.parentNode&&m.parentNode.parentNode==x.parentNode?x.remove():m.remove()}else{let{focusNode:m}=this.currentSelection;for(let x of p){let y=x.parentNode;y&&y.nodeName=="LI"&&(!m||zP(e,m)!=y)&&x.remove()}}}let f=null;i<0&&s&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Xf(r)&&(f=$0(e))&&f.eq(Ke.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Hs(e),this.currentSelection.set(r),e.scrollToSelection()):(i>-1||s)&&(i>-1&&(e.docView.markDirty(i,o),DP(e)),e.input.badSafariComposition&&(e.input.badSafariComposition=!1,BP(e,u)),this.handleDOMChange(i,o,c,u),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Hs(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let p=0;p<e.addedNodes.length;p++){let m=e.addedNodes[p];n.push(m),m.nodeType==3&&(this.lastChangedTextNode=m)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let s=e.previousSibling,i=e.nextSibling;if(ir&&Li<=11&&e.addedNodes.length)for(let p=0;p<e.addedNodes.length;p++){let{previousSibling:m,nextSibling:x}=e.addedNodes[p];(!m||Array.prototype.indexOf.call(e.addedNodes,m)<0)&&(s=m),(!x||Array.prototype.indexOf.call(e.addedNodes,x)<0)&&(i=x)}let o=s&&s.parentNode==e.target?bn(s)+1:0,c=r.localPosFromDOM(e.target,o,-1),u=i&&i.parentNode==e.target?bn(i):e.target.childNodes.length,f=r.localPosFromDOM(e.target,u,1);return{from:c,to:f}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let nw=new WeakMap,rw=!1;function DP(t){if(!nw.has(t)&&(nw.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=Or,rw)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),rw=!0}}function sw(t,e){let n=e.startContainer,r=e.startOffset,s=e.endContainer,i=e.endOffset,o=t.domAtPos(t.state.selection.anchor);return Po(o.node,o.offset,s,i)&&([n,r,s,i]=[s,i,n,r]),{anchorNode:n,anchorOffset:r,focusNode:s,focusOffset:i}}function LP(t,e){if(e.getComposedRanges){let s=e.getComposedRanges(t.root)[0];if(s)return sw(t,s)}let n;function r(s){s.preventDefault(),s.stopImmediatePropagation(),n=s.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?sw(t,n):null}function zP(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function BP(t,e){var n;let{focusNode:r,focusOffset:s}=t.domSelectionRange();for(let i of e)if(((n=i.parentNode)===null||n===void 0?void 0:n.nodeName)=="TR"){let o=i.nextSibling;for(;o&&o.nodeName!="TD"&&o.nodeName!="TH";)o=o.nextSibling;if(o){let c=o;for(;;){let u=c.firstChild;if(!u||u.nodeType!=1||u.contentEditable=="false"||/^(BR|IMG)$/.test(u.nodeName))break;c=u}c.insertBefore(i,c.firstChild),r==i&&t.domSelection().collapse(i,s)}else i.parentNode.removeChild(i)}}function FP(t,e,n){let{node:r,fromOffset:s,toOffset:i,from:o,to:c}=t.docView.parseRange(e,n),u=t.domSelectionRange(),f,p=u.anchorNode;if(p&&t.dom.contains(p.nodeType==1?p:p.parentNode)&&(f=[{node:p,offset:u.anchorOffset}],Xf(u)||f.push({node:u.focusNode,offset:u.focusOffset})),kn&&t.input.lastKeyCode===8)for(let w=i;w>s;w--){let j=r.childNodes[w-1],C=j.pmViewDesc;if(j.nodeName=="BR"&&!C){i=w;break}if(!C||C.size)break}let m=t.state.doc,x=t.someProp("domParser")||Di.fromSchema(t.state.schema),y=m.resolve(o),v=null,k=x.parse(r,{topNode:y.parent,topMatch:y.parent.contentMatchAt(y.index()),topOpen:!0,from:s,to:i,preserveWhitespace:y.parent.type.whitespace=="pre"?"full":!0,findPositions:f,ruleFromNode:$P,context:y});if(f&&f[0].pos!=null){let w=f[0].pos,j=f[1]&&f[1].pos;j==null&&(j=w),v={anchor:w+o,head:j+o}}return{doc:k,sel:v,from:o,to:c}}function $P(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(Pn&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||Pn&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const VP=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function UP(t,e,n,r,s){let i=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let F=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,ne=$0(t,F);if(ne&&!t.state.selection.eq(ne)){if(kn&&$s&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",X=>X(t,uo(13,"Enter"))))return;let O=t.state.tr.setSelection(ne);F=="pointer"?O.setMeta("pointer",!0):F=="key"&&O.scrollIntoView(),i&&O.setMeta("composition",i),t.dispatch(O)}return}let o=t.state.doc.resolve(e),c=o.sharedDepth(n);e=o.before(c+1),n=t.state.doc.resolve(n).after(c+1);let u=t.state.selection,f=FP(t,e,n),p=t.state.doc,m=p.slice(f.from,f.to),x,y;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(x=t.state.selection.to,y="end"):(x=t.state.selection.from,y="start"),t.input.lastKeyCode=null;let v=qP(m.content,f.doc.content,f.from,x,y);if(v&&t.input.domChangeCount++,(Da&&t.input.lastIOSEnter>Date.now()-225||$s)&&s.some(F=>F.nodeType==1&&!VP.test(F.nodeName))&&(!v||v.endA>=v.endB)&&t.someProp("handleKeyDown",F=>F(t,uo(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!v)if(r&&u instanceof He&&!u.empty&&u.$head.sameParent(u.$anchor)&&!t.composing&&!(f.sel&&f.sel.anchor!=f.sel.head))v={start:u.from,endA:u.to,endB:u.to};else{if(f.sel){let F=iw(t,t.state.doc,f.sel);if(F&&!F.eq(t.state.selection)){let ne=t.state.tr.setSelection(F);i&&ne.setMeta("composition",i),t.dispatch(ne)}}return}t.state.selection.from<t.state.selection.to&&v.start==v.endB&&t.state.selection instanceof He&&(v.start>t.state.selection.from&&v.start<=t.state.selection.from+2&&t.state.selection.from>=f.from?v.start=t.state.selection.from:v.endA<t.state.selection.to&&v.endA>=t.state.selection.to-2&&t.state.selection.to<=f.to&&(v.endB+=t.state.selection.to-v.endA,v.endA=t.state.selection.to)),ir&&Li<=11&&v.endB==v.start+1&&v.endA==v.start&&v.start>f.from&&f.doc.textBetween(v.start-f.from-1,v.start-f.from+1)==" "&&(v.start--,v.endA--,v.endB--);let k=f.doc.resolveNoCache(v.start-f.from),w=f.doc.resolveNoCache(v.endB-f.from),j=p.resolve(v.start),C=k.sameParent(w)&&k.parent.inlineContent&&j.end()>=v.endA;if((Da&&t.input.lastIOSEnter>Date.now()-225&&(!C||s.some(F=>F.nodeName=="DIV"||F.nodeName=="P"))||!C&&k.pos<f.doc.content.size&&(!k.sameParent(w)||!k.parent.inlineContent)&&k.pos<w.pos&&!/\S/.test(f.doc.textBetween(k.pos,w.pos,"","")))&&t.someProp("handleKeyDown",F=>F(t,uo(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>v.start&&WP(p,v.start,v.endA,k,w)&&t.someProp("handleKeyDown",F=>F(t,uo(8,"Backspace")))){$s&&kn&&t.domObserver.suppressSelectionUpdates();return}kn&&v.endB==v.start&&(t.input.lastChromeDelete=Date.now()),$s&&!C&&k.start()!=w.start()&&w.parentOffset==0&&k.depth==w.depth&&f.sel&&f.sel.anchor==f.sel.head&&f.sel.head==v.endA&&(v.endB-=2,w=f.doc.resolveNoCache(v.endB-f.from),setTimeout(()=>{t.someProp("handleKeyDown",function(F){return F(t,uo(13,"Enter"))})},20));let T=v.start,A=v.endA,M=F=>{let ne=F||t.state.tr.replace(T,A,f.doc.slice(v.start-f.from,v.endB-f.from));if(f.sel){let O=iw(t,ne.doc,f.sel);O&&!(kn&&t.composing&&O.empty&&(v.start!=v.endB||t.input.lastChromeDelete<Date.now()-100)&&(O.head==T||O.head==ne.mapping.map(A)-1)||ir&&O.empty&&O.head==T)&&ne.setSelection(O)}return i&&ne.setMeta("composition",i),ne.scrollIntoView()},P;if(C)if(k.pos==w.pos){ir&&Li<=11&&k.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>Hs(t),20));let F=M(t.state.tr.delete(T,A)),ne=p.resolve(v.start).marksAcross(p.resolve(v.endA));ne&&F.ensureMarks(ne),t.dispatch(F)}else if(v.endA==v.endB&&(P=HP(k.parent.content.cut(k.parentOffset,w.parentOffset),j.parent.content.cut(j.parentOffset,v.endA-j.start())))){let F=M(t.state.tr);P.type=="add"?F.addMark(T,A,P.mark):F.removeMark(T,A,P.mark),t.dispatch(F)}else if(k.parent.child(k.index()).isText&&k.index()==w.index()-(w.textOffset?0:1)){let F=k.parent.textBetween(k.parentOffset,w.parentOffset),ne=()=>M(t.state.tr.insertText(F,T,A));t.someProp("handleTextInput",O=>O(t,T,A,F,ne))||t.dispatch(ne())}else t.dispatch(M());else t.dispatch(M())}function iw(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:V0(t,e.resolve(n.anchor),e.resolve(n.head))}function HP(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,s=n,i=r,o,c,u;for(let p=0;p<r.length;p++)s=r[p].removeFromSet(s);for(let p=0;p<n.length;p++)i=n[p].removeFromSet(i);if(s.length==1&&i.length==0)c=s[0],o="add",u=p=>p.mark(c.addToSet(p.marks));else if(s.length==0&&i.length==1)c=i[0],o="remove",u=p=>p.mark(c.removeFromSet(p.marks));else return null;let f=[];for(let p=0;p<e.childCount;p++)f.push(u(e.child(p)));if(ae.from(f).eq(t))return{mark:c,type:o}}function WP(t,e,n,r,s){if(n-e<=s.pos-r.pos||wm(r,!0,!1)<s.pos)return!1;let i=t.resolve(e);if(!r.parent.isTextblock){let c=i.nodeAfter;return c!=null&&n==e+c.nodeSize}if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;let o=t.resolve(wm(i,!0,!0));return!o.parent.isTextblock||o.pos>n||wm(o,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function wm(t,e,n){let r=t.depth,s=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,s++,e=!1;if(n){let i=t.node(r).maybeChild(t.indexAfter(r));for(;i&&!i.isLeaf;)i=i.firstChild,s++}return s}function qP(t,e,n,r,s){let i=t.findDiffStart(e,n);if(i==null)return null;let{a:o,b:c}=t.findDiffEnd(e,n+t.size,n+e.size);if(s=="end"){let u=Math.max(0,i-Math.min(o,c));r-=o+u-i}if(o<i&&t.size<e.size){let u=r<=i&&r>=o?i-r:0;i-=u,i&&i<e.size&&ow(e.textBetween(i-1,i+1))&&(i+=u?1:-1),c=i+(c-o),o=i}else if(c<i){let u=r<=i&&r>=c?i-r:0;i-=u,i&&i<t.size&&ow(t.textBetween(i-1,i+1))&&(i+=u?1:-1),o=i+(o-c),c=i}return{start:i,endA:o,endB:c}}function ow(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class hS{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new lP,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(uw),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=cw(this),lw(this),this.nodeViews=dw(this),this.docView=$1(this.state.doc,aw(this),bm(this),this.dom,this),this.domObserver=new IP(this,(r,s,i,o)=>UP(this,r,s,i,o)),this.domObserver.start(),cP(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Cg(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(uw),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let s=this.state,i=!1,o=!1;e.storedMarks&&this.composing&&(oS(this),o=!0),this.state=e;let c=s.plugins!=e.plugins||this._props.plugins!=n.plugins;if(c||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let y=dw(this);GP(y,this.nodeViews)&&(this.nodeViews=y,i=!0)}(c||n.handleDOMEvents!=this._props.handleDOMEvents)&&Cg(this),this.editable=cw(this),lw(this);let u=bm(this),f=aw(this),p=s.plugins!=e.plugins&&!s.doc.eq(e.doc)?"reset":e.scrollToSelection>s.scrollToSelection?"to selection":"preserve",m=i||!this.docView.matchesNode(e.doc,f,u);(m||!e.selection.eq(s.selection))&&(o=!0);let x=p=="preserve"&&o&&this.dom.style.overflowAnchor==null&&N_(this);if(o){this.domObserver.stop();let y=m&&(ir||kn)&&!this.composing&&!s.selection.empty&&!e.selection.empty&&KP(s.selection,e.selection);if(m){let v=kn?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=NP(this)),(i||!this.docView.update(e.doc,f,u,this))&&(this.docView.updateOuterDeco(f),this.docView.destroy(),this.docView=$1(e.doc,f,u,this.dom,this)),v&&(!this.trackWrites||!this.dom.contains(this.trackWrites))&&(y=!0)}y||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&K_(this))?Hs(this,y):(Gj(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(s),!((r=this.dragging)===null||r===void 0)&&r.node&&!s.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,s),p=="reset"?this.dom.scrollTop=0:p=="to selection"?this.scrollToSelection():x&&j_(x)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof Be){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&I1(this,n.getBoundingClientRect(),e)}else I1(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,s=-1;if(this.state.doc.nodeAt(r.from)==r.node)s=r.from;else{let i=r.from+(this.state.doc.content.size-n.doc.content.size);(i>0&&this.state.doc.nodeAt(i))==r.node&&(s=i)}this.dragging=new lS(e.slice,e.move,s<0?void 0:Be.create(this.state.doc,s))}someProp(e,n){let r=this._props&&this._props[e],s;if(r!=null&&(s=n?n(r):r))return s;for(let o=0;o<this.directPlugins.length;o++){let c=this.directPlugins[o].props[e];if(c!=null&&(s=n?n(c):c))return s}let i=this.state.plugins;if(i)for(let o=0;o<i.length;o++){let c=i[o].props[e];if(c!=null&&(s=n?n(c):c))return s}}hasFocus(){if(ir){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&S_(this.dom),Hs(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return M_(this,e)}coordsAtPos(e,n=1){return Fj(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let s=this.docView.posFromDOM(e,n,r);if(s==null)throw new RangeError("DOM position not inside the editor");return s}endOfTextblock(e,n){return I_(this,n||this.state,e)}pasteHTML(e,n){return kc(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return kc(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return U0(this,e)}destroy(){this.docView&&(dP(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],bm(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,h_())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return fP(this,e)}domSelectionRange(){let e=this.domSelection();return e?Pn&&this.root.nodeType===11&&y_(this.dom.ownerDocument)==this.dom&&LP(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}hS.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function aw(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[hn.node(0,t.state.doc.content.size,e)]}function lw(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:hn.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function cw(t){return!t.someProp("editable",e=>e(t.state)===!1)}function KP(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function dw(t){let e=Object.create(null);function n(r){for(let s in r)Object.prototype.hasOwnProperty.call(e,s)||(e[s]=r[s])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function GP(t,e){let n=0,r=0;for(let s in t){if(t[s]!=e[s])return!0;n++}for(let s in e)r++;return n!=r}function uw(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Ui={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},of={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},JP=typeof navigator<"u"&&/Mac/.test(navigator.platform),ZP=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var wn=0;wn<10;wn++)Ui[48+wn]=Ui[96+wn]=String(wn);for(var wn=1;wn<=24;wn++)Ui[wn+111]="F"+wn;for(var wn=65;wn<=90;wn++)Ui[wn]=String.fromCharCode(wn+32),of[wn]=String.fromCharCode(wn);for(var km in Ui)of.hasOwnProperty(km)||(of[km]=Ui[km]);function QP(t){var e=JP&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||ZP&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?of:Ui)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const YP=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),XP=typeof navigator<"u"&&/Win/.test(navigator.platform);function e3(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,s,i,o;for(let c=0;c<e.length-1;c++){let u=e[c];if(/^(cmd|meta|m)$/i.test(u))o=!0;else if(/^a(lt)?$/i.test(u))r=!0;else if(/^(c|ctrl|control)$/i.test(u))s=!0;else if(/^s(hift)?$/i.test(u))i=!0;else if(/^mod$/i.test(u))YP?o=!0:s=!0;else throw new Error("Unrecognized modifier name: "+u)}return r&&(n="Alt-"+n),s&&(n="Ctrl-"+n),o&&(n="Meta-"+n),i&&(n="Shift-"+n),n}function t3(t){let e=Object.create(null);for(let n in t)e[e3(n)]=t[n];return e}function Nm(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function n3(t){return new Et({props:{handleKeyDown:J0(t)}})}function J0(t){let e=t3(t);return function(n,r){let s=QP(r),i,o=e[Nm(s,r)];if(o&&o(n.state,n.dispatch,n))return!0;if(s.length==1&&s!=" "){if(r.shiftKey){let c=e[Nm(s,r,!1)];if(c&&c(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(XP&&r.ctrlKey&&r.altKey)&&(i=Ui[r.keyCode])&&i!=s){let c=e[Nm(i,r)];if(c&&c(n.state,n.dispatch,n))return!0}}return!1}}var r3=Object.defineProperty,Z0=(t,e)=>{for(var n in e)r3(t,n,{get:e[n],enumerable:!0})};function nh(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:s}=n,{storedMarks:i}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return i},get selection(){return r},get doc(){return s},get tr(){return r=n.selection,s=n.doc,i=n.storedMarks,n}}}var rh=class{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:e,state:n}=this,{view:r}=e,{tr:s}=n,i=this.buildProps(s);return Object.fromEntries(Object.entries(t).map(([o,c])=>[o,(...f)=>{const p=c(...f)(i);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(s),p}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,e=!0){const{rawCommands:n,editor:r,state:s}=this,{view:i}=r,o=[],c=!!t,u=t||s.tr,f=()=>(!c&&e&&!u.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(u),o.every(m=>m===!0)),p={...Object.fromEntries(Object.entries(n).map(([m,x])=>[m,(...v)=>{const k=this.buildProps(u,e),w=x(...v)(k);return o.push(w),p}])),run:f};return p}createCan(t){const{rawCommands:e,state:n}=this,r=!1,s=t||n.tr,i=this.buildProps(s,r);return{...Object.fromEntries(Object.entries(e).map(([c,u])=>[c,(...f)=>u(...f)({...i,dispatch:void 0})])),chain:()=>this.createChain(s,r)}}buildProps(t,e=!0){const{rawCommands:n,editor:r,state:s}=this,{view:i}=r,o={tr:t,editor:r,view:i,state:nh({state:s,transaction:t}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t,e),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(n).map(([c,u])=>[c,(...f)=>u(...f)(o)]))}};return o}},pS={};Z0(pS,{blur:()=>s3,clearContent:()=>i3,clearNodes:()=>o3,command:()=>a3,createParagraphNear:()=>l3,cut:()=>c3,deleteCurrentNode:()=>d3,deleteNode:()=>u3,deleteRange:()=>f3,deleteSelection:()=>h3,enter:()=>p3,exitCode:()=>m3,extendMarkRange:()=>g3,first:()=>x3,focus:()=>v3,forEach:()=>b3,insertContent:()=>w3,insertContentAt:()=>j3,joinBackward:()=>E3,joinDown:()=>C3,joinForward:()=>T3,joinItemBackward:()=>A3,joinItemForward:()=>M3,joinTextblockBackward:()=>R3,joinTextblockForward:()=>O3,joinUp:()=>S3,keyboardShortcut:()=>P3,lift:()=>I3,liftEmptyBlock:()=>D3,liftListItem:()=>L3,newlineInCode:()=>z3,resetAttributes:()=>B3,scrollIntoView:()=>F3,selectAll:()=>$3,selectNodeBackward:()=>V3,selectNodeForward:()=>U3,selectParentNode:()=>H3,selectTextblockEnd:()=>W3,selectTextblockStart:()=>q3,setContent:()=>K3,setMark:()=>fI,setMeta:()=>hI,setNode:()=>pI,setNodeSelection:()=>mI,setTextDirection:()=>gI,setTextSelection:()=>xI,sinkListItem:()=>yI,splitBlock:()=>vI,splitListItem:()=>bI,toggleList:()=>wI,toggleMark:()=>kI,toggleNode:()=>NI,toggleWrap:()=>jI,undoInputRule:()=>SI,unsetAllMarks:()=>CI,unsetMark:()=>EI,unsetTextDirection:()=>TI,updateAttributes:()=>AI,wrapIn:()=>MI,wrapInList:()=>RI});var s3=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())==null||n.removeAllRanges())}),!0),i3=(t=!0)=>({commands:e})=>e.setContent("",{emitUpdate:t}),o3=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:s}=r;return n&&s.forEach(({$from:i,$to:o})=>{t.doc.nodesBetween(i.pos,o.pos,(c,u)=>{if(c.type.isText)return;const{doc:f,mapping:p}=e,m=f.resolve(p.map(u)),x=f.resolve(p.map(u+c.nodeSize)),y=m.blockRange(x);if(!y)return;const v=qa(y);if(c.type.isTextblock){const{defaultType:k}=m.parent.contentMatchAt(m.index());e.setNodeMarkup(y.start,k)}(v||v===0)&&e.lift(y,v)})}),!0},a3=t=>e=>t(e),l3=()=>({state:t,dispatch:e})=>Aj(t,e),c3=(t,e)=>({editor:n,tr:r})=>{const{state:s}=n,i=s.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const o=r.mapping.map(e);return r.insert(o,i.content),r.setSelection(new He(r.doc.resolve(Math.max(o-1,0)))),!0},d3=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const s=t.selection.$anchor;for(let i=s.depth;i>0;i-=1)if(s.node(i).type===r.type){if(e){const c=s.before(i),u=s.after(i);t.delete(c,u).scrollIntoView()}return!0}return!1};function Xt(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}var u3=t=>({tr:e,state:n,dispatch:r})=>{const s=Xt(t,n.schema),i=e.selection.$anchor;for(let o=i.depth;o>0;o-=1)if(i.node(o).type===s){if(r){const u=i.before(o),f=i.after(o);e.delete(u,f).scrollIntoView()}return!0}return!1},f3=t=>({tr:e,dispatch:n})=>{const{from:r,to:s}=t;return n&&e.delete(r,s),!0},h3=()=>({state:t,dispatch:e})=>I0(t,e),p3=()=>({commands:t})=>t.keyboardShortcut("Enter"),m3=()=>({state:t,dispatch:e})=>YO(t,e);function Q0(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function af(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(s=>n.strict?e[s]===t[s]:Q0(e[s])?e[s].test(t[s]):e[s]===t[s]):!0}function mS(t,e,n={}){return t.find(r=>r.type===e&&af(Object.fromEntries(Object.keys(n).map(s=>[s,r.attrs[s]])),n))}function fw(t,e,n={}){return!!mS(t,e,n)}function Y0(t,e,n){var r;if(!t||!e)return;let s=t.parent.childAfter(t.parentOffset);if((!s.node||!s.node.marks.some(p=>p.type===e))&&(s=t.parent.childBefore(t.parentOffset)),!s.node||!s.node.marks.some(p=>p.type===e)||(n=n||((r=s.node.marks[0])==null?void 0:r.attrs),!mS([...s.node.marks],e,n)))return;let o=s.index,c=t.start()+s.offset,u=o+1,f=c+s.node.nodeSize;for(;o>0&&fw([...t.parent.child(o-1).marks],e,n);)o-=1,c-=t.parent.child(o).nodeSize;for(;u<t.parent.childCount&&fw([...t.parent.child(u).marks],e,n);)f+=t.parent.child(u).nodeSize,u+=1;return{from:c,to:f}}function Js(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}var g3=(t,e={})=>({tr:n,state:r,dispatch:s})=>{const i=Js(t,r.schema),{doc:o,selection:c}=n,{$from:u,from:f,to:p}=c;if(s){const m=Y0(u,i,e);if(m&&m.from<=f&&m.to>=p){const x=He.create(o,m.from,m.to);n.setSelection(x)}}return!0},x3=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function gS(t){return t instanceof He}function xo(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function xS(t,e=null){if(!e)return null;const n=Ke.atStart(t),r=Ke.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const s=n.from,i=r.to;return e==="all"?He.create(t,xo(0,s,i),xo(t.content.size,s,i)):He.create(t,xo(e,s,i),xo(e,s,i))}function Eg(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function jc(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function y3(){return typeof navigator<"u"?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1}var v3=(t=null,e={})=>({editor:n,view:r,tr:s,dispatch:i})=>{e={scrollIntoView:!0,...e};const o=()=>{(jc()||Eg())&&r.dom.focus(),y3()&&!jc()&&!Eg()&&r.dom.focus({preventScroll:!0}),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};try{if(r.hasFocus()&&t===null||t===!1)return!0}catch{return!1}if(i&&t===null&&!gS(n.state.selection))return o(),!0;const c=xS(s.doc,t)||n.state.selection,u=n.state.selection.eq(c);return i&&(u||s.setSelection(c),u&&s.storedMarks&&s.setStoredMarks(s.storedMarks),o()),!0},b3=(t,e)=>n=>t.every((r,s)=>e(r,{...n,index:s})),w3=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),yS=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&yS(r)}return t};function tu(t){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return yS(n)}function Sc(t,e,n){if(t instanceof Kr||t instanceof ae)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,s=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return ae.fromArray(t.map(c=>e.nodeFromJSON(c)));const o=e.nodeFromJSON(t);return n.errorOnInvalidContent&&o.check(),o}catch(i){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:i});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",i),Sc("",e,n)}if(s){if(n.errorOnInvalidContent){let o=!1,c="";const u=new nj({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:f=>(o=!0,c=typeof f=="string"?f:f.outerHTML,null)}]}})});if(n.slice?Di.fromSchema(u).parseSlice(tu(t),n.parseOptions):Di.fromSchema(u).parse(tu(t),n.parseOptions),n.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${c}`)})}const i=Di.fromSchema(e);return n.slice?i.parseSlice(tu(t),n.parseOptions).content:i.parse(tu(t),n.parseOptions)}return Sc("",e,n)}function k3(t,e,n){const r=t.steps.length-1;if(r<e)return;const s=t.steps[r];if(!(s instanceof fn||s instanceof mn))return;const i=t.mapping.maps[r];let o=0;i.forEach((c,u,f,p)=>{o===0&&(o=p)}),t.setSelection(Ke.near(t.doc.resolve(o),n))}var N3=t=>!("type"in t),j3=(t,e,n)=>({tr:r,dispatch:s,editor:i})=>{var o;if(s){n={parseOptions:i.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let c;const u=w=>{i.emit("contentError",{editor:i,error:w,disableCollaboration:()=>{"collaboration"in i.storage&&typeof i.storage.collaboration=="object"&&i.storage.collaboration&&(i.storage.collaboration.isDisabled=!0)}})},f={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!i.options.enableContentCheck&&i.options.emitContentError)try{Sc(e,i.schema,{parseOptions:f,errorOnInvalidContent:!0})}catch(w){u(w)}try{c=Sc(e,i.schema,{parseOptions:f,errorOnInvalidContent:(o=n.errorOnInvalidContent)!=null?o:i.options.enableContentCheck})}catch(w){return u(w),!1}let{from:p,to:m}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},x=!0,y=!0;if((N3(c)?c:[c]).forEach(w=>{w.check(),x=x?w.isText&&w.marks.length===0:!1,y=y?w.isBlock:!1}),p===m&&y){const{parent:w}=r.doc.resolve(p);w.isTextblock&&!w.type.spec.code&&!w.childCount&&(p-=1,m+=1)}let k;if(x){if(Array.isArray(e))k=e.map(w=>w.text||"").join("");else if(e instanceof ae){let w="";e.forEach(j=>{j.text&&(w+=j.text)}),k=w}else typeof e=="object"&&e&&e.text?k=e.text:k=e;r.insertText(k,p,m)}else{k=c;const w=r.doc.resolve(p),j=w.node(),C=w.parentOffset===0,T=j.isText||j.isTextblock,A=j.content.size>0;C&&T&&A&&(p=Math.max(0,p-1)),r.replaceWith(p,m,k)}n.updateSelection&&k3(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:p,text:k}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:p,text:k})}return!0},S3=()=>({state:t,dispatch:e})=>JO(t,e),C3=()=>({state:t,dispatch:e})=>ZO(t,e),E3=()=>({state:t,dispatch:e})=>kj(t,e),T3=()=>({state:t,dispatch:e})=>Cj(t,e),A3=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Zf(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},M3=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Zf(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},R3=()=>({state:t,dispatch:e})=>KO(t,e),O3=()=>({state:t,dispatch:e})=>GO(t,e);function vS(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function _3(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,s,i,o;for(let c=0;c<e.length-1;c+=1){const u=e[c];if(/^(cmd|meta|m)$/i.test(u))o=!0;else if(/^a(lt)?$/i.test(u))r=!0;else if(/^(c|ctrl|control)$/i.test(u))s=!0;else if(/^s(hift)?$/i.test(u))i=!0;else if(/^mod$/i.test(u))jc()||vS()?o=!0:s=!0;else throw new Error(`Unrecognized modifier name: ${u}`)}return r&&(n=`Alt-${n}`),s&&(n=`Ctrl-${n}`),o&&(n=`Meta-${n}`),i&&(n=`Shift-${n}`),n}var P3=t=>({editor:e,view:n,tr:r,dispatch:s})=>{const i=_3(t).split(/-(?!$)/),o=i.find(f=>!["Alt","Ctrl","Meta","Shift"].includes(f)),c=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:i.includes("Alt"),ctrlKey:i.includes("Ctrl"),metaKey:i.includes("Meta"),shiftKey:i.includes("Shift"),bubbles:!0,cancelable:!0}),u=e.captureTransaction(()=>{n.someProp("handleKeyDown",f=>f(n,c))});return u==null||u.steps.forEach(f=>{const p=f.map(r.mapping);p&&s&&r.maybeStep(p)}),!0};function Hi(t,e,n={}){const{from:r,to:s,empty:i}=t.selection,o=e?Xt(e,t.schema):null,c=[];t.doc.nodesBetween(r,s,(m,x)=>{if(m.isText)return;const y=Math.max(r,x),v=Math.min(s,x+m.nodeSize);c.push({node:m,from:y,to:v})});const u=s-r,f=c.filter(m=>o?o.name===m.node.type.name:!0).filter(m=>af(m.node.attrs,n,{strict:!1}));return i?!!f.length:f.reduce((m,x)=>m+x.to-x.from,0)>=u}var I3=(t,e={})=>({state:n,dispatch:r})=>{const s=Xt(t,n.schema);return Hi(n,s,e)?QO(n,r):!1},D3=()=>({state:t,dispatch:e})=>Mj(t,e),L3=t=>({state:e,dispatch:n})=>{const r=Xt(t,e.schema);return c_(r)(e,n)},z3=()=>({state:t,dispatch:e})=>Tj(t,e);function sh(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function hw(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,s)=>(n.includes(s)||(r[s]=t[s]),r),{})}var B3=(t,e)=>({tr:n,state:r,dispatch:s})=>{let i=null,o=null;const c=sh(typeof t=="string"?t:t.name,r.schema);if(!c)return!1;c==="node"&&(i=Xt(t,r.schema)),c==="mark"&&(o=Js(t,r.schema));let u=!1;return n.selection.ranges.forEach(f=>{r.doc.nodesBetween(f.$from.pos,f.$to.pos,(p,m)=>{i&&i===p.type&&(u=!0,s&&n.setNodeMarkup(m,void 0,hw(p.attrs,e))),o&&p.marks.length&&p.marks.forEach(x=>{o===x.type&&(u=!0,s&&n.addMark(m,m+p.nodeSize,o.create(hw(x.attrs,e))))})})}),u},F3=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),$3=()=>({tr:t,dispatch:e})=>{if(e){const n=new gr(t.doc);t.setSelection(n)}return!0},V3=()=>({state:t,dispatch:e})=>jj(t,e),U3=()=>({state:t,dispatch:e})=>Ej(t,e),H3=()=>({state:t,dispatch:e})=>t_(t,e),W3=()=>({state:t,dispatch:e})=>s_(t,e),q3=()=>({state:t,dispatch:e})=>r_(t,e);function Tg(t,e,n={},r={}){return Sc(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}var K3=(t,{errorOnInvalidContent:e,emitUpdate:n=!0,parseOptions:r={}}={})=>({editor:s,tr:i,dispatch:o,commands:c})=>{const{doc:u}=i;if(r.preserveWhitespace!=="full"){const f=Tg(t,s.schema,r,{errorOnInvalidContent:e??s.options.enableContentCheck});return o&&i.replaceWith(0,u.content.size,f).setMeta("preventUpdate",!n),!0}return o&&i.setMeta("preventUpdate",!n),c.insertContentAt({from:0,to:u.content.size},t,{parseOptions:r,errorOnInvalidContent:e??s.options.enableContentCheck})};function bS(t,e){const n=Js(e,t.schema),{from:r,to:s,empty:i}=t.selection,o=[];i?(t.storedMarks&&o.push(...t.storedMarks),o.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,s,u=>{o.push(...u.marks)});const c=o.find(u=>u.type.name===n.name);return c?{...c.attrs}:{}}function wS(t,e){const n=new _0(t);return e.forEach(r=>{r.steps.forEach(s=>{n.step(s)})}),n}function G3(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function J3(t,e,n){const r=[];return t.nodesBetween(e.from,e.to,(s,i)=>{n(s)&&r.push({node:s,pos:i})}),r}function kS(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function ih(t){return e=>kS(e.$from,t)}function ze(t,e,n){return t.config[e]===void 0&&t.parent?ze(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?ze(t.parent,e,n):null}):t.config[e]}function X0(t){return t.map(e=>{const n={name:e.name,options:e.options,storage:e.storage},r=ze(e,"addExtensions",n);return r?[e,...X0(r())]:e}).flat(10)}function ex(t,e){const n=Fo.fromSchema(e).serializeFragment(t),s=document.implementation.createHTMLDocument().createElement("div");return s.appendChild(n),s.innerHTML}function NS(t){return typeof t=="function"}function ct(t,e=void 0,...n){return NS(t)?e?t.bind(e)(...n):t(...n):t}function Z3(t={}){return Object.keys(t).length===0&&t.constructor===Object}function La(t){const e=t.filter(s=>s.type==="extension"),n=t.filter(s=>s.type==="node"),r=t.filter(s=>s.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function jS(t){const e=[],{nodeExtensions:n,markExtensions:r}=La(t),s=[...n,...r],i={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(o=>{const c={name:o.name,options:o.options,storage:o.storage,extensions:s},u=ze(o,"addGlobalAttributes",c);if(!u)return;u().forEach(p=>{p.types.forEach(m=>{Object.entries(p.attributes).forEach(([x,y])=>{e.push({type:m,name:x,attribute:{...i,...y}})})})})}),s.forEach(o=>{const c={name:o.name,options:o.options,storage:o.storage},u=ze(o,"addAttributes",c);if(!u)return;const f=u();Object.entries(f).forEach(([p,m])=>{const x={...i,...m};typeof(x==null?void 0:x.default)=="function"&&(x.default=x.default()),x!=null&&x.isRequired&&(x==null?void 0:x.default)===void 0&&delete x.default,e.push({type:o.name,name:p,attribute:x})})}),e}function bt(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([s,i])=>{if(!r[s]){r[s]=i;return}if(s==="class"){const c=i?String(i).split(" "):[],u=r[s]?r[s].split(" "):[],f=c.filter(p=>!u.includes(p));r[s]=[...u,...f].join(" ")}else if(s==="style"){const c=i?i.split(";").map(p=>p.trim()).filter(Boolean):[],u=r[s]?r[s].split(";").map(p=>p.trim()).filter(Boolean):[],f=new Map;u.forEach(p=>{const[m,x]=p.split(":").map(y=>y.trim());f.set(m,x)}),c.forEach(p=>{const[m,x]=p.split(":").map(y=>y.trim());f.set(m,x)}),r[s]=Array.from(f.entries()).map(([p,m])=>`${p}: ${m}`).join("; ")}else r[s]=i}),r},{})}function za(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>bt(n,r),{})}function Q3(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function pw(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const s=e.reduce((i,o)=>{const c=o.attribute.parseHTML?o.attribute.parseHTML(n):Q3(n.getAttribute(o.name));return c==null?i:{...i,[o.name]:c}},{});return{...r,...s}}}}function mw(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&Z3(n)?!1:n!=null))}function gw(t){var e,n;const r={};return!((e=t==null?void 0:t.attribute)!=null&&e.isRequired)&&"default"in((t==null?void 0:t.attribute)||{})&&(r.default=t.attribute.default),((n=t==null?void 0:t.attribute)==null?void 0:n.validate)!==void 0&&(r.validate=t.attribute.validate),[t.name,r]}function Y3(t,e){var n;const r=jS(t),{nodeExtensions:s,markExtensions:i}=La(t),o=(n=s.find(f=>ze(f,"topNode")))==null?void 0:n.name,c=Object.fromEntries(s.map(f=>{const p=r.filter(j=>j.type===f.name),m={name:f.name,options:f.options,storage:f.storage,editor:e},x=t.reduce((j,C)=>{const T=ze(C,"extendNodeSchema",m);return{...j,...T?T(f):{}}},{}),y=mw({...x,content:ct(ze(f,"content",m)),marks:ct(ze(f,"marks",m)),group:ct(ze(f,"group",m)),inline:ct(ze(f,"inline",m)),atom:ct(ze(f,"atom",m)),selectable:ct(ze(f,"selectable",m)),draggable:ct(ze(f,"draggable",m)),code:ct(ze(f,"code",m)),whitespace:ct(ze(f,"whitespace",m)),linebreakReplacement:ct(ze(f,"linebreakReplacement",m)),defining:ct(ze(f,"defining",m)),isolating:ct(ze(f,"isolating",m)),attrs:Object.fromEntries(p.map(gw))}),v=ct(ze(f,"parseHTML",m));v&&(y.parseDOM=v.map(j=>pw(j,p)));const k=ze(f,"renderHTML",m);k&&(y.toDOM=j=>k({node:j,HTMLAttributes:za(j,p)}));const w=ze(f,"renderText",m);return w&&(y.toText=w),[f.name,y]})),u=Object.fromEntries(i.map(f=>{const p=r.filter(w=>w.type===f.name),m={name:f.name,options:f.options,storage:f.storage,editor:e},x=t.reduce((w,j)=>{const C=ze(j,"extendMarkSchema",m);return{...w,...C?C(f):{}}},{}),y=mw({...x,inclusive:ct(ze(f,"inclusive",m)),excludes:ct(ze(f,"excludes",m)),group:ct(ze(f,"group",m)),spanning:ct(ze(f,"spanning",m)),code:ct(ze(f,"code",m)),attrs:Object.fromEntries(p.map(gw))}),v=ct(ze(f,"parseHTML",m));v&&(y.parseDOM=v.map(w=>pw(w,p)));const k=ze(f,"renderHTML",m);return k&&(y.toDOM=w=>k({mark:w,HTMLAttributes:za(w,p)})),[f.name,y]}));return new nj({topNode:o,nodes:c,marks:u})}function X3(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}function lf(t){return t.sort((n,r)=>{const s=ze(n,"priority")||100,i=ze(r,"priority")||100;return s>i?-1:s<i?1:0})}function SS(t){const e=lf(X0(t)),n=X3(e.map(r=>r.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),e}function CS(t,e,n){const{from:r,to:s}=e,{blockSeparator:i=`

`,textSerializers:o={}}=n||{};let c="";return t.nodesBetween(r,s,(u,f,p,m)=>{var x;u.isBlock&&f>r&&(c+=i);const y=o==null?void 0:o[u.type.name];if(y)return p&&(c+=y({node:u,pos:f,parent:p,index:m,range:e})),!1;u.isText&&(c+=(x=u==null?void 0:u.text)==null?void 0:x.slice(Math.max(r,f)-f,s-f))}),c}function eI(t,e){const n={from:0,to:t.content.size};return CS(t,n,e)}function ES(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}function tI(t,e){const n=Xt(e,t.schema),{from:r,to:s}=t.selection,i=[];t.doc.nodesBetween(r,s,c=>{i.push(c)});const o=i.reverse().find(c=>c.type.name===n.name);return o?{...o.attrs}:{}}function TS(t,e){const n=sh(typeof e=="string"?e:e.name,t.schema);return n==="node"?tI(t,e):n==="mark"?bS(t,e):{}}function nI(t,e=JSON.stringify){const n={};return t.filter(r=>{const s=e(r);return Object.prototype.hasOwnProperty.call(n,s)?!1:n[s]=!0})}function rI(t){const e=nI(t);return e.length===1?e:e.filter((n,r)=>!e.filter((i,o)=>o!==r).some(i=>n.oldRange.from>=i.oldRange.from&&n.oldRange.to<=i.oldRange.to&&n.newRange.from>=i.newRange.from&&n.newRange.to<=i.newRange.to))}function AS(t){const{mapping:e,steps:n}=t,r=[];return e.maps.forEach((s,i)=>{const o=[];if(s.ranges.length)s.forEach((c,u)=>{o.push({from:c,to:u})});else{const{from:c,to:u}=n[i];if(c===void 0||u===void 0)return;o.push({from:c,to:u})}o.forEach(({from:c,to:u})=>{const f=e.slice(i).map(c,-1),p=e.slice(i).map(u),m=e.invert().map(f,-1),x=e.invert().map(p);r.push({oldRange:{from:m,to:x},newRange:{from:f,to:p}})})}),rI(r)}function tx(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(s=>{const i=n.resolve(t),o=Y0(i,s.type);o&&r.push({mark:s,...o})}):n.nodesBetween(t,e,(s,i)=>{!s||(s==null?void 0:s.nodeSize)===void 0||r.push(...s.marks.map(o=>({from:i,to:i+s.nodeSize,mark:o})))}),r}var sI=(t,e,n,r=20)=>{const s=t.doc.resolve(n);let i=r,o=null;for(;i>0&&o===null;){const c=s.node(i);(c==null?void 0:c.type.name)===e?o=c:i-=1}return[o,i]};function nu(t,e){return e.nodes[t]||e.marks[t]||null}function Su(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const s=t.find(i=>i.type===e&&i.name===r);return s?s.attribute.keepOnSplit:!1}))}var iI=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(s,i,o,c)=>{var u,f;const p=((f=(u=s.type.spec).toText)==null?void 0:f.call(u,{node:s,pos:i,parent:o,index:c}))||s.textContent||"%leaf%";n+=s.isAtom&&!s.isText?p:p.slice(0,Math.max(0,r-i))}),n};function Ag(t,e,n={}){const{empty:r,ranges:s}=t.selection,i=e?Js(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(m=>i?i.name===m.type.name:!0).find(m=>af(m.attrs,n,{strict:!1}));let o=0;const c=[];if(s.forEach(({$from:m,$to:x})=>{const y=m.pos,v=x.pos;t.doc.nodesBetween(y,v,(k,w)=>{if(!k.isText&&!k.marks.length)return;const j=Math.max(y,w),C=Math.min(v,w+k.nodeSize),T=C-j;o+=T,c.push(...k.marks.map(A=>({mark:A,from:j,to:C})))})}),o===0)return!1;const u=c.filter(m=>i?i.name===m.mark.type.name:!0).filter(m=>af(m.mark.attrs,n,{strict:!1})).reduce((m,x)=>m+x.to-x.from,0),f=c.filter(m=>i?m.mark.type!==i&&m.mark.type.excludes(i):!0).reduce((m,x)=>m+x.to-x.from,0);return(u>0?u+f:u)>=o}function oI(t,e,n={}){if(!e)return Hi(t,null,n)||Ag(t,null,n);const r=sh(e,t.schema);return r==="node"?Hi(t,e,n):r==="mark"?Ag(t,e,n):!1}var aI=(t,e)=>{const{$from:n,$to:r,$anchor:s}=t.selection;if(e){const i=ih(c=>c.type.name===e)(t.selection);if(!i)return!1;const o=t.doc.resolve(i.pos+1);return s.pos+1===o.end()}return!(r.parentOffset<r.parent.nodeSize-2||n.pos!==r.pos)},lI=t=>{const{$from:e,$to:n}=t.selection;return!(e.parentOffset>0||e.pos!==n.pos)};function xw(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function yw(t,e){const{nodeExtensions:n}=La(e),r=n.find(o=>o.name===t);if(!r)return!1;const s={name:r.name,options:r.options,storage:r.storage},i=ct(ze(r,"group",s));return typeof i!="string"?!1:i.split(" ").includes("list")}function oh(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!=null?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let s=!0;return t.content.forEach(i=>{s!==!1&&(oh(i,{ignoreWhitespace:n,checkChildren:e})||(s=!1))}),s}return!1}function MS(t){return t instanceof Be}var RS=class OS{constructor(e){this.position=e}static fromJSON(e){return new OS(e.position)}toJSON(){return{position:this.position}}};function cI(t,e){const n=e.mapping.mapResult(t.position);return{position:new RS(n.pos),mapResult:n}}function dI(t){return new RS(t)}function uI(t,e,n){var r;const{selection:s}=e;let i=null;if(gS(s)&&(i=s.$cursor),i){const c=(r=t.storedMarks)!=null?r:i.marks();return i.parent.type.allowsMarkType(n)&&(!!n.isInSet(c)||!c.some(f=>f.type.excludes(n)))}const{ranges:o}=s;return o.some(({$from:c,$to:u})=>{let f=c.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(c.pos,u.pos,(p,m,x)=>{if(f)return!1;if(p.isInline){const y=!x||x.type.allowsMarkType(n),v=!!n.isInSet(p.marks)||!p.marks.some(k=>k.type.excludes(n));f=y&&v}return!f}),f})}var fI=(t,e={})=>({tr:n,state:r,dispatch:s})=>{const{selection:i}=n,{empty:o,ranges:c}=i,u=Js(t,r.schema);if(s)if(o){const f=bS(r,u);n.addStoredMark(u.create({...f,...e}))}else c.forEach(f=>{const p=f.$from.pos,m=f.$to.pos;r.doc.nodesBetween(p,m,(x,y)=>{const v=Math.max(y,p),k=Math.min(y+x.nodeSize,m);x.marks.find(j=>j.type===u)?x.marks.forEach(j=>{u===j.type&&n.addMark(v,k,u.create({...j.attrs,...e}))}):n.addMark(v,k,u.create(e))})});return uI(r,n,u)},hI=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),pI=(t,e={})=>({state:n,dispatch:r,chain:s})=>{const i=Xt(t,n.schema);let o;return n.selection.$anchor.sameParent(n.selection.$head)&&(o=n.selection.$anchor.parent.attrs),i.isTextblock?s().command(({commands:c})=>O1(i,{...o,...e})(n)?!0:c.clearNodes()).command(({state:c})=>O1(i,{...o,...e})(c,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},mI=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,s=xo(t,0,r.content.size),i=Be.create(r,s);e.setSelection(i)}return!0},gI=(t,e)=>({tr:n,state:r,dispatch:s})=>{const{selection:i}=r;let o,c;return typeof e=="number"?(o=e,c=e):e&&"from"in e&&"to"in e?(o=e.from,c=e.to):(o=i.from,c=i.to),s&&n.doc.nodesBetween(o,c,(u,f)=>{u.isText||n.setNodeMarkup(f,void 0,{...u.attrs,dir:t})}),!0},xI=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:s,to:i}=typeof t=="number"?{from:t,to:t}:t,o=He.atStart(r).from,c=He.atEnd(r).to,u=xo(s,o,c),f=xo(i,o,c),p=He.create(r,u,f);e.setSelection(p)}return!0},yI=t=>({state:e,dispatch:n})=>{const r=Xt(t,e.schema);return f_(r)(e,n)};function vw(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(s=>e==null?void 0:e.includes(s.type.name));t.tr.ensureMarks(r)}}var vI=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:s})=>{const{selection:i,doc:o}=e,{$from:c,$to:u}=i,f=s.extensionManager.attributes,p=Su(f,c.node().type.name,c.node().attrs);if(i instanceof Be&&i.node.isBlock)return!c.parentOffset||!Us(o,c.pos)?!1:(r&&(t&&vw(n,s.extensionManager.splittableMarks),e.split(c.pos).scrollIntoView()),!0);if(!c.parent.isBlock)return!1;const m=u.parentOffset===u.parent.content.size,x=c.depth===0?void 0:G3(c.node(-1).contentMatchAt(c.indexAfter(-1)));let y=m&&x?[{type:x,attrs:p}]:void 0,v=Us(e.doc,e.mapping.map(c.pos),1,y);if(!y&&!v&&Us(e.doc,e.mapping.map(c.pos),1,x?[{type:x}]:void 0)&&(v=!0,y=x?[{type:x,attrs:p}]:void 0),r){if(v&&(i instanceof He&&e.deleteSelection(),e.split(e.mapping.map(c.pos),1,y),x&&!m&&!c.parentOffset&&c.parent.type!==x)){const k=e.mapping.map(c.before()),w=e.doc.resolve(k);c.node(-1).canReplaceWith(w.index(),w.index()+1,x)&&e.setNodeMarkup(e.mapping.map(c.before()),x)}t&&vw(n,s.extensionManager.splittableMarks),e.scrollIntoView()}return v},bI=(t,e={})=>({tr:n,state:r,dispatch:s,editor:i})=>{var o;const c=Xt(t,r.schema),{$from:u,$to:f}=r.selection,p=r.selection.node;if(p&&p.isBlock||u.depth<2||!u.sameParent(f))return!1;const m=u.node(-1);if(m.type!==c)return!1;const x=i.extensionManager.attributes;if(u.parent.content.size===0&&u.node(-1).childCount===u.indexAfter(-1)){if(u.depth===2||u.node(-3).type!==c||u.index(-2)!==u.node(-2).childCount-1)return!1;if(s){let j=ae.empty;const C=u.index(-1)?1:u.index(-2)?2:3;for(let ne=u.depth-C;ne>=u.depth-3;ne-=1)j=ae.from(u.node(ne).copy(j));const T=u.indexAfter(-1)<u.node(-2).childCount?1:u.indexAfter(-2)<u.node(-3).childCount?2:3,A={...Su(x,u.node().type.name,u.node().attrs),...e},M=((o=c.contentMatch.defaultType)==null?void 0:o.createAndFill(A))||void 0;j=j.append(ae.from(c.createAndFill(null,M)||void 0));const P=u.before(u.depth-(C-1));n.replace(P,u.after(-T),new we(j,4-C,0));let F=-1;n.doc.nodesBetween(P,n.doc.content.size,(ne,O)=>{if(F>-1)return!1;ne.isTextblock&&ne.content.size===0&&(F=O+1)}),F>-1&&n.setSelection(He.near(n.doc.resolve(F))),n.scrollIntoView()}return!0}const y=f.pos===u.end()?m.contentMatchAt(0).defaultType:null,v={...Su(x,m.type.name,m.attrs),...e},k={...Su(x,u.node().type.name,u.node().attrs),...e};n.delete(u.pos,f.pos);const w=y?[{type:c,attrs:v},{type:y,attrs:k}]:[{type:c,attrs:v}];if(!Us(n.doc,u.pos,2))return!1;if(s){const{selection:j,storedMarks:C}=r,{splittableMarks:T}=i.extensionManager,A=C||j.$to.parentOffset&&j.$from.marks();if(n.split(u.pos,2,w).scrollIntoView(),!A||!s)return!0;const M=A.filter(P=>T.includes(P.type.name));n.ensureMarks(M)}return!0},jm=(t,e)=>{const n=ih(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const s=t.doc.nodeAt(r);return n.node.type===(s==null?void 0:s.type)&&qi(t.doc,n.pos)&&t.join(n.pos),!0},Sm=(t,e)=>{const n=ih(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const s=t.doc.nodeAt(r);return n.node.type===(s==null?void 0:s.type)&&qi(t.doc,r)&&t.join(r),!0},wI=(t,e,n,r={})=>({editor:s,tr:i,state:o,dispatch:c,chain:u,commands:f,can:p})=>{const{extensions:m,splittableMarks:x}=s.extensionManager,y=Xt(t,o.schema),v=Xt(e,o.schema),{selection:k,storedMarks:w}=o,{$from:j,$to:C}=k,T=j.blockRange(C),A=w||k.$to.parentOffset&&k.$from.marks();if(!T)return!1;const M=ih(P=>yw(P.type.name,m))(k);if(T.depth>=1&&M&&T.depth-M.depth<=1){if(M.node.type===y)return f.liftListItem(v);if(yw(M.node.type.name,m)&&y.validContent(M.node.content)&&c)return u().command(()=>(i.setNodeMarkup(M.pos,y),!0)).command(()=>jm(i,y)).command(()=>Sm(i,y)).run()}return!n||!A||!c?u().command(()=>p().wrapInList(y,r)?!0:f.clearNodes()).wrapInList(y,r).command(()=>jm(i,y)).command(()=>Sm(i,y)).run():u().command(()=>{const P=p().wrapInList(y,r),F=A.filter(ne=>x.includes(ne.type.name));return i.ensureMarks(F),P?!0:f.clearNodes()}).wrapInList(y,r).command(()=>jm(i,y)).command(()=>Sm(i,y)).run()},kI=(t,e={},n={})=>({state:r,commands:s})=>{const{extendEmptyMarkRange:i=!1}=n,o=Js(t,r.schema);return Ag(r,o,e)?s.unsetMark(o,{extendEmptyMarkRange:i}):s.setMark(o,e)},NI=(t,e,n={})=>({state:r,commands:s})=>{const i=Xt(t,r.schema),o=Xt(e,r.schema),c=Hi(r,i,n);let u;return r.selection.$anchor.sameParent(r.selection.$head)&&(u=r.selection.$anchor.parent.attrs),c?s.setNode(o,u):s.setNode(i,{...u,...n})},jI=(t,e={})=>({state:n,commands:r})=>{const s=Xt(t,n.schema);return Hi(n,s,e)?r.lift(s):r.wrapIn(s,e)},SI=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const s=n[r];let i;if(s.spec.isInputRules&&(i=s.getState(t))){if(e){const o=t.tr,c=i.transform;for(let u=c.steps.length-1;u>=0;u-=1)o.step(c.steps[u].invert(c.docs[u]));if(i.text){const u=o.doc.resolve(i.from).marks();o.replaceWith(i.from,i.to,t.schema.text(i.text,u))}else o.delete(i.from,i.to)}return!0}}return!1},CI=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:s}=n;return r||e&&s.forEach(i=>{t.removeMark(i.$from.pos,i.$to.pos)}),!0},EI=(t,e={})=>({tr:n,state:r,dispatch:s})=>{var i;const{extendEmptyMarkRange:o=!1}=e,{selection:c}=n,u=Js(t,r.schema),{$from:f,empty:p,ranges:m}=c;if(!s)return!0;if(p&&o){let{from:x,to:y}=c;const v=(i=f.marks().find(w=>w.type===u))==null?void 0:i.attrs,k=Y0(f,u,v);k&&(x=k.from,y=k.to),n.removeMark(x,y,u)}else m.forEach(x=>{n.removeMark(x.$from.pos,x.$to.pos,u)});return n.removeStoredMark(u),!0},TI=t=>({tr:e,state:n,dispatch:r})=>{const{selection:s}=n;let i,o;return typeof t=="number"?(i=t,o=t):t&&"from"in t&&"to"in t?(i=t.from,o=t.to):(i=s.from,o=s.to),r&&e.doc.nodesBetween(i,o,(c,u)=>{if(c.isText)return;const f={...c.attrs};delete f.dir,e.setNodeMarkup(u,void 0,f)}),!0},AI=(t,e={})=>({tr:n,state:r,dispatch:s})=>{let i=null,o=null;const c=sh(typeof t=="string"?t:t.name,r.schema);if(!c)return!1;c==="node"&&(i=Xt(t,r.schema)),c==="mark"&&(o=Js(t,r.schema));let u=!1;return n.selection.ranges.forEach(f=>{const p=f.$from.pos,m=f.$to.pos;let x,y,v,k;n.selection.empty?r.doc.nodesBetween(p,m,(w,j)=>{i&&i===w.type&&(u=!0,v=Math.max(j,p),k=Math.min(j+w.nodeSize,m),x=j,y=w)}):r.doc.nodesBetween(p,m,(w,j)=>{j<p&&i&&i===w.type&&(u=!0,v=Math.max(j,p),k=Math.min(j+w.nodeSize,m),x=j,y=w),j>=p&&j<=m&&(i&&i===w.type&&(u=!0,s&&n.setNodeMarkup(j,void 0,{...w.attrs,...e})),o&&w.marks.length&&w.marks.forEach(C=>{if(o===C.type&&(u=!0,s)){const T=Math.max(j,p),A=Math.min(j+w.nodeSize,m);n.addMark(T,A,o.create({...C.attrs,...e}))}}))}),y&&(x!==void 0&&s&&n.setNodeMarkup(x,void 0,{...y.attrs,...e}),o&&y.marks.length&&y.marks.forEach(w=>{o===w.type&&s&&n.addMark(v,k,o.create({...w.attrs,...e}))}))}),u},MI=(t,e={})=>({state:n,dispatch:r})=>{const s=Xt(t,n.schema);return i_(s,e)(n,r)},RI=(t,e={})=>({state:n,dispatch:r})=>{const s=Xt(t,n.schema);return o_(s,e)(n,r)},OI=class{constructor(){this.callbacks={}}on(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){const n=this.callbacks[t];return n&&n.forEach(r=>r.apply(this,e)),this}off(t,e){const n=this.callbacks[t];return n&&(e?this.callbacks[t]=n.filter(r=>r!==e):delete this.callbacks[t]),this}once(t,e){const n=(...r)=>{this.off(t,n),e.apply(this,r)};return this.on(t,n)}removeAllListeners(){this.callbacks={}}},ah=class{constructor(t){var e;this.find=t.find,this.handler=t.handler,this.undoable=(e=t.undoable)!=null?e:!0}},_I=(t,e)=>{if(Q0(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function ru(t){var e;const{editor:n,from:r,to:s,text:i,rules:o,plugin:c}=t,{view:u}=n;if(u.composing)return!1;const f=u.state.doc.resolve(r);if(f.parent.type.spec.code||(e=f.nodeBefore||f.nodeAfter)!=null&&e.marks.find(x=>x.type.spec.code))return!1;let p=!1;const m=iI(f)+i;return o.forEach(x=>{if(p)return;const y=_I(m,x.find);if(!y)return;const v=u.state.tr,k=nh({state:u.state,transaction:v}),w={from:r-(y[0].length-i.length),to:s},{commands:j,chain:C,can:T}=new rh({editor:n,state:k});x.handler({state:k,range:w,match:y,commands:j,chain:C,can:T})===null||!v.steps.length||(x.undoable&&v.setMeta(c,{transform:v,from:r,to:s,text:i}),u.dispatch(v),p=!0)}),p}function PI(t){const{editor:e,rules:n}=t,r=new Et({state:{init(){return null},apply(s,i,o){const c=s.getMeta(r);if(c)return c;const u=s.getMeta("applyInputRules");return!!u&&setTimeout(()=>{let{text:p}=u;typeof p=="string"?p=p:p=ex(ae.from(p),o.schema);const{from:m}=u,x=m+p.length;ru({editor:e,from:m,to:x,text:p,rules:n,plugin:r})}),s.selectionSet||s.docChanged?null:i}},props:{handleTextInput(s,i,o,c){return ru({editor:e,from:i,to:o,text:c,rules:n,plugin:r})},handleDOMEvents:{compositionend:s=>(setTimeout(()=>{const{$cursor:i}=s.state.selection;i&&ru({editor:e,from:i.pos,to:i.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(s,i){if(i.key!=="Enter")return!1;const{$cursor:o}=s.state.selection;return o?ru({editor:e,from:o.pos,to:o.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function II(t){return Object.prototype.toString.call(t).slice(8,-1)}function su(t){return II(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function _S(t,e){const n={...t};return su(t)&&su(e)&&Object.keys(e).forEach(r=>{su(e[r])&&su(t[r])?n[r]=_S(t[r],e[r]):n[r]=e[r]}),n}var nx=class{constructor(t={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...t},this.name=this.config.name}get options(){return{...ct(ze(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...ct(ze(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(t={}){const e=this.extend({...this.config,addOptions:()=>_S(this.options,t)});return e.name=this.name,e.parent=this.parent,e}extend(t={}){const e=new this.constructor({...this.config,...t});return e.parent=this,this.child=e,e.name="name"in t?t.name:e.parent.name,e}},$o=class PS extends nx{constructor(){super(...arguments),this.type="mark"}static create(e={}){const n=typeof e=="function"?e():e;return new PS(n)}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,s=e.state.selection.$from;if(s.pos===s.end()){const o=s.marks();if(!!!o.find(f=>(f==null?void 0:f.type.name)===n.name))return!1;const u=o.find(f=>(f==null?void 0:f.type.name)===n.name);return u&&r.removeStoredMark(u),r.insertText(" ",s.pos),e.view.dispatch(r),!0}return!1}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function DI(t){return typeof t=="number"}var LI=class{constructor(t){this.find=t.find,this.handler=t.handler}},zI=(t,e,n)=>{if(Q0(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(s=>{const i=[s.text];return i.index=s.index,i.input=t,i.data=s.data,s.replaceWith&&(s.text.includes(s.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),i.push(s.replaceWith)),i}):[]};function BI(t){const{editor:e,state:n,from:r,to:s,rule:i,pasteEvent:o,dropEvent:c}=t,{commands:u,chain:f,can:p}=new rh({editor:e,state:n}),m=[];return n.doc.nodesBetween(r,s,(y,v)=>{var k,w,j,C,T;if((w=(k=y.type)==null?void 0:k.spec)!=null&&w.code||!(y.isText||y.isTextblock||y.isInline))return;const A=(T=(C=(j=y.content)==null?void 0:j.size)!=null?C:y.nodeSize)!=null?T:0,M=Math.max(r,v),P=Math.min(s,v+A);if(M>=P)return;const F=y.isText?y.text||"":y.textBetween(M-v,P-v,void 0,"");zI(F,i.find,o).forEach(O=>{if(O.index===void 0)return;const X=M+O.index+1,le=X+O[0].length,z={from:n.tr.mapping.map(X),to:n.tr.mapping.map(le)},te=i.handler({state:n,range:z,match:O,commands:u,chain:f,can:p,pasteEvent:o,dropEvent:c});m.push(te)})}),m.every(y=>y!==null)}var iu=null,FI=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)==null||e.setData("text/html",t),n};function $I(t){const{editor:e,rules:n}=t;let r=null,s=!1,i=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,c;try{c=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{c=null}const u=({state:p,from:m,to:x,rule:y,pasteEvt:v})=>{const k=p.tr,w=nh({state:p,transaction:k});if(!(!BI({editor:e,state:w,from:Math.max(m-1,0),to:x.b-1,rule:y,pasteEvent:v,dropEvent:c})||!k.steps.length)){try{c=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{c=null}return o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,k}};return n.map(p=>new Et({view(m){const x=v=>{var k;r=(k=m.dom.parentElement)!=null&&k.contains(v.target)?m.dom.parentElement:null,r&&(iu=e)},y=()=>{iu&&(iu=null)};return window.addEventListener("dragstart",x),window.addEventListener("dragend",y),{destroy(){window.removeEventListener("dragstart",x),window.removeEventListener("dragend",y)}}},props:{handleDOMEvents:{drop:(m,x)=>{if(i=r===m.dom.parentElement,c=x,!i){const y=iu;y!=null&&y.isEditable&&setTimeout(()=>{const v=y.state.selection;v&&y.commands.deleteRange({from:v.from,to:v.to})},10)}return!1},paste:(m,x)=>{var y;const v=(y=x.clipboardData)==null?void 0:y.getData("text/html");return o=x,s=!!(v!=null&&v.includes("data-pm-slice")),!1}}},appendTransaction:(m,x,y)=>{const v=m[0],k=v.getMeta("uiEvent")==="paste"&&!s,w=v.getMeta("uiEvent")==="drop"&&!i,j=v.getMeta("applyPasteRules"),C=!!j;if(!k&&!w&&!C)return;if(C){let{text:M}=j;typeof M=="string"?M=M:M=ex(ae.from(M),y.schema);const{from:P}=j,F=P+M.length,ne=FI(M);return u({rule:p,state:y,from:P,to:{b:F},pasteEvt:ne})}const T=x.doc.content.findDiffStart(y.doc.content),A=x.doc.content.findDiffEnd(y.doc.content);if(!(!DI(T)||!A||T===A.b))return u({rule:p,state:y,from:T,to:A,pasteEvt:o})}}))}var lh=class{constructor(t,e){this.splittableMarks=[],this.editor=e,this.baseExtensions=t,this.extensions=SS(t),this.schema=Y3(this.extensions,e),this.setupExtensions()}get commands(){return this.extensions.reduce((t,e)=>{const n={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:nu(e.name,this.schema)},r=ze(e,"addCommands",n);return r?{...t,...r()}:t},{})}get plugins(){const{editor:t}=this;return lf([...this.extensions].reverse()).flatMap(r=>{const s={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:t,type:nu(r.name,this.schema)},i=[],o=ze(r,"addKeyboardShortcuts",s);let c={};if(r.type==="mark"&&ze(r,"exitable",s)&&(c.ArrowRight=()=>$o.handleExit({editor:t,mark:r})),o){const x=Object.fromEntries(Object.entries(o()).map(([y,v])=>[y,()=>v({editor:t})]));c={...c,...x}}const u=n3(c);i.push(u);const f=ze(r,"addInputRules",s);if(xw(r,t.options.enableInputRules)&&f){const x=f();if(x&&x.length){const y=PI({editor:t,rules:x}),v=Array.isArray(y)?y:[y];i.push(...v)}}const p=ze(r,"addPasteRules",s);if(xw(r,t.options.enablePasteRules)&&p){const x=p();if(x&&x.length){const y=$I({editor:t,rules:x});i.push(...y)}}const m=ze(r,"addProseMirrorPlugins",s);if(m){const x=m();i.push(...x)}return i})}get attributes(){return jS(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:e}=La(this.extensions);return Object.fromEntries(e.filter(n=>!!ze(n,"addNodeView")).map(n=>{const r=this.attributes.filter(u=>u.type===n.name),s={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:Xt(n.name,this.schema)},i=ze(n,"addNodeView",s);if(!i)return[];const o=i();if(!o)return[];const c=(u,f,p,m,x)=>{const y=za(u,r);return o({node:u,view:f,getPos:p,decorations:m,innerDecorations:x,editor:t,extension:n,HTMLAttributes:y})};return[n.name,c]}))}dispatchTransaction(t){const{editor:e}=this;return lf([...this.extensions].reverse()).reduceRight((r,s)=>{const i={name:s.name,options:s.options,storage:this.editor.extensionStorage[s.name],editor:e,type:nu(s.name,this.schema)},o=ze(s,"dispatchTransaction",i);return o?c=>{o.call(i,{transaction:c,next:r})}:r},t)}get markViews(){const{editor:t}=this,{markExtensions:e}=La(this.extensions);return Object.fromEntries(e.filter(n=>!!ze(n,"addMarkView")).map(n=>{const r=this.attributes.filter(c=>c.type===n.name),s={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:Js(n.name,this.schema)},i=ze(n,"addMarkView",s);if(!i)return[];const o=(c,u,f)=>{const p=za(c,r);return i()({mark:c,view:u,inline:f,editor:t,extension:n,HTMLAttributes:p,updateAttributes:m=>{nD(c,t,m)}})};return[n.name,o]}))}setupExtensions(){const t=this.extensions;this.editor.extensionStorage=Object.fromEntries(t.map(e=>[e.name,e.storage])),t.forEach(e=>{var n;const r={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:nu(e.name,this.schema)};e.type==="mark"&&((n=ct(ze(e,"keepOnSplit",r)))==null||n)&&this.splittableMarks.push(e.name);const s=ze(e,"onBeforeCreate",r),i=ze(e,"onCreate",r),o=ze(e,"onUpdate",r),c=ze(e,"onSelectionUpdate",r),u=ze(e,"onTransaction",r),f=ze(e,"onFocus",r),p=ze(e,"onBlur",r),m=ze(e,"onDestroy",r);s&&this.editor.on("beforeCreate",s),i&&this.editor.on("create",i),o&&this.editor.on("update",o),c&&this.editor.on("selectionUpdate",c),u&&this.editor.on("transaction",u),f&&this.editor.on("focus",f),p&&this.editor.on("blur",p),m&&this.editor.on("destroy",m)})}};lh.resolve=SS;lh.sort=lf;lh.flatten=X0;var VI={};Z0(VI,{ClipboardTextSerializer:()=>DS,Commands:()=>LS,Delete:()=>zS,Drop:()=>BS,Editable:()=>FS,FocusEvents:()=>VS,Keymap:()=>US,Paste:()=>HS,Tabindex:()=>WS,TextDirection:()=>qS,focusEventsPluginKey:()=>$S});var $t=class IS extends nx{constructor(){super(...arguments),this.type="extension"}static create(e={}){const n=typeof e=="function"?e():e;return new IS(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}},DS=$t.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Et({key:new Ft("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:s}=e,{ranges:i}=s,o=Math.min(...i.map(p=>p.$from.pos)),c=Math.max(...i.map(p=>p.$to.pos)),u=ES(n);return CS(r,{from:o,to:c},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:u})}}})]}}),LS=$t.create({name:"commands",addCommands(){return{...pS}}}),zS=$t.create({name:"delete",onUpdate({transaction:t,appendedTransactions:e}){var n,r,s;const i=()=>{var o,c,u,f;if((f=(u=(c=(o=this.editor.options.coreExtensionOptions)==null?void 0:o.delete)==null?void 0:c.filterTransaction)==null?void 0:u.call(c,t))!=null?f:t.getMeta("y-sync$"))return;const p=wS(t.before,[t,...e]);AS(p).forEach(y=>{p.mapping.mapResult(y.oldRange.from).deletedAfter&&p.mapping.mapResult(y.oldRange.to).deletedBefore&&p.before.nodesBetween(y.oldRange.from,y.oldRange.to,(v,k)=>{const w=k+v.nodeSize-2,j=y.oldRange.from<=k&&w<=y.oldRange.to;this.editor.emit("delete",{type:"node",node:v,from:k,to:w,newFrom:p.mapping.map(k),newTo:p.mapping.map(w),deletedRange:y.oldRange,newRange:y.newRange,partial:!j,editor:this.editor,transaction:t,combinedTransform:p})})});const x=p.mapping;p.steps.forEach((y,v)=>{var k,w;if(y instanceof qr){const j=x.slice(v).map(y.from,-1),C=x.slice(v).map(y.to),T=x.invert().map(j,-1),A=x.invert().map(C),M=(k=p.doc.nodeAt(j-1))==null?void 0:k.marks.some(F=>F.eq(y.mark)),P=(w=p.doc.nodeAt(C))==null?void 0:w.marks.some(F=>F.eq(y.mark));this.editor.emit("delete",{type:"mark",mark:y.mark,from:y.from,to:y.to,deletedRange:{from:T,to:A},newRange:{from:j,to:C},partial:!!(P||M),editor:this.editor,transaction:t,combinedTransform:p})}})};(s=(r=(n=this.editor.options.coreExtensionOptions)==null?void 0:n.delete)==null?void 0:r.async)==null||s?setTimeout(i,0):i()}}),BS=$t.create({name:"drop",addProseMirrorPlugins(){return[new Et({key:new Ft("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),FS=$t.create({name:"editable",addProseMirrorPlugins(){return[new Et({key:new Ft("editable"),props:{editable:()=>this.editor.options.editable}})]}}),$S=new Ft("focusEvents"),VS=$t.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new Et({key:$S,props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),US=$t.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:c})=>{const{selection:u,doc:f}=c,{empty:p,$anchor:m}=u,{pos:x,parent:y}=m,v=m.parent.isTextblock&&x>0?c.doc.resolve(x-1):m,k=v.parent.type.spec.isolating,w=m.pos-m.parentOffset,j=k&&v.parent.childCount===1?w===m.pos:Ke.atStart(f).from===x;return!p||!y.type.isTextblock||y.textContent.length||!j||j&&m.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},s={...r},i={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return jc()||vS()?i:s},addProseMirrorPlugins(){return[new Et({key:new Ft("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(k=>k.getMeta("composition")))return;const r=t.some(k=>k.docChanged)&&!e.doc.eq(n.doc),s=t.some(k=>k.getMeta("preventClearDocument"));if(!r||s)return;const{empty:i,from:o,to:c}=e.selection,u=Ke.atStart(e.doc).from,f=Ke.atEnd(e.doc).to;if(i||!(o===u&&c===f)||!oh(n.doc))return;const x=n.tr,y=nh({state:n,transaction:x}),{commands:v}=new rh({editor:this.editor,state:y});if(v.clearNodes(),!!x.steps.length)return x}})]}}),HS=$t.create({name:"paste",addProseMirrorPlugins(){return[new Et({key:new Ft("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),WS=$t.create({name:"tabindex",addProseMirrorPlugins(){return[new Et({key:new Ft("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),qS=$t.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:t}=La(this.extensions);return[{types:t.filter(e=>e.name!=="text").map(e=>e.name),attributes:{dir:{default:this.options.direction,parseHTML:e=>{const n=e.getAttribute("dir");return n&&(n==="ltr"||n==="rtl"||n==="auto")?n:this.options.direction},renderHTML:e=>e.dir?{dir:e.dir}:{}}}}]},addProseMirrorPlugins(){return[new Et({key:new Ft("textDirection"),props:{attributes:()=>{const t=this.options.direction;return t?{dir:t}:{}}}})]}}),UI=class Gl{constructor(e,n,r=!1,s=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=s}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!=null?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new Gl(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new Gl(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new Gl(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const s=n.isBlock&&!n.isTextblock,i=n.isAtom&&!n.isText,o=n.isInline,c=this.pos+r+(i?0:1);if(c<0||c>this.resolvedPos.doc.nodeSize-2)return;const u=this.resolvedPos.doc.resolve(c);if(!s&&!o&&u.depth<=this.depth)return;const f=new Gl(u,this.editor,s,s||o?n:null);s&&(f.actualDepth=this.depth+1),e.push(f)}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,s=this.parent;for(;s&&!r;){if(s.node.type.name===e)if(Object.keys(n).length>0){const i=s.node.attrs,o=Object.keys(n);for(let c=0;c<o.length;c+=1){const u=o[c];if(i[u]!==n[u])break}}else r=s;s=s.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let s=[];if(!this.children||this.children.length===0)return s;const i=Object.keys(n);return this.children.forEach(o=>{r&&s.length>0||(o.node.type.name===e&&i.every(u=>n[u]===o.node.attrs[u])&&s.push(o),!(r&&s.length>0)&&(s=s.concat(o.querySelectorAll(e,n,r))))}),s}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}},HI=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function WI(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const s=document.createElement("style");return e&&s.setAttribute("nonce",e),s.setAttribute("data-tiptap-style",""),s.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(s),s}var qI=class extends OI{constructor(t={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:r})=>{throw r},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null,enableExtensionDispatchTransaction:!0},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.utils={getUpdatedPosition:cI,createMappablePosition:dI},this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:r,slice:s,moved:i})=>this.options.onDrop(r,s,i)),this.on("paste",({event:r,slice:s})=>this.options.onPaste(r,s)),this.on("delete",this.options.onDelete);const e=this.createDoc(),n=xS(e,this.options.autofocus);this.editorState=ka.create({doc:e,schema:this.schema,selection:n||void 0}),this.options.element&&this.mount(this.options.element)}mount(t){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(t),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const t=this.editorView.dom;t!=null&&t.editor&&delete t.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(t){console.warn("Failed to remove CSS element:",t)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=WI(HI,this.options.injectNonce))}setOptions(t={}){this.options={...this.options,...t},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,e=!0){this.setOptions({editable:t}),e&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:t=>{this.editorState=t},dispatch:t=>{this.dispatchTransaction(t)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(t,e)=>{if(this.editorView)return this.editorView[e];if(e==="state")return this.editorState;if(e in t)return Reflect.get(t,e);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${e}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(t,e){const n=NS(e)?e(t,[...this.state.plugins]):[...this.state.plugins,t],r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}unregisterPlugin(t){if(this.isDestroyed)return;const e=this.state.plugins;let n=e;if([].concat(t).forEach(s=>{const i=typeof s=="string"?`${s}$`:s.key;n=n.filter(o=>!o.key.startsWith(i))}),e.length===n.length)return;const r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}createExtensionManager(){var t,e;const r=[...this.options.enableCoreExtensions?[FS,DS.configure({blockSeparator:(e=(t=this.options.coreExtensionOptions)==null?void 0:t.clipboardTextSerializer)==null?void 0:e.blockSeparator}),LS,VS,US,WS,BS,HS,zS,qS.configure({direction:this.options.textDirection})].filter(s=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[s.name]!==!1:!0):[],...this.options.extensions].filter(s=>["extension","node","mark"].includes(s==null?void 0:s.type));this.extensionManager=new lh(r,this)}createCommandManager(){this.commandManager=new rh({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let t;try{t=Tg(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(n=>n.name!=="collaboration"),this.createExtensionManager()}}),t=Tg(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return t}createView(t){const{editorProps:e,enableExtensionDispatchTransaction:n}=this.options,r=e.dispatchTransaction||this.dispatchTransaction.bind(this),s=n?this.extensionManager.dispatchTransaction(r):r;this.editorView=new hS(t,{...e,attributes:{role:"textbox",...e==null?void 0:e.attributes},dispatchTransaction:s,state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const i=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(i),this.prependClass(),this.injectCSS();const o=this.view.dom;o.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=t;return}t.steps.forEach(f=>{var p;return(p=this.capturedTransaction)==null?void 0:p.step(f)});return}const{state:e,transactions:n}=this.state.applyTransaction(t),r=!this.state.selection.eq(e.selection),s=n.includes(t),i=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:t,nextState:e}),!s)return;this.view.updateState(e),this.emit("transaction",{editor:this,transaction:t,appendedTransactions:n.slice(1)}),r&&this.emit("selectionUpdate",{editor:this,transaction:t});const o=n.findLast(f=>f.getMeta("focus")||f.getMeta("blur")),c=o==null?void 0:o.getMeta("focus"),u=o==null?void 0:o.getMeta("blur");c&&this.emit("focus",{editor:this,event:c.event,transaction:o}),u&&this.emit("blur",{editor:this,event:u.event,transaction:o}),!(t.getMeta("preventUpdate")||!n.some(f=>f.docChanged)||i.doc.eq(e.doc))&&this.emit("update",{editor:this,transaction:t,appendedTransactions:n.slice(1)})}getAttributes(t){return TS(this.state,t)}isActive(t,e){const n=typeof t=="string"?t:null,r=typeof t=="string"?e:t;return oI(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return ex(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:e=`

`,textSerializers:n={}}=t||{};return eI(this.state.doc,{blockSeparator:e,textSerializers:{...ES(this.schema),...n}})}get isEmpty(){return oh(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var t,e;return(e=(t=this.editorView)==null?void 0:t.isDestroyed)!=null?e:!0}$node(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelector(t,e))||null}$nodes(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelectorAll(t,e))||null}$pos(t){const e=this.state.doc.resolve(t);return new UI(e,this)}get $doc(){return this.$pos(0)}};function Ba(t){return new ah({find:t.find,handler:({state:e,range:n,match:r})=>{const s=ct(t.getAttributes,void 0,r);if(s===!1||s===null)return null;const{tr:i}=e,o=r[r.length-1],c=r[0];if(o){const u=c.search(/\S/),f=n.from+c.indexOf(o),p=f+o.length;if(tx(n.from,n.to,e.doc).filter(y=>y.mark.type.excluded.find(k=>k===t.type&&k!==y.mark.type)).filter(y=>y.to>f).length)return null;p<n.to&&i.delete(p,n.to),f>n.from&&i.delete(n.from+u,f);const x=n.from+u+o.length;i.addMark(n.from+u,x,t.type.create(s||{})),i.removeStoredMark(t.type)}},undoable:t.undoable})}function KS(t){return new ah({find:t.find,handler:({state:e,range:n,match:r})=>{const s=ct(t.getAttributes,void 0,r)||{},{tr:i}=e,o=n.from;let c=n.to;const u=t.type.create(s);if(r[1]){const f=r[0].lastIndexOf(r[1]);let p=o+f;p>c?p=c:c=p+r[1].length;const m=r[0][r[0].length-1];i.insertText(m,o+r[0].length-1),i.replaceWith(p,c,u)}else if(r[0]){const f=t.type.isInline?o:o-1;i.insert(f,t.type.create(s)).delete(i.mapping.map(o),i.mapping.map(c))}i.scrollIntoView()},undoable:t.undoable})}function Mg(t){return new ah({find:t.find,handler:({state:e,range:n,match:r})=>{const s=e.doc.resolve(n.from),i=ct(t.getAttributes,void 0,r)||{};if(!s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,i)},undoable:t.undoable})}function Fa(t){return new ah({find:t.find,handler:({state:e,range:n,match:r,chain:s})=>{const i=ct(t.getAttributes,void 0,r)||{},o=e.tr.delete(n.from,n.to),u=o.doc.resolve(n.from).blockRange(),f=u&&O0(u,t.type,i);if(!f)return null;if(o.wrap(u,f),t.keepMarks&&t.editor){const{selection:m,storedMarks:x}=e,{splittableMarks:y}=t.editor.extensionManager,v=x||m.$to.parentOffset&&m.$from.marks();if(v){const k=v.filter(w=>y.includes(w.type.name));o.ensureMarks(k)}}if(t.keepAttributes){const m=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";s().updateAttributes(m,i).run()}const p=o.doc.resolve(n.from-1).nodeBefore;p&&p.type===t.type&&qi(o.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,p))&&o.join(n.from-1)},undoable:t.undoable})}var KI=t=>"touches"in t,GI=class{constructor(t){this.directions=["bottom-left","bottom-right","top-left","top-right"],this.minSize={height:8,width:8},this.preserveAspectRatio=!1,this.classNames={container:"",wrapper:"",handle:"",resizing:""},this.initialWidth=0,this.initialHeight=0,this.aspectRatio=1,this.isResizing=!1,this.activeHandle=null,this.startX=0,this.startY=0,this.startWidth=0,this.startHeight=0,this.isShiftKeyPressed=!1,this.lastEditableState=void 0,this.handleMap=new Map,this.handleMouseMove=c=>{if(!this.isResizing||!this.activeHandle)return;const u=c.clientX-this.startX,f=c.clientY-this.startY;this.handleResize(u,f)},this.handleTouchMove=c=>{if(!this.isResizing||!this.activeHandle)return;const u=c.touches[0];if(!u)return;const f=u.clientX-this.startX,p=u.clientY-this.startY;this.handleResize(f,p)},this.handleMouseUp=()=>{if(!this.isResizing)return;const c=this.element.offsetWidth,u=this.element.offsetHeight;this.onCommit(c,u),this.isResizing=!1,this.activeHandle=null,this.container.dataset.resizeState="false",this.classNames.resizing&&this.container.classList.remove(this.classNames.resizing),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp)},this.handleKeyDown=c=>{c.key==="Shift"&&(this.isShiftKeyPressed=!0)},this.handleKeyUp=c=>{c.key==="Shift"&&(this.isShiftKeyPressed=!1)};var e,n,r,s,i,o;this.node=t.node,this.editor=t.editor,this.element=t.element,this.contentElement=t.contentElement,this.getPos=t.getPos,this.onResize=t.onResize,this.onCommit=t.onCommit,this.onUpdate=t.onUpdate,(e=t.options)!=null&&e.min&&(this.minSize={...this.minSize,...t.options.min}),(n=t.options)!=null&&n.max&&(this.maxSize=t.options.max),(r=t==null?void 0:t.options)!=null&&r.directions&&(this.directions=t.options.directions),(s=t.options)!=null&&s.preserveAspectRatio&&(this.preserveAspectRatio=t.options.preserveAspectRatio),(i=t.options)!=null&&i.className&&(this.classNames={container:t.options.className.container||"",wrapper:t.options.className.wrapper||"",handle:t.options.className.handle||"",resizing:t.options.className.resizing||""}),(o=t.options)!=null&&o.createCustomHandle&&(this.createCustomHandle=t.options.createCustomHandle),this.wrapper=this.createWrapper(),this.container=this.createContainer(),this.applyInitialSize(),this.attachHandles(),this.editor.on("update",this.handleEditorUpdate.bind(this))}get dom(){return this.container}get contentDOM(){var t;return(t=this.contentElement)!=null?t:null}handleEditorUpdate(){const t=this.editor.isEditable;t!==this.lastEditableState&&(this.lastEditableState=t,t?t&&this.handleMap.size===0&&this.attachHandles():this.removeHandles())}update(t,e,n){return t.type!==this.node.type?!1:(this.node=t,this.onUpdate?this.onUpdate(t,e,n):!0)}destroy(){this.isResizing&&(this.container.dataset.resizeState="false",this.classNames.resizing&&this.container.classList.remove(this.classNames.resizing),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp),this.isResizing=!1,this.activeHandle=null),this.editor.off("update",this.handleEditorUpdate.bind(this)),this.container.remove()}createContainer(){const t=document.createElement("div");return t.dataset.resizeContainer="",t.dataset.node=this.node.type.name,t.style.display="flex",this.classNames.container&&(t.className=this.classNames.container),t.appendChild(this.wrapper),t}createWrapper(){const t=document.createElement("div");return t.style.position="relative",t.style.display="block",t.dataset.resizeWrapper="",this.classNames.wrapper&&(t.className=this.classNames.wrapper),t.appendChild(this.element),t}createHandle(t){const e=document.createElement("div");return e.dataset.resizeHandle=t,e.style.position="absolute",this.classNames.handle&&(e.className=this.classNames.handle),e}positionHandle(t,e){const n=e.includes("top"),r=e.includes("bottom"),s=e.includes("left"),i=e.includes("right");n&&(t.style.top="0"),r&&(t.style.bottom="0"),s&&(t.style.left="0"),i&&(t.style.right="0"),(e==="top"||e==="bottom")&&(t.style.left="0",t.style.right="0"),(e==="left"||e==="right")&&(t.style.top="0",t.style.bottom="0")}attachHandles(){this.directions.forEach(t=>{let e;this.createCustomHandle?e=this.createCustomHandle(t):e=this.createHandle(t),e instanceof HTMLElement||(console.warn(`[ResizableNodeView] createCustomHandle("${t}") did not return an HTMLElement. Falling back to default handle.`),e=this.createHandle(t)),this.createCustomHandle||this.positionHandle(e,t),e.addEventListener("mousedown",n=>this.handleResizeStart(n,t)),e.addEventListener("touchstart",n=>this.handleResizeStart(n,t)),this.handleMap.set(t,e),this.wrapper.appendChild(e)})}removeHandles(){this.handleMap.forEach(t=>t.remove()),this.handleMap.clear()}applyInitialSize(){const t=this.node.attrs.width,e=this.node.attrs.height;t?(this.element.style.width=`${t}px`,this.initialWidth=t):this.initialWidth=this.element.offsetWidth,e?(this.element.style.height=`${e}px`,this.initialHeight=e):this.initialHeight=this.element.offsetHeight,this.initialWidth>0&&this.initialHeight>0&&(this.aspectRatio=this.initialWidth/this.initialHeight)}handleResizeStart(t,e){t.preventDefault(),t.stopPropagation(),this.isResizing=!0,this.activeHandle=e,KI(t)?(this.startX=t.touches[0].clientX,this.startY=t.touches[0].clientY):(this.startX=t.clientX,this.startY=t.clientY),this.startWidth=this.element.offsetWidth,this.startHeight=this.element.offsetHeight,this.startWidth>0&&this.startHeight>0&&(this.aspectRatio=this.startWidth/this.startHeight),this.getPos(),this.container.dataset.resizeState="true",this.classNames.resizing&&this.container.classList.add(this.classNames.resizing),document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("touchmove",this.handleTouchMove),document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keyup",this.handleKeyUp)}handleResize(t,e){if(!this.activeHandle)return;const n=this.preserveAspectRatio||this.isShiftKeyPressed,{width:r,height:s}=this.calculateNewDimensions(this.activeHandle,t,e),i=this.applyConstraints(r,s,n);this.element.style.width=`${i.width}px`,this.element.style.height=`${i.height}px`,this.onResize&&this.onResize(i.width,i.height)}calculateNewDimensions(t,e,n){let r=this.startWidth,s=this.startHeight;const i=t.includes("right"),o=t.includes("left"),c=t.includes("bottom"),u=t.includes("top");return i?r=this.startWidth+e:o&&(r=this.startWidth-e),c?s=this.startHeight+n:u&&(s=this.startHeight-n),(t==="right"||t==="left")&&(r=this.startWidth+(i?e:-e)),(t==="top"||t==="bottom")&&(s=this.startHeight+(c?n:-n)),this.preserveAspectRatio||this.isShiftKeyPressed?this.applyAspectRatio(r,s,t):{width:r,height:s}}applyConstraints(t,e,n){var r,s,i,o;if(!n){let f=Math.max(this.minSize.width,t),p=Math.max(this.minSize.height,e);return(r=this.maxSize)!=null&&r.width&&(f=Math.min(this.maxSize.width,f)),(s=this.maxSize)!=null&&s.height&&(p=Math.min(this.maxSize.height,p)),{width:f,height:p}}let c=t,u=e;return c<this.minSize.width&&(c=this.minSize.width,u=c/this.aspectRatio),u<this.minSize.height&&(u=this.minSize.height,c=u*this.aspectRatio),(i=this.maxSize)!=null&&i.width&&c>this.maxSize.width&&(c=this.maxSize.width,u=c/this.aspectRatio),(o=this.maxSize)!=null&&o.height&&u>this.maxSize.height&&(u=this.maxSize.height,c=u*this.aspectRatio),{width:c,height:u}}applyAspectRatio(t,e,n){const r=n==="left"||n==="right",s=n==="top"||n==="bottom";return r?{width:t,height:t/this.aspectRatio}:s?{width:e*this.aspectRatio,height:e}:{width:t,height:t/this.aspectRatio}}};function JI(t,e){const{selection:n}=t,{$from:r}=n;if(n instanceof Be){const i=r.index();return r.parent.canReplaceWith(i,i+1,e)}let s=r.depth;for(;s>=0;){const i=r.index(s);if(r.node(s).contentMatchAt(i).matchType(e))return!0;s-=1}return!1}var ZI={};Z0(ZI,{createAtomBlockMarkdownSpec:()=>QI,createBlockMarkdownSpec:()=>YI,createInlineMarkdownSpec:()=>tD,parseAttributes:()=>rx,parseIndentedBlocks:()=>Rg,renderNestedMarkdownContent:()=>ix,serializeAttributes:()=>sx});function rx(t){if(!(t!=null&&t.trim()))return{};const e={},n=[],r=t.replace(/["']([^"']*)["']/g,f=>(n.push(f),`__QUOTED_${n.length-1}__`)),s=r.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(s){const f=s.map(p=>p.trim().slice(1));e.class=f.join(" ")}const i=r.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);i&&(e.id=i[1]);const o=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(r.matchAll(o)).forEach(([,f,p])=>{var m;const x=parseInt(((m=p.match(/__QUOTED_(\d+)__/))==null?void 0:m[1])||"0",10),y=n[x];y&&(e[f]=y.slice(1,-1))});const u=r.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return u&&u.split(/\s+/).filter(Boolean).forEach(p=>{p.match(/^[a-zA-Z][\w-]*$/)&&(e[p]=!0)}),e}function sx(t){if(!t||Object.keys(t).length===0)return"";const e=[];return t.class&&String(t.class).split(/\s+/).filter(Boolean).forEach(r=>e.push(`.${r}`)),t.id&&e.push(`#${t.id}`),Object.entries(t).forEach(([n,r])=>{n==="class"||n==="id"||(r===!0?e.push(n):r!==!1&&r!=null&&e.push(`${n}="${String(r)}"`))}),e.join(" ")}function QI(t){const{nodeName:e,name:n,parseAttributes:r=rx,serializeAttributes:s=sx,defaultAttributes:i={},requiredAttributes:o=[],allowedAttributes:c}=t,u=n||e,f=p=>{if(!c)return p;const m={};return c.forEach(x=>{x in p&&(m[x]=p[x])}),m};return{parseMarkdown:(p,m)=>{const x={...i,...p.attributes};return m.createNode(e,x,[])},markdownTokenizer:{name:e,level:"block",start(p){var m;const x=new RegExp(`^:::${u}(?:\\s|$)`,"m"),y=(m=p.match(x))==null?void 0:m.index;return y!==void 0?y:-1},tokenize(p,m,x){const y=new RegExp(`^:::${u}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),v=p.match(y);if(!v)return;const k=v[1]||"",w=r(k);if(!o.find(C=>!(C in w)))return{type:e,raw:v[0],attributes:w}}},renderMarkdown:p=>{const m=f(p.attrs||{}),x=s(m),y=x?` {${x}}`:"";return`:::${u}${y} :::`}}}function YI(t){const{nodeName:e,name:n,getContent:r,parseAttributes:s=rx,serializeAttributes:i=sx,defaultAttributes:o={},content:c="block",allowedAttributes:u}=t,f=n||e,p=m=>{if(!u)return m;const x={};return u.forEach(y=>{y in m&&(x[y]=m[y])}),x};return{parseMarkdown:(m,x)=>{let y;if(r){const k=r(m);y=typeof k=="string"?[{type:"text",text:k}]:k}else c==="block"?y=x.parseChildren(m.tokens||[]):y=x.parseInline(m.tokens||[]);const v={...o,...m.attributes};return x.createNode(e,v,y)},markdownTokenizer:{name:e,level:"block",start(m){var x;const y=new RegExp(`^:::${f}`,"m"),v=(x=m.match(y))==null?void 0:x.index;return v!==void 0?v:-1},tokenize(m,x,y){var v;const k=new RegExp(`^:::${f}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),w=m.match(k);if(!w)return;const[j,C=""]=w,T=s(C);let A=1;const M=j.length;let P="";const F=/^:::([\w-]*)(\s.*)?/gm,ne=m.slice(M);for(F.lastIndex=0;;){const O=F.exec(ne);if(O===null)break;const X=O.index,le=O[1];if(!((v=O[2])!=null&&v.endsWith(":::"))){if(le)A+=1;else if(A-=1,A===0){const z=ne.slice(0,X);P=z.trim();const te=m.slice(0,M+X+O[0].length);let ie=[];if(P)if(c==="block")for(ie=y.blockTokens(z),ie.forEach(oe=>{oe.text&&(!oe.tokens||oe.tokens.length===0)&&(oe.tokens=y.inlineTokens(oe.text))});ie.length>0;){const oe=ie[ie.length-1];if(oe.type==="paragraph"&&(!oe.text||oe.text.trim()===""))ie.pop();else break}else ie=y.inlineTokens(P);return{type:e,raw:te,attributes:T,content:P,tokens:ie}}}}}},renderMarkdown:(m,x)=>{const y=p(m.attrs||{}),v=i(y),k=v?` {${v}}`:"",w=x.renderChildren(m.content||[],`

`);return`:::${f}${k}

${w}

:::`}}}function XI(t){if(!t.trim())return{};const e={},n=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let r=n.exec(t);for(;r!==null;){const[,s,i,o]=r;e[s]=i||o,r=n.exec(t)}return e}function eD(t){return Object.entries(t).filter(([,e])=>e!=null).map(([e,n])=>`${e}="${n}"`).join(" ")}function tD(t){const{nodeName:e,name:n,getContent:r,parseAttributes:s=XI,serializeAttributes:i=eD,defaultAttributes:o={},selfClosing:c=!1,allowedAttributes:u}=t,f=n||e,p=x=>{if(!u)return x;const y={};return u.forEach(v=>{const k=typeof v=="string"?v:v.name,w=typeof v=="string"?void 0:v.skipIfDefault;if(k in x){const j=x[k];if(w!==void 0&&j===w)return;y[k]=j}}),y},m=f.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(x,y)=>{const v={...o,...x.attributes};if(c)return y.createNode(e,v);const k=r?r(x):x.content||"";return k?y.createNode(e,v,[y.createTextNode(k)]):y.createNode(e,v,[])},markdownTokenizer:{name:e,level:"inline",start(x){const y=c?new RegExp(`\\[${m}\\s*[^\\]]*\\]`):new RegExp(`\\[${m}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${m}\\]`),v=x.match(y),k=v==null?void 0:v.index;return k!==void 0?k:-1},tokenize(x,y,v){const k=c?new RegExp(`^\\[${m}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${m}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${m}\\]`),w=x.match(k);if(!w)return;let j="",C="";if(c){const[,A]=w;C=A}else{const[,A,M]=w;C=A,j=M||""}const T=s(C.trim());return{type:e,raw:w[0],content:j.trim(),attributes:T}}},renderMarkdown:x=>{let y="";r?y=r(x):x.content&&x.content.length>0&&(y=x.content.filter(j=>j.type==="text").map(j=>j.text).join(""));const v=p(x.attrs||{}),k=i(v),w=k?` ${k}`:"";return c?`[${f}${w}]`:`[${f}${w}]${y}[/${f}]`}}}function Rg(t,e,n){var r,s,i,o;const c=t.split(`
`),u=[];let f="",p=0;const m=e.baseIndentSize||2;for(;p<c.length;){const x=c[p],y=x.match(e.itemPattern);if(!y){if(u.length>0)break;if(x.trim()===""){p+=1,f=`${f}${x}
`;continue}else return}const v=e.extractItemData(y),{indentLevel:k,mainContent:w}=v;f=`${f}${x}
`;const j=[w];for(p+=1;p<c.length;){const M=c[p];if(M.trim()===""){const F=c.slice(p+1).findIndex(X=>X.trim()!=="");if(F===-1)break;if((((s=(r=c[p+1+F].match(/^(\s*)/))==null?void 0:r[1])==null?void 0:s.length)||0)>k){j.push(M),f=`${f}${M}
`,p+=1;continue}else break}if((((o=(i=M.match(/^(\s*)/))==null?void 0:i[1])==null?void 0:o.length)||0)>k)j.push(M),f=`${f}${M}
`,p+=1;else break}let C;const T=j.slice(1);if(T.length>0){const M=T.map(P=>P.slice(k+m)).join(`
`);M.trim()&&(e.customNestedParser?C=e.customNestedParser(M):C=n.blockTokens(M))}const A=e.createToken(v,C);u.push(A)}if(u.length!==0)return{items:u,raw:f}}function ix(t,e,n,r){if(!t||!Array.isArray(t.content))return"";const s=typeof n=="function"?n(r):n,[i,...o]=t.content,c=e.renderChildren([i]),u=[`${s}${c}`];return o&&o.length>0&&o.forEach(f=>{const p=e.renderChildren([f]);if(p){const m=p.split(`
`).map(x=>x?e.indent(x):"").join(`
`);u.push(m)}}),u.join(`
`)}function nD(t,e,n={}){const{state:r}=e,{doc:s,tr:i}=r,o=t;s.descendants((c,u)=>{const f=i.mapping.map(u),p=i.mapping.map(u)+c.nodeSize;let m=null;if(c.marks.forEach(y=>{if(y!==o)return!1;m=y}),!m)return;let x=!1;if(Object.keys(n).forEach(y=>{n[y]!==m.attrs[y]&&(x=!0)}),x){const y=t.type.create({...t.attrs,...n});i.removeMark(f,p,t.type),i.addMark(f,p,y)}}),i.docChanged&&e.view.dispatch(i)}var on=class GS extends nx{constructor(){super(...arguments),this.type="node"}static create(e={}){const n=typeof e=="function"?e():e;return new GS(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}},rD=class{constructor(t,e,n){this.isDragging=!1,this.component=t,this.editor=e.editor,this.options={stopEvent:null,ignoreMutation:null,...n},this.extension=e.extension,this.node=e.node,this.decorations=e.decorations,this.innerDecorations=e.innerDecorations,this.view=e.view,this.HTMLAttributes=e.HTMLAttributes,this.getPos=e.getPos,this.mount()}mount(){}get dom(){return this.editor.view.dom}get contentDOM(){return null}onDragStart(t){var e,n,r,s,i,o,c;const{view:u}=this.editor,f=t.target,p=f.nodeType===3?(e=f.parentElement)==null?void 0:e.closest("[data-drag-handle]"):f.closest("[data-drag-handle]");if(!this.dom||(n=this.contentDOM)!=null&&n.contains(f)||!p)return;let m=0,x=0;if(this.dom!==p){const C=this.dom.getBoundingClientRect(),T=p.getBoundingClientRect(),A=(s=t.offsetX)!=null?s:(r=t.nativeEvent)==null?void 0:r.offsetX,M=(o=t.offsetY)!=null?o:(i=t.nativeEvent)==null?void 0:i.offsetY;m=T.x-C.x+A,x=T.y-C.y+M}const y=this.dom.cloneNode(!0);try{const C=this.dom.getBoundingClientRect();y.style.width=`${Math.round(C.width)}px`,y.style.height=`${Math.round(C.height)}px`,y.style.boxSizing="border-box",y.style.pointerEvents="none"}catch{}let v=null;try{v=document.createElement("div"),v.style.position="absolute",v.style.top="-9999px",v.style.left="-9999px",v.style.pointerEvents="none",v.appendChild(y),document.body.appendChild(v),(c=t.dataTransfer)==null||c.setDragImage(y,m,x)}finally{v&&setTimeout(()=>{try{v==null||v.remove()}catch{}},0)}const k=this.getPos();if(typeof k!="number")return;const w=Be.create(u.state.doc,k),j=u.state.tr.setSelection(w);u.dispatch(j)}stopEvent(t){var e;if(!this.dom)return!1;if(typeof this.options.stopEvent=="function")return this.options.stopEvent({event:t});const n=t.target;if(!(this.dom.contains(n)&&!((e=this.contentDOM)!=null&&e.contains(n))))return!1;const s=t.type.startsWith("drag"),i=t.type==="drop";if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(n.tagName)||n.isContentEditable)&&!i&&!s)return!0;const{isEditable:c}=this.editor,{isDragging:u}=this,f=!!this.node.type.spec.draggable,p=Be.isSelectable(this.node),m=t.type==="copy",x=t.type==="paste",y=t.type==="cut",v=t.type==="mousedown";if(!f&&p&&s&&t.target===this.dom&&t.preventDefault(),f&&s&&!u&&t.target===this.dom)return t.preventDefault(),!1;if(f&&c&&!u&&v){const k=n.closest("[data-drag-handle]");k&&(this.dom===k||this.dom.contains(k))&&(this.isDragging=!0,document.addEventListener("dragend",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("drop",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("mouseup",()=>{this.isDragging=!1},{once:!0}))}return!(u||i||m||x||y||v&&p)}ignoreMutation(t){return!this.dom||!this.contentDOM?!0:typeof this.options.ignoreMutation=="function"?this.options.ignoreMutation({mutation:t}):this.node.isLeaf||this.node.isAtom?!0:t.type==="selection"||this.dom.contains(t.target)&&t.type==="childList"&&(jc()||Eg())&&this.editor.isFocused&&[...Array.from(t.addedNodes),...Array.from(t.removedNodes)].every(n=>n.isContentEditable)?!1:this.contentDOM===t.target&&t.type==="attributes"?!0:!this.contentDOM.contains(t.target)}updateAttributes(t){this.editor.commands.command(({tr:e})=>{const n=this.getPos();return typeof n!="number"?!1:(e.setNodeMarkup(n,void 0,{...this.node.attrs,...t}),!0)})}deleteNode(){const t=this.getPos();if(typeof t!="number")return;const e=t+this.node.nodeSize;this.editor.commands.deleteRange({from:t,to:e})}};function Do(t){return new LI({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:s})=>{const i=ct(t.getAttributes,void 0,r,s);if(i===!1||i===null)return null;const{tr:o}=e,c=r[r.length-1],u=r[0];let f=n.to;if(c){const p=u.search(/\S/),m=n.from+u.indexOf(c),x=m+c.length;if(tx(n.from,n.to,e.doc).filter(v=>v.mark.type.excluded.find(w=>w===t.type&&w!==v.mark.type)).filter(v=>v.to>m).length)return null;x<n.to&&o.delete(x,n.to),m>n.from&&o.delete(n.from+p,m),f=n.from+p+c.length,o.addMark(n.from+p,f,t.type.create(i||{})),o.removeStoredMark(t.type)}}})}const{getOwnPropertyNames:sD,getOwnPropertySymbols:iD}=Object,{hasOwnProperty:oD}=Object.prototype;function Cm(t,e){return function(r,s,i){return t(r,s,i)&&e(r,s,i)}}function ou(t){return function(n,r,s){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,s);const{cache:i}=s,o=i.get(n),c=i.get(r);if(o&&c)return o===r&&c===n;i.set(n,r),i.set(r,n);const u=t(n,r,s);return i.delete(n),i.delete(r),u}}function aD(t){return t!=null?t[Symbol.toStringTag]:void 0}function bw(t){return sD(t).concat(iD(t))}const lD=Object.hasOwn||((t,e)=>oD.call(t,e));function Vo(t,e){return t===e||!t&&!e&&t!==t&&e!==e}const cD="__v",dD="__o",uD="_owner",{getOwnPropertyDescriptor:ww,keys:kw}=Object;function fD(t,e){return t.byteLength===e.byteLength&&cf(new Uint8Array(t),new Uint8Array(e))}function hD(t,e,n){let r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function pD(t,e){return t.byteLength===e.byteLength&&cf(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function mD(t,e){return Vo(t.getTime(),e.getTime())}function gD(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function xD(t,e){return t===e}function Nw(t,e,n){const r=t.size;if(r!==e.size)return!1;if(!r)return!0;const s=new Array(r),i=t.entries();let o,c,u=0;for(;(o=i.next())&&!o.done;){const f=e.entries();let p=!1,m=0;for(;(c=f.next())&&!c.done;){if(s[m]){m++;continue}const x=o.value,y=c.value;if(n.equals(x[0],y[0],u,m,t,e,n)&&n.equals(x[1],y[1],x[0],y[0],t,e,n)){p=s[m]=!0;break}m++}if(!p)return!1;u++}return!0}const yD=Vo;function vD(t,e,n){const r=kw(t);let s=r.length;if(kw(e).length!==s)return!1;for(;s-- >0;)if(!JS(t,e,n,r[s]))return!1;return!0}function Fl(t,e,n){const r=bw(t);let s=r.length;if(bw(e).length!==s)return!1;let i,o,c;for(;s-- >0;)if(i=r[s],!JS(t,e,n,i)||(o=ww(t,i),c=ww(e,i),(o||c)&&(!o||!c||o.configurable!==c.configurable||o.enumerable!==c.enumerable||o.writable!==c.writable)))return!1;return!0}function bD(t,e){return Vo(t.valueOf(),e.valueOf())}function wD(t,e){return t.source===e.source&&t.flags===e.flags}function jw(t,e,n){const r=t.size;if(r!==e.size)return!1;if(!r)return!0;const s=new Array(r),i=t.values();let o,c;for(;(o=i.next())&&!o.done;){const u=e.values();let f=!1,p=0;for(;(c=u.next())&&!c.done;){if(!s[p]&&n.equals(o.value,c.value,o.value,c.value,t,e,n)){f=s[p]=!0;break}p++}if(!f)return!1}return!0}function cf(t,e){let n=t.byteLength;if(e.byteLength!==n||t.byteOffset!==e.byteOffset)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function kD(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function JS(t,e,n,r){return(r===uD||r===dD||r===cD)&&(t.$$typeof||e.$$typeof)?!0:lD(e,r)&&n.equals(t[r],e[r],r,r,t,e,n)}const ND="[object ArrayBuffer]",jD="[object Arguments]",SD="[object Boolean]",CD="[object DataView]",ED="[object Date]",TD="[object Error]",AD="[object Map]",MD="[object Number]",RD="[object Object]",OD="[object RegExp]",_D="[object Set]",PD="[object String]",ID={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},DD="[object URL]",LD=Object.prototype.toString;function zD({areArrayBuffersEqual:t,areArraysEqual:e,areDataViewsEqual:n,areDatesEqual:r,areErrorsEqual:s,areFunctionsEqual:i,areMapsEqual:o,areNumbersEqual:c,areObjectsEqual:u,arePrimitiveWrappersEqual:f,areRegExpsEqual:p,areSetsEqual:m,areTypedArraysEqual:x,areUrlsEqual:y,unknownTagComparators:v}){return function(w,j,C){if(w===j)return!0;if(w==null||j==null)return!1;const T=typeof w;if(T!==typeof j)return!1;if(T!=="object")return T==="number"?c(w,j,C):T==="function"?i(w,j,C):!1;const A=w.constructor;if(A!==j.constructor)return!1;if(A===Object)return u(w,j,C);if(Array.isArray(w))return e(w,j,C);if(A===Date)return r(w,j,C);if(A===RegExp)return p(w,j,C);if(A===Map)return o(w,j,C);if(A===Set)return m(w,j,C);const M=LD.call(w);if(M===ED)return r(w,j,C);if(M===OD)return p(w,j,C);if(M===AD)return o(w,j,C);if(M===_D)return m(w,j,C);if(M===RD)return typeof w.then!="function"&&typeof j.then!="function"&&u(w,j,C);if(M===DD)return y(w,j,C);if(M===TD)return s(w,j,C);if(M===jD)return u(w,j,C);if(ID[M])return x(w,j,C);if(M===ND)return t(w,j,C);if(M===CD)return n(w,j,C);if(M===SD||M===MD||M===PD)return f(w,j,C);if(v){let P=v[M];if(!P){const F=aD(w);F&&(P=v[F])}if(P)return P(w,j,C)}return!1}}function BD({circular:t,createCustomConfig:e,strict:n}){let r={areArrayBuffersEqual:fD,areArraysEqual:n?Fl:hD,areDataViewsEqual:pD,areDatesEqual:mD,areErrorsEqual:gD,areFunctionsEqual:xD,areMapsEqual:n?Cm(Nw,Fl):Nw,areNumbersEqual:yD,areObjectsEqual:n?Fl:vD,arePrimitiveWrappersEqual:bD,areRegExpsEqual:wD,areSetsEqual:n?Cm(jw,Fl):jw,areTypedArraysEqual:n?Cm(cf,Fl):cf,areUrlsEqual:kD,unknownTagComparators:void 0};if(e&&(r=Object.assign({},r,e(r))),t){const s=ou(r.areArraysEqual),i=ou(r.areMapsEqual),o=ou(r.areObjectsEqual),c=ou(r.areSetsEqual);r=Object.assign({},r,{areArraysEqual:s,areMapsEqual:i,areObjectsEqual:o,areSetsEqual:c})}return r}function FD(t){return function(e,n,r,s,i,o,c){return t(e,n,c)}}function $D({circular:t,comparator:e,createState:n,equals:r,strict:s}){if(n)return function(c,u){const{cache:f=t?new WeakMap:void 0,meta:p}=n();return e(c,u,{cache:f,equals:r,meta:p,strict:s})};if(t)return function(c,u){return e(c,u,{cache:new WeakMap,equals:r,meta:void 0,strict:s})};const i={cache:void 0,equals:r,meta:void 0,strict:s};return function(c,u){return e(c,u,i)}}const VD=Gi();Gi({strict:!0});Gi({circular:!0});Gi({circular:!0,strict:!0});Gi({createInternalComparator:()=>Vo});Gi({strict:!0,createInternalComparator:()=>Vo});Gi({circular:!0,createInternalComparator:()=>Vo});Gi({circular:!0,createInternalComparator:()=>Vo,strict:!0});function Gi(t={}){const{circular:e=!1,createInternalComparator:n,createState:r,strict:s=!1}=t,i=BD(t),o=zD(i),c=n?n(o):FD(o);return $D({circular:e,comparator:o,createState:r,equals:c,strict:s})}var Em={exports:{}},Tm={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sw;function UD(){if(Sw)return Tm;Sw=1;var t=Ac(),e=BN();function n(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}var r=typeof Object.is=="function"?Object.is:n,s=e.useSyncExternalStore,i=t.useRef,o=t.useEffect,c=t.useMemo,u=t.useDebugValue;return Tm.useSyncExternalStoreWithSelector=function(f,p,m,x,y){var v=i(null);if(v.current===null){var k={hasValue:!1,value:null};v.current=k}else k=v.current;v=c(function(){function j(P){if(!C){if(C=!0,T=P,P=x(P),y!==void 0&&k.hasValue){var F=k.value;if(y(F,P))return A=F}return A=P}if(F=A,r(T,P))return F;var ne=x(P);return y!==void 0&&y(F,ne)?(T=P,F):(T=P,A=ne)}var C=!1,T,A,M=m===void 0?null:m;return[function(){return j(p())},M===null?void 0:function(){return j(M())}]},[p,m,x,y]);var w=s(f,v[0],v[1]);return o(function(){k.hasValue=!0,k.value=w},[w]),u(w),w},Tm}var Cw;function HD(){return Cw||(Cw=1,Em.exports=UD()),Em.exports}var WD=HD(),qD=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&(n.current=e)})},KD=({contentComponent:t})=>{const e=FN.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return l.jsx(l.Fragment,{children:Object.values(e)})};function GD(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:GE.createPortal(r.reactElement,r.element,n)},t.forEach(s=>s())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(s=>s())}}}var JD=class extends dt.Component{constructor(t){var e;super(t),this.editorContentRef=dt.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((e=t.editor)!=null&&e.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){var t;const e=this.props.editor;if(e&&!e.isDestroyed&&((t=e.view.dom)!=null&&t.parentNode)){if(e.contentComponent)return;const n=this.editorContentRef.current;n.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:n}),e.contentComponent=GD(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var t;const e=this.props.editor;if(e){this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null;try{if(!((t=e.view.dom)!=null&&t.parentNode))return;const n=document.createElement("div");n.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:n})}catch{}}}render(){const{editor:t,innerRef:e,...n}=this.props;return l.jsxs(l.Fragment,{children:[l.jsx("div",{ref:qD(e,this.editorContentRef),...n}),(t==null?void 0:t.contentComponent)&&l.jsx(KD,{contentComponent:t.contentComponent})]})}},ZD=E.forwardRef((t,e)=>{const n=dt.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return dt.createElement(JD,{key:n,innerRef:e,...t})}),ZS=dt.memo(ZD),QD=typeof window<"u"?E.useLayoutEffect:E.useEffect,YD=class{constructor(t){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=t,this.lastSnapshot={editor:t,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(t){return this.subscribers.add(t),()=>{this.subscribers.delete(t)}}watch(t){if(this.editor=t,this.editor){const e=()=>{this.transactionNumber+=1,this.subscribers.forEach(r=>r())},n=this.editor;return n.on("transaction",e),()=>{n.off("transaction",e)}}}};function XD(t){var e;const[n]=E.useState(()=>new YD(t.editor)),r=WD.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,t.selector,(e=t.equalityFn)!=null?e:VD);return QD(()=>n.watch(t.editor),[t.editor,n]),E.useDebugValue(r),r}var eL=!1,Og=typeof window>"u",tL=Og||!!(typeof window<"u"&&window.next),nL=class QS{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?Og||tL?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var s,i;return(i=(s=this.options.current).onBeforeCreate)==null?void 0:i.call(s,...r)},onBlur:(...r)=>{var s,i;return(i=(s=this.options.current).onBlur)==null?void 0:i.call(s,...r)},onCreate:(...r)=>{var s,i;return(i=(s=this.options.current).onCreate)==null?void 0:i.call(s,...r)},onDestroy:(...r)=>{var s,i;return(i=(s=this.options.current).onDestroy)==null?void 0:i.call(s,...r)},onFocus:(...r)=>{var s,i;return(i=(s=this.options.current).onFocus)==null?void 0:i.call(s,...r)},onSelectionUpdate:(...r)=>{var s,i;return(i=(s=this.options.current).onSelectionUpdate)==null?void 0:i.call(s,...r)},onTransaction:(...r)=>{var s,i;return(i=(s=this.options.current).onTransaction)==null?void 0:i.call(s,...r)},onUpdate:(...r)=>{var s,i;return(i=(s=this.options.current).onUpdate)==null?void 0:i.call(s,...r)},onContentError:(...r)=>{var s,i;return(i=(s=this.options.current).onContentError)==null?void 0:i.call(s,...r)},onDrop:(...r)=>{var s,i;return(i=(s=this.options.current).onDrop)==null?void 0:i.call(s,...r)},onPaste:(...r)=>{var s,i;return(i=(s=this.options.current).onPaste)==null?void 0:i.call(s,...r)},onDelete:(...r)=>{var s,i;return(i=(s=this.options.current).onDelete)==null?void 0:i.call(s,...r)}};return new qI(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,n){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&n.extensions?e.extensions.length!==n.extensions.length?!1:e.extensions.every((s,i)=>{var o;return s===((o=n.extensions)==null?void 0:o[i])}):e[r]===n[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?QS.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,s)=>r===e[s]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===e&&this.setEditor(null))},1)}};function rL(t={},e=[]){const n=E.useRef(t);n.current=t;const[r]=E.useState(()=>new nL(n)),s=FN.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return E.useDebugValue(s),E.useEffect(r.onRender(e)),XD({editor:s,selector:({transactionNumber:i})=>t.shouldRerenderOnTransaction===!1||t.shouldRerenderOnTransaction===void 0?null:t.immediatelyRender&&i===0?0:i+1}),s}var YS=E.createContext({editor:null});YS.Consumer;var XS=E.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),sL=()=>E.useContext(XS),e2=dt.forwardRef((t,e)=>{const{onDragStart:n}=sL(),r=t.as||"div";return l.jsx(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});function Ew(t){return!!(typeof t=="function"&&t.prototype&&t.prototype.isReactComponent)}function Tw(t){return!!(typeof t=="object"&&t.$$typeof&&(t.$$typeof.toString()==="Symbol(react.forward_ref)"||t.$$typeof.description==="react.forward_ref"))}function iL(t){return!!(typeof t=="object"&&t.$$typeof&&(t.$$typeof.toString()==="Symbol(react.memo)"||t.$$typeof.description==="react.memo"))}function oL(t){if(Ew(t)||Tw(t))return!0;if(iL(t)){const e=t.type;if(e)return Ew(e)||Tw(e)}return!1}function aL(){try{if(E.version)return parseInt(E.version.split(".")[0],10)>=19}catch{}return!1}var lL=class{constructor(t,{editor:e,props:n={},as:r="div",className:s=""}){this.ref=null,this.destroyed=!1,this.id=Math.floor(Math.random()*4294967295).toString(),this.component=t,this.editor=e,this.props=n,this.element=document.createElement(r),this.element.classList.add("react-renderer"),s&&this.element.classList.add(...s.split(" ")),this.editor.isInitialized?Qg.flushSync(()=>{this.render()}):queueMicrotask(()=>{this.destroyed||this.render()})}render(){var t;if(this.destroyed)return;const e=this.component,n=this.props,r=this.editor,s=aL(),i=oL(e),o={...n};o.ref&&!(s||i)&&delete o.ref,!o.ref&&(s||i)&&(o.ref=c=>{this.ref=c}),this.reactElement=l.jsx(e,{...o}),(t=r==null?void 0:r.contentComponent)==null||t.setRenderer(this.id,this)}updateProps(t={}){this.destroyed||(this.props={...this.props,...t},this.render())}destroy(){var t;this.destroyed=!0;const e=this.editor;(t=e==null?void 0:e.contentComponent)==null||t.removeRenderer(this.id);try{this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)}catch{}}updateAttributes(t){Object.keys(t).forEach(e=>{this.element.setAttribute(e,t[e])})}};dt.createContext({markViewContentRef:()=>{}});var cL=class extends rD{constructor(t,e,n){if(super(t,e,n),this.selectionRafId=null,this.cachedExtensionWithSyncedStorage=null,!this.node.isLeaf){this.options.contentDOMElementTag?this.contentDOMElement=document.createElement(this.options.contentDOMElementTag):this.contentDOMElement=document.createElement(this.node.isInline?"span":"div"),this.contentDOMElement.dataset.nodeViewContentReact="",this.contentDOMElement.dataset.nodeViewWrapper="",this.contentDOMElement.style.whiteSpace="inherit";const r=this.dom.querySelector("[data-node-view-content]");if(!r)return;r.appendChild(this.contentDOMElement)}}get extensionWithSyncedStorage(){if(!this.cachedExtensionWithSyncedStorage){const t=this.editor,e=this.extension;this.cachedExtensionWithSyncedStorage=new Proxy(e,{get(n,r,s){var i;return r==="storage"?(i=t.storage[e.name])!=null?i:{}:Reflect.get(n,r,s)}})}return this.cachedExtensionWithSyncedStorage}mount(){const t={editor:this.editor,node:this.node,decorations:this.decorations,innerDecorations:this.innerDecorations,view:this.view,selected:!1,extension:this.extensionWithSyncedStorage,HTMLAttributes:this.HTMLAttributes,getPos:()=>this.getPos(),updateAttributes:(u={})=>this.updateAttributes(u),deleteNode:()=>this.deleteNode(),ref:E.createRef()};if(!this.component.displayName){const u=f=>f.charAt(0).toUpperCase()+f.substring(1);this.component.displayName=u(this.extension.name)}const r={onDragStart:this.onDragStart.bind(this),nodeViewContentRef:u=>{u&&this.contentDOMElement&&u.firstChild!==this.contentDOMElement&&(u.hasAttribute("data-node-view-wrapper")&&u.removeAttribute("data-node-view-wrapper"),u.appendChild(this.contentDOMElement))}},s=this.component,i=E.memo(u=>l.jsx(XS.Provider,{value:r,children:E.createElement(s,u)}));i.displayName="ReactNodeView";let o=this.node.isInline?"span":"div";this.options.as&&(o=this.options.as);const{className:c=""}=this.options;this.handleSelectionUpdate=this.handleSelectionUpdate.bind(this),this.renderer=new lL(i,{editor:this.editor,props:t,as:o,className:`node-${this.node.type.name} ${c}`.trim()}),this.editor.on("selectionUpdate",this.handleSelectionUpdate),this.updateElementAttributes()}get dom(){var t;if(this.renderer.element.firstElementChild&&!((t=this.renderer.element.firstElementChild)!=null&&t.hasAttribute("data-node-view-wrapper")))throw Error("Please use the NodeViewWrapper component for your node view.");return this.renderer.element}get contentDOM(){return this.node.isLeaf?null:this.contentDOMElement}handleSelectionUpdate(){this.selectionRafId&&(cancelAnimationFrame(this.selectionRafId),this.selectionRafId=null),this.selectionRafId=requestAnimationFrame(()=>{this.selectionRafId=null;const{from:t,to:e}=this.editor.state.selection,n=this.getPos();if(typeof n=="number")if(t<=n&&e>=n+this.node.nodeSize){if(this.renderer.props.selected)return;this.selectNode()}else{if(!this.renderer.props.selected)return;this.deselectNode()}})}update(t,e,n){const r=s=>{this.renderer.updateProps(s),typeof this.options.attrs=="function"&&this.updateElementAttributes()};if(t.type!==this.node.type)return!1;if(typeof this.options.update=="function"){const s=this.node,i=this.decorations,o=this.innerDecorations;return this.node=t,this.decorations=e,this.innerDecorations=n,this.options.update({oldNode:s,oldDecorations:i,newNode:t,newDecorations:e,oldInnerDecorations:o,innerDecorations:n,updateProps:()=>r({node:t,decorations:e,innerDecorations:n,extension:this.extensionWithSyncedStorage})})}return t===this.node&&this.decorations===e&&this.innerDecorations===n||(this.node=t,this.decorations=e,this.innerDecorations=n,r({node:t,decorations:e,innerDecorations:n,extension:this.extensionWithSyncedStorage})),!0}selectNode(){this.renderer.updateProps({selected:!0}),this.renderer.element.classList.add("ProseMirror-selectednode")}deselectNode(){this.renderer.updateProps({selected:!1}),this.renderer.element.classList.remove("ProseMirror-selectednode")}destroy(){this.renderer.destroy(),this.editor.off("selectionUpdate",this.handleSelectionUpdate),this.contentDOMElement=null,this.selectionRafId&&(cancelAnimationFrame(this.selectionRafId),this.selectionRafId=null)}updateElementAttributes(){if(this.options.attrs){let t={};if(typeof this.options.attrs=="function"){const e=this.editor.extensionManager.attributes,n=za(this.node,e);t=this.options.attrs({node:this.node,HTMLAttributes:n})}else t=this.options.attrs;this.renderer.updateAttributes(t)}}};function t2(t,e){return n=>n.editor.contentComponent?new cL(t,n,e):{}}var ox=E.createContext({get editor(){throw new Error("useTiptap must be used within a <Tiptap> provider")}});ox.displayName="TiptapContext";var dL=()=>E.useContext(ox);function n2({editor:t,instance:e,children:n}){const r=t??e;if(!r)throw new Error("Tiptap: An editor instance is required. Pass a non-null `editor` prop.");const s=E.useMemo(()=>({editor:r}),[r]),i=E.useMemo(()=>({editor:r}),[r]);return l.jsx(YS.Provider,{value:i,children:l.jsx(ox.Provider,{value:s,children:n})})}n2.displayName="Tiptap";function r2({...t}){const{editor:e}=dL();return l.jsx(ZS,{editor:e,...t})}r2.displayName="Tiptap.Content";Object.assign(n2,{Content:r2});var df=(t,e)=>{if(t==="slot")return 0;if(t instanceof Function)return t(e);const{children:n,...r}=e??{};if(t==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[t,r,n]},uL=/^\s*>\s$/,fL=on.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return df("blockquote",{...bt(this.options.HTMLAttributes,t),children:df("slot",{})})},parseMarkdown:(t,e)=>e.createNode("blockquote",void 0,e.parseChildren(t.tokens||[])),renderMarkdown:(t,e)=>{if(!t.content)return"";const n=">",r=[];return t.content.forEach(s=>{const c=e.renderChildren([s]).split(`
`).map(u=>u.trim()===""?n:`${n} ${u}`);r.push(c.join(`
`))}),r.join(`
${n}
`)},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Fa({find:uL,type:this.type})]}}),hL=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,pL=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,mL=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,gL=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,xL=$o.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return df("strong",{...bt(this.options.HTMLAttributes,t),children:df("slot",{})})},markdownTokenName:"strong",parseMarkdown:(t,e)=>e.applyMark("bold",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`**${e.renderChildren(t)}**`,addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Ba({find:hL,type:this.type}),Ba({find:mL,type:this.type})]},addPasteRules(){return[Do({find:pL,type:this.type}),Do({find:gL,type:this.type})]}}),yL=/(^|[^`])`([^`]+)`(?!`)$/,vL=/(^|[^`])`([^`]+)`(?!`)/g,bL=$o.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",bt(this.options.HTMLAttributes,t),0]},markdownTokenName:"codespan",parseMarkdown:(t,e)=>e.applyMark("code",[{type:"text",text:t.text||""}]),renderMarkdown:(t,e)=>t.content?`\`${e.renderChildren(t.content)}\``:"",addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Ba({find:yL,type:this.type})]},addPasteRules(){return[Do({find:vL,type:this.type})]}}),Am=4,wL=/^```([a-z]+)?[\s\n]$/,kL=/^~~~([a-z]+)?[\s\n]$/,NL=on.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:Am,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options;if(!n)return null;const i=[...((e=t.firstElementChild)==null?void 0:e.classList)||[]].filter(o=>o.startsWith(n)).map(o=>o.replace(n,""))[0];return i||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",bt(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(t,e)=>{var n;return((n=t.raw)==null?void 0:n.startsWith("```"))===!1&&t.codeBlockStyle!=="indented"?[]:e.createNode("codeBlock",{language:t.lang||null},t.text?[e.createTextNode(t.text)]:[])},renderMarkdown:(t,e)=>{var n;let r="";const s=((n=t.attrs)==null?void 0:n.language)||"";return t.content?r=[`\`\`\`${s}`,e.renderChildren(t.content),"```"].join(`
`):r=`\`\`\`${s}

\`\`\``,r},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const n=(e=this.options.tabSize)!=null?e:Am,{state:r}=t,{selection:s}=r,{$from:i,empty:o}=s;if(i.parent.type!==this.type)return!1;const c=" ".repeat(n);return o?t.commands.insertContent(c):t.commands.command(({tr:u})=>{const{from:f,to:p}=s,y=r.doc.textBetween(f,p,`
`,`
`).split(`
`).map(v=>c+v).join(`
`);return u.replaceWith(f,p,r.schema.text(y)),!0})},"Shift-Tab":({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const n=(e=this.options.tabSize)!=null?e:Am,{state:r}=t,{selection:s}=r,{$from:i,empty:o}=s;return i.parent.type!==this.type?!1:o?t.commands.command(({tr:c})=>{var u;const{pos:f}=i,p=i.start(),m=i.end(),y=r.doc.textBetween(p,m,`
`,`
`).split(`
`);let v=0,k=0;const w=f-p;for(let P=0;P<y.length;P+=1){if(k+y[P].length>=w){v=P;break}k+=y[P].length+1}const C=((u=y[v].match(/^ */))==null?void 0:u[0])||"",T=Math.min(C.length,n);if(T===0)return!0;let A=p;for(let P=0;P<v;P+=1)A+=y[P].length+1;return c.delete(A,A+T),f-A<=T&&c.setSelection(He.create(c.doc,A)),!0}):t.commands.command(({tr:c})=>{const{from:u,to:f}=s,x=r.doc.textBetween(u,f,`
`,`
`).split(`
`).map(y=>{var v;const k=((v=y.match(/^ */))==null?void 0:v[0])||"",w=Math.min(k.length,n);return y.slice(w)}).join(`
`);return c.replaceWith(u,f,r.schema.text(x)),!0})},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:s}=n;if(!s||r.parent.type!==this.type)return!1;const i=r.parentOffset===r.parent.nodeSize-2,o=r.parent.textContent.endsWith(`

`);return!i||!o?!1:t.chain().command(({tr:c})=>(c.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:s,empty:i}=n;if(!i||s.parent.type!==this.type||!(s.parentOffset===s.parent.nodeSize-2))return!1;const c=s.after();return c===void 0?!1:r.nodeAt(c)?t.commands.command(({tr:f})=>(f.setSelection(Ke.near(r.resolve(c))),!0)):t.commands.exitCode()}}},addInputRules(){return[Mg({find:wL,type:this.type,getAttributes:t=>({language:t[1]})}),Mg({find:kL,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new Et({key:new Ft("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),s=r?JSON.parse(r):void 0,i=s==null?void 0:s.mode;if(!n||!i)return!1;const{tr:o,schema:c}=t.state,u=c.text(n.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:i},u)),o.selection.$from.parent.type!==this.type&&o.setSelection(He.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),t.dispatch(o),!0}}})]}}),jL=on.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`

`):""}),SL=on.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",bt(this.options.HTMLAttributes,t)]},renderText(){return`
`},renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:s,storedMarks:i}=n;if(s.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:c}=r.extensionManager,u=i||s.$to.parentOffset&&s.$from.marks();return e().insertContent({type:this.name}).command(({tr:f,dispatch:p})=>{if(p&&u&&o){const m=u.filter(x=>c.includes(x.type.name));f.ensureMarks(m)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),CL=on.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,bt(this.options.HTMLAttributes,e),0]},parseMarkdown:(t,e)=>e.createNode("heading",{level:t.depth||1},e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>{var n;const r=(n=t.attrs)!=null&&n.level?parseInt(t.attrs.level,10):1,s="#".repeat(r);return t.content?`${s} ${e.renderChildren(t.content)}`:""},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>Mg({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}}),EL=on.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",bt(this.options.HTMLAttributes,t)]},markdownTokenName:"hr",parseMarkdown:(t,e)=>e.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{if(!JI(e,e.schema.nodes[this.name]))return!1;const{selection:n}=e,{$to:r}=n,s=t();return MS(n)?s.insertContentAt(r.pos,{type:this.name}):s.insertContent({type:this.name}),s.command(({state:i,tr:o,dispatch:c})=>{if(c){const{$to:u}=o.selection,f=u.end();if(u.nodeAfter)u.nodeAfter.isTextblock?o.setSelection(He.create(o.doc,u.pos+1)):u.nodeAfter.isBlock?o.setSelection(Be.create(o.doc,u.pos)):o.setSelection(He.create(o.doc,u.pos));else{const p=i.schema.nodes[this.options.nextNodeType]||u.parent.type.contentMatch.defaultType,m=p==null?void 0:p.create();m&&(o.insert(f,m),o.setSelection(He.create(o.doc,f+1)))}o.scrollIntoView()}return!0}).run()}}},addInputRules(){return[KS({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),TL=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,AL=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,ML=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,RL=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,OL=$o.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",bt(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(t,e)=>e.applyMark("italic",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`*${e.renderChildren(t)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Ba({find:TL,type:this.type}),Ba({find:ML,type:this.type})]},addPasteRules(){return[Do({find:AL,type:this.type}),Do({find:RL,type:this.type})]}});const _L="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",PL="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",_g="numeric",Pg="ascii",Ig="alpha",ic="asciinumeric",Jl="alphanumeric",Dg="domain",s2="emoji",IL="scheme",DL="slashscheme",Mm="whitespace";function LL(t,e){return t in e||(e[t]=[]),e[t]}function yo(t,e,n){e[_g]&&(e[ic]=!0,e[Jl]=!0),e[Pg]&&(e[ic]=!0,e[Ig]=!0),e[ic]&&(e[Jl]=!0),e[Ig]&&(e[Jl]=!0),e[Jl]&&(e[Dg]=!0),e[s2]&&(e[Dg]=!0);for(const r in e){const s=LL(r,n);s.indexOf(t)<0&&s.push(t)}}function zL(t,e){const n={};for(const r in e)e[r].indexOf(t)>=0&&(n[r]=!0);return n}function tr(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}tr.groups={};tr.prototype={accepts(){return!!this.t},go(t){const e=this,n=e.j[t];if(n)return n;for(let r=0;r<e.jr.length;r++){const s=e.jr[r][0],i=e.jr[r][1];if(i&&s.test(t))return i}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,n,r){for(let s=0;s<t.length;s++)this.tt(t[s],e,n,r)},tr(t,e,n,r){r=r||tr.groups;let s;return e&&e.j?s=e:(s=new tr(e),n&&r&&yo(e,n,r)),this.jr.push([t,s]),s},ts(t,e,n,r){let s=this;const i=t.length;if(!i)return s;for(let o=0;o<i-1;o++)s=s.tt(t[o]);return s.tt(t[i-1],e,n,r)},tt(t,e,n,r){r=r||tr.groups;const s=this;if(e&&e.j)return s.j[t]=e,e;const i=e;let o,c=s.go(t);if(c?(o=new tr,Object.assign(o.j,c.j),o.jr.push.apply(o.jr,c.jr),o.jd=c.jd,o.t=c.t):o=new tr,i){if(r)if(o.t&&typeof o.t=="string"){const u=Object.assign(zL(o.t,r),n);yo(i,u,r)}else n&&yo(i,n,r);o.t=i}return s.j[t]=o,o}};const rt=(t,e,n,r,s)=>t.ta(e,n,r,s),It=(t,e,n,r,s)=>t.tr(e,n,r,s),Aw=(t,e,n,r,s)=>t.ts(e,n,r,s),me=(t,e,n,r,s)=>t.tt(e,n,r,s),Ls="WORD",Lg="UWORD",i2="ASCIINUMERICAL",o2="ALPHANUMERICAL",Cc="LOCALHOST",zg="TLD",Bg="UTLD",Cu="SCHEME",wa="SLASH_SCHEME",ax="NUM",Fg="WS",lx="NL",oc="OPENBRACE",ac="CLOSEBRACE",uf="OPENBRACKET",ff="CLOSEBRACKET",hf="OPENPAREN",pf="CLOSEPAREN",mf="OPENANGLEBRACKET",gf="CLOSEANGLEBRACKET",xf="FULLWIDTHLEFTPAREN",yf="FULLWIDTHRIGHTPAREN",vf="LEFTCORNERBRACKET",bf="RIGHTCORNERBRACKET",wf="LEFTWHITECORNERBRACKET",kf="RIGHTWHITECORNERBRACKET",Nf="FULLWIDTHLESSTHAN",jf="FULLWIDTHGREATERTHAN",Sf="AMPERSAND",Cf="APOSTROPHE",Ef="ASTERISK",Si="AT",Tf="BACKSLASH",Af="BACKTICK",Mf="CARET",Ai="COLON",cx="COMMA",Rf="DOLLAR",is="DOT",Of="EQUALS",dx="EXCLAMATION",Ar="HYPHEN",lc="PERCENT",_f="PIPE",Pf="PLUS",If="POUND",cc="QUERY",ux="QUOTE",a2="FULLWIDTHMIDDLEDOT",fx="SEMI",as="SLASH",dc="TILDE",Df="UNDERSCORE",l2="EMOJI",Lf="SYM";var c2=Object.freeze({__proto__:null,ALPHANUMERICAL:o2,AMPERSAND:Sf,APOSTROPHE:Cf,ASCIINUMERICAL:i2,ASTERISK:Ef,AT:Si,BACKSLASH:Tf,BACKTICK:Af,CARET:Mf,CLOSEANGLEBRACKET:gf,CLOSEBRACE:ac,CLOSEBRACKET:ff,CLOSEPAREN:pf,COLON:Ai,COMMA:cx,DOLLAR:Rf,DOT:is,EMOJI:l2,EQUALS:Of,EXCLAMATION:dx,FULLWIDTHGREATERTHAN:jf,FULLWIDTHLEFTPAREN:xf,FULLWIDTHLESSTHAN:Nf,FULLWIDTHMIDDLEDOT:a2,FULLWIDTHRIGHTPAREN:yf,HYPHEN:Ar,LEFTCORNERBRACKET:vf,LEFTWHITECORNERBRACKET:wf,LOCALHOST:Cc,NL:lx,NUM:ax,OPENANGLEBRACKET:mf,OPENBRACE:oc,OPENBRACKET:uf,OPENPAREN:hf,PERCENT:lc,PIPE:_f,PLUS:Pf,POUND:If,QUERY:cc,QUOTE:ux,RIGHTCORNERBRACKET:bf,RIGHTWHITECORNERBRACKET:kf,SCHEME:Cu,SEMI:fx,SLASH:as,SLASH_SCHEME:wa,SYM:Lf,TILDE:dc,TLD:zg,UNDERSCORE:Df,UTLD:Bg,UWORD:Lg,WORD:Ls,WS:Fg});const _s=/[a-z]/,$l=new RegExp("\\p{L}","u"),Rm=new RegExp("\\p{Emoji}","u"),Ps=/\d/,Om=/\s/,Mw="\r",_m=`
`,BL="",FL="",Pm="";let au=null,lu=null;function $L(t=[]){const e={};tr.groups=e;const n=new tr;au==null&&(au=Rw(_L)),lu==null&&(lu=Rw(PL)),me(n,"'",Cf),me(n,"{",oc),me(n,"}",ac),me(n,"[",uf),me(n,"]",ff),me(n,"(",hf),me(n,")",pf),me(n,"<",mf),me(n,">",gf),me(n,"",xf),me(n,"",yf),me(n,"",vf),me(n,"",bf),me(n,"",wf),me(n,"",kf),me(n,"",Nf),me(n,"",jf),me(n,"&",Sf),me(n,"*",Ef),me(n,"@",Si),me(n,"`",Af),me(n,"^",Mf),me(n,":",Ai),me(n,",",cx),me(n,"$",Rf),me(n,".",is),me(n,"=",Of),me(n,"!",dx),me(n,"-",Ar),me(n,"%",lc),me(n,"|",_f),me(n,"+",Pf),me(n,"#",If),me(n,"?",cc),me(n,'"',ux),me(n,"/",as),me(n,";",fx),me(n,"~",dc),me(n,"_",Df),me(n,"\\",Tf),me(n,"",a2);const r=It(n,Ps,ax,{[_g]:!0});It(r,Ps,r);const s=It(r,_s,i2,{[ic]:!0}),i=It(r,$l,o2,{[Jl]:!0}),o=It(n,_s,Ls,{[Pg]:!0});It(o,Ps,s),It(o,_s,o),It(s,Ps,s),It(s,_s,s);const c=It(n,$l,Lg,{[Ig]:!0});It(c,_s),It(c,Ps,i),It(c,$l,c),It(i,Ps,i),It(i,_s),It(i,$l,i);const u=me(n,_m,lx,{[Mm]:!0}),f=me(n,Mw,Fg,{[Mm]:!0}),p=It(n,Om,Fg,{[Mm]:!0});me(n,Pm,p),me(f,_m,u),me(f,Pm,p),It(f,Om,p),me(p,Mw),me(p,_m),It(p,Om,p),me(p,Pm,p);const m=It(n,Rm,l2,{[s2]:!0});me(m,"#"),It(m,Rm,m),me(m,BL,m);const x=me(m,FL);me(x,"#"),It(x,Rm,m);const y=[[_s,o],[Ps,s]],v=[[_s,null],[$l,c],[Ps,i]];for(let k=0;k<au.length;k++)bi(n,au[k],zg,Ls,y);for(let k=0;k<lu.length;k++)bi(n,lu[k],Bg,Lg,v);yo(zg,{tld:!0,ascii:!0},e),yo(Bg,{utld:!0,alpha:!0},e),bi(n,"file",Cu,Ls,y),bi(n,"mailto",Cu,Ls,y),bi(n,"http",wa,Ls,y),bi(n,"https",wa,Ls,y),bi(n,"ftp",wa,Ls,y),bi(n,"ftps",wa,Ls,y),yo(Cu,{scheme:!0,ascii:!0},e),yo(wa,{slashscheme:!0,ascii:!0},e),t=t.sort((k,w)=>k[0]>w[0]?1:-1);for(let k=0;k<t.length;k++){const w=t[k][0],C=t[k][1]?{[IL]:!0}:{[DL]:!0};w.indexOf("-")>=0?C[Dg]=!0:_s.test(w)?Ps.test(w)?C[ic]=!0:C[Pg]=!0:C[_g]=!0,Aw(n,w,w,C)}return Aw(n,"localhost",Cc,{ascii:!0}),n.jd=new tr(Lf),{start:n,tokens:Object.assign({groups:e},c2)}}function d2(t,e){const n=VL(e.replace(/[A-Z]/g,c=>c.toLowerCase())),r=n.length,s=[];let i=0,o=0;for(;o<r;){let c=t,u=null,f=0,p=null,m=-1,x=-1;for(;o<r&&(u=c.go(n[o]));)c=u,c.accepts()?(m=0,x=0,p=c):m>=0&&(m+=n[o].length,x++),f+=n[o].length,i+=n[o].length,o++;i-=m,o-=x,f-=m,s.push({t:p.t,v:e.slice(i-f,i),s:i-f,e:i})}return s}function VL(t){const e=[],n=t.length;let r=0;for(;r<n;){let s=t.charCodeAt(r),i,o=s<55296||s>56319||r+1===n||(i=t.charCodeAt(r+1))<56320||i>57343?t[r]:t.slice(r,r+2);e.push(o),r+=o.length}return e}function bi(t,e,n,r,s){let i;const o=e.length;for(let c=0;c<o-1;c++){const u=e[c];t.j[u]?i=t.j[u]:(i=new tr(r),i.jr=s.slice(),t.j[u]=i),t=i}return i=new tr(n),i.jr=s.slice(),t.j[e[o-1]]=i,i}function Rw(t){const e=[],n=[];let r=0,s="0123456789";for(;r<t.length;){let i=0;for(;s.indexOf(t[r+i])>=0;)i++;if(i>0){e.push(n.join(""));for(let o=parseInt(t.substring(r,r+i),10);o>0;o--)n.pop();r+=i}else n.push(t[r]),r++}return e}const Ec={defaultProtocol:"http",events:null,format:Ow,formatHref:Ow,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function hx(t,e=null){let n=Object.assign({},Ec);t&&(n=Object.assign(n,t instanceof hx?t.o:t));const r=n.ignoreTags,s=[];for(let i=0;i<r.length;i++)s.push(r[i].toUpperCase());this.o=n,e&&(this.defaultRender=e),this.ignoreTags=s}hx.prototype={o:Ec,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,n){const r=e!=null;let s=this.o[t];return s&&(typeof s=="object"?(s=n.t in s?s[n.t]:Ec[t],typeof s=="function"&&r&&(s=s(e,n))):typeof s=="function"&&r&&(s=s(e,n.t,n)),s)},getObj(t,e,n){let r=this.o[t];return typeof r=="function"&&e!=null&&(r=r(e,n.t,n)),r},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function Ow(t){return t}function u2(t,e){this.t="token",this.v=t,this.tk=e}u2.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),n=t.get("truncate",e,this),r=t.get("format",e,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=Ec.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,n=this.toHref(t.get("defaultProtocol")),r=t.get("formatHref",n,this),s=t.get("tagName",n,e),i=this.toFormattedString(t),o={},c=t.get("className",n,e),u=t.get("target",n,e),f=t.get("rel",n,e),p=t.getObj("attributes",n,e),m=t.getObj("events",n,e);return o.href=r,c&&(o.class=c),u&&(o.target=u),f&&(o.rel=f),p&&Object.assign(o,p),{tagName:s,attributes:o,content:i,eventListeners:m}}};function ch(t,e){class n extends u2{constructor(s,i){super(s,i),this.t=t}}for(const r in e)n.prototype[r]=e[r];return n.t=t,n}const _w=ch("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),Pw=ch("text"),UL=ch("nl"),cu=ch("url",{isLink:!0,toHref(t=Ec.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==Cc&&t[1].t===Ai}}),Er=t=>new tr(t);function HL({groups:t}){const e=t.domain.concat([Sf,Ef,Si,Tf,Af,Mf,Rf,Of,Ar,ax,lc,_f,Pf,If,as,Lf,dc,Df]),n=[Cf,Ai,cx,is,dx,lc,cc,ux,fx,mf,gf,oc,ac,ff,uf,hf,pf,xf,yf,vf,bf,wf,kf,Nf,jf],r=[Sf,Cf,Ef,Tf,Af,Mf,Rf,Of,Ar,oc,ac,lc,_f,Pf,If,cc,as,Lf,dc,Df],s=Er(),i=me(s,dc);rt(i,r,i),rt(i,t.domain,i);const o=Er(),c=Er(),u=Er();rt(s,t.domain,o),rt(s,t.scheme,c),rt(s,t.slashscheme,u),rt(o,r,i),rt(o,t.domain,o);const f=me(o,Si);me(i,Si,f),me(c,Si,f),me(u,Si,f);const p=me(i,is);rt(p,r,i),rt(p,t.domain,i);const m=Er();rt(f,t.domain,m),rt(m,t.domain,m);const x=me(m,is);rt(x,t.domain,m);const y=Er(_w);rt(x,t.tld,y),rt(x,t.utld,y),me(f,Cc,y);const v=me(m,Ar);me(v,Ar,v),rt(v,t.domain,m),rt(y,t.domain,m),me(y,is,x),me(y,Ar,v);const k=me(y,Ai);rt(k,t.numeric,_w);const w=me(o,Ar),j=me(o,is);me(w,Ar,w),rt(w,t.domain,o),rt(j,r,i),rt(j,t.domain,o);const C=Er(cu);rt(j,t.tld,C),rt(j,t.utld,C),rt(C,t.domain,o),rt(C,r,i),me(C,is,j),me(C,Ar,w),me(C,Si,f);const T=me(C,Ai),A=Er(cu);rt(T,t.numeric,A);const M=Er(cu),P=Er();rt(M,e,M),rt(M,n,P),rt(P,e,M),rt(P,n,P),me(C,as,M),me(A,as,M);const F=me(c,Ai),ne=me(u,Ai),O=me(ne,as),X=me(O,as);rt(c,t.domain,o),me(c,is,j),me(c,Ar,w),rt(u,t.domain,o),me(u,is,j),me(u,Ar,w),rt(F,t.domain,M),me(F,as,M),me(F,cc,M),rt(X,t.domain,M),rt(X,e,M),me(X,as,M);const le=[[oc,ac],[uf,ff],[hf,pf],[mf,gf],[xf,yf],[vf,bf],[wf,kf],[Nf,jf]];for(let z=0;z<le.length;z++){const[te,ie]=le[z],oe=me(M,te);me(P,te,oe),me(oe,ie,M);const W=Er(cu);rt(oe,e,W);const q=Er();rt(oe,n),rt(W,e,W),rt(W,n,q),rt(q,e,W),rt(q,n,q),me(W,ie,M),me(q,ie,M)}return me(s,Cc,C),me(s,lx,UL),{start:s,tokens:c2}}function WL(t,e,n){let r=n.length,s=0,i=[],o=[];for(;s<r;){let c=t,u=null,f=null,p=0,m=null,x=-1;for(;s<r&&!(u=c.go(n[s].t));)o.push(n[s++]);for(;s<r&&(f=u||c.go(n[s].t));)u=null,c=f,c.accepts()?(x=0,m=c):x>=0&&x++,s++,p++;if(x<0)s-=p,s<r&&(o.push(n[s]),s++);else{o.length>0&&(i.push(Im(Pw,e,o)),o=[]),s-=x,p-=x;const y=m.t,v=n.slice(s-p,s);i.push(Im(y,e,v))}}return o.length>0&&i.push(Im(Pw,e,o)),i}function Im(t,e,n){const r=n[0].s,s=n[n.length-1].e,i=e.slice(r,s);return new t(i,n)}const qL=typeof console<"u"&&console&&console.warn||(()=>{}),KL="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Ct={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function GL(){return tr.groups={},Ct.scanner=null,Ct.parser=null,Ct.tokenQueue=[],Ct.pluginQueue=[],Ct.customSchemes=[],Ct.initialized=!1,Ct}function Iw(t,e=!1){if(Ct.initialized&&qL(`linkifyjs: already initialized - will not register custom scheme "${t}" ${KL}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);Ct.customSchemes.push([t,e])}function JL(){Ct.scanner=$L(Ct.customSchemes);for(let t=0;t<Ct.tokenQueue.length;t++)Ct.tokenQueue[t][1]({scanner:Ct.scanner});Ct.parser=HL(Ct.scanner.tokens);for(let t=0;t<Ct.pluginQueue.length;t++)Ct.pluginQueue[t][1]({scanner:Ct.scanner,parser:Ct.parser});return Ct.initialized=!0,Ct}function px(t){return Ct.initialized||JL(),WL(Ct.parser.start,t,d2(Ct.scanner.start,t))}px.scan=d2;function f2(t,e=null,n=null){if(e&&typeof e=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);n=e,e=null}const r=new hx(n),s=px(t),i=[];for(let o=0;o<s.length;o++){const c=s[o];c.isLink&&(!e||c.t===e)&&r.check(c)&&i.push(c.toFormattedObject(r))}return i}var mx="[\0- -\u2029]",ZL=new RegExp(mx),QL=new RegExp(`${mx}$`),YL=new RegExp(mx,"g");function XL(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function e6(t){return new Et({key:new Ft("autolink"),appendTransaction:(e,n,r)=>{const s=e.some(f=>f.docChanged)&&!n.doc.eq(r.doc),i=e.some(f=>f.getMeta("preventAutolink"));if(!s||i)return;const{tr:o}=r,c=wS(n.doc,[...e]);if(AS(c).forEach(({newRange:f})=>{const p=J3(r.doc,f,y=>y.isTextblock);let m,x;if(p.length>1)m=p[0],x=r.doc.textBetween(m.pos,m.pos+m.node.nodeSize,void 0," ");else if(p.length){const y=r.doc.textBetween(f.from,f.to," "," ");if(!QL.test(y))return;m=p[0],x=r.doc.textBetween(m.pos,f.to,void 0," ")}if(m&&x){const y=x.split(ZL).filter(Boolean);if(y.length<=0)return!1;const v=y[y.length-1],k=m.pos+x.lastIndexOf(v);if(!v)return!1;const w=px(v).map(j=>j.toObject(t.defaultProtocol));if(!XL(w))return!1;w.filter(j=>j.isLink).map(j=>({...j,from:k+j.start+1,to:k+j.end+1})).filter(j=>r.schema.marks.code?!r.doc.rangeHasMark(j.from,j.to,r.schema.marks.code):!0).filter(j=>t.validate(j.value)).filter(j=>t.shouldAutoLink(j.value)).forEach(j=>{tx(j.from,j.to,r.doc).some(C=>C.mark.type===t.type)||o.addMark(j.from,j.to,t.type.create({href:j.href}))})}}),!!o.steps.length)return o}})}function t6(t){return new Et({key:new Ft("handleClickLink"),props:{handleClick:(e,n,r)=>{var s,i;if(r.button!==0||!e.editable)return!1;let o=null;if(r.target instanceof HTMLAnchorElement)o=r.target;else{const u=r.target;if(!u)return!1;const f=t.editor.view.dom;o=u.closest("a"),o&&!f.contains(o)&&(o=null)}if(!o)return!1;let c=!1;if(t.enableClickSelection&&(c=t.editor.commands.extendMarkRange(t.type.name)),t.openOnClick){const u=TS(e.state,t.type.name),f=(s=o.href)!=null?s:u.href,p=(i=o.target)!=null?i:u.target;f&&(window.open(f,p),c=!0)}return c}}})}function n6(t){return new Et({key:new Ft("handlePasteLink"),props:{handlePaste:(e,n,r)=>{const{shouldAutoLink:s}=t,{state:i}=e,{selection:o}=i,{empty:c}=o;if(c)return!1;let u="";r.content.forEach(p=>{u+=p.textContent});const f=f2(u,{defaultProtocol:t.defaultProtocol}).find(p=>p.isLink&&p.value===u);return!u||!f||s!==void 0&&!s(f.value)?!1:t.editor.commands.setMark(t.type,{href:f.href})}}})}function lo(t,e){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const s=typeof r=="string"?r:r.scheme;s&&n.push(s)}),!t||t.replace(YL,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var h2=$o.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){Iw(t);return}Iw(t.scheme,t.optionalSlashes)})},onDestroy(){GL()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!lo(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>{const e=/^[a-z][a-z0-9+.-]*:\/\//i.test(t),n=/^[a-z][a-z0-9+.-]*:/i.test(t);if(e||n&&!t.includes("@"))return!0;const s=(t.includes("@")?t.split("@").pop():t).split(/[/?#:]/)[0];return!(/^\d{1,3}(\.\d{1,3}){3}$/.test(s)||!/\./.test(s))}}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class},title:{default:null}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:n=>!!lo(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!lo(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",bt(this.options.HTMLAttributes,t),0]:["a",bt(this.options.HTMLAttributes,{...t,href:""}),0]},markdownTokenName:"link",parseMarkdown:(t,e)=>e.applyMark("link",e.parseInline(t.tokens||[]),{href:t.href,title:t.title||null}),renderMarkdown:(t,e)=>{var n,r,s,i;const o=(r=(n=t.attrs)==null?void 0:n.href)!=null?r:"",c=(i=(s=t.attrs)==null?void 0:s.title)!=null?i:"",u=e.renderChildren(t);return c?`[${u}](${o} "${c}")`:`[${u}](${o})`},addCommands(){return{setLink:t=>({chain:e})=>{const{href:n}=t;return this.options.isAllowedUri(n,{defaultValidate:r=>!!lo(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:n}=t||{};return n&&!this.options.isAllowedUri(n,{defaultValidate:r=>!!lo(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Do({find:t=>{const e=[];if(t){const{protocols:n,defaultProtocol:r}=this.options,s=f2(t).filter(i=>i.isLink&&this.options.isAllowedUri(i.value,{defaultValidate:o=>!!lo(o,n),protocols:n,defaultProtocol:r}));s.length&&s.forEach(i=>{this.options.shouldAutoLink(i.value)&&e.push({text:i.value,data:{href:i.href},index:i.start})})}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:n}=this.options;return this.options.autolink&&t.push(e6({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:s=>!!lo(s,e),protocols:e,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),t.push(t6({type:this.type,editor:this.editor,openOnClick:this.options.openOnClick==="whenNotEditable"?!0:this.options.openOnClick,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&t.push(n6({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),t}}),r6=h2,s6=Object.defineProperty,i6=(t,e)=>{for(var n in e)s6(t,n,{get:e[n],enumerable:!0})},o6="listItem",Dw="textStyle",Lw=/^\s*([-+*])\s$/,p2=on.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",bt(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>t.type!=="list"||t.ordered?[]:{type:"bulletList",content:t.items?e.parseChildren(t.items):[]},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(o6,this.editor.getAttributes(Dw)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=Fa({find:Lw,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Fa({find:Lw,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(Dw),editor:this.editor})),[t]}}),m2=on.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",bt(this.options.HTMLAttributes,t),0]},markdownTokenName:"list_item",parseMarkdown:(t,e)=>{if(t.type!=="list_item")return[];let n=[];if(t.tokens&&t.tokens.length>0)if(t.tokens.some(s=>s.type==="paragraph"))n=e.parseChildren(t.tokens);else{const s=t.tokens[0];if(s&&s.type==="text"&&s.tokens&&s.tokens.length>0){if(n=[{type:"paragraph",content:e.parseInline(s.tokens)}],t.tokens.length>1){const o=t.tokens.slice(1),c=e.parseChildren(o);n.push(...c)}}else n=e.parseChildren(t.tokens)}return n.length===0&&(n=[{type:"paragraph",content:[]}]),{type:"listItem",content:n}},renderMarkdown:(t,e,n)=>ix(t,e,r=>{var s,i;return r.parentType==="bulletList"?"- ":r.parentType==="orderedList"?`${(((i=(s=r.meta)==null?void 0:s.parentAttrs)==null?void 0:i.start)||1)+r.index}. `:"- "},n),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),a6={};i6(a6,{findListItemPos:()=>$c,getNextListDepth:()=>gx,handleBackspace:()=>$g,handleDelete:()=>Vg,hasListBefore:()=>g2,hasListItemAfter:()=>l6,hasListItemBefore:()=>x2,listItemHasSubList:()=>y2,nextListIsDeeper:()=>v2,nextListIsHigher:()=>b2});var $c=(t,e)=>{const{$from:n}=e.selection,r=Xt(t,e.schema);let s=null,i=n.depth,o=n.pos,c=null;for(;i>0&&c===null;)s=n.node(i),s.type===r?c=i:(i-=1,o-=1);return c===null?null:{$pos:e.doc.resolve(o),depth:c}},gx=(t,e)=>{const n=$c(t,e);if(!n)return!1;const[,r]=sI(e,t,n.$pos.pos+4);return r},g2=(t,e,n)=>{const{$anchor:r}=t.selection,s=Math.max(0,r.pos-2),i=t.doc.resolve(s).node();return!(!i||!n.includes(i.type.name))},x2=(t,e)=>{var n;const{$anchor:r}=e.selection,s=e.doc.resolve(r.pos-2);return!(s.index()===0||((n=s.nodeBefore)==null?void 0:n.type.name)!==t)},y2=(t,e,n)=>{if(!n)return!1;const r=Xt(t,e.schema);let s=!1;return n.descendants(i=>{i.type===r&&(s=!0)}),s},$g=(t,e,n)=>{if(t.commands.undoInputRule())return!0;if(t.state.selection.from!==t.state.selection.to)return!1;if(!Hi(t.state,e)&&g2(t.state,e,n)){const{$anchor:c}=t.state.selection,u=t.state.doc.resolve(c.before()-1),f=[];u.node().descendants((x,y)=>{x.type.name===e&&f.push({node:x,pos:y})});const p=f.at(-1);if(!p)return!1;const m=t.state.doc.resolve(u.start()+p.pos+1);return t.chain().cut({from:c.start()-1,to:c.end()+1},m.end()).joinForward().run()}if(!Hi(t.state,e)||!lI(t.state))return!1;const r=$c(e,t.state);if(!r)return!1;const i=t.state.doc.resolve(r.$pos.pos-2).node(r.depth),o=y2(e,t.state,i);return x2(e,t.state)&&!o?t.commands.joinItemBackward():t.chain().liftListItem(e).run()},v2=(t,e)=>{const n=gx(t,e),r=$c(t,e);return!r||!n?!1:n>r.depth},b2=(t,e)=>{const n=gx(t,e),r=$c(t,e);return!r||!n?!1:n<r.depth},Vg=(t,e)=>{if(!Hi(t.state,e)||!aI(t.state,e))return!1;const{selection:n}=t.state,{$from:r,$to:s}=n;return!n.empty&&r.sameParent(s)?!1:v2(e,t.state)?t.chain().focus(t.state.selection.from+4).lift(e).joinBackward().run():b2(e,t.state)?t.chain().joinForward().joinBackward().run():t.commands.joinItemForward()},l6=(t,e)=>{var n;const{$anchor:r}=e.selection,s=e.doc.resolve(r.pos-r.parentOffset-2);return!(s.index()===s.parent.childCount-1||((n=s.nodeAfter)==null?void 0:n.type.name)!==t)},w2=$t.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&Vg(t,n)&&(e=!0)}),e},"Mod-Delete":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&Vg(t,n)&&(e=!0)}),e},Backspace:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&$g(t,n,r)&&(e=!0)}),e},"Mod-Backspace":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&$g(t,n,r)&&(e=!0)}),e}}}}),zw=/^(\s*)(\d+)\.\s+(.*)$/,c6=/^\s/;function d6(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n],i=s.match(zw);if(!i)break;const[,o,c,u]=i,f=o.length;let p=u,m=n+1;const x=[s];for(;m<t.length;){const y=t[m];if(y.match(zw))break;if(y.trim()==="")x.push(y),p+=`
`,m+=1;else if(y.match(c6))x.push(y),p+=`
${y.slice(f+2)}`,m+=1;else break}e.push({indent:f,number:parseInt(c,10),content:p.trim(),raw:x.join(`
`)}),r=m,n=m}return[e,r]}function k2(t,e,n){var r;const s=[];let i=0;for(;i<t.length;){const o=t[i];if(o.indent===e){const c=o.content.split(`
`),u=((r=c[0])==null?void 0:r.trim())||"",f=[];u&&f.push({type:"paragraph",raw:u,tokens:n.inlineTokens(u)});const p=c.slice(1).join(`
`).trim();if(p){const y=n.blockTokens(p);f.push(...y)}let m=i+1;const x=[];for(;m<t.length&&t[m].indent>e;)x.push(t[m]),m+=1;if(x.length>0){const y=Math.min(...x.map(k=>k.indent)),v=k2(x,y,n);f.push({type:"list",ordered:!0,start:x[0].number,items:v,raw:x.map(k=>k.raw).join(`
`)})}s.push({type:"list_item",raw:o.raw,tokens:f}),i=m}else i+=1}return s}function u6(t,e){return t.map(n=>{if(n.type!=="list_item")return e.parseChildren([n])[0];const r=[];return n.tokens&&n.tokens.length>0&&n.tokens.forEach(s=>{if(s.type==="paragraph"||s.type==="list"||s.type==="blockquote"||s.type==="code")r.push(...e.parseChildren([s]));else if(s.type==="text"&&s.tokens){const i=e.parseChildren([s]);r.push({type:"paragraph",content:i})}else{const i=e.parseChildren([s]);i.length>0&&r.push(...i)}}),{type:"listItem",content:r}})}var f6="listItem",Bw="textStyle",Fw=/^(\d+)\.\s$/,N2=on.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",bt(this.options.HTMLAttributes,n),0]:["ol",bt(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>{if(t.type!=="list"||!t.ordered)return[];const n=t.start||1,r=t.items?u6(t.items,e):[];return n!==1?{type:"orderedList",attrs:{start:n},content:r}:{type:"orderedList",content:r}},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:t=>{const e=t.match(/^(\s*)(\d+)\.\s+/),n=e==null?void 0:e.index;return n!==void 0?n:-1},tokenize:(t,e,n)=>{var r;const s=t.split(`
`),[i,o]=d6(s);if(i.length===0)return;const c=k2(i,0,n);return c.length===0?void 0:{type:"list",ordered:!0,start:((r=i[0])==null?void 0:r.number)||1,items:c,raw:s.slice(0,o).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(f6,this.editor.getAttributes(Bw)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=Fa({find:Fw,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Fa({find:Fw,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(Bw)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),h6=/^\s*(\[([( |x])?\])\s$/,p6=on.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:t=>{const e=t.getAttribute("data-checked");return e===""||e==="true"},renderHTML:t=>({"data-checked":t.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:t,HTMLAttributes:e}){return["li",bt(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:t.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(t,e)=>{const n=[];if(t.tokens&&t.tokens.length>0?n.push(e.createNode("paragraph",{},e.parseInline(t.tokens))):t.text?n.push(e.createNode("paragraph",{},[e.createNode("text",{text:t.text})])):n.push(e.createNode("paragraph",{},[])),t.nestedTokens&&t.nestedTokens.length>0){const r=e.parseChildren(t.nestedTokens);n.push(...r)}return e.createNode("taskItem",{checked:t.checked||!1},n)},renderMarkdown:(t,e)=>{var n;const s=`- [${(n=t.attrs)!=null&&n.checked?"x":" "}] `;return ix(t,e,s)},addKeyboardShortcuts(){const t={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...t,Tab:()=>this.editor.commands.sinkListItem(this.name)}:t},addNodeView(){return({node:t,HTMLAttributes:e,getPos:n,editor:r})=>{const s=document.createElement("li"),i=document.createElement("label"),o=document.createElement("span"),c=document.createElement("input"),u=document.createElement("div"),f=m=>{var x,y;c.ariaLabel=((y=(x=this.options.a11y)==null?void 0:x.checkboxLabel)==null?void 0:y.call(x,m,c.checked))||`Task item checkbox for ${m.textContent||"empty task item"}`};f(t),i.contentEditable="false",c.type="checkbox",c.addEventListener("mousedown",m=>m.preventDefault()),c.addEventListener("change",m=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){c.checked=!c.checked;return}const{checked:x}=m.target;r.isEditable&&typeof n=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:y})=>{const v=n();if(typeof v!="number")return!1;const k=y.doc.nodeAt(v);return y.setNodeMarkup(v,void 0,{...k==null?void 0:k.attrs,checked:x}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(t,x)||(c.checked=!c.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([m,x])=>{s.setAttribute(m,x)}),s.dataset.checked=t.attrs.checked,c.checked=t.attrs.checked,i.append(c,o),s.append(i,u),Object.entries(e).forEach(([m,x])=>{s.setAttribute(m,x)});let p=new Set(Object.keys(e));return{dom:s,contentDOM:u,update:m=>{if(m.type!==this.type)return!1;s.dataset.checked=m.attrs.checked,c.checked=m.attrs.checked,f(m);const x=r.extensionManager.attributes,y=za(m,x),v=new Set(Object.keys(y)),k=this.options.HTMLAttributes;return p.forEach(w=>{v.has(w)||(w in k?s.setAttribute(w,k[w]):s.removeAttribute(w))}),Object.entries(y).forEach(([w,j])=>{j==null?w in k?s.setAttribute(w,k[w]):s.removeAttribute(w):s.setAttribute(w,j)}),p=v,!0}}}},addInputRules(){return[Fa({find:h6,type:this.type,getAttributes:t=>({checked:t[t.length-1]==="x"})})]}}),m6=on.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:t}){return["ul",bt(this.options.HTMLAttributes,t,{"data-type":this.name}),0]},parseMarkdown:(t,e)=>e.createNode("taskList",{},e.parseChildren(t.items||[])),renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(t){var e;const n=(e=t.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:e.index;return n!==void 0?n:-1},tokenize(t,e,n){const r=i=>{const o=Rg(i,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:c=>({indentLevel:c[1].length,mainContent:c[4],checked:c[3].toLowerCase()==="x"}),createToken:(c,u)=>({type:"taskItem",raw:"",mainContent:c.mainContent,indentLevel:c.indentLevel,checked:c.checked,text:c.mainContent,tokens:n.inlineTokens(c.mainContent),nestedTokens:u}),customNestedParser:r},n);return o?[{type:"taskList",raw:o.raw,items:o.items}]:n.blockTokens(i)},s=Rg(t,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:i=>({indentLevel:i[1].length,mainContent:i[4],checked:i[3].toLowerCase()==="x"}),createToken:(i,o)=>({type:"taskItem",raw:"",mainContent:i.mainContent,indentLevel:i.indentLevel,checked:i.checked,text:i.mainContent,tokens:n.inlineTokens(i.mainContent),nestedTokens:o}),customNestedParser:r},n);if(s)return{type:"taskList",raw:s.raw,items:s.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:t})=>t.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});$t.create({name:"listKit",addExtensions(){const t=[];return this.options.bulletList!==!1&&t.push(p2.configure(this.options.bulletList)),this.options.listItem!==!1&&t.push(m2.configure(this.options.listItem)),this.options.listKeymap!==!1&&t.push(w2.configure(this.options.listKeymap)),this.options.orderedList!==!1&&t.push(N2.configure(this.options.orderedList)),this.options.taskItem!==!1&&t.push(p6.configure(this.options.taskItem)),this.options.taskList!==!1&&t.push(m6.configure(this.options.taskList)),t}});var $w="&nbsp;",g6="",x6=on.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",bt(this.options.HTMLAttributes,t),0]},parseMarkdown:(t,e)=>{const n=t.tokens||[];if(n.length===1&&n[0].type==="image")return e.parseChildren([n[0]]);const r=e.parseInline(n);return r.length===1&&r[0].type==="text"&&(r[0].text===$w||r[0].text===g6)?e.createNode("paragraph",void 0,[]):e.createNode("paragraph",void 0,r)},renderMarkdown:(t,e)=>{if(!t)return"";const n=Array.isArray(t.content)?t.content:[];return n.length===0?$w:e.renderChildren(n)},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),y6=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,v6=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,b6=$o.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",bt(this.options.HTMLAttributes,t),0]},markdownTokenName:"del",parseMarkdown:(t,e)=>e.applyMark("strike",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`~~${e.renderChildren(t)}~~`,addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Ba({find:y6,type:this.type})]},addPasteRules(){return[Do({find:v6,type:this.type})]}}),w6=on.create({name:"text",group:"inline",parseMarkdown:t=>({type:"text",text:t.text||""}),renderMarkdown:t=>t.text||""}),j2=$o.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",bt(this.options.HTMLAttributes,t),0]},parseMarkdown(t,e){return e.applyMark(this.name||"underline",e.parseInline(t.tokens||[]))},renderMarkdown(t,e){return`++${e.renderChildren(t)}++`},markdownTokenizer:{name:"underline",level:"inline",start(t){return t.indexOf("++")},tokenize(t,e,n){const s=/^(\+\+)([\s\S]+?)(\+\+)/.exec(t);if(!s)return;const i=s[2].trim();return{type:"underline",raw:s[0],text:i,tokens:n.inlineTokens(i)}}},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),k6=j2;function N6(t={}){return new Et({view(e){return new j6(e,t)}})}class j6{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(s=>{let i=o=>{this[s](o)};return e.dom.addEventListener(s,i),{name:s,handler:i}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r,s=this.editorView.dom,i=s.getBoundingClientRect(),o=i.width/s.offsetWidth,c=i.height/s.offsetHeight;if(n){let m=e.nodeBefore,x=e.nodeAfter;if(m||x){let y=this.editorView.nodeDOM(this.cursorPos-(m?m.nodeSize:0));if(y){let v=y.getBoundingClientRect(),k=m?v.bottom:v.top;m&&x&&(k=(k+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let w=this.width/2*c;r={left:v.left,right:v.right,top:k-w,bottom:k+w}}}}if(!r){let m=this.editorView.coordsAtPos(this.cursorPos),x=this.width/2*o;r={left:m.left-x,right:m.left+x,top:m.top,bottom:m.bottom}}let u=this.editorView.dom.offsetParent;this.element||(this.element=u.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let f,p;if(!u||u==document.body&&getComputedStyle(u).position=="static")f=-pageXOffset,p=-pageYOffset;else{let m=u.getBoundingClientRect(),x=m.width/u.offsetWidth,y=m.height/u.offsetHeight;f=m.left-u.scrollLeft*x,p=m.top-u.scrollTop*y}this.element.style.left=(r.left-f)/o+"px",this.element.style.top=(r.top-p)/c+"px",this.element.style.width=(r.right-r.left)/o+"px",this.element.style.height=(r.bottom-r.top)/c+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),s=r&&r.type.spec.disableDropCursor,i=typeof s=="function"?s(this.editorView,n,e):s;if(n&&!i){let o=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let c=hj(this.editorView.state.doc,o,this.editorView.dragging.slice);c!=null&&(o=c)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class Lt extends Ke{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return Lt.valid(r)?new Lt(r):Ke.near(r)}content(){return we.empty}eq(e){return e instanceof Lt&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Lt(e.resolve(n.pos))}getBookmark(){return new xx(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!S6(e)||!C6(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let s=n.contentMatchAt(e.index()).defaultType;return s&&s.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&Lt.valid(e))return e;let s=e.pos,i=null;for(let o=e.depth;;o--){let c=e.node(o);if(n>0?e.indexAfter(o)<c.childCount:e.index(o)>0){i=c.child(n>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;s+=n;let u=e.doc.resolve(s);if(Lt.valid(u))return u}for(;;){let o=n>0?i.firstChild:i.lastChild;if(!o){if(i.isAtom&&!i.isText&&!Be.isSelectable(i)){e=e.doc.resolve(s+i.nodeSize*n),r=!1;continue e}break}i=o,s+=n;let c=e.doc.resolve(s);if(Lt.valid(c))return c}return null}}}Lt.prototype.visible=!1;Lt.findFrom=Lt.findGapCursorFrom;Ke.jsonID("gapcursor",Lt);class xx{constructor(e){this.pos=e}map(e){return new xx(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return Lt.valid(n)?new Lt(n):Ke.near(n)}}function S2(t){return t.isAtom||t.spec.isolating||t.spec.createGapCursor}function S6(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(n-1);;s=s.lastChild){if(s.childCount==0&&!s.inlineContent||S2(s.type))return!0;if(s.inlineContent)return!1}}return!0}function C6(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(n);;s=s.firstChild){if(s.childCount==0&&!s.inlineContent||S2(s.type))return!0;if(s.inlineContent)return!1}}return!0}function E6(){return new Et({props:{decorations:R6,createSelectionBetween(t,e,n){return e.pos==n.pos&&Lt.valid(n)?new Lt(n):null},handleClick:A6,handleKeyDown:T6,handleDOMEvents:{beforeinput:M6}}})}const T6=J0({ArrowLeft:du("horiz",-1),ArrowRight:du("horiz",1),ArrowUp:du("vert",-1),ArrowDown:du("vert",1)});function du(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,s,i){let o=r.selection,c=e>0?o.$to:o.$from,u=o.empty;if(o instanceof He){if(!i.endOfTextblock(n)||c.depth==0)return!1;u=!1,c=r.doc.resolve(e>0?c.after():c.before())}let f=Lt.findGapCursorFrom(c,e,u);return f?(s&&s(r.tr.setSelection(new Lt(f))),!0):!1}}function A6(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!Lt.valid(r))return!1;let s=t.posAtCoords({left:n.clientX,top:n.clientY});return s&&s.inside>-1&&Be.isSelectable(t.state.doc.nodeAt(s.inside))?!1:(t.dispatch(t.state.tr.setSelection(new Lt(r))),!0)}function M6(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof Lt))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let s=ae.empty;for(let o=r.length-1;o>=0;o--)s=ae.from(r[o].createAndFill(null,s));let i=t.state.tr.replace(n.pos,n.pos,new we(s,0,0));return i.setSelection(He.near(i.doc.resolve(n.pos+1))),t.dispatch(i),!1}function R6(t){if(!(t.selection instanceof Lt))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",xt.create(t.doc,[hn.widget(t.selection.head,e,{key:"gapcursor"})])}var zf=200,gn=function(){};gn.prototype.append=function(e){return e.length?(e=gn.from(e),!this.length&&e||e.length<zf&&this.leafAppend(e)||this.length<zf&&e.leafPrepend(this)||this.appendInner(e)):this};gn.prototype.prepend=function(e){return e.length?gn.from(e).append(this):this};gn.prototype.appendInner=function(e){return new O6(this,e)};gn.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?gn.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};gn.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};gn.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};gn.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var s=[];return this.forEach(function(i,o){return s.push(e(i,o))},n,r),s};gn.from=function(e){return e instanceof gn?e:e&&e.length?new C2(e):gn.empty};var C2=(function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(s,i){return s==0&&i==this.length?this:new e(this.values.slice(s,i))},e.prototype.getInner=function(s){return this.values[s]},e.prototype.forEachInner=function(s,i,o,c){for(var u=i;u<o;u++)if(s(this.values[u],c+u)===!1)return!1},e.prototype.forEachInvertedInner=function(s,i,o,c){for(var u=i-1;u>=o;u--)if(s(this.values[u],c+u)===!1)return!1},e.prototype.leafAppend=function(s){if(this.length+s.length<=zf)return new e(this.values.concat(s.flatten()))},e.prototype.leafPrepend=function(s){if(this.length+s.length<=zf)return new e(s.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e})(gn);gn.empty=new C2([]);var O6=(function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,s,i,o){var c=this.left.length;if(s<c&&this.left.forEachInner(r,s,Math.min(i,c),o)===!1||i>c&&this.right.forEachInner(r,Math.max(s-c,0),Math.min(this.length,i)-c,o+c)===!1)return!1},e.prototype.forEachInvertedInner=function(r,s,i,o){var c=this.left.length;if(s>c&&this.right.forEachInvertedInner(r,s-c,Math.max(i,c)-c,o+c)===!1||i<c&&this.left.forEachInvertedInner(r,Math.min(s,c),i,o)===!1)return!1},e.prototype.sliceInner=function(r,s){if(r==0&&s==this.length)return this;var i=this.left.length;return s<=i?this.left.slice(r,s):r>=i?this.right.slice(r-i,s-i):this.left.slice(r,i).append(this.right.slice(0,s-i))},e.prototype.leafAppend=function(r){var s=this.right.leafAppend(r);if(s)return new e(this.left,s)},e.prototype.leafPrepend=function(r){var s=this.left.leafPrepend(r);if(s)return new e(s,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e})(gn);const _6=500;class Wr{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let s,i;n&&(s=this.remapping(r,this.items.length),i=s.maps.length);let o=e.tr,c,u,f=[],p=[];return this.items.forEach((m,x)=>{if(!m.step){s||(s=this.remapping(r,x+1),i=s.maps.length),i--,p.push(m);return}if(s){p.push(new ls(m.map));let y=m.step.map(s.slice(i)),v;y&&o.maybeStep(y).doc&&(v=o.mapping.maps[o.mapping.maps.length-1],f.push(new ls(v,void 0,void 0,f.length+p.length))),i--,v&&s.appendMap(v,i)}else o.maybeStep(m.step);if(m.selection)return c=s?m.selection.map(s.slice(i)):m.selection,u=new Wr(this.items.slice(0,r).append(p.reverse().concat(f)),this.eventCount-1),!1},this.items.length,0),{remaining:u,transform:o,selection:c}}addTransform(e,n,r,s){let i=[],o=this.eventCount,c=this.items,u=!s&&c.length?c.get(c.length-1):null;for(let p=0;p<e.steps.length;p++){let m=e.steps[p].invert(e.docs[p]),x=new ls(e.mapping.maps[p],m,n),y;(y=u&&u.merge(x))&&(x=y,p?i.pop():c=c.slice(0,c.length-1)),i.push(x),n&&(o++,n=void 0),s||(u=x)}let f=o-r.depth;return f>I6&&(c=P6(c,f),o-=f),new Wr(c.append(i),o)}remapping(e,n){let r=new vc;return this.items.forEach((s,i)=>{let o=s.mirrorOffset!=null&&i-s.mirrorOffset>=e?r.maps.length-s.mirrorOffset:void 0;r.appendMap(s.map,o)},e,n),r}addMaps(e){return this.eventCount==0?this:new Wr(this.items.append(e.map(n=>new ls(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],s=Math.max(0,this.items.length-n),i=e.mapping,o=e.steps.length,c=this.eventCount;this.items.forEach(x=>{x.selection&&c--},s);let u=n;this.items.forEach(x=>{let y=i.getMirror(--u);if(y==null)return;o=Math.min(o,y);let v=i.maps[y];if(x.step){let k=e.steps[y].invert(e.docs[y]),w=x.selection&&x.selection.map(i.slice(u+1,y));w&&c++,r.push(new ls(v,k,w))}else r.push(new ls(v))},s);let f=[];for(let x=n;x<o;x++)f.push(new ls(i.maps[x]));let p=this.items.slice(0,s).append(f).append(r),m=new Wr(p,c);return m.emptyItemCount()>_6&&(m=m.compress(this.items.length-r.length)),m}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,s=[],i=0;return this.items.forEach((o,c)=>{if(c>=e)s.push(o),o.selection&&i++;else if(o.step){let u=o.step.map(n.slice(r)),f=u&&u.getMap();if(r--,f&&n.appendMap(f,r),u){let p=o.selection&&o.selection.map(n.slice(r));p&&i++;let m=new ls(f.invert(),u,p),x,y=s.length-1;(x=s.length&&s[y].merge(m))?s[y]=x:s.push(m)}}else o.map&&r--},this.items.length,0),new Wr(gn.from(s.reverse()),i)}}Wr.empty=new Wr(gn.empty,0);function P6(t,e){let n;return t.forEach((r,s)=>{if(r.selection&&e--==0)return n=s,!1}),t.slice(n)}class ls{constructor(e,n,r,s){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=s}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new ls(n.getMap().invert(),n,this.selection)}}}class Ci{constructor(e,n,r,s,i){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=s,this.prevComposition=i}}const I6=20;function D6(t,e,n,r){let s=n.getMeta(So),i;if(s)return s.historyState;n.getMeta(B6)&&(t=new Ci(t.done,t.undone,null,0,-1));let o=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(o&&o.getMeta(So))return o.getMeta(So).redo?new Ci(t.done.addTransform(n,void 0,r,Eu(e)),t.undone,Vw(n.mapping.maps),t.prevTime,t.prevComposition):new Ci(t.done,t.undone.addTransform(n,void 0,r,Eu(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let c=n.getMeta("composition"),u=t.prevTime==0||!o&&t.prevComposition!=c&&(t.prevTime<(n.time||0)-r.newGroupDelay||!L6(n,t.prevRanges)),f=o?Dm(t.prevRanges,n.mapping):Vw(n.mapping.maps);return new Ci(t.done.addTransform(n,u?e.selection.getBookmark():void 0,r,Eu(e)),Wr.empty,f,n.time,c??t.prevComposition)}else return(i=n.getMeta("rebased"))?new Ci(t.done.rebased(n,i),t.undone.rebased(n,i),Dm(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new Ci(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),Dm(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function L6(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,s)=>{for(let i=0;i<e.length;i+=2)r<=e[i+1]&&s>=e[i]&&(n=!0)}),n}function Vw(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,s,i,o)=>e.push(i,o));return e}function Dm(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let s=e.map(t[r],1),i=e.map(t[r+1],-1);s<=i&&n.push(s,i)}return n}function z6(t,e,n){let r=Eu(e),s=So.get(e).spec.config,i=(n?t.undone:t.done).popEvent(e,r);if(!i)return null;let o=i.selection.resolve(i.transform.doc),c=(n?t.done:t.undone).addTransform(i.transform,e.selection.getBookmark(),s,r),u=new Ci(n?c:i.remaining,n?i.remaining:c,null,0,-1);return i.transform.setSelection(o).setMeta(So,{redo:n,historyState:u})}let Lm=!1,Uw=null;function Eu(t){let e=t.plugins;if(Uw!=e){Lm=!1,Uw=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){Lm=!0;break}}return Lm}const So=new Ft("history"),B6=new Ft("closeHistory");function F6(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new Et({key:So,state:{init(){return new Ci(Wr.empty,Wr.empty,null,0,-1)},apply(e,n,r){return D6(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,s=r=="historyUndo"?T2:r=="historyRedo"?A2:null;return!s||!e.editable?!1:(n.preventDefault(),s(e.state,e.dispatch))}}}})}function E2(t,e){return(n,r)=>{let s=So.getState(n);if(!s||(t?s.undone:s.done).eventCount==0)return!1;if(r){let i=z6(s,n,t);i&&r(e?i.scrollIntoView():i)}return!0}}const T2=E2(!1,!0),A2=E2(!0,!0);$t.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:t=>t.length,wordCounter:t=>t.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc;if(((t==null?void 0:t.mode)||this.options.mode)==="textSize"){const r=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(r)}return e.nodeSize},this.storage.words=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc,n=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let t=!1;return[new Et({key:new Ft("characterCount"),appendTransaction:(e,n,r)=>{if(t)return;const s=this.options.limit;if(s==null||s===0){t=!0;return}const i=this.storage.characters({node:r.doc});if(i>s){const o=i-s,c=0,u=o;console.warn(`[CharacterCount] Initial content exceeded limit of ${s} characters. Content was automatically trimmed.`);const f=r.tr.deleteRange(c,u);return t=!0,f}t=!0},filterTransaction:(e,n)=>{const r=this.options.limit;if(!e.docChanged||r===0||r===null||r===void 0)return!0;const s=this.storage.characters({node:n.doc}),i=this.storage.characters({node:e.doc});if(i<=r||s>r&&i>r&&i<=s)return!0;if(s>r&&i>r&&i>s||!e.getMeta("paste"))return!1;const c=e.selection.$head.pos,u=i-r,f=c-u,p=c;return e.deleteRange(f,p),!(this.storage.characters({node:e.doc})>r)}})]}});var $6=$t.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[N6(this.options)]}});$t.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new Et({key:new Ft("focus"),props:{decorations:({doc:t,selection:e})=>{const{isEditable:n,isFocused:r}=this.editor,{anchor:s}=e,i=[];if(!n||!r)return xt.create(t,[]);let o=0;this.options.mode==="deepest"&&t.descendants((u,f)=>{if(u.isText)return;if(!(s>=f&&s<=f+u.nodeSize-1))return!1;o+=1});let c=0;return t.descendants((u,f)=>{if(u.isText||!(s>=f&&s<=f+u.nodeSize-1))return!1;if(c+=1,this.options.mode==="deepest"&&o-c>0||this.options.mode==="shallowest"&&c>1)return this.options.mode==="deepest";i.push(hn.node(f,f+u.nodeSize,{class:this.options.className}))}),xt.create(t,i)}}})]}});var V6=$t.create({name:"gapCursor",addProseMirrorPlugins(){return[E6()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=ct(ze(t,"allowGapCursor",n)))!=null?e:null}}}),Hw="placeholder";function U6(t){return t.replace(/\s+/g,"-").replace(/[^a-zA-Z0-9-]/g,"").replace(/^[0-9-]+/,"").replace(/^-+/,"").toLowerCase()}var H6=$t.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",dataAttribute:Hw,placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){const t=this.options.dataAttribute?`data-${U6(this.options.dataAttribute)}`:`data-${Hw}`;return[new Et({key:new Ft("placeholder"),props:{decorations:({doc:e,selection:n})=>{const r=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:s}=n,i=[];if(!r)return null;const o=this.editor.isEmpty;return e.descendants((c,u)=>{const f=s>=u&&s<=u+c.nodeSize,p=!c.isLeaf&&oh(c);if((f||!this.options.showOnlyCurrent)&&p){const m=[this.options.emptyNodeClass];o&&m.push(this.options.emptyEditorClass);const x=hn.node(u,u+c.nodeSize,{class:m.join(" "),[t]:typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:c,pos:u,hasAnchor:f}):this.options.placeholder});i.push(x)}return this.options.includeChildren}),xt.create(e,i)}}})]}});$t.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:t,options:e}=this;return[new Et({key:new Ft("selection"),props:{decorations(n){return n.selection.empty||t.isFocused||!t.isEditable||MS(n.selection)||t.view.dragging?null:xt.create(n.doc,[hn.inline(n.selection.from,n.selection.to,{class:e.className})])}}})]}});function Ww({types:t,node:e}){return e&&Array.isArray(t)&&t.includes(e.type)||(e==null?void 0:e.type)===t}var W6=$t.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var t;const e=new Ft(this.name),n=this.options.node||((t=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:t.name)||"paragraph",r=Object.entries(this.editor.schema.nodes).map(([,s])=>s).filter(s=>(this.options.notAfter||[]).concat(n).includes(s.name));return[new Et({key:e,appendTransaction:(s,i,o)=>{const{doc:c,tr:u,schema:f}=o,p=e.getState(o),m=c.content.size,x=f.nodes[n];if(p)return u.insert(m,x.create())},state:{init:(s,i)=>{const o=i.tr.doc.lastChild;return!Ww({node:o,types:r})},apply:(s,i)=>{if(!s.docChanged||s.getMeta("__uniqueIDTransaction"))return i;const o=s.doc.lastChild;return!Ww({node:o,types:r})}}})]}}),q6=$t.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>T2(t,e),redo:()=>({state:t,dispatch:e})=>A2(t,e)}},addProseMirrorPlugins(){return[F6(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),K6=$t.create({name:"starterKit",addExtensions(){var t,e,n,r;const s=[];return this.options.bold!==!1&&s.push(xL.configure(this.options.bold)),this.options.blockquote!==!1&&s.push(fL.configure(this.options.blockquote)),this.options.bulletList!==!1&&s.push(p2.configure(this.options.bulletList)),this.options.code!==!1&&s.push(bL.configure(this.options.code)),this.options.codeBlock!==!1&&s.push(NL.configure(this.options.codeBlock)),this.options.document!==!1&&s.push(jL.configure(this.options.document)),this.options.dropcursor!==!1&&s.push($6.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&s.push(V6.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&s.push(SL.configure(this.options.hardBreak)),this.options.heading!==!1&&s.push(CL.configure(this.options.heading)),this.options.undoRedo!==!1&&s.push(q6.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&s.push(EL.configure(this.options.horizontalRule)),this.options.italic!==!1&&s.push(OL.configure(this.options.italic)),this.options.listItem!==!1&&s.push(m2.configure(this.options.listItem)),this.options.listKeymap!==!1&&s.push(w2.configure((t=this.options)==null?void 0:t.listKeymap)),this.options.link!==!1&&s.push(h2.configure((e=this.options)==null?void 0:e.link)),this.options.orderedList!==!1&&s.push(N2.configure(this.options.orderedList)),this.options.paragraph!==!1&&s.push(x6.configure(this.options.paragraph)),this.options.strike!==!1&&s.push(b6.configure(this.options.strike)),this.options.text!==!1&&s.push(w6.configure(this.options.text)),this.options.underline!==!1&&s.push(j2.configure((n=this.options)==null?void 0:n.underline)),this.options.trailingNode!==!1&&s.push(W6.configure((r=this.options)==null?void 0:r.trailingNode)),s}}),G6=K6,J6=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,Z6=on.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{},resize:!1}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null},width:{default:null},height:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:t}){return["img",bt(this.options.HTMLAttributes,t)]},parseMarkdown:(t,e)=>e.createNode("image",{src:t.href,title:t.title,alt:t.text}),renderMarkdown:t=>{var e,n,r,s,i,o;const c=(n=(e=t.attrs)==null?void 0:e.src)!=null?n:"",u=(s=(r=t.attrs)==null?void 0:r.alt)!=null?s:"",f=(o=(i=t.attrs)==null?void 0:i.title)!=null?o:"";return f?`![${u}](${c} "${f}")`:`![${u}](${c})`},addNodeView(){if(!this.options.resize||!this.options.resize.enabled||typeof document>"u")return null;const{directions:t,minWidth:e,minHeight:n,alwaysPreserveAspectRatio:r}=this.options.resize;return({node:s,getPos:i,HTMLAttributes:o,editor:c})=>{const u=document.createElement("img");Object.entries(o).forEach(([m,x])=>{if(x!=null)switch(m){case"width":case"height":break;default:u.setAttribute(m,x);break}}),u.src=o.src;const f=new GI({element:u,editor:c,node:s,getPos:i,onResize:(m,x)=>{u.style.width=`${m}px`,u.style.height=`${x}px`},onCommit:(m,x)=>{const y=i();y!==void 0&&this.editor.chain().setNodeSelection(y).updateAttributes(this.name,{width:m,height:x}).run()},onUpdate:(m,x,y)=>m.type===s.type,options:{directions:t,min:{width:e,height:n},preserveAspectRatio:r===!0}}),p=f.dom;return p.style.visibility="hidden",p.style.pointerEvents="none",u.onload=()=>{p.style.visibility="",p.style.pointerEvents=""},f}},addCommands(){return{setImage:t=>({commands:e})=>e.insertContent({type:this.name,attrs:t})}},addInputRules(){return[KS({find:J6,type:this.type,getAttributes:t=>{const[,,e,n,r]=t;return{src:n,alt:e,title:r}}})]}}),Q6=Z6;let Ug,Hg;if(typeof WeakMap<"u"){let t=new WeakMap;Ug=e=>t.get(e),Hg=(e,n)=>(t.set(e,n),n)}else{const t=[];let n=0;Ug=r=>{for(let s=0;s<t.length;s+=2)if(t[s]==r)return t[s+1]},Hg=(r,s)=>(n==10&&(n=0),t[n++]=r,t[n++]=s)}var zt=class{constructor(t,e,n,r){this.width=t,this.height=e,this.map=n,this.problems=r}findCell(t){for(let e=0;e<this.map.length;e++){const n=this.map[e];if(n!=t)continue;const r=e%this.width,s=e/this.width|0;let i=r+1,o=s+1;for(let c=1;i<this.width&&this.map[e+c]==n;c++)i++;for(let c=1;o<this.height&&this.map[e+this.width*c]==n;c++)o++;return{left:r,top:s,right:i,bottom:o}}throw new RangeError(`No cell with offset ${t} found`)}colCount(t){for(let e=0;e<this.map.length;e++)if(this.map[e]==t)return e%this.width;throw new RangeError(`No cell with offset ${t} found`)}nextCell(t,e,n){const{left:r,right:s,top:i,bottom:o}=this.findCell(t);return e=="horiz"?(n<0?r==0:s==this.width)?null:this.map[i*this.width+(n<0?r-1:s)]:(n<0?i==0:o==this.height)?null:this.map[r+this.width*(n<0?i-1:o)]}rectBetween(t,e){const{left:n,right:r,top:s,bottom:i}=this.findCell(t),{left:o,right:c,top:u,bottom:f}=this.findCell(e);return{left:Math.min(n,o),top:Math.min(s,u),right:Math.max(r,c),bottom:Math.max(i,f)}}cellsInRect(t){const e=[],n={};for(let r=t.top;r<t.bottom;r++)for(let s=t.left;s<t.right;s++){const i=r*this.width+s,o=this.map[i];n[o]||(n[o]=!0,!(s==t.left&&s&&this.map[i-1]==o||r==t.top&&r&&this.map[i-this.width]==o)&&e.push(o))}return e}positionAt(t,e,n){for(let r=0,s=0;;r++){const i=s+n.child(r).nodeSize;if(r==t){let o=e+t*this.width;const c=(t+1)*this.width;for(;o<c&&this.map[o]<s;)o++;return o==c?i-1:this.map[o]}s=i}}static get(t){return Ug(t)||Hg(t,Y6(t))}};function Y6(t){if(t.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+t.type.name);const e=X6(t),n=t.childCount,r=[];let s=0,i=null;const o=[];for(let f=0,p=e*n;f<p;f++)r[f]=0;for(let f=0,p=0;f<n;f++){const m=t.child(f);p++;for(let v=0;;v++){for(;s<r.length&&r[s]!=0;)s++;if(v==m.childCount)break;const k=m.child(v),{colspan:w,rowspan:j,colwidth:C}=k.attrs;for(let T=0;T<j;T++){if(T+f>=n){(i||(i=[])).push({type:"overlong_rowspan",pos:p,n:j-T});break}const A=s+T*e;for(let M=0;M<w;M++){r[A+M]==0?r[A+M]=p:(i||(i=[])).push({type:"collision",row:f,pos:p,n:w-M});const P=C&&C[M];if(P){const F=(A+M)%e*2,ne=o[F];ne==null||ne!=P&&o[F+1]==1?(o[F]=P,o[F+1]=1):ne==P&&o[F+1]++}}}s+=w,p+=k.nodeSize}const x=(f+1)*e;let y=0;for(;s<x;)r[s++]==0&&y++;y&&(i||(i=[])).push({type:"missing",row:f,n:y}),p++}(e===0||n===0)&&(i||(i=[])).push({type:"zero_sized"});const c=new zt(e,n,r,i);let u=!1;for(let f=0;!u&&f<o.length;f+=2)o[f]!=null&&o[f+1]<n&&(u=!0);return u&&ez(c,o,t),c}function X6(t){let e=-1,n=!1;for(let r=0;r<t.childCount;r++){const s=t.child(r);let i=0;if(n)for(let o=0;o<r;o++){const c=t.child(o);for(let u=0;u<c.childCount;u++){const f=c.child(u);o+f.attrs.rowspan>r&&(i+=f.attrs.colspan)}}for(let o=0;o<s.childCount;o++){const c=s.child(o);i+=c.attrs.colspan,c.attrs.rowspan>1&&(n=!0)}e==-1?e=i:e!=i&&(e=Math.max(e,i))}return e}function ez(t,e,n){t.problems||(t.problems=[]);const r={};for(let s=0;s<t.map.length;s++){const i=t.map[s];if(r[i])continue;r[i]=!0;const o=n.nodeAt(i);if(!o)throw new RangeError(`No cell with offset ${i} found`);let c=null;const u=o.attrs;for(let f=0;f<u.colspan;f++){const p=e[(s+f)%t.width*2];p!=null&&(!u.colwidth||u.colwidth[f]!=p)&&((c||(c=tz(u)))[f]=p)}c&&t.problems.unshift({type:"colwidth mismatch",pos:i,colwidth:c})}}function tz(t){if(t.colwidth)return t.colwidth.slice();const e=[];for(let n=0;n<t.colspan;n++)e.push(0);return e}function In(t){let e=t.cached.tableNodeTypes;if(!e){e=t.cached.tableNodeTypes={};for(const n in t.nodes){const r=t.nodes[n],s=r.spec.tableRole;s&&(e[s]=r)}}return e}const Mi=new Ft("selectingCells");function Lo(t){for(let e=t.depth-1;e>0;e--)if(t.node(e).type.spec.tableRole=="row")return t.node(0).resolve(t.before(e+1));return null}function nz(t){for(let e=t.depth;e>0;e--){const n=t.node(e).type.spec.tableRole;if(n==="cell"||n==="header_cell")return t.node(e)}return null}function Qr(t){const e=t.selection.$head;for(let n=e.depth;n>0;n--)if(e.node(n).type.spec.tableRole=="row")return!0;return!1}function dh(t){const e=t.selection;if("$anchorCell"in e&&e.$anchorCell)return e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell;if("node"in e&&e.node&&e.node.type.spec.tableRole=="cell")return e.$anchor;const n=Lo(e.$head)||rz(e.$head);if(n)return n;throw new RangeError(`No cell found around position ${e.head}`)}function rz(t){for(let e=t.nodeAfter,n=t.pos;e;e=e.firstChild,n++){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n)}for(let e=t.nodeBefore,n=t.pos;e;e=e.lastChild,n--){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n-e.nodeSize)}}function Wg(t){return t.parent.type.spec.tableRole=="row"&&!!t.nodeAfter}function sz(t){return t.node(0).resolve(t.pos+t.nodeAfter.nodeSize)}function yx(t,e){return t.depth==e.depth&&t.pos>=e.start(-1)&&t.pos<=e.end(-1)}function M2(t,e,n){const r=t.node(-1),s=zt.get(r),i=t.start(-1),o=s.nextCell(t.pos-i,e,n);return o==null?null:t.node(0).resolve(i+o)}function zo(t,e,n=1){const r={...t,colspan:t.colspan-n};return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(e,n),r.colwidth.some(s=>s>0)||(r.colwidth=null)),r}function R2(t,e,n=1){const r={...t,colspan:t.colspan+n};if(r.colwidth){r.colwidth=r.colwidth.slice();for(let s=0;s<n;s++)r.colwidth.splice(e,0,0)}return r}function iz(t,e,n){const r=In(e.type.schema).header_cell;for(let s=0;s<t.height;s++)if(e.nodeAt(t.map[n+s*t.width]).type!=r)return!1;return!0}var vt=class zs extends Ke{constructor(e,n=e){const r=e.node(-1),s=zt.get(r),i=e.start(-1),o=s.rectBetween(e.pos-i,n.pos-i),c=e.node(0),u=s.cellsInRect(o).filter(p=>p!=n.pos-i);u.unshift(n.pos-i);const f=u.map(p=>{const m=r.nodeAt(p);if(!m)throw new RangeError(`No cell with offset ${p} found`);const x=i+p+1;return new yj(c.resolve(x),c.resolve(x+m.content.size))});super(f[0].$from,f[0].$to,f),this.$anchorCell=e,this.$headCell=n}map(e,n){const r=e.resolve(n.map(this.$anchorCell.pos)),s=e.resolve(n.map(this.$headCell.pos));if(Wg(r)&&Wg(s)&&yx(r,s)){const i=this.$anchorCell.node(-1)!=r.node(-1);return i&&this.isRowSelection()?zs.rowSelection(r,s):i&&this.isColSelection()?zs.colSelection(r,s):new zs(r,s)}return He.between(r,s)}content(){const e=this.$anchorCell.node(-1),n=zt.get(e),r=this.$anchorCell.start(-1),s=n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r),i={},o=[];for(let u=s.top;u<s.bottom;u++){const f=[];for(let p=u*n.width+s.left,m=s.left;m<s.right;m++,p++){const x=n.map[p];if(i[x])continue;i[x]=!0;const y=n.findCell(x);let v=e.nodeAt(x);if(!v)throw new RangeError(`No cell with offset ${x} found`);const k=s.left-y.left,w=y.right-s.right;if(k>0||w>0){let j=v.attrs;if(k>0&&(j=zo(j,0,k)),w>0&&(j=zo(j,j.colspan-w,w)),y.left<s.left){if(v=v.type.createAndFill(j),!v)throw new RangeError(`Could not create cell with attrs ${JSON.stringify(j)}`)}else v=v.type.create(j,v.content)}if(y.top<s.top||y.bottom>s.bottom){const j={...v.attrs,rowspan:Math.min(y.bottom,s.bottom)-Math.max(y.top,s.top)};y.top<s.top?v=v.type.createAndFill(j):v=v.type.create(j,v.content)}f.push(v)}o.push(e.child(u).copy(ae.from(f)))}const c=this.isColSelection()&&this.isRowSelection()?e:o;return new we(ae.from(c),1,1)}replace(e,n=we.empty){const r=e.steps.length,s=this.ranges;for(let o=0;o<s.length;o++){const{$from:c,$to:u}=s[o],f=e.mapping.slice(r);e.replace(f.map(c.pos),f.map(u.pos),o?we.empty:n)}const i=Ke.findFrom(e.doc.resolve(e.mapping.slice(r).map(this.to)),-1);i&&e.setSelection(i)}replaceWith(e,n){this.replace(e,new we(ae.from(n),0,0))}forEachCell(e){const n=this.$anchorCell.node(-1),r=zt.get(n),s=this.$anchorCell.start(-1),i=r.cellsInRect(r.rectBetween(this.$anchorCell.pos-s,this.$headCell.pos-s));for(let o=0;o<i.length;o++)e(n.nodeAt(i[o]),s+i[o])}isColSelection(){const e=this.$anchorCell.index(-1),n=this.$headCell.index(-1);if(Math.min(e,n)>0)return!1;const r=e+this.$anchorCell.nodeAfter.attrs.rowspan,s=n+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(r,s)==this.$headCell.node(-1).childCount}static colSelection(e,n=e){const r=e.node(-1),s=zt.get(r),i=e.start(-1),o=s.findCell(e.pos-i),c=s.findCell(n.pos-i),u=e.node(0);return o.top<=c.top?(o.top>0&&(e=u.resolve(i+s.map[o.left])),c.bottom<s.height&&(n=u.resolve(i+s.map[s.width*(s.height-1)+c.right-1]))):(c.top>0&&(n=u.resolve(i+s.map[c.left])),o.bottom<s.height&&(e=u.resolve(i+s.map[s.width*(s.height-1)+o.right-1]))),new zs(e,n)}isRowSelection(){const e=this.$anchorCell.node(-1),n=zt.get(e),r=this.$anchorCell.start(-1),s=n.colCount(this.$anchorCell.pos-r),i=n.colCount(this.$headCell.pos-r);if(Math.min(s,i)>0)return!1;const o=s+this.$anchorCell.nodeAfter.attrs.colspan,c=i+this.$headCell.nodeAfter.attrs.colspan;return Math.max(o,c)==n.width}eq(e){return e instanceof zs&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos}static rowSelection(e,n=e){const r=e.node(-1),s=zt.get(r),i=e.start(-1),o=s.findCell(e.pos-i),c=s.findCell(n.pos-i),u=e.node(0);return o.left<=c.left?(o.left>0&&(e=u.resolve(i+s.map[o.top*s.width])),c.right<s.width&&(n=u.resolve(i+s.map[s.width*(c.top+1)-1]))):(c.left>0&&(n=u.resolve(i+s.map[c.top*s.width])),o.right<s.width&&(e=u.resolve(i+s.map[s.width*(o.top+1)-1]))),new zs(e,n)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(e,n){return new zs(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){return new zs(e.resolve(n),e.resolve(r))}getBookmark(){return new oz(this.$anchorCell.pos,this.$headCell.pos)}};vt.prototype.visible=!1;Ke.jsonID("cell",vt);var oz=class O2{constructor(e,n){this.anchor=e,this.head=n}map(e){return new O2(e.map(this.anchor),e.map(this.head))}resolve(e){const n=e.resolve(this.anchor),r=e.resolve(this.head);return n.parent.type.spec.tableRole=="row"&&r.parent.type.spec.tableRole=="row"&&n.index()<n.parent.childCount&&r.index()<r.parent.childCount&&yx(n,r)?new vt(n,r):Ke.near(r,1)}};function az(t){if(!(t.selection instanceof vt))return null;const e=[];return t.selection.forEachCell((n,r)=>{e.push(hn.node(r,r+n.nodeSize,{class:"selectedCell"}))}),xt.create(t.doc,e)}function lz({$from:t,$to:e}){if(t.pos==e.pos||t.pos<e.pos-6)return!1;let n=t.pos,r=e.pos,s=t.depth;for(;s>=0&&!(t.after(s+1)<t.end(s));s--,n++);for(let i=e.depth;i>=0&&!(e.before(i+1)>e.start(i));i--,r--);return n==r&&/row|table/.test(t.node(s).type.spec.tableRole)}function cz({$from:t,$to:e}){let n,r;for(let s=t.depth;s>0;s--){const i=t.node(s);if(i.type.spec.tableRole==="cell"||i.type.spec.tableRole==="header_cell"){n=i;break}}for(let s=e.depth;s>0;s--){const i=e.node(s);if(i.type.spec.tableRole==="cell"||i.type.spec.tableRole==="header_cell"){r=i;break}}return n!==r&&e.parentOffset===0}function dz(t,e,n){const r=(e||t).selection,s=(e||t).doc;let i,o;if(r instanceof Be&&(o=r.node.type.spec.tableRole)){if(o=="cell"||o=="header_cell")i=vt.create(s,r.from);else if(o=="row"){const c=s.resolve(r.from+1);i=vt.rowSelection(c,c)}else if(!n){const c=zt.get(r.node),u=r.from+1,f=u+c.map[c.width*c.height-1];i=vt.create(s,u+1,f)}}else r instanceof He&&lz(r)?i=He.create(s,r.from):r instanceof He&&cz(r)&&(i=He.create(s,r.$from.start(),r.$from.end()));return i&&(e||(e=t.tr)).setSelection(i),e}const uz=new Ft("fix-tables");function _2(t,e,n,r){const s=t.childCount,i=e.childCount;e:for(let o=0,c=0;o<i;o++){const u=e.child(o);for(let f=c,p=Math.min(s,o+3);f<p;f++)if(t.child(f)==u){c=f+1,n+=u.nodeSize;continue e}r(u,n),c<s&&t.child(c).sameMarkup(u)?_2(t.child(c),u,n+1,r):u.nodesBetween(0,u.content.size,r,n+1),n+=u.nodeSize}}function P2(t,e){let n;const r=(s,i)=>{s.type.spec.tableRole=="table"&&(n=fz(t,s,i,n))};return e?e.doc!=t.doc&&_2(e.doc,t.doc,0,r):t.doc.descendants(r),n}function fz(t,e,n,r){const s=zt.get(e);if(!s.problems)return r;r||(r=t.tr);const i=[];for(let u=0;u<s.height;u++)i.push(0);for(let u=0;u<s.problems.length;u++){const f=s.problems[u];if(f.type=="collision"){const p=e.nodeAt(f.pos);if(!p)continue;const m=p.attrs;for(let x=0;x<m.rowspan;x++)i[f.row+x]+=f.n;r.setNodeMarkup(r.mapping.map(n+1+f.pos),null,zo(m,m.colspan-f.n,f.n))}else if(f.type=="missing")i[f.row]+=f.n;else if(f.type=="overlong_rowspan"){const p=e.nodeAt(f.pos);if(!p)continue;r.setNodeMarkup(r.mapping.map(n+1+f.pos),null,{...p.attrs,rowspan:p.attrs.rowspan-f.n})}else if(f.type=="colwidth mismatch"){const p=e.nodeAt(f.pos);if(!p)continue;r.setNodeMarkup(r.mapping.map(n+1+f.pos),null,{...p.attrs,colwidth:f.colwidth})}else if(f.type=="zero_sized"){const p=r.mapping.map(n);r.delete(p,p+e.nodeSize)}}let o,c;for(let u=0;u<i.length;u++)i[u]&&(o==null&&(o=u),c=u);for(let u=0,f=n+1;u<s.height;u++){const p=e.child(u),m=f+p.nodeSize,x=i[u];if(x>0){let y="cell";p.firstChild&&(y=p.firstChild.type.spec.tableRole);const v=[];for(let w=0;w<x;w++){const j=In(t.schema)[y].createAndFill();j&&v.push(j)}const k=(u==0||o==u-1)&&c==u?f+1:m-1;r.insert(r.mapping.map(k),v)}f=m}return r.setMeta(uz,{fixTables:!0})}function xs(t){const e=t.selection,n=dh(t),r=n.node(-1),s=n.start(-1),i=zt.get(r);return{...e instanceof vt?i.rectBetween(e.$anchorCell.pos-s,e.$headCell.pos-s):i.findCell(n.pos-s),tableStart:s,map:i,table:r}}function I2(t,{map:e,tableStart:n,table:r},s){let i=s>0?-1:0;iz(e,r,s+i)&&(i=s==0||s==e.width?null:0);for(let o=0;o<e.height;o++){const c=o*e.width+s;if(s>0&&s<e.width&&e.map[c-1]==e.map[c]){const u=e.map[c],f=r.nodeAt(u);t.setNodeMarkup(t.mapping.map(n+u),null,R2(f.attrs,s-e.colCount(u))),o+=f.attrs.rowspan-1}else{const u=i==null?In(r.type.schema).cell:r.nodeAt(e.map[c+i]).type,f=e.positionAt(o,s,r);t.insert(t.mapping.map(n+f),u.createAndFill())}}return t}function hz(t,e){if(!Qr(t))return!1;if(e){const n=xs(t);e(I2(t.tr,n,n.left))}return!0}function pz(t,e){if(!Qr(t))return!1;if(e){const n=xs(t);e(I2(t.tr,n,n.right))}return!0}function mz(t,{map:e,table:n,tableStart:r},s){const i=t.mapping.maps.length;for(let o=0;o<e.height;){const c=o*e.width+s,u=e.map[c],f=n.nodeAt(u),p=f.attrs;if(s>0&&e.map[c-1]==u||s<e.width-1&&e.map[c+1]==u)t.setNodeMarkup(t.mapping.slice(i).map(r+u),null,zo(p,s-e.colCount(u)));else{const m=t.mapping.slice(i).map(r+u);t.delete(m,m+f.nodeSize)}o+=p.rowspan}}function gz(t,e){if(!Qr(t))return!1;if(e){const n=xs(t),r=t.tr;if(n.left==0&&n.right==n.map.width)return!1;for(let s=n.right-1;mz(r,n,s),s!=n.left;s--){const i=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!i)throw new RangeError("No table found");n.table=i,n.map=zt.get(i)}e(r)}return!0}function xz(t,e,n){var r;const s=In(e.type.schema).header_cell;for(let i=0;i<t.width;i++)if(((r=e.nodeAt(t.map[i+n*t.width]))===null||r===void 0?void 0:r.type)!=s)return!1;return!0}function D2(t,{map:e,tableStart:n,table:r},s){let i=n;for(let f=0;f<s;f++)i+=r.child(f).nodeSize;const o=[];let c=s>0?-1:0;xz(e,r,s+c)&&(c=s==0||s==e.height?null:0);for(let f=0,p=e.width*s;f<e.width;f++,p++)if(s>0&&s<e.height&&e.map[p]==e.map[p-e.width]){const m=e.map[p],x=r.nodeAt(m).attrs;t.setNodeMarkup(n+m,null,{...x,rowspan:x.rowspan+1}),f+=x.colspan-1}else{var u;const m=c==null?In(r.type.schema).cell:(u=r.nodeAt(e.map[p+c*e.width]))===null||u===void 0?void 0:u.type,x=m==null?void 0:m.createAndFill();x&&o.push(x)}return t.insert(i,In(r.type.schema).row.create(null,o)),t}function yz(t,e){if(!Qr(t))return!1;if(e){const n=xs(t);e(D2(t.tr,n,n.top))}return!0}function vz(t,e){if(!Qr(t))return!1;if(e){const n=xs(t);e(D2(t.tr,n,n.bottom))}return!0}function bz(t,{map:e,table:n,tableStart:r},s){let i=0;for(let f=0;f<s;f++)i+=n.child(f).nodeSize;const o=i+n.child(s).nodeSize,c=t.mapping.maps.length;t.delete(i+r,o+r);const u=new Set;for(let f=0,p=s*e.width;f<e.width;f++,p++){const m=e.map[p];if(!u.has(m)){if(u.add(m),s>0&&m==e.map[p-e.width]){const x=n.nodeAt(m).attrs;t.setNodeMarkup(t.mapping.slice(c).map(m+r),null,{...x,rowspan:x.rowspan-1}),f+=x.colspan-1}else if(s<e.height&&m==e.map[p+e.width]){const x=n.nodeAt(m),y=x.attrs,v=x.type.create({...y,rowspan:x.attrs.rowspan-1},x.content),k=e.positionAt(s+1,f,n);t.insert(t.mapping.slice(c).map(r+k),v),f+=y.colspan-1}}}}function wz(t,e){if(!Qr(t))return!1;if(e){const n=xs(t),r=t.tr;if(n.top==0&&n.bottom==n.map.height)return!1;for(let s=n.bottom-1;bz(r,n,s),s!=n.top;s--){const i=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!i)throw new RangeError("No table found");n.table=i,n.map=zt.get(n.table)}e(r)}return!0}function qw(t){const e=t.content;return e.childCount==1&&e.child(0).isTextblock&&e.child(0).childCount==0}function kz({width:t,height:e,map:n},r){let s=r.top*t+r.left,i=s,o=(r.bottom-1)*t+r.left,c=s+(r.right-r.left-1);for(let u=r.top;u<r.bottom;u++){if(r.left>0&&n[i]==n[i-1]||r.right<t&&n[c]==n[c+1])return!0;i+=t,c+=t}for(let u=r.left;u<r.right;u++){if(r.top>0&&n[s]==n[s-t]||r.bottom<e&&n[o]==n[o+t])return!0;s++,o++}return!1}function Kw(t,e){const n=t.selection;if(!(n instanceof vt)||n.$anchorCell.pos==n.$headCell.pos)return!1;const r=xs(t),{map:s}=r;if(kz(s,r))return!1;if(e){const i=t.tr,o={};let c=ae.empty,u,f;for(let p=r.top;p<r.bottom;p++)for(let m=r.left;m<r.right;m++){const x=s.map[p*s.width+m],y=r.table.nodeAt(x);if(!(o[x]||!y))if(o[x]=!0,u==null)u=x,f=y;else{qw(y)||(c=c.append(y.content));const v=i.mapping.map(x+r.tableStart);i.delete(v,v+y.nodeSize)}}if(u==null||f==null)return!0;if(i.setNodeMarkup(u+r.tableStart,null,{...R2(f.attrs,f.attrs.colspan,r.right-r.left-f.attrs.colspan),rowspan:r.bottom-r.top}),c.size>0){const p=u+1+f.content.size,m=qw(f)?u+1:p;i.replaceWith(m+r.tableStart,p+r.tableStart,c)}i.setSelection(new vt(i.doc.resolve(u+r.tableStart))),e(i)}return!0}function Gw(t,e){const n=In(t.schema);return Nz(({node:r})=>n[r.type.spec.tableRole])(t,e)}function Nz(t){return(e,n)=>{const r=e.selection;let s,i;if(r instanceof vt){if(r.$anchorCell.pos!=r.$headCell.pos)return!1;s=r.$anchorCell.nodeAfter,i=r.$anchorCell.pos}else{var o;if(s=nz(r.$from),!s)return!1;i=(o=Lo(r.$from))===null||o===void 0?void 0:o.pos}if(s==null||i==null||s.attrs.colspan==1&&s.attrs.rowspan==1)return!1;if(n){let c=s.attrs;const u=[],f=c.colwidth;c.rowspan>1&&(c={...c,rowspan:1}),c.colspan>1&&(c={...c,colspan:1});const p=xs(e),m=e.tr;for(let y=0;y<p.right-p.left;y++)u.push(f?{...c,colwidth:f&&f[y]?[f[y]]:null}:c);let x;for(let y=p.top;y<p.bottom;y++){let v=p.map.positionAt(y,p.left,p.table);y==p.top&&(v+=s.nodeSize);for(let k=p.left,w=0;k<p.right;k++,w++)k==p.left&&y==p.top||m.insert(x=m.mapping.map(v+p.tableStart,1),t({node:s,row:y,col:k}).createAndFill(u[w]))}m.setNodeMarkup(i,t({node:s,row:p.top,col:p.left}),u[0]),r instanceof vt&&m.setSelection(new vt(m.doc.resolve(r.$anchorCell.pos),x?m.doc.resolve(x):void 0)),n(m)}return!0}}function jz(t,e){return function(n,r){if(!Qr(n))return!1;const s=dh(n);if(s.nodeAfter.attrs[t]===e)return!1;if(r){const i=n.tr;n.selection instanceof vt?n.selection.forEachCell((o,c)=>{o.attrs[t]!==e&&i.setNodeMarkup(c,null,{...o.attrs,[t]:e})}):i.setNodeMarkup(s.pos,null,{...s.nodeAfter.attrs,[t]:e}),r(i)}return!0}}function Sz(t){return function(e,n){if(!Qr(e))return!1;if(n){const r=In(e.schema),s=xs(e),i=e.tr,o=s.map.cellsInRect(t=="column"?{left:s.left,top:0,right:s.right,bottom:s.map.height}:t=="row"?{left:0,top:s.top,right:s.map.width,bottom:s.bottom}:s),c=o.map(u=>s.table.nodeAt(u));for(let u=0;u<o.length;u++)c[u].type==r.header_cell&&i.setNodeMarkup(s.tableStart+o[u],r.cell,c[u].attrs);if(i.steps.length===0)for(let u=0;u<o.length;u++)i.setNodeMarkup(s.tableStart+o[u],r.header_cell,c[u].attrs);n(i)}return!0}}function Jw(t,e,n){const r=e.map.cellsInRect({left:0,top:0,right:t=="row"?e.map.width:1,bottom:t=="column"?e.map.height:1});for(let s=0;s<r.length;s++){const i=e.table.nodeAt(r[s]);if(i&&i.type!==n.header_cell)return!1}return!0}function Tc(t,e){return e=e||{useDeprecatedLogic:!1},e.useDeprecatedLogic?Sz(t):function(n,r){if(!Qr(n))return!1;if(r){const s=In(n.schema),i=xs(n),o=n.tr,c=Jw("row",i,s),u=Jw("column",i,s),f=(t==="column"?c:t==="row"&&u)?1:0,p=t=="column"?{left:0,top:f,right:1,bottom:i.map.height}:t=="row"?{left:f,top:0,right:i.map.width,bottom:1}:i,m=t=="column"?u?s.cell:s.header_cell:t=="row"?c?s.cell:s.header_cell:s.cell;i.map.cellsInRect(p).forEach(x=>{const y=x+i.tableStart,v=o.doc.nodeAt(y);v&&o.setNodeMarkup(y,m,v.attrs)}),r(o)}return!0}}Tc("row",{useDeprecatedLogic:!0});Tc("column",{useDeprecatedLogic:!0});const Cz=Tc("cell",{useDeprecatedLogic:!0});function Ez(t,e){if(e<0){const n=t.nodeBefore;if(n)return t.pos-n.nodeSize;for(let r=t.index(-1)-1,s=t.before();r>=0;r--){const i=t.node(-1).child(r),o=i.lastChild;if(o)return s-1-o.nodeSize;s-=i.nodeSize}}else{if(t.index()<t.parent.childCount-1)return t.pos+t.nodeAfter.nodeSize;const n=t.node(-1);for(let r=t.indexAfter(-1),s=t.after();r<n.childCount;r++){const i=n.child(r);if(i.childCount)return s+1;s+=i.nodeSize}}return null}function Zw(t){return function(e,n){if(!Qr(e))return!1;const r=Ez(dh(e),t);if(r==null)return!1;if(n){const s=e.doc.resolve(r);n(e.tr.setSelection(He.between(s,sz(s))).scrollIntoView())}return!0}}function Tz(t,e){const n=t.selection.$anchor;for(let r=n.depth;r>0;r--)if(n.node(r).type.spec.tableRole=="table")return e&&e(t.tr.delete(n.before(r),n.after(r)).scrollIntoView()),!0;return!1}function uu(t,e){const n=t.selection;if(!(n instanceof vt))return!1;if(e){const r=t.tr,s=In(t.schema).cell.createAndFill().content;n.forEachCell((i,o)=>{i.content.eq(s)||r.replace(r.mapping.map(o+1),r.mapping.map(o+i.nodeSize-1),new we(s,0,0))}),r.docChanged&&e(r)}return!0}function Az(t){if(t.size===0)return null;let{content:e,openStart:n,openEnd:r}=t;for(;e.childCount==1&&(n>0&&r>0||e.child(0).type.spec.tableRole=="table");)n--,r--,e=e.child(0).content;const s=e.child(0),i=s.type.spec.tableRole,o=s.type.schema,c=[];if(i=="row")for(let u=0;u<e.childCount;u++){let f=e.child(u).content;const p=u?0:Math.max(0,n-1),m=u<e.childCount-1?0:Math.max(0,r-1);(p||m)&&(f=qg(In(o).row,new we(f,p,m)).content),c.push(f)}else if(i=="cell"||i=="header_cell")c.push(n||r?qg(In(o).row,new we(e,n,r)).content:e);else return null;return Mz(o,c)}function Mz(t,e){const n=[];for(let s=0;s<e.length;s++){const i=e[s];for(let o=i.childCount-1;o>=0;o--){const{rowspan:c,colspan:u}=i.child(o).attrs;for(let f=s;f<s+c;f++)n[f]=(n[f]||0)+u}}let r=0;for(let s=0;s<n.length;s++)r=Math.max(r,n[s]);for(let s=0;s<n.length;s++)if(s>=e.length&&e.push(ae.empty),n[s]<r){const i=In(t).cell.createAndFill(),o=[];for(let c=n[s];c<r;c++)o.push(i);e[s]=e[s].append(ae.from(o))}return{height:e.length,width:r,rows:e}}function qg(t,e){const n=t.createAndFill();return new _0(n).replace(0,n.content.size,e).doc}function Rz({width:t,height:e,rows:n},r,s){if(t!=r){const i=[],o=[];for(let c=0;c<n.length;c++){const u=n[c],f=[];for(let p=i[c]||0,m=0;p<r;m++){let x=u.child(m%u.childCount);p+x.attrs.colspan>r&&(x=x.type.createChecked(zo(x.attrs,x.attrs.colspan,p+x.attrs.colspan-r),x.content)),f.push(x),p+=x.attrs.colspan;for(let y=1;y<x.attrs.rowspan;y++)i[c+y]=(i[c+y]||0)+x.attrs.colspan}o.push(ae.from(f))}n=o,t=r}if(e!=s){const i=[];for(let o=0,c=0;o<s;o++,c++){const u=[],f=n[c%e];for(let p=0;p<f.childCount;p++){let m=f.child(p);o+m.attrs.rowspan>s&&(m=m.type.create({...m.attrs,rowspan:Math.max(1,s-m.attrs.rowspan)},m.content)),u.push(m)}i.push(ae.from(u))}n=i,e=s}return{width:t,height:e,rows:n}}function Oz(t,e,n,r,s,i,o){const c=t.doc.type.schema,u=In(c);let f,p;if(s>e.width)for(let m=0,x=0;m<e.height;m++){const y=n.child(m);x+=y.nodeSize;const v=[];let k;y.lastChild==null||y.lastChild.type==u.cell?k=f||(f=u.cell.createAndFill()):k=p||(p=u.header_cell.createAndFill());for(let w=e.width;w<s;w++)v.push(k);t.insert(t.mapping.slice(o).map(x-1+r),v)}if(i>e.height){const m=[];for(let v=0,k=(e.height-1)*e.width;v<Math.max(e.width,s);v++){const w=v>=e.width?!1:n.nodeAt(e.map[k+v]).type==u.header_cell;m.push(w?p||(p=u.header_cell.createAndFill()):f||(f=u.cell.createAndFill()))}const x=u.row.create(null,ae.from(m)),y=[];for(let v=e.height;v<i;v++)y.push(x);t.insert(t.mapping.slice(o).map(r+n.nodeSize-2),y)}return!!(f||p)}function Qw(t,e,n,r,s,i,o,c){if(o==0||o==e.height)return!1;let u=!1;for(let f=s;f<i;f++){const p=o*e.width+f,m=e.map[p];if(e.map[p-e.width]==m){u=!0;const x=n.nodeAt(m),{top:y,left:v}=e.findCell(m);t.setNodeMarkup(t.mapping.slice(c).map(m+r),null,{...x.attrs,rowspan:o-y}),t.insert(t.mapping.slice(c).map(e.positionAt(o,v,n)),x.type.createAndFill({...x.attrs,rowspan:y+x.attrs.rowspan-o})),f+=x.attrs.colspan-1}}return u}function Yw(t,e,n,r,s,i,o,c){if(o==0||o==e.width)return!1;let u=!1;for(let f=s;f<i;f++){const p=f*e.width+o,m=e.map[p];if(e.map[p-1]==m){u=!0;const x=n.nodeAt(m),y=e.colCount(m),v=t.mapping.slice(c).map(m+r);t.setNodeMarkup(v,null,zo(x.attrs,o-y,x.attrs.colspan-(o-y))),t.insert(v+x.nodeSize,x.type.createAndFill(zo(x.attrs,0,o-y))),f+=x.attrs.rowspan-1}}return u}function Xw(t,e,n,r,s){let i=n?t.doc.nodeAt(n-1):t.doc;if(!i)throw new Error("No table found");let o=zt.get(i);const{top:c,left:u}=r,f=u+s.width,p=c+s.height,m=t.tr;let x=0;function y(){if(i=n?m.doc.nodeAt(n-1):m.doc,!i)throw new Error("No table found");o=zt.get(i),x=m.mapping.maps.length}Oz(m,o,i,n,f,p,x)&&y(),Qw(m,o,i,n,u,f,c,x)&&y(),Qw(m,o,i,n,u,f,p,x)&&y(),Yw(m,o,i,n,c,p,u,x)&&y(),Yw(m,o,i,n,c,p,f,x)&&y();for(let v=c;v<p;v++){const k=o.positionAt(v,u,i),w=o.positionAt(v,f,i);m.replace(m.mapping.slice(x).map(k+n),m.mapping.slice(x).map(w+n),new we(s.rows[v-c],0,0))}y(),m.setSelection(new vt(m.doc.resolve(n+o.positionAt(c,u,i)),m.doc.resolve(n+o.positionAt(p-1,f-1,i)))),e(m)}const _z=J0({ArrowLeft:fu("horiz",-1),ArrowRight:fu("horiz",1),ArrowUp:fu("vert",-1),ArrowDown:fu("vert",1),"Shift-ArrowLeft":hu("horiz",-1),"Shift-ArrowRight":hu("horiz",1),"Shift-ArrowUp":hu("vert",-1),"Shift-ArrowDown":hu("vert",1),Backspace:uu,"Mod-Backspace":uu,Delete:uu,"Mod-Delete":uu});function Tu(t,e,n){return n.eq(t.selection)?!1:(e&&e(t.tr.setSelection(n).scrollIntoView()),!0)}function fu(t,e){return(n,r,s)=>{if(!s)return!1;const i=n.selection;if(i instanceof vt)return Tu(n,r,Ke.near(i.$headCell,e));if(t!="horiz"&&!i.empty)return!1;const o=L2(s,t,e);if(o==null)return!1;if(t=="horiz")return Tu(n,r,Ke.near(n.doc.resolve(i.head+e),e));{const c=n.doc.resolve(o),u=M2(c,t,e);let f;return u?f=Ke.near(u,1):e<0?f=Ke.near(n.doc.resolve(c.before(-1)),-1):f=Ke.near(n.doc.resolve(c.after(-1)),1),Tu(n,r,f)}}}function hu(t,e){return(n,r,s)=>{if(!s)return!1;const i=n.selection;let o;if(i instanceof vt)o=i;else{const u=L2(s,t,e);if(u==null)return!1;o=new vt(n.doc.resolve(u))}const c=M2(o.$headCell,t,e);return c?Tu(n,r,new vt(o.$anchorCell,c)):!1}}function Pz(t,e){const n=t.state.doc,r=Lo(n.resolve(e));return r?(t.dispatch(t.state.tr.setSelection(new vt(r))),!0):!1}function Iz(t,e,n){if(!Qr(t.state))return!1;let r=Az(n);const s=t.state.selection;if(s instanceof vt){r||(r={width:1,height:1,rows:[ae.from(qg(In(t.state.schema).cell,n))]});const i=s.$anchorCell.node(-1),o=s.$anchorCell.start(-1),c=zt.get(i).rectBetween(s.$anchorCell.pos-o,s.$headCell.pos-o);return r=Rz(r,c.right-c.left,c.bottom-c.top),Xw(t.state,t.dispatch,o,c,r),!0}else if(r){const i=dh(t.state),o=i.start(-1);return Xw(t.state,t.dispatch,o,zt.get(i.node(-1)).findCell(i.pos-o),r),!0}else return!1}function Dz(t,e){var n;if(e.button!=0||e.ctrlKey||e.metaKey)return;const r=ek(t,e.target);let s;if(e.shiftKey&&t.state.selection instanceof vt)i(t.state.selection.$anchorCell,e),e.preventDefault();else if(e.shiftKey&&r&&(s=Lo(t.state.selection.$anchor))!=null&&((n=zm(t,e))===null||n===void 0?void 0:n.pos)!=s.pos)i(s,e),e.preventDefault();else if(!r)return;function i(u,f){let p=zm(t,f);const m=Mi.getState(t.state)==null;if(!p||!yx(u,p))if(m)p=u;else return;const x=new vt(u,p);if(m||!t.state.selection.eq(x)){const y=t.state.tr.setSelection(x);m&&y.setMeta(Mi,u.pos),t.dispatch(y)}}function o(){t.root.removeEventListener("mouseup",o),t.root.removeEventListener("dragstart",o),t.root.removeEventListener("mousemove",c),Mi.getState(t.state)!=null&&t.dispatch(t.state.tr.setMeta(Mi,-1))}function c(u){const f=u,p=Mi.getState(t.state);let m;if(p!=null)m=t.state.doc.resolve(p);else if(ek(t,f.target)!=r&&(m=zm(t,e),!m))return o();m&&i(m,f)}t.root.addEventListener("mouseup",o),t.root.addEventListener("dragstart",o),t.root.addEventListener("mousemove",c)}function L2(t,e,n){if(!(t.state.selection instanceof He))return null;const{$head:r}=t.state.selection;for(let s=r.depth-1;s>=0;s--){const i=r.node(s);if((n<0?r.index(s):r.indexAfter(s))!=(n<0?0:i.childCount))return null;if(i.type.spec.tableRole=="cell"||i.type.spec.tableRole=="header_cell"){const o=r.before(s),c=e=="vert"?n>0?"down":"up":n>0?"right":"left";return t.endOfTextblock(c)?o:null}}return null}function ek(t,e){for(;e&&e!=t.dom;e=e.parentNode)if(e.nodeName=="TD"||e.nodeName=="TH")return e;return null}function zm(t,e){const n=t.posAtCoords({left:e.clientX,top:e.clientY});if(!n)return null;let{inside:r,pos:s}=n;return r>=0&&Lo(t.state.doc.resolve(r))||Lo(t.state.doc.resolve(s))}var Lz=class{constructor(e,n){this.node=e,this.defaultCellMinWidth=n,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.table.style.setProperty("--default-cell-min-width",`${n}px`),this.colgroup=this.table.appendChild(document.createElement("colgroup")),Kg(e,this.colgroup,this.table,n),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(e){return e.type!=this.node.type?!1:(this.node=e,Kg(e,this.colgroup,this.table,this.defaultCellMinWidth),!0)}ignoreMutation(e){return e.type=="attributes"&&(e.target==this.table||this.colgroup.contains(e.target))}};function Kg(t,e,n,r,s,i){let o=0,c=!0,u=e.firstChild;const f=t.firstChild;if(f){for(let m=0,x=0;m<f.childCount;m++){const{colspan:y,colwidth:v}=f.child(m).attrs;for(let k=0;k<y;k++,x++){const w=s==x?i:v&&v[k],j=w?w+"px":"";if(o+=w||r,w||(c=!1),u)u.style.width!=j&&(u.style.width=j),u=u.nextSibling;else{const C=document.createElement("col");C.style.width=j,e.appendChild(C)}}}for(;u;){var p;const m=u.nextSibling;(p=u.parentNode)===null||p===void 0||p.removeChild(u),u=m}c?(n.style.width=o+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=o+"px")}}const pr=new Ft("tableColumnResizing");function zz({handleWidth:t=5,cellMinWidth:e=25,defaultCellMinWidth:n=100,View:r=Lz,lastColumnResizable:s=!0}={}){const i=new Et({key:pr,state:{init(o,c){var u;const f=(u=i.spec)===null||u===void 0||(u=u.props)===null||u===void 0?void 0:u.nodeViews,p=In(c.schema).table.name;return r&&f&&(f[p]=(m,x)=>new r(m,n,x)),new Bz(-1,!1)},apply(o,c){return c.apply(o)}},props:{attributes:o=>{const c=pr.getState(o);return c&&c.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(o,c)=>{Fz(o,c,t,s)},mouseleave:o=>{$z(o)},mousedown:(o,c)=>{Vz(o,c,e,n)}},decorations:o=>{const c=pr.getState(o);if(c&&c.activeHandle>-1)return Kz(o,c.activeHandle)},nodeViews:{}}});return i}var Bz=class Au{constructor(e,n){this.activeHandle=e,this.dragging=n}apply(e){const n=this,r=e.getMeta(pr);if(r&&r.setHandle!=null)return new Au(r.setHandle,!1);if(r&&r.setDragging!==void 0)return new Au(n.activeHandle,r.setDragging);if(n.activeHandle>-1&&e.docChanged){let s=e.mapping.map(n.activeHandle,-1);return Wg(e.doc.resolve(s))||(s=-1),new Au(s,n.dragging)}return n}};function Fz(t,e,n,r){if(!t.editable)return;const s=pr.getState(t.state);if(s&&!s.dragging){const i=Hz(e.target);let o=-1;if(i){const{left:c,right:u}=i.getBoundingClientRect();e.clientX-c<=n?o=tk(t,e,"left",n):u-e.clientX<=n&&(o=tk(t,e,"right",n))}if(o!=s.activeHandle){if(!r&&o!==-1){const c=t.state.doc.resolve(o),u=c.node(-1),f=zt.get(u),p=c.start(-1);if(f.colCount(c.pos-p)+c.nodeAfter.attrs.colspan-1==f.width-1)return}z2(t,o)}}}function $z(t){if(!t.editable)return;const e=pr.getState(t.state);e&&e.activeHandle>-1&&!e.dragging&&z2(t,-1)}function Vz(t,e,n,r){var s;if(!t.editable)return!1;const i=(s=t.dom.ownerDocument.defaultView)!==null&&s!==void 0?s:window,o=pr.getState(t.state);if(!o||o.activeHandle==-1||o.dragging)return!1;const c=t.state.doc.nodeAt(o.activeHandle),u=Uz(t,o.activeHandle,c.attrs);t.dispatch(t.state.tr.setMeta(pr,{setDragging:{startX:e.clientX,startWidth:u}}));function f(m){i.removeEventListener("mouseup",f),i.removeEventListener("mousemove",p);const x=pr.getState(t.state);x!=null&&x.dragging&&(Wz(t,x.activeHandle,nk(x.dragging,m,n)),t.dispatch(t.state.tr.setMeta(pr,{setDragging:null})))}function p(m){if(!m.which)return f(m);const x=pr.getState(t.state);if(x&&x.dragging){const y=nk(x.dragging,m,n);rk(t,x.activeHandle,y,r)}}return rk(t,o.activeHandle,u,r),i.addEventListener("mouseup",f),i.addEventListener("mousemove",p),e.preventDefault(),!0}function Uz(t,e,{colspan:n,colwidth:r}){const s=r&&r[r.length-1];if(s)return s;const i=t.domAtPos(e);let o=i.node.childNodes[i.offset].offsetWidth,c=n;if(r)for(let u=0;u<n;u++)r[u]&&(o-=r[u],c--);return o/c}function Hz(t){for(;t&&t.nodeName!="TD"&&t.nodeName!="TH";)t=t.classList&&t.classList.contains("ProseMirror")?null:t.parentNode;return t}function tk(t,e,n,r){const s=n=="right"?-r:r,i=t.posAtCoords({left:e.clientX+s,top:e.clientY});if(!i)return-1;const{pos:o}=i,c=Lo(t.state.doc.resolve(o));if(!c)return-1;if(n=="right")return c.pos;const u=zt.get(c.node(-1)),f=c.start(-1),p=u.map.indexOf(c.pos-f);return p%u.width==0?-1:f+u.map[p-1]}function nk(t,e,n){const r=e.clientX-t.startX;return Math.max(n,t.startWidth+r)}function z2(t,e){t.dispatch(t.state.tr.setMeta(pr,{setHandle:e}))}function Wz(t,e,n){const r=t.state.doc.resolve(e),s=r.node(-1),i=zt.get(s),o=r.start(-1),c=i.colCount(r.pos-o)+r.nodeAfter.attrs.colspan-1,u=t.state.tr;for(let f=0;f<i.height;f++){const p=f*i.width+c;if(f&&i.map[p]==i.map[p-i.width])continue;const m=i.map[p],x=s.nodeAt(m).attrs,y=x.colspan==1?0:c-i.colCount(m);if(x.colwidth&&x.colwidth[y]==n)continue;const v=x.colwidth?x.colwidth.slice():qz(x.colspan);v[y]=n,u.setNodeMarkup(o+m,null,{...x,colwidth:v})}u.docChanged&&t.dispatch(u)}function rk(t,e,n,r){const s=t.state.doc.resolve(e),i=s.node(-1),o=s.start(-1),c=zt.get(i).colCount(s.pos-o)+s.nodeAfter.attrs.colspan-1;let u=t.domAtPos(s.start(-1)).node;for(;u&&u.nodeName!="TABLE";)u=u.parentNode;u&&Kg(i,u.firstChild,u,r,c,n)}function qz(t){return Array(t).fill(0)}function Kz(t,e){const n=[],r=t.doc.resolve(e),s=r.node(-1);if(!s)return xt.empty;const i=zt.get(s),o=r.start(-1),c=i.colCount(r.pos-o)+r.nodeAfter.attrs.colspan-1;for(let f=0;f<i.height;f++){const p=c+f*i.width;if((c==i.width-1||i.map[p]!=i.map[p+1])&&(f==0||i.map[p]!=i.map[p-i.width])){var u;const m=i.map[p],x=o+m+s.nodeAt(m).nodeSize-1,y=document.createElement("div");y.className="column-resize-handle",!((u=pr.getState(t))===null||u===void 0)&&u.dragging&&n.push(hn.node(o+m,o+m+s.nodeAt(m).nodeSize,{class:"column-resize-dragging"})),n.push(hn.widget(x,y))}}return xt.create(t.doc,n)}function Gz({allowTableNodeSelection:t=!1}={}){return new Et({key:Mi,state:{init(){return null},apply(e,n){const r=e.getMeta(Mi);if(r!=null)return r==-1?null:r;if(n==null||!e.docChanged)return n;const{deleted:s,pos:i}=e.mapping.mapResult(n);return s?null:i}},props:{decorations:az,handleDOMEvents:{mousedown:Dz},createSelectionBetween(e){return Mi.getState(e.state)!=null?e.state.selection:null},handleTripleClick:Pz,handleKeyDown:_z,handlePaste:Iz},appendTransaction(e,n,r){return dz(r,P2(r,n),t)}})}var B2=on.create({name:"tableCell",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:t=>{var e,n;const r=t.getAttribute("colwidth"),s=r?r.split(",").map(i=>parseInt(i,10)):null;if(!s){const i=(e=t.closest("table"))==null?void 0:e.querySelectorAll("colgroup > col"),o=Array.from(((n=t.parentElement)==null?void 0:n.children)||[]).indexOf(t);if(o&&o>-1&&i&&i[o]){const c=i[o].getAttribute("width");return c?[parseInt(c,10)]:null}}return s}}}},tableRole:"cell",isolating:!0,parseHTML(){return[{tag:"td"}]},renderHTML({HTMLAttributes:t}){return["td",bt(this.options.HTMLAttributes,t),0]}}),F2=on.create({name:"tableHeader",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:t=>{const e=t.getAttribute("colwidth");return e?e.split(",").map(r=>parseInt(r,10)):null}}}},tableRole:"header_cell",isolating:!0,parseHTML(){return[{tag:"th"}]},renderHTML({HTMLAttributes:t}){return["th",bt(this.options.HTMLAttributes,t),0]}}),$2=on.create({name:"tableRow",addOptions(){return{HTMLAttributes:{}}},content:"(tableCell | tableHeader)*",tableRole:"row",parseHTML(){return[{tag:"tr"}]},renderHTML({HTMLAttributes:t}){return["tr",bt(this.options.HTMLAttributes,t),0]}});function Gg(t,e){return e?["width",`${Math.max(e,t)}px`]:["min-width",`${t}px`]}function sk(t,e,n,r,s,i){var o;let c=0,u=!0,f=e.firstChild;const p=t.firstChild;if(p!==null)for(let x=0,y=0;x<p.childCount;x+=1){const{colspan:v,colwidth:k}=p.child(x).attrs;for(let w=0;w<v;w+=1,y+=1){const j=s===y?i:k&&k[w],C=j?`${j}px`:"";if(c+=j||r,j||(u=!1),f){if(f.style.width!==C){const[T,A]=Gg(r,j);f.style.setProperty(T,A)}f=f.nextSibling}else{const T=document.createElement("col"),[A,M]=Gg(r,j);T.style.setProperty(A,M),e.appendChild(T)}}}for(;f;){const x=f.nextSibling;(o=f.parentNode)==null||o.removeChild(f),f=x}const m=t.attrs.style&&typeof t.attrs.style=="string"&&/\bwidth\s*:/i.test(t.attrs.style);u&&!m?(n.style.width=`${c}px`,n.style.minWidth=""):(n.style.width="",n.style.minWidth=`${c}px`)}var Jz=class{constructor(t,e){this.node=t,this.cellMinWidth=e,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),t.attrs.style&&(this.table.style.cssText=t.attrs.style),this.colgroup=this.table.appendChild(document.createElement("colgroup")),sk(t,this.colgroup,this.table,e),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(t){return t.type!==this.node.type?!1:(this.node=t,sk(t,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(t){const e=t.target,n=this.dom.contains(e),r=this.contentDOM.contains(e);return!!(n&&!r&&(t.type==="attributes"||t.type==="childList"||t.type==="characterData"))}};function Zz(t,e,n,r){let s=0,i=!0;const o=[],c=t.firstChild;if(!c)return{};for(let m=0,x=0;m<c.childCount;m+=1){const{colspan:y,colwidth:v}=c.child(m).attrs;for(let k=0;k<y;k+=1,x+=1){const w=n===x?r:v&&v[k];s+=w||e,w||(i=!1);const[j,C]=Gg(e,w);o.push(["col",{style:`${j}: ${C}`}])}}const u=i?`${s}px`:"",f=i?"":`${s}px`;return{colgroup:["colgroup",{},...o],tableWidth:u,tableMinWidth:f}}function ik(t,e){return t.createAndFill()}function Qz(t){if(t.cached.tableNodeTypes)return t.cached.tableNodeTypes;const e={};return Object.keys(t.nodes).forEach(n=>{const r=t.nodes[n];r.spec.tableRole&&(e[r.spec.tableRole]=r)}),t.cached.tableNodeTypes=e,e}function Yz(t,e,n,r,s){const i=Qz(t),o=[],c=[];for(let f=0;f<n;f+=1){const p=ik(i.cell);if(p&&c.push(p),r){const m=ik(i.header_cell);m&&o.push(m)}}const u=[];for(let f=0;f<e;f+=1)u.push(i.row.createChecked(null,r&&f===0?o:c));return i.table.createChecked(null,u)}function Xz(t){return t instanceof vt}var pu=({editor:t})=>{const{selection:e}=t.state;if(!Xz(e))return!1;let n=0;const r=kS(e.ranges[0].$from,i=>i.type.name==="table");return r==null||r.node.descendants(i=>{if(i.type.name==="table")return!1;["tableCell","tableHeader"].includes(i.type.name)&&(n+=1)}),n===e.ranges.length?(t.commands.deleteTable(),!0):!1},eB="";function tB(t){return(t||"").replace(/\s+/g," ").trim()}function nB(t,e,n={}){var r;const s=(r=n.cellLineSeparator)!=null?r:eB;if(!t||!t.content||t.content.length===0)return"";const i=[];t.content.forEach(v=>{const k=[];v.content&&v.content.forEach(w=>{let j="";w.content&&Array.isArray(w.content)&&w.content.length>1?j=w.content.map(M=>e.renderChildren(M)).join(s):j=w.content?e.renderChildren(w.content):"";const C=tB(j),T=w.type==="tableHeader";k.push({text:C,isHeader:T})}),i.push(k)});const o=i.reduce((v,k)=>Math.max(v,k.length),0);if(o===0)return"";const c=new Array(o).fill(0);i.forEach(v=>{var k;for(let w=0;w<o;w+=1){const C=(((k=v[w])==null?void 0:k.text)||"").length;C>c[w]&&(c[w]=C),c[w]<3&&(c[w]=3)}});const u=(v,k)=>v+" ".repeat(Math.max(0,k-v.length)),f=i[0],p=f.some(v=>v.isHeader);let m=`
`;const x=new Array(o).fill(0).map((v,k)=>p&&f[k]&&f[k].text||"");return m+=`| ${x.map((v,k)=>u(v,c[k])).join(" | ")} |
`,m+=`| ${c.map(v=>"-".repeat(Math.max(3,v))).join(" | ")} |
`,(p?i.slice(1):i).forEach(v=>{m+=`| ${new Array(o).fill(0).map((k,w)=>u(v[w]&&v[w].text||"",c[w])).join(" | ")} |
`}),m}var rB=nB,V2=on.create({name:"table",addOptions(){return{HTMLAttributes:{},resizable:!1,renderWrapper:!1,handleWidth:5,cellMinWidth:25,View:Jz,lastColumnResizable:!0,allowTableNodeSelection:!1}},content:"tableRow+",tableRole:"table",isolating:!0,group:"block",parseHTML(){return[{tag:"table"}]},renderHTML({node:t,HTMLAttributes:e}){const{colgroup:n,tableWidth:r,tableMinWidth:s}=Zz(t,this.options.cellMinWidth),i=e.style;function o(){return i||(r?`width: ${r}`:`min-width: ${s}`)}const c=["table",bt(this.options.HTMLAttributes,e,{style:o()}),n,["tbody",0]];return this.options.renderWrapper?["div",{class:"tableWrapper"},c]:c},parseMarkdown:(t,e)=>{const n=[];if(t.header){const r=[];t.header.forEach(s=>{r.push(e.createNode("tableHeader",{},[{type:"paragraph",content:e.parseInline(s.tokens)}]))}),n.push(e.createNode("tableRow",{},r))}return t.rows&&t.rows.forEach(r=>{const s=[];r.forEach(i=>{s.push(e.createNode("tableCell",{},[{type:"paragraph",content:e.parseInline(i.tokens)}]))}),n.push(e.createNode("tableRow",{},s))}),e.createNode("table",void 0,n)},renderMarkdown:(t,e)=>rB(t,e),addCommands(){return{insertTable:({rows:t=3,cols:e=3,withHeaderRow:n=!0}={})=>({tr:r,dispatch:s,editor:i})=>{const o=Yz(i.schema,t,e,n);if(s){const c=r.selection.from+1;r.replaceSelectionWith(o).scrollIntoView().setSelection(He.near(r.doc.resolve(c)))}return!0},addColumnBefore:()=>({state:t,dispatch:e})=>hz(t,e),addColumnAfter:()=>({state:t,dispatch:e})=>pz(t,e),deleteColumn:()=>({state:t,dispatch:e})=>gz(t,e),addRowBefore:()=>({state:t,dispatch:e})=>yz(t,e),addRowAfter:()=>({state:t,dispatch:e})=>vz(t,e),deleteRow:()=>({state:t,dispatch:e})=>wz(t,e),deleteTable:()=>({state:t,dispatch:e})=>Tz(t,e),mergeCells:()=>({state:t,dispatch:e})=>Kw(t,e),splitCell:()=>({state:t,dispatch:e})=>Gw(t,e),toggleHeaderColumn:()=>({state:t,dispatch:e})=>Tc("column")(t,e),toggleHeaderRow:()=>({state:t,dispatch:e})=>Tc("row")(t,e),toggleHeaderCell:()=>({state:t,dispatch:e})=>Cz(t,e),mergeOrSplit:()=>({state:t,dispatch:e})=>Kw(t,e)?!0:Gw(t,e),setCellAttribute:(t,e)=>({state:n,dispatch:r})=>jz(t,e)(n,r),goToNextCell:()=>({state:t,dispatch:e})=>Zw(1)(t,e),goToPreviousCell:()=>({state:t,dispatch:e})=>Zw(-1)(t,e),fixTables:()=>({state:t,dispatch:e})=>(e&&P2(t),!0),setCellSelection:t=>({tr:e,dispatch:n})=>{if(n){const r=vt.create(e.doc,t.anchorCell,t.headCell);e.setSelection(r)}return!0}}},addKeyboardShortcuts(){return{Tab:()=>this.editor.commands.goToNextCell()?!0:this.editor.can().addRowAfter()?this.editor.chain().addRowAfter().goToNextCell().run():!1,"Shift-Tab":()=>this.editor.commands.goToPreviousCell(),Backspace:pu,"Mod-Backspace":pu,Delete:pu,"Mod-Delete":pu}},addProseMirrorPlugins(){return[...this.options.resizable&&this.editor.isEditable?[zz({handleWidth:this.options.handleWidth,cellMinWidth:this.options.cellMinWidth,defaultCellMinWidth:this.options.cellMinWidth,View:this.options.View,lastColumnResizable:this.options.lastColumnResizable})]:[],Gz({allowTableNodeSelection:this.options.allowTableNodeSelection})]},extendNodeSchema(t){const e={name:t.name,options:t.options,storage:t.storage};return{tableRole:ct(ze(t,"tableRole",e))}}});$t.create({name:"tableKit",addExtensions(){const t=[];return this.options.table!==!1&&t.push(V2.configure(this.options.table)),this.options.tableCell!==!1&&t.push(B2.configure(this.options.tableCell)),this.options.tableHeader!==!1&&t.push(F2.configure(this.options.tableHeader)),this.options.tableRow!==!1&&t.push($2.configure(this.options.tableRow)),t}});var sB=H6;const iB=({node:t,updateAttributes:e,selected:n})=>{const[r,s]=E.useState(!1),[i,o]=E.useState(null),c=E.useRef(null),u=E.useRef({width:0,height:0,x:0,y:0,aspectRatio:1}),{src:f,alt:p,width:m,height:x}=t.attrs,y=E.useCallback((k,w)=>{k.preventDefault(),k.stopPropagation();const j=c.current;if(!j)return;const C=j.getBoundingClientRect();u.current={width:C.width,height:C.height,x:k.clientX,y:k.clientY,aspectRatio:C.width/C.height},s(!0),o(w)},[]);E.useEffect(()=>{if(!r)return;const k=j=>{const{width:C,height:T,x:A,y:M,aspectRatio:P}=u.current;let F=j.clientX-A,ne=j.clientY-M,O=C,X=T;i.includes("e")?O=Math.max(50,C+F):i.includes("w")&&(O=Math.max(50,C-F)),i.includes("s")?X=Math.max(50,T+ne):i.includes("n")&&(X=Math.max(50,T-ne)),i.length===2&&(Math.abs(F)>Math.abs(ne)?X=O/P:O=X*P),e({width:Math.round(O),height:Math.round(X)})},w=()=>{s(!1),o(null)};return document.addEventListener("mousemove",k),document.addEventListener("mouseup",w),()=>{document.removeEventListener("mousemove",k),document.removeEventListener("mouseup",w)}},[r,i,e]);const v=["nw","n","ne","w","e","sw","s","se"];return l.jsx(e2,{className:"resizable-image-wrapper",children:l.jsxs("div",{className:`resizable-image-container ${n?"selected":""} ${r?"resizing":""}`,style:{width:m?`${m}px`:"auto",height:x?`${x}px`:"auto",display:"inline-block",position:"relative"},children:[l.jsx("img",{ref:c,src:f,alt:p||"",style:{width:"100%",height:"100%",objectFit:"contain",display:"block"},draggable:!1}),n&&l.jsx(l.Fragment,{children:v.map(k=>l.jsx("div",{className:`resize-handle resize-handle-${k}`,onMouseDown:w=>y(w,k)},k))})]})})},oB=Q6.extend({name:"resizableImage",addAttributes(){var t;return{...(t=this.parent)==null?void 0:t.call(this),width:{default:null,parseHTML:e=>{var n;return e.getAttribute("width")||((n=e.style.width)==null?void 0:n.replace("px",""))},renderHTML:e=>e.width?{width:e.width}:{}},height:{default:null,parseHTML:e=>{var n;return e.getAttribute("height")||((n=e.style.height)==null?void 0:n.replace("px",""))},renderHTML:e=>e.height?{height:e.height}:{}}}},addNodeView(){return t2(iB)}}),aB=({node:t,updateAttributes:e,deleteNode:n,selected:r})=>{const{layout:s,images:i,width:o}=t.attrs,[c,u]=E.useState(!1),[f,p]=E.useState(null),[m,x]=E.useState(null),[y,v]=E.useState(null),k=E.useRef(null),w=E.useRef({width:0,x:0}),j=()=>{switch(s){case"2x1":return"image-grid-2x1";case"2x2":return"image-grid-2x2";case"3x1":return"image-grid-3x1";case"4x1":return"image-grid-4x1";case"2x3":return"image-grid-2x3";case"3x2":return"image-grid-3x2";case"3x3":return"image-grid-3x3";default:return"image-grid-2x2"}},C=O=>{const X=i.filter((le,z)=>z!==O);X.length===0?n():e({images:X})},T=(O,X)=>{x(X),O.dataTransfer.effectAllowed="move",O.dataTransfer.setData("text/plain",X.toString()),setTimeout(()=>{O.target.style.opacity="0.5"},0)},A=O=>{O.target.style.opacity="1",x(null),v(null)},M=(O,X)=>{O.preventDefault(),O.dataTransfer.dropEffect="move",y!==X&&v(X)},P=O=>{O.currentTarget.contains(O.relatedTarget)||v(null)},F=(O,X)=>{O.preventDefault();const le=m;if(le===null||le===X){x(null),v(null);return}const z=[...i],[te]=z.splice(le,1);z.splice(X,0,te),e({images:z}),x(null),v(null)},ne=E.useCallback((O,X)=>{O.preventDefault(),O.stopPropagation();const le=k.current;if(!le)return;const z=le.getBoundingClientRect();w.current={width:z.width,x:O.clientX},u(!0),p(X)},[]);return E.useEffect(()=>{if(!c)return;const O=le=>{const{width:z,x:te}=w.current,ie=le.clientX-te;let oe=z;f==="e"||f==="se"?oe=Math.max(200,z+ie):f==="w"&&(oe=Math.max(200,z-ie)),e({width:Math.round(oe)})},X=()=>{u(!1),p(null)};return document.addEventListener("mousemove",O),document.addEventListener("mouseup",X),()=>{document.removeEventListener("mousemove",O),document.removeEventListener("mouseup",X)}},[c,f,e]),l.jsxs(e2,{className:"image-grid-wrapper",children:[l.jsxs("div",{ref:k,className:`image-grid-resizable-container ${r?"selected":""} ${c?"resizing":""}`,style:{width:o?`${o}px`:"100%",position:"relative"},children:[l.jsx("div",{className:`image-grid ${j()}`,children:i.map((O,X)=>l.jsxs("div",{className:`image-grid-item ${m===X?"dragging":""} ${y===X?"drag-over":""}`,draggable:r,onDragStart:le=>T(le,X),onDragEnd:A,onDragOver:le=>M(le,X),onDragLeave:P,onDrop:le=>F(le,X),children:[l.jsx("img",{src:O.src,alt:O.alt||`Image ${X+1}`,draggable:!1}),r&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"image-grid-drag-handle",title:"Drag to reorder",children:l.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"currentColor",children:[l.jsx("circle",{cx:"8",cy:"6",r:"2"}),l.jsx("circle",{cx:"16",cy:"6",r:"2"}),l.jsx("circle",{cx:"8",cy:"12",r:"2"}),l.jsx("circle",{cx:"16",cy:"12",r:"2"}),l.jsx("circle",{cx:"8",cy:"18",r:"2"}),l.jsx("circle",{cx:"16",cy:"18",r:"2"})]})}),l.jsx("button",{className:"image-grid-remove-btn",onClick:()=>C(X),title:"Remove image",children:l.jsx(On,{size:12})})]})]},X))}),r&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"grid-resize-handle grid-resize-handle-w",onMouseDown:O=>ne(O,"w")}),l.jsx("div",{className:"grid-resize-handle grid-resize-handle-e",onMouseDown:O=>ne(O,"e")}),l.jsx("div",{className:"grid-resize-handle grid-resize-handle-se",onMouseDown:O=>ne(O,"se")})]})]}),r&&l.jsxs("div",{className:"image-grid-controls",children:[l.jsx("span",{className:"text-xs text-slate-500",children:"Layout:"}),["2x1","2x2","3x1","4x1","2x3","3x2","3x3"].map(O=>l.jsx("button",{className:`grid-layout-btn ${s===O?"active":""}`,onClick:()=>e({layout:O}),children:O},O)),l.jsx("button",{className:"grid-layout-btn",onClick:()=>e({width:null}),title:"Reset to full width",children:"100%"}),l.jsx("button",{className:"grid-delete-btn",onClick:n,title:"Delete grid",children:l.jsx(qs,{size:14})})]})]})},lB=on.create({name:"imageGrid",group:"block",atom:!0,addAttributes(){return{layout:{default:"2x2",parseHTML:t=>t.getAttribute("data-layout")||"2x2",renderHTML:t=>({"data-layout":t.layout})},images:{default:[],parseHTML:t=>{const e=t.querySelectorAll("img");return Array.from(e).map(n=>({src:n.getAttribute("src")||"",alt:n.getAttribute("alt")||""}))},renderHTML:()=>({})},width:{default:null,parseHTML:t=>{const e=t.getAttribute("data-width");return e?parseInt(e,10):null},renderHTML:t=>t.width?{"data-width":t.width}:{}}}},parseHTML(){return[{tag:"div[data-image-grid]"}]},renderHTML({node:t,HTMLAttributes:e}){const{layout:n,images:r,width:s}=t.attrs,i=u=>{const f={"2x1":"display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px;","2x2":"display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px;","3x1":"display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px;","4x1":"display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px;","2x3":"display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px;","3x2":"display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px;","3x3":"display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px;"};return f[u]||f["2x2"]},o=s?`width: ${s}px; ${i(n)}`:i(n),c=(r||[]).map(u=>["div",{style:"position: relative; overflow: hidden; border-radius: 8px; aspect-ratio: 1;"},["img",{src:u.src,alt:u.alt||"",style:"width: 100%; height: 100%; object-fit: cover; display: block;"}]]);return["div",bt(e,{"data-image-grid":"","data-layout":n,style:o}),...c]},addNodeView(){return t2(aB)}}),cB=({editor:t,onImageClick:e,onTableClick:n,onGridClick:r,isUploading:s})=>{if(!t)return null;const i=()=>{const c=t.getAttributes("link").href,u=window.prompt("URL",c);if(u!==null){if(u===""){t.chain().focus().extendMarkRange("link").unsetLink().run();return}t.chain().focus().extendMarkRange("link").setLink({href:u}).run()}},o=({onClick:c,isActive:u,disabled:f,icon:p,title:m})=>l.jsx("button",{type:"button",onClick:c,disabled:f,title:m,className:be("p-1.5 rounded transition-colors",u?"bg-blue-100 text-blue-600":"text-slate-500 hover:bg-slate-200 hover:text-slate-700",f&&"opacity-50 cursor-not-allowed"),children:l.jsx(p,{size:16,className:m==="Uploading"?"animate-spin":""})});return l.jsxs("div",{className:"bg-slate-50 border-b border-slate-200 p-2 flex flex-wrap gap-1 items-center sticky top-0 z-10",children:[l.jsx(o,{onClick:()=>t.chain().focus().toggleBold().run(),isActive:t.isActive("bold"),icon:H4,title:"Bold"}),l.jsx(o,{onClick:()=>t.chain().focus().toggleItalic().run(),isActive:t.isActive("italic"),icon:rM,title:"Italic"}),l.jsx(o,{onClick:()=>t.chain().focus().toggleUnderline().run(),isActive:t.isActive("underline"),icon:xM,title:"Underline"}),l.jsx("div",{className:"w-px h-5 bg-slate-300 mx-1"}),l.jsx(o,{onClick:()=>t.chain().focus().toggleHeading({level:1}).run(),isActive:t.isActive("heading",{level:1}),icon:X4,title:"Heading 1"}),l.jsx(o,{onClick:()=>t.chain().focus().toggleHeading({level:2}).run(),isActive:t.isActive("heading",{level:2}),icon:eM,title:"Heading 2"}),l.jsx("div",{className:"w-px h-5 bg-slate-300 mx-1"}),l.jsx(o,{onClick:()=>t.chain().focus().toggleBulletList().run(),isActive:t.isActive("bulletList"),icon:m0,title:"Bullet List"}),l.jsx(o,{onClick:()=>t.chain().focus().toggleOrderedList().run(),isActive:t.isActive("orderedList"),icon:lM,title:"Ordered List"}),l.jsx("div",{className:"w-px h-5 bg-slate-300 mx-1"}),l.jsx(o,{onClick:i,isActive:t.isActive("link"),icon:aM,title:"Link"}),l.jsx(o,{onClick:e,icon:s?At:p0,title:s?"Uploading":"Insert Image",disabled:s}),l.jsx(o,{onClick:n,icon:mM,title:"Insert Table"}),l.jsx(o,{onClick:r,icon:h0,title:"Image Grid"}),l.jsx("div",{className:"w-px h-5 bg-slate-300 mx-1"}),l.jsx(o,{onClick:()=>t.chain().focus().undo().run(),disabled:!t.can().undo(),icon:yM,title:"Undo"}),l.jsx(o,{onClick:()=>t.chain().focus().redo().run(),disabled:!t.can().redo(),icon:uM,title:"Redo"})]})},dB=t=>{const e=`<style>
/* Image Grid Styles */
[data-image-grid] { margin: 1rem 0; }
[data-image-grid] > div { position: relative; overflow: hidden; border-radius: 8px; aspect-ratio: 1; }
[data-image-grid] img { width: 100%; height: 100%; object-fit: cover; display: block; }
/* Table Styles */
table { border-collapse: collapse; width: 100%; margin: 1rem 0; border: 1px solid #e2e8f0; }
th, td { border: 1px solid #e2e8f0; padding: 8px 12px; text-align: left; min-width: 100px; }
th { background-color: #f8fafc; font-weight: 600; color: #334155; }
td { background-color: #ffffff; }
tr:nth-child(even) td { background-color: #f8fafc; }
/* Resizable Image Styles */
img[width] { max-width: 100%; height: auto; }
/* General Typography */
h1 { font-size: 2rem; font-weight: 700; margin: 1rem 0; }
h2 { font-size: 1.5rem; font-weight: 600; margin: 0.75rem 0; }
p { margin: 0.5rem 0; line-height: 1.6; }
ul, ol { margin: 0.5rem 0; padding-left: 1.5rem; }
li { margin: 0.25rem 0; }
a { color: #2563eb; text-decoration: underline; }
strong { font-weight: 600; }
em { font-style: italic; }
u { text-decoration: underline; }
</style>`;return t.includes("data-image-grid")||t.includes("<table")||t.includes("<img")?e+t:t};function uB({label:t,error:e,className:n="",value:r,onChange:s,placeholder:i="Write a detailed product description...",returnHtml:o=!0}){const[c,u]=E.useState(!1),[f,p]=E.useState(3),[m,x]=E.useState(3),[y,v]=E.useState(!1),[k,w]=E.useState(!1),[j,C]=E.useState("2x2"),[T,A]=E.useState([]),[M,P]=E.useState(!1),F=E.useRef(null),ne=E.useRef(null),O=rL({extensions:[G6.configure({}),k6,oB.configure({allowBase64:!0,inline:!1}),r6.configure({openOnClick:!1}),V2.configure({resizable:!0}),$2,F2,B2,lB,sB.configure({placeholder:i})],content:r,onUpdate:({editor:W})=>{let q;if(o){const J=W.getHTML();q=dB(J)}else q=W.getText();s(q)},editorProps:{attributes:{class:"prose prose-sm max-w-none p-4 min-h-[150px] focus:outline-none text-slate-700"}}});E.useEffect(()=>{if(!O)return;const W=o?O.getHTML():O.getText();if(r!==W){const q=!r||r==="<p></p>"||r==="",J=O.isEmpty;if(q&&J)return;O.commands.setContent(r)}},[r,O,o]);const X=()=>{var W;(W=F.current)==null||W.click()},le=async W=>{var J,fe;const q=(J=W.target.files)==null?void 0:J[0];if(q)try{v(!0);const ce=await Mn.uploadImage(q),D=((fe=ce.data)==null?void 0:fe.url)||ce.url;D?O.chain().focus().insertContent({type:"resizableImage",attrs:{src:D}}).run():(console.error("Upload failed:",ce),alert("Failed to upload image. Please try again."))}catch(ce){console.error("Image upload error:",ce),alert("Error uploading image.")}finally{v(!1),F.current&&(F.current.value="")}},z=()=>{const W=parseInt(f),q=parseInt(m);W>0&&q>0&&(O.chain().focus().insertTable({rows:W,cols:q,withHeaderRow:!0}).run(),u(!1))},te=async W=>{var fe;const q=Array.from(W.target.files||[]);if(q.length===0)return;P(!0);const J=[];for(const ce of q)try{const D=await Mn.uploadImage(ce),G=((fe=D.data)==null?void 0:fe.url)||D.url;G&&J.push({src:G,alt:ce.name})}catch(D){console.error("Grid image upload error:",D)}A(ce=>[...ce,...J]),P(!1),ne.current&&(ne.current.value="")},ie=()=>{T.length!==0&&(O.chain().focus().insertContent({type:"imageGrid",attrs:{layout:j,images:T}}).run(),w(!1),A([]),C("2x2"))},oe=W=>{A(q=>q.filter((J,fe)=>fe!==W))};return l.jsxs("div",{className:be("w-full flex flex-col gap-1.5 relative group",n),children:[t&&l.jsx("label",{className:"text-sm font-medium text-slate-700",children:t}),l.jsxs("div",{className:be("rounded-lg border bg-white overflow-hidden focus-within:ring-2 focus-within:ring-blue-500/20 focus-within:border-blue-500 transition-all shadow-sm",e?"border-red-300":"border-slate-300"),children:[l.jsx(cB,{editor:O,onImageClick:X,onTableClick:()=>u(!c),onGridClick:()=>w(!k),isUploading:y}),l.jsx("div",{className:"bg-white relative min-h-[150px]",children:l.jsx(ZS,{editor:O})})]}),l.jsx("input",{type:"file",ref:F,className:"hidden",accept:"image/*",onChange:le}),c&&l.jsxs("div",{className:"absolute top-12 right-0 md:left-48 z-20 bg-white p-4 rounded-lg shadow-xl border border-slate-200 w-64 animate-in fade-in zoom-in-95 duration-200",children:[l.jsxs("div",{className:"flex justify-between items-center mb-3",children:[l.jsx("h3",{className:"text-sm font-semibold text-slate-800",children:"Insert Table"}),l.jsx("button",{onClick:()=>u(!1),className:"text-slate-400 hover:text-slate-600",children:l.jsx(On,{size:16})})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-xs text-slate-500 mb-1 block",children:"Rows"}),l.jsx("input",{type:"number",min:"1",max:"10",value:f,onChange:W=>p(W.target.value),className:"w-full text-sm border border-slate-300 rounded px-2 py-1 focus:ring-2 focus:ring-blue-200 focus:outline-none"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs text-slate-500 mb-1 block",children:"Columns"}),l.jsx("input",{type:"number",min:"1",max:"10",value:m,onChange:W=>x(W.target.value),className:"w-full text-sm border border-slate-300 rounded px-2 py-1 focus:ring-2 focus:ring-blue-200 focus:outline-none"})]})]}),l.jsxs("button",{onClick:z,className:"w-full bg-blue-500 hover:bg-blue-600 text-white text-sm py-1.5 rounded transition-colors flex items-center justify-center gap-2",children:[l.jsx($i,{size:14})," Insert Table"]})]}),k&&l.jsxs("div",{className:"absolute top-12 right-0 md:left-64 z-20 bg-white p-4 rounded-lg shadow-xl border border-slate-200 w-80 animate-in fade-in zoom-in-95 duration-200",children:[l.jsxs("div",{className:"flex justify-between items-center mb-3",children:[l.jsx("h3",{className:"text-sm font-semibold text-slate-800",children:"Create Image Grid"}),l.jsx("button",{onClick:()=>{w(!1),A([])},className:"text-slate-400 hover:text-slate-600",children:l.jsx(On,{size:16})})]}),l.jsxs("div",{className:"mb-3",children:[l.jsx("label",{className:"text-xs text-slate-500 mb-2 block",children:"Select Layout"}),l.jsx("div",{className:"grid grid-cols-3 gap-2",children:["2x1","2x2","3x1","2x3","3x2","3x3"].map(W=>l.jsx("button",{onClick:()=>C(W),className:be("px-2 py-1.5 text-xs rounded border transition-colors",j===W?"bg-blue-100 border-blue-400 text-blue-600":"border-slate-200 text-slate-600 hover:bg-slate-50"),children:W},W))})]}),l.jsxs("div",{className:"mb-3",children:[l.jsx("label",{className:"text-xs text-slate-500 mb-2 block",children:"Upload Images"}),l.jsx("div",{onClick:()=>{var W;return(W=ne.current)==null?void 0:W.click()},className:"border-2 border-dashed border-slate-300 rounded-lg p-4 text-center cursor-pointer hover:border-blue-400 transition-colors",children:M?l.jsxs("div",{className:"flex items-center justify-center gap-2 text-slate-500",children:[l.jsx(At,{size:16,className:"animate-spin"}),l.jsx("span",{className:"text-sm",children:"Uploading..."})]}):l.jsxs("div",{className:"text-slate-500",children:[l.jsx(p0,{size:24,className:"mx-auto mb-1"}),l.jsx("span",{className:"text-sm",children:"Click to upload images"})]})}),l.jsx("input",{type:"file",ref:ne,className:"hidden",accept:"image/*",multiple:!0,onChange:te})]}),T.length>0&&l.jsxs("div",{className:"mb-3",children:[l.jsxs("label",{className:"text-xs text-slate-500 mb-2 block",children:["Uploaded (",T.length," images)"]}),l.jsx("div",{className:"flex flex-wrap gap-2",children:T.map((W,q)=>l.jsxs("div",{className:"relative w-12 h-12 group",children:[l.jsx("img",{src:W.src,alt:W.alt,className:"w-full h-full object-cover rounded border border-slate-200"}),l.jsx("button",{onClick:()=>oe(q),className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full p-0.5 opacity-0 group-hover:opacity-100 transition-opacity",children:l.jsx(On,{size:10})})]},q))})]}),l.jsxs("button",{onClick:ie,disabled:T.length===0,className:"w-full bg-blue-500 hover:bg-blue-600 disabled:bg-slate-300 disabled:cursor-not-allowed text-white text-sm py-1.5 rounded transition-colors flex items-center justify-center gap-2",children:[l.jsx(h0,{size:14})," Insert Grid"]})]}),e&&l.jsx("span",{className:"text-xs text-red-500",children:e}),l.jsx("style",{children:`
        /* Heading Styles */
        .ProseMirror h1 { font-size: 1.5em; font-weight: 700; line-height: 1.2; margin-top: 0.75em; margin-bottom: 0.5em; color: #111827; }
        .ProseMirror h2 { font-size: 1.25em; font-weight: 600; line-height: 1.3; margin-top: 0.75em; margin-bottom: 0.5em; color: #374151; }
        /* List Styles */
        .ProseMirror ul { list-style-type: disc; padding-left: 1.6em; margin-top: 0.5em; margin-bottom: 0.5em; }
        .ProseMirror ol { list-style-type: decimal; padding-left: 1.6em; margin-top: 0.5em; margin-bottom: 0.5em; }
        .ProseMirror li { margin-top: 0.25em; margin-bottom: 0.25em; }
        /* Table Styles */
        .ProseMirror table { border-collapse: collapse; table-layout: fixed; width: 100%; margin: 0; overflow: hidden; }
        .ProseMirror td, .ProseMirror th { min-width: 1em; border: 1px solid #cbd5e1; padding: 6px 8px; vertical-align: top; box-sizing: border-box; position: relative; }
        .ProseMirror th { font-weight: 600; text-align: left; background-color: #f8fafc; }
        .ProseMirror .selectedCell:after { z-index: 2; position: absolute; content: ""; left: 0; right: 0; top: 0; bottom: 0; background: rgba(200, 200, 255, 0.4); pointer-events: none; }
        .column-resize-handle { position: absolute; right: -2px; top: 0; bottom: -2px; width: 4px; background-color: #adf; pointer-events: none; }
        .tableWrapper { overflow-x: auto; }
        .resize-cursor { cursor: ew-resize; cursor: col-resize; }
        /* Resizable Image Styles */
        .resizable-image-wrapper { display: inline-block; margin: 0.5em 0; }
        .resizable-image-container { position: relative; display: inline-block; max-width: 100%; }
        .resizable-image-container img { border-radius: 0.5rem; display: block; }
        .resizable-image-container.selected { outline: 3px solid #3b82f6; outline-offset: 2px; }
        .resizable-image-container.resizing { user-select: none; }
        /* Resize Handles */
        .resize-handle { position: absolute; width: 10px; height: 10px; background: #3b82f6; border: 2px solid white; border-radius: 2px; z-index: 10; }
        .resize-handle-nw { top: -5px; left: -5px; cursor: nw-resize; }
        .resize-handle-n { top: -5px; left: 50%; transform: translateX(-50%); cursor: n-resize; }
        .resize-handle-ne { top: -5px; right: -5px; cursor: ne-resize; }
        .resize-handle-w { top: 50%; left: -5px; transform: translateY(-50%); cursor: w-resize; }
        .resize-handle-e { top: 50%; right: -5px; transform: translateY(-50%); cursor: e-resize; }
        .resize-handle-sw { bottom: -5px; left: -5px; cursor: sw-resize; }
        .resize-handle-s { bottom: -5px; left: 50%; transform: translateX(-50%); cursor: s-resize; }
        .resize-handle-se { bottom: -5px; right: -5px; cursor: se-resize; }
        /* Image Grid Styles */
        .image-grid-wrapper { margin: 1em 0; }
        .image-grid { display: grid; gap: 8px; border-radius: 0.5rem; overflow: hidden; }
        .image-grid.selected { outline: 3px solid #3b82f6; outline-offset: 2px; }
        .image-grid-2x1 { grid-template-columns: repeat(2, 1fr); }
        .image-grid-2x2 { grid-template-columns: repeat(2, 1fr); }
        .image-grid-3x1 { grid-template-columns: repeat(3, 1fr); }
        .image-grid-4x1 { grid-template-columns: repeat(4, 1fr); }
        .image-grid-2x3 { grid-template-columns: repeat(2, 1fr); }
        .image-grid-3x2 { grid-template-columns: repeat(3, 1fr); }
        .image-grid-3x3 { grid-template-columns: repeat(3, 1fr); }
        .image-grid-item { position: relative; aspect-ratio: 1; overflow: hidden; border-radius: 0.375rem; }
        .image-grid-item img { width: 100%; height: 100%; object-fit: cover; }
        .image-grid-remove-btn { position: absolute; top: 4px; right: 4px; background: rgba(239, 68, 68, 0.9); color: white; border: none; border-radius: 50%; width: 20px; height: 20px; display: flex; align-items: center; justify-content: center; cursor: pointer; opacity: 0; transition: opacity 0.2s; }
        .image-grid-item:hover .image-grid-remove-btn { opacity: 1; }
        /* Drag and Drop Styles */
        .image-grid-item.dragging { opacity: 0.5; transform: scale(0.95); }
        .image-grid-item.drag-over { outline: 3px dashed #3b82f6; outline-offset: -3px; background: rgba(59, 130, 246, 0.1); }
        .image-grid-item[draggable="true"] { cursor: grab; }
        .image-grid-item[draggable="true"]:active { cursor: grabbing; }
        .image-grid-drag-handle { position: absolute; top: 4px; left: 4px; background: rgba(0, 0, 0, 0.6); color: white; border-radius: 4px; width: 24px; height: 24px; display: flex; align-items: center; justify-content: center; cursor: grab; opacity: 0; transition: opacity 0.2s; }
        .image-grid-item:hover .image-grid-drag-handle { opacity: 1; }
        .image-grid-drag-handle:active { cursor: grabbing; }
        .image-grid-controls { display: flex; align-items: center; gap: 4px; margin-top: 8px; padding: 6px; background: #f8fafc; border-radius: 0.375rem; flex-wrap: wrap; }
        .grid-layout-btn { padding: 2px 8px; font-size: 11px; border: 1px solid #e2e8f0; border-radius: 4px; background: white; color: #64748b; cursor: pointer; transition: all 0.15s; }
        .grid-layout-btn:hover { background: #f1f5f9; }
        .grid-layout-btn.active { background: #dbeafe; border-color: #3b82f6; color: #2563eb; }
        .grid-delete-btn { margin-left: auto; padding: 4px; color: #ef4444; background: white; border: 1px solid #fecaca; border-radius: 4px; cursor: pointer; display: flex; align-items: center; justify-content: center; }
        .grid-delete-btn:hover { background: #fef2f2; }
        /* Grid Resizable Container */
        .image-grid-resizable-container { position: relative; max-width: 100%; overflow: visible; }
        .image-grid-resizable-container.selected { outline: 3px solid #3b82f6; outline-offset: 4px; }
        .image-grid-resizable-container.resizing { user-select: none; }
        /* Grid Resize Handles */
        .grid-resize-handle { position: absolute; background: #3b82f6; border: 2px solid white; box-shadow: 0 2px 4px rgba(0,0,0,0.2); z-index: 100; pointer-events: auto; }
        .grid-resize-handle:hover { background: #2563eb; transform: scale(1.1); }
        .grid-resize-handle-w { top: 50%; left: -8px; width: 12px; height: 28px; transform: translateY(-50%); cursor: ew-resize; border-radius: 4px; }
        .grid-resize-handle-w:hover { transform: translateY(-50%) scale(1.1); }
        .grid-resize-handle-e { top: 50%; right: -8px; width: 12px; height: 28px; transform: translateY(-50%); cursor: ew-resize; border-radius: 4px; }
        .grid-resize-handle-e:hover { transform: translateY(-50%) scale(1.1); }
        .grid-resize-handle-se { bottom: -8px; right: -8px; width: 16px; height: 16px; cursor: nwse-resize; border-radius: 4px; }
        .grid-resize-handle-se:hover { transform: scale(1.1); }
        /* Legacy Image Styles */
        .ProseMirror img { display: block; max-width: 100%; height: auto; border-radius: 0.5rem; margin: 0.5em 0; }
        .ProseMirror img.ProseMirror-selectednode { outline: 3px solid #3b82f6; }
        /* Placeholder */
        .ProseMirror p.is-editor-empty:first-child::before { color: #94a3b8; content: attr(data-placeholder); float: left; height: 0; pointer-events: none; }
      `})]})}function fB({images:t=[],onChange:e,maxImages:n=10}){const[r,s]=E.useState(!1),[i,o]=E.useState(!1),c=E.useRef(null),u=E.useCallback(async v=>{const k=n-t.length,w=Array.from(v).slice(0,k);if(w.length!==0){s(!0);try{const C=(await Promise.all(w.map(T=>Mn.uploadImage(T)))).map(T=>{var A;return((A=T.data)==null?void 0:A.url)||T.url}).filter(Boolean);e([...t,...C])}catch(j){console.error("Image upload failed:",j)}finally{s(!1)}}},[t,e,n]),f=E.useCallback(v=>{v.preventDefault(),o(!1);const k=v.dataTransfer.files;k.length>0&&u(k)},[u]),p=E.useCallback(v=>{v.preventDefault(),o(!0)},[]),m=E.useCallback(v=>{v.preventDefault(),o(!1)},[]),x=E.useCallback(v=>{v.target.files.length>0&&u(v.target.files),v.target.value=""},[u]),y=E.useCallback(v=>{e(t.filter((k,w)=>w!==v))},[t,e]);return l.jsxs("div",{className:"space-y-4",children:[t.length>0&&l.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-3",children:t.map((v,k)=>l.jsxs("div",{className:"relative aspect-square rounded-lg border border-slate-200 overflow-hidden group bg-slate-50",children:[l.jsx("img",{src:v,alt:`Product image ${k+1}`,className:"h-full w-full object-cover"}),l.jsx("button",{type:"button",onClick:()=>y(k),className:"absolute top-1.5 right-1.5 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity shadow-sm",children:l.jsx(On,{className:"h-3.5 w-3.5"})}),k===0&&l.jsx("span",{className:"absolute bottom-1.5 left-1.5 bg-blue-600 text-white text-[10px] font-semibold px-1.5 py-0.5 rounded",children:"Primary"})]},k))}),t.length<n&&l.jsxs("div",{onDrop:f,onDragOver:p,onDragLeave:m,onClick:()=>{var v;return(v=c.current)==null?void 0:v.click()},className:be("border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-all",i?"border-blue-500 bg-blue-50":"border-slate-300 hover:border-blue-400 hover:bg-slate-50"),children:[r?l.jsxs("div",{className:"flex flex-col items-center gap-2",children:[l.jsx(At,{className:"h-8 w-8 animate-spin text-blue-500"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Uploading..."})]}):l.jsxs("div",{className:"flex flex-col items-center gap-2",children:[l.jsx("div",{className:"h-12 w-12 rounded-full bg-blue-50 flex items-center justify-center",children:l.jsx(ng,{className:"h-5 w-5 text-blue-600"})}),l.jsxs("div",{children:[l.jsxs("p",{className:"text-sm font-medium text-slate-700",children:["Drop images here or"," ",l.jsx("span",{className:"text-blue-600",children:"browse"})]}),l.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:["PNG, JPG, WEBP up to 5MB each  ",t.length,"/",n," ","uploaded"]})]})]}),l.jsx("input",{ref:c,type:"file",onChange:x,className:"hidden",multiple:!0,accept:"image/*"})]})]})}function U2(t){if(t.length===0)return[[]];const[e,...n]=t,r=U2(n),s=[];for(const i of e)for(const o of r)s.push([i,...o]);return s}function hB({selected:t,onSelect:e,onAddNew:n,refreshKey:r}){const[s,i]=E.useState(!1),[o,c]=E.useState([]),[u,f]=E.useState(""),[p,m]=E.useState(!1);E.useEffect(()=>{x()},[r]);const x=async()=>{m(!0);try{const v=await Mn.getBrands({limit:100});c(Array.isArray(v)?v:(v==null?void 0:v.brands)||[])}catch(v){console.error("Failed to fetch brands:",v)}finally{m(!1)}},y=o.filter(v=>v.name.toLowerCase().includes(u.toLowerCase()));return l.jsxs("div",{className:"relative",children:[l.jsxs("button",{type:"button",onClick:()=>i(!s),className:be("flex h-11 w-full items-center justify-between rounded-lg border bg-white px-4 py-2.5 text-sm transition-all",s?"border-blue-500 ring-2 ring-blue-500/20":"border-slate-300 hover:border-slate-400",!t&&"text-slate-400"),children:[l.jsxs("span",{className:be("flex items-center gap-2",t?"text-slate-900":""),children:[(t==null?void 0:t.logoUrl)&&l.jsx("img",{src:t.logoUrl,alt:"",className:"h-5 w-5 rounded object-contain"}),t?t.name:"Select a brand..."]}),l.jsx(tN,{className:be("h-4 w-4 text-slate-400 transition-transform",s&&"rotate-180")})]}),s&&l.jsxs("div",{className:"absolute z-50 mt-1 w-full rounded-lg border border-slate-200 bg-white shadow-lg",children:[l.jsx("div",{className:"p-2 border-b border-slate-100",children:l.jsxs("div",{className:"relative",children:[l.jsx(Gs,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),l.jsx("input",{type:"text",placeholder:"Search brands...",value:u,onChange:v=>f(v.target.value),className:"w-full pl-8 pr-3 py-2 text-sm rounded-md border border-slate-200 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 focus:outline-none",autoFocus:!0})]})}),l.jsx("div",{className:"max-h-48 overflow-y-auto p-1",children:p?l.jsx("div",{className:"flex justify-center py-4",children:l.jsx(At,{className:"h-5 w-5 animate-spin text-blue-500"})}):y.length===0?l.jsx("p",{className:"text-sm text-slate-400 text-center py-4",children:"No brands found"}):y.map(v=>l.jsxs("button",{type:"button",onClick:()=>{e(v),i(!1),f("")},className:be("w-full text-left px-3 py-2 rounded-md text-sm transition-colors flex items-center gap-2",(t==null?void 0:t.id)===v.id?"bg-blue-50 text-blue-700 font-medium":"text-slate-700 hover:bg-slate-50"),children:[v.logoUrl?l.jsx("img",{src:v.logoUrl,alt:"",className:"h-5 w-5 rounded object-contain flex-shrink-0"}):l.jsx("div",{className:"h-5 w-5 rounded bg-slate-100 flex-shrink-0"}),v.name]},v.id))}),n&&l.jsx("div",{className:"border-t border-slate-100 p-1",children:l.jsxs("button",{type:"button",onClick:()=>{i(!1),n()},className:"w-full text-left px-3 py-2 rounded-md text-sm text-blue-600 hover:bg-blue-50 flex items-center gap-2 font-medium",children:[l.jsx(_n,{className:"h-4 w-4"}),"Add New Brand"]})})]})]})}function pB({category:t,onBack:e,onSuccess:n}){const{activeWarehouse:r}=Zr(),{toast:s}=qf(),i=Zt(I=>I.user),[o,c]=E.useState(!1),[u,f]=E.useState({title:"",sku:"",city:"",basePrice:"",compareAtPrice:"",shortDescription:"",description:""}),p=(I,B)=>f(V=>({...V,[I]:B})),m=I=>I.trim()?I.trim().split(/\s+/).filter(V=>V.length>0).slice(0,3).map(V=>V.replace(/[^a-zA-Z0-9]/g,"").toUpperCase().slice(0,4)).join("-"):"",x=I=>{const B={title:I};y||(B.sku=m(I)),f(V=>({...V,...B}))},[y,v]=E.useState(!1),[k,w]=E.useState(null),[j,C]=E.useState(0),[T,A]=E.useState(!1),[M,P]=E.useState({name:"",slug:"",description:"",country:"",logoUrl:""}),[F,ne]=E.useState(!1),[O,X]=E.useState(!1),le=I=>I.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,""),z=async()=>{var I,B;if(M.name){ne(!0);try{const V={name:M.name,slug:M.slug||le(M.name),description:M.description,country:M.country,logoUrl:M.logoUrl},Q=await Mn.createBrand(V),pe=(Q==null?void 0:Q.data)||Q;pe!=null&&pe.id&&w(pe),A(!1),P({name:"",slug:"",description:"",country:"",logoUrl:""}),C(Ee=>Ee+1),s({title:"Brand created successfully",variant:"success"})}catch(V){console.error("Failed to add brand:",V),s({title:"Failed to create brand",description:((B=(I=V.response)==null?void 0:I.data)==null?void 0:B.message)||V.message,variant:"destructive"})}finally{ne(!1)}}},te=async I=>{var V,Q;const B=(V=I.target.files)==null?void 0:V[0];if(B){X(!0);try{const pe=await Mn.uploadImage(B),Ee=((Q=pe.data)==null?void 0:Q.url)||pe.url;P(je=>({...je,logoUrl:Ee}))}catch(pe){console.error("Failed to upload logo:",pe),s({title:"Failed to upload logo",variant:"destructive"})}finally{X(!1)}}},[ie,oe]=E.useState([]),W=()=>{ie.length>=10||oe([...ie,{key:"",value:""}])},q=(I,B,V)=>{const Q=[...ie];Q[I][B]=V,oe(Q)},J=I=>oe(ie.filter((B,V)=>V!==I)),[fe,ce]=E.useState([]),[D,G]=E.useState([]),[Ne,Ae]=E.useState({});E.useEffect(()=>{t!=null&&t.id&&Ue(t.id)},[t==null?void 0:t.id]);const Ue=async I=>{try{const B=await Mn.getCategoryById(I),V=(B==null?void 0:B.productAttributes)||[];G(V);const Q={};V.forEach(pe=>{Q[pe.name||pe.key]=""}),Ae(Q)}catch(B){console.error("Failed to fetch category attributes:",B)}},Ve=(I,B)=>Ae(V=>({...V,[I]:B})),[Z,Ce]=E.useState([]),[Fe,se]=E.useState({}),Ye=(I=!1)=>{if(Z.length>=3)return;const B=Date.now().toString();Ce([...Z,{id:B,name:"",values:[],hasImages:I}]),I&&se(V=>({...V,[B]:{name:"",uploading:!1}}))},wt=(I,B)=>{const V=[...Z];V[I].name=B,Ce(V)},ht=(I,B)=>{if(!B.trim())return;const V=[...Z];V[I].values.find(Q=>Q.value===B.trim())||(V[I].values=[...V[I].values,{value:B.trim(),imageUrl:null}],Ce(V))},xr=(I,B)=>{const V=[...Z];V[I].values=V[I].values.filter((Q,pe)=>pe!==B),Ce(V)},yr=async(I,B)=>{var Ee,je;const V=Z[I],Q=Fe[V.id],pe=(Ee=Q==null?void 0:Q.name)==null?void 0:Ee.trim();if(!(!pe||!B)){se(Xe=>({...Xe,[V.id]:{...Xe[V.id],uploading:!0}}));try{const Xe=await Mn.uploadImage(B),et=((je=Xe.data)==null?void 0:je.url)||Xe.url,qt=[...Z];qt[I].values.find(en=>en.value===pe)||(qt[I].values=[...qt[I].values,{value:pe,imageUrl:et||null}],Ce(qt)),se(en=>({...en,[V.id]:{name:"",uploading:!1}}))}catch(Xe){console.error("Option image upload failed:",Xe),se(et=>({...et,[V.id]:{...et[V.id],uploading:!1}}))}}},vr=I=>{const B=Z[I];Ce(Z.filter((V,Q)=>Q!==I)),B.hasImages&&se(V=>{const Q={...V};return delete Q[B.id],Q})},[Wt,an]=E.useState([]);E.useEffect(()=>{const I=Z.filter(Q=>Q.name.trim()&&Q.values.length>0);if(I.length===0){an([{name:"Default Variant",option1:null,option2:null,option3:null,sku:u.sku||"",compareAtPrice:parseFloat(u.compareAtPrice)||0,price:parseFloat(u.basePrice)||0,discount:0,stock:0,weight:0}]);return}const B=I.map(Q=>Q.values.map(pe=>pe.value)),V=U2(B);an(Q=>{const pe={};return Q.forEach(Ee=>{pe[Ee.name]=Ee}),V.map(Ee=>{const je=Ee.join(" / "),Xe=Ee.map(ft=>ft.replace(/\s+/g,"").toUpperCase()).join("-"),et=pe[je],qt=(et==null?void 0:et.compareAtPrice)??(parseFloat(u.compareAtPrice)||0),en=(et==null?void 0:et.price)??(parseFloat(u.basePrice)||0);return{name:je,option1:Ee[0]||null,option2:Ee[1]||null,option3:Ee[2]||null,sku:(et==null?void 0:et.sku)||`${u.sku}-${Xe}`,compareAtPrice:qt,price:en,discount:qt>0?Math.round((qt-en)/qt*100):0,stock:(et==null?void 0:et.stock)??0,weight:(et==null?void 0:et.weight)??0}})})},[Z,u.sku,u.basePrice,u.compareAtPrice]);const Yr=(I,B)=>{an(V=>{const Q=[...V],pe=parseFloat(B)||0,Ee=Q[I].compareAtPrice||0;return Q[I]={...Q[I],price:pe,discount:Ee>0?Math.round((Ee-pe)/Ee*100):0},Q})},qn=(I,B)=>{an(V=>{const Q=[...V],pe=parseFloat(B)||0,Ee=Q[I].compareAtPrice||0,je=Ee>0?Ee*(1-pe/100):0;return Q[I]={...Q[I],discount:pe,price:Math.round(je*100)/100},Q})},_=(I,B)=>{an(V=>{const Q=[...V],pe=parseFloat(B)||0,Ee=Q[I].price;return Q[I]={...Q[I],compareAtPrice:pe,discount:pe>0?Math.round((pe-Ee)/pe*100):0},Q})},U=(I,B,V)=>{an(Q=>{const pe=[...Q];return pe[I]={...pe[I],[B]:V},pe})},re=async()=>{var pe,Ee;if(!u.title.trim()){s({title:"Product title is required",variant:"destructive"});return}if(!u.basePrice){s({title:"Base price is required",variant:"destructive"});return}if(!r){s({title:"No warehouse selected",description:"Please select a warehouse from the header.",variant:"destructive"});return}const I={};ie.forEach(je=>{je.key.trim()&&je.value.trim()&&(I[je.key.trim()]=je.value.trim())});let B=parseFloat(u.compareAtPrice)||null;if(Wt.length>0){const je=[...Wt].sort((Xe,et)=>(et.discount||0)-(Xe.discount||0))[0];je!=null&&je.compareAtPrice&&(B=je.compareAtPrice)}const V={};D.forEach(je=>{const Xe=je.name||je.key;Ne[Xe]&&(V[Xe]=Ne[Xe])});const Q={replaceVariants:!1,replaceImages:!1,retailerId:i==null?void 0:i.id,productData:{title:u.title,sku:u.sku,productType:"general",basePrice:parseFloat(u.basePrice),compareAtPrice:parseFloat(u.compareAtPrice)||null,shortDescription:u.shortDescription,description:u.description,city:u.city,currency:"INR",highlight:I,metadata:{categoryAttributes:V,compare_price:B},isActive:!0},productOptions:Z.filter(je=>je.name.trim()&&je.values.length>0).map((je,Xe)=>({name:je.name,values:je.values.map(et=>({value:et.value,imageUrl:et.imageUrl})),position:Xe+1,isRequired:!0})),variants:Wt.map(je=>({sku:je.sku,price:je.price,compareAtPrice:je.compareAtPrice||null,stock:parseInt(je.stock)||0,weight:parseFloat(je.weight)||0,option1:je.option1,option2:je.option2,option3:je.option3,metadata:{}})),images:fe.map((je,Xe)=>({url:je,altText:u.title,sortOrder:Xe,isPrimary:Xe===0})),warehouseData:{type:"existing",warehouseId:r.id},brandData:k?{type:"existing",brandId:k.id}:null,categories:[{id:t.id}],schoolData:null};c(!0);try{await Mn.createProduct(Q),s({title:"Product created successfully",variant:"success"}),n()}catch(je){console.error("Product creation failed:",je),s({title:"Failed to create product",description:((Ee=(pe=je.response)==null?void 0:pe.data)==null?void 0:Ee.message)||je.message,variant:"destructive"})}finally{c(!1)}};return l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 pb-8",children:[l.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[l.jsxs($n,{children:[l.jsx(dr,{children:l.jsx(ur,{children:"Basic Information"})}),l.jsxs(Vn,{className:"space-y-4",children:[l.jsx(Pe,{label:"Product Title",required:!0,value:u.title,onChange:I=>x(I.target.value),placeholder:"e.g. Classmate Notebook A4 200 Pages"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsx(Pe,{label:"SKU",value:u.sku,onChange:I=>{v(!0),p("sku",I.target.value)},placeholder:"Auto-generated from title",helperText:y?"Manually set":"Auto-generated from title"}),l.jsx(Pe,{label:"City",value:u.city,onChange:I=>p("city",I.target.value),placeholder:"e.g. Delhi"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsx(Pe,{label:"Base Price ()",required:!0,type:"number",min:"0",step:"0.01",value:u.basePrice,onChange:I=>p("basePrice",I.target.value),placeholder:"0.00"}),l.jsx(Pe,{label:"Compare At Price ()",type:"number",min:"0",step:"0.01",value:u.compareAtPrice,onChange:I=>p("compareAtPrice",I.target.value),placeholder:"0.00",helperText:"MRP / original price for discount"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"mb-1.5 block text-sm font-medium text-slate-700",children:"Brand"}),l.jsx(hB,{selected:k,onSelect:w,onAddNew:()=>A(!0),refreshKey:j})]}),l.jsxs("div",{children:[l.jsx("label",{className:"mb-1.5 block text-sm font-medium text-slate-700",children:"Short Description"}),l.jsx("textarea",{className:"flex w-full rounded-lg border border-slate-300 bg-white px-4 py-2.5 text-sm text-slate-900 transition-all hover:border-slate-400 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 min-h-[80px]",value:u.shortDescription,onChange:I=>p("shortDescription",I.target.value),placeholder:"Brief product description (shown on cards)...",rows:3})]}),l.jsxs("div",{children:[l.jsx("label",{className:"mb-1.5 block text-sm font-medium text-slate-700",children:"Full Description"}),l.jsx(uB,{value:u.description,onChange:I=>p("description",I),placeholder:"Write a detailed product description..."})]})]})]}),l.jsxs($n,{children:[l.jsxs(dr,{className:"flex-row items-center justify-between",children:[l.jsx(ur,{children:"Product Highlights"}),l.jsxs(xe,{type:"button",variant:"outline",size:"sm",onClick:W,disabled:ie.length>=10,children:[l.jsx(_n,{className:"h-4 w-4"})," Add"]})]}),l.jsx(Vn,{children:ie.length===0?l.jsx("p",{className:"text-sm text-slate-400 text-center py-4",children:'No highlights added. Click "Add" to create one.'}):l.jsxs("div",{className:"space-y-3",children:[ie.map((I,B)=>l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx(Pe,{placeholder:"Key (max 15)",value:I.key,onChange:V=>q(B,"key",V.target.value.slice(0,15)),className:"max-w-[160px]"}),l.jsx(Pe,{placeholder:"Value (max 40)",value:I.value,onChange:V=>q(B,"value",V.target.value.slice(0,40))}),l.jsx(xe,{type:"button",variant:"ghost",size:"icon",onClick:()=>J(B),className:"text-red-500 hover:text-red-700 shrink-0",children:l.jsx(qs,{className:"h-4 w-4"})})]},B)),l.jsxs("p",{className:"text-xs text-slate-400",children:[ie.length,"/10 highlights"]})]})})]}),D.length>0&&l.jsxs($n,{children:[l.jsx(dr,{children:l.jsx(ur,{children:"Category Attributes"})}),l.jsx(Vn,{className:"space-y-4",children:D.map(I=>{var V;const B=I.name||I.key;return l.jsx("div",{children:I.type==="select"&&((V=I.options)==null?void 0:V.length)>0?l.jsxs("div",{children:[l.jsxs("label",{className:"mb-1.5 block text-sm font-medium text-slate-700",children:[B,I.required&&l.jsx("span",{className:"ml-0.5 text-red-500",children:"*"})]}),l.jsxs("select",{value:Ne[B]||"",onChange:Q=>Ve(B,Q.target.value),className:"flex h-11 w-full rounded-lg border border-slate-300 bg-white px-4 py-2.5 text-sm text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20",children:[l.jsxs("option",{value:"",children:["Select ",B]}),I.options.map(Q=>l.jsx("option",{value:Q,children:Q},Q))]})]}):l.jsx(Pe,{label:B,required:I.required,value:Ne[B]||"",onChange:Q=>Ve(B,Q.target.value),placeholder:`Enter ${B}`})},B)})})]}),l.jsxs($n,{children:[l.jsx(dr,{children:l.jsx(ur,{children:"Media"})}),l.jsx(Vn,{children:l.jsx(fB,{images:fe,onChange:ce,maxImages:10})})]}),l.jsxs($n,{children:[l.jsxs(dr,{className:"flex-row items-center justify-between",children:[l.jsx(ur,{children:"Options & Variants"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs(xe,{type:"button",variant:"outline",size:"sm",onClick:()=>Ye(!1),disabled:Z.length>=3,children:[l.jsx(cN,{className:"h-4 w-4"})," Add Option"]}),l.jsxs(xe,{type:"button",variant:"outline",size:"sm",onClick:()=>Ye(!0),disabled:Z.length>=3,children:[l.jsx(p0,{className:"h-4 w-4"})," Add Option with Image"]})]})]}),l.jsxs(Vn,{className:"space-y-4",children:[Z.map((I,B)=>{var V,Q,pe,Ee,je,Xe,et,qt,en;return l.jsxs("div",{className:be("p-4 rounded-lg border",I.hasImages?"bg-blue-50/50 border-blue-200":"bg-slate-50 border-slate-200"),children:[l.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[l.jsx(Pe,{placeholder:`Option ${B+1} name (e.g. ${I.hasImages?"Color":"Size"})`,className:"max-w-[200px]",value:I.name,onChange:ft=>wt(B,ft.target.value)}),l.jsxs("div",{className:"flex items-center gap-1.5",children:[I.hasImages&&l.jsx("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-0.5 rounded-full font-medium",children:"With Images"}),l.jsx(xe,{type:"button",variant:"ghost",size:"sm",onClick:()=>vr(B),className:"text-red-500 hover:text-red-700 opacity-0 group-hover/option:opacity-100 transition-opacity",children:l.jsx(qs,{className:"h-4 w-4"})})]})]}),l.jsx("div",{className:"flex flex-wrap gap-2 items-center mb-3",children:I.values.map((ft,Kn)=>l.jsxs("div",{className:"inline-flex items-center gap-1.5 bg-white border border-slate-200 rounded-full px-3 py-1 text-sm shadow-sm",children:[I.hasImages&&ft.imageUrl&&l.jsx("img",{src:ft.imageUrl,alt:ft.value,className:"h-5 w-5 rounded-full object-cover ring-1 ring-slate-200"}),l.jsx("span",{children:ft.value}),l.jsx("button",{type:"button",onClick:()=>xr(B,Kn),children:l.jsx(On,{className:"h-3 w-3 text-slate-400 hover:text-red-500 transition-colors"})})]},Kn))}),I.hasImages?l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"text",className:"h-9 flex-1 max-w-[180px] text-sm rounded-md border border-blue-200 bg-white px-3 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 focus:outline-none",placeholder:"Value name (e.g. Red)",value:((V=Fe[I.id])==null?void 0:V.name)||"",onChange:ft=>se(Kn=>({...Kn,[I.id]:{...Kn[I.id],name:ft.target.value}}))}),l.jsxs("label",{className:be("inline-flex items-center gap-1.5 h-9 px-3 rounded-md text-sm font-medium cursor-pointer transition-colors",(Q=Fe[I.id])!=null&&Q.uploading?"bg-blue-100 text-blue-400 cursor-wait":(Ee=(pe=Fe[I.id])==null?void 0:pe.name)!=null&&Ee.trim()?"bg-blue-500 text-white hover:bg-blue-600":"bg-slate-200 text-slate-400 cursor-not-allowed"),children:[(je=Fe[I.id])!=null&&je.uploading?l.jsx(At,{className:"h-4 w-4 animate-spin"}):l.jsx(ng,{className:"h-4 w-4"}),(Xe=Fe[I.id])!=null&&Xe.uploading?"Uploading...":"Upload & Add",l.jsx("input",{type:"file",className:"hidden",accept:"image/*",disabled:!((qt=(et=Fe[I.id])==null?void 0:et.name)!=null&&qt.trim())||((en=Fe[I.id])==null?void 0:en.uploading),onChange:ft=>{ft.target.files[0]&&yr(B,ft.target.files[0]),ft.target.value=""}})]})]}):l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"text",className:"h-8 w-32 text-sm rounded-md border border-slate-200 px-2 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 focus:outline-none",placeholder:"Add value",onKeyDown:ft=>{ft.key==="Enter"&&(ft.preventDefault(),ht(B,ft.currentTarget.value),ft.currentTarget.value="")}}),l.jsx("span",{className:"text-xs text-slate-400",children:"Press Enter to add"})]})]},I.id)}),Z.length===0&&l.jsx("p",{className:"text-sm text-slate-400 text-center py-4",children:"No options defined. A single default variant will be created automatically."}),Wt.length>0&&l.jsx("div",{className:"border border-slate-200 rounded-lg overflow-hidden mt-4",children:l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-sm",children:[l.jsx("thead",{className:"bg-slate-50 text-slate-600 border-b border-slate-200",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left font-medium",children:"Variant"}),l.jsx("th",{className:"px-4 py-3 text-left font-medium w-32",children:"SKU"}),l.jsx("th",{className:"px-4 py-3 text-left font-medium w-24",children:"Compare At ()"}),l.jsx("th",{className:"px-4 py-3 text-left font-medium w-20",children:"% Disc"}),l.jsx("th",{className:"px-4 py-3 text-left font-medium w-24",children:"Price ()"}),l.jsx("th",{className:"px-4 py-3 text-left font-medium w-20",children:"Stock"}),l.jsx("th",{className:"px-4 py-3 text-left font-medium w-20",children:"Weight"})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100",children:Wt.map((I,B)=>l.jsxs("tr",{className:"hover:bg-slate-50/50",children:[l.jsx("td",{className:"px-4 py-2.5 font-medium text-slate-900 whitespace-nowrap",children:I.name}),l.jsx("td",{className:"px-4 py-2.5",children:l.jsx("input",{type:"text",className:"h-8 w-full text-sm rounded border border-slate-200 px-2 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 focus:outline-none",value:I.sku,onChange:V=>U(B,"sku",V.target.value)})}),l.jsx("td",{className:"px-4 py-2.5",children:l.jsx("input",{type:"number",className:"h-8 w-full text-sm rounded border border-slate-200 px-2 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 focus:outline-none",value:I.compareAtPrice,onChange:V=>_(B,V.target.value)})}),l.jsx("td",{className:"px-4 py-2.5",children:l.jsx("input",{type:"number",className:"h-8 w-full text-sm rounded border border-slate-200 px-2 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 focus:outline-none",value:I.discount,min:"0",max:"100",onChange:V=>qn(B,V.target.value)})}),l.jsx("td",{className:"px-4 py-2.5",children:l.jsx("input",{type:"number",className:"h-8 w-full text-sm rounded border border-slate-200 px-2 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 focus:outline-none",value:I.price,onChange:V=>Yr(B,V.target.value)})}),l.jsx("td",{className:"px-4 py-2.5",children:l.jsx("input",{type:"number",className:"h-8 w-full text-sm rounded border border-slate-200 px-2 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 focus:outline-none",value:I.stock,min:"0",onChange:V=>U(B,"stock",V.target.value)})}),l.jsx("td",{className:"px-4 py-2.5",children:l.jsx("input",{type:"number",className:"h-8 w-full text-sm rounded border border-slate-200 px-2 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 focus:outline-none",value:I.weight,min:"0",step:"0.01",onChange:V=>U(B,"weight",V.target.value)})})]},B))})]})})})]})]})]}),l.jsx("div",{className:"lg:col-span-1",children:l.jsxs("div",{className:"sticky top-6 space-y-6",children:[l.jsxs($n,{children:[l.jsx(dr,{children:l.jsx(ur,{children:"Product Summary"})}),l.jsxs(Vn,{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[l.jsx("div",{className:"h-8 w-8 rounded-lg bg-blue-50 flex items-center justify-center shrink-0",children:l.jsx(sM,{className:"h-4 w-4 text-blue-600"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-slate-500 text-xs",children:"Category"}),l.jsx("p",{className:"font-medium text-slate-900",children:(t==null?void 0:t.name)||""})]})]}),l.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[l.jsx("div",{className:"h-8 w-8 rounded-lg bg-blue-50 flex items-center justify-center shrink-0",children:l.jsx(gM,{className:"h-4 w-4 text-blue-600"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-slate-500 text-xs",children:"Brand"}),l.jsx("p",{className:"font-medium text-slate-900",children:(k==null?void 0:k.name)||"Not selected"})]})]}),l.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[l.jsx("div",{className:"h-8 w-8 rounded-lg bg-blue-50 flex items-center justify-center shrink-0",children:l.jsx(_t,{className:"h-4 w-4 text-blue-600"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-slate-500 text-xs",children:"Variants"}),l.jsx("p",{className:"font-medium text-slate-900",children:Wt.length||"No variants"})]})]}),l.jsx("div",{className:"pt-2 border-t border-slate-100",children:l.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[l.jsx("div",{className:"h-8 w-8 rounded-lg bg-blue-50 flex items-center justify-center shrink-0",children:l.jsx(ng,{className:"h-4 w-4 text-blue-600"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-slate-500 text-xs",children:"Images"}),l.jsxs("p",{className:"font-medium text-slate-900",children:[fe.length," uploaded"]})]})]})})]})]}),l.jsx($n,{children:l.jsxs(Vn,{className:"pt-6 space-y-3",children:[l.jsx(xe,{type:"button",onClick:re,disabled:o,loading:o,className:"w-full bg-blue-600 hover:bg-blue-700",children:"Publish Product"}),l.jsx(xe,{type:"button",variant:"outline",className:"w-full",onClick:e,children:"Back to Categories"})]})})]})}),T&&l.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-md shadow-xl",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"Add New Brand"}),l.jsx("button",{type:"button",onClick:()=>A(!1),className:"text-slate-400 hover:text-slate-600",children:l.jsx(On,{size:20})})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx(Pe,{label:"Brand Name",required:!0,placeholder:"e.g. Nike",value:M.name,onChange:I=>P({...M,name:I.target.value,slug:le(I.target.value)})}),l.jsx(Pe,{label:"Slug",placeholder:"e.g. nike",value:M.slug,onChange:I=>P({...M,slug:I.target.value})}),l.jsx(Pe,{label:"Description",placeholder:"e.g. Just do it.",value:M.description,onChange:I=>P({...M,description:I.target.value})}),l.jsx(Pe,{label:"Country",placeholder:"e.g. India",value:M.country,onChange:I=>P({...M,country:I.target.value})}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Brand Logo"}),l.jsxs("div",{className:"flex items-center gap-3",children:[M.logoUrl?l.jsx("img",{src:M.logoUrl,alt:"Logo preview",className:"w-12 h-12 object-contain rounded border border-slate-200"}):l.jsx("div",{className:"w-12 h-12 bg-slate-100 rounded border border-slate-200 flex items-center justify-center text-slate-400 text-xs",children:"No logo"}),l.jsxs("label",{className:"cursor-pointer",children:[l.jsx("input",{type:"file",accept:"image/*",onChange:te,className:"hidden"}),l.jsx("span",{className:"px-3 py-1.5 text-sm bg-slate-100 hover:bg-slate-200 rounded text-slate-700 flex items-center gap-2 transition-colors",children:O?l.jsxs(l.Fragment,{children:[l.jsx(At,{size:14,className:"animate-spin"}),"Uploading..."]}):l.jsxs(l.Fragment,{children:[l.jsx(_n,{size:14}),M.logoUrl?"Change":"Upload"]})})]})]})]})]}),l.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[l.jsx("button",{type:"button",onClick:()=>A(!1),className:"px-4 py-2 text-sm text-slate-600 hover:text-slate-800",children:"Cancel"}),l.jsxs("button",{type:"button",onClick:z,disabled:F||!M.name,className:"px-4 py-2 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 disabled:opacity-50 flex items-center gap-2 transition-colors",children:[F&&l.jsx(At,{size:14,className:"animate-spin"}),"Add Brand"]})]})]})})]})}const mB=[{id:"category",label:"Select Category"},{id:"details",label:"Product Details"}];function gB(){const t=Dn(),[e,n]=E.useState(0),[r,s]=E.useState(null),i=u=>{s(u),n(1)},o=()=>{e>0?n(e-1):t(-1)},c=()=>{t("/dashboard/inventory/general")};return l.jsxs("div",{className:"space-y-6 pb-20",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx(xe,{variant:"ghost",size:"icon",onClick:()=>t(-1),children:l.jsx(us,{className:"h-4 w-4"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Add New Product"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Follow the steps to add a product to your inventory."})]})]}),l.jsx("div",{className:"rounded-xl border border-slate-200 bg-white p-6 shadow-sm",children:l.jsx(GR,{steps:mB,currentStep:e,onStepClick:u=>{u<e&&n(u)}})}),l.jsx("div",{className:e===0?"block":"hidden",children:l.jsx("div",{className:"min-h-[600px] bg-white rounded-xl border border-slate-200 shadow-sm p-6",children:l.jsx(JR,{onSelect:i})})}),l.jsx("div",{className:e===1?"block":"hidden",children:r&&l.jsx(pB,{category:r,onBack:o,onSuccess:c})})]})}const xB=20,yB=[{id:"all",label:"All Inventory",icon:l.jsx(_t,{className:"h-6 w-6"}),color:"text-blue-600",bgColor:"bg-blue-50",borderColor:"border-blue-200"},{id:"low_stock",label:"Low Stock",icon:l.jsx(Dc,{className:"h-6 w-6"}),color:"text-amber-600",bgColor:"bg-amber-50",borderColor:"border-amber-200"},{id:"out_of_stock",label:"Out of Stock",icon:l.jsx(Ou,{className:"h-6 w-6"}),color:"text-red-600",bgColor:"bg-red-50",borderColor:"border-red-200"},{id:"needs_restock",label:"Needs Restock",icon:l.jsx(oM,{className:"h-6 w-6"}),color:"text-violet-600",bgColor:"bg-violet-50",borderColor:"border-violet-200"}];function vB(t){const e=[];for(const n of t){const r=n.variants||[];if(r.length>0)for(const s of r)e.push({rowId:s.id,variantId:s.id,isVariant:!0,productId:n.id,productName:n.title,variantLabel:bB(s),sku:s.sku||n.sku,stock:s.stock??0,price:s.price??n.basePrice??0});else e.push({rowId:n.id,variantId:null,isVariant:!1,productId:n.id,productName:n.title,variantLabel:"No variants",sku:n.sku,stock:n.stock??0,price:n.basePrice??0})}return e}function bB(t){const e=[t.optionValue1,t.optionValue2,t.optionValue3].filter(Boolean);return e.length>0?e.join(" / "):""}function wi(t){return t<=0?"out_of_stock":t<=xB?"low_stock":"in_stock"}function wB(){const{activeWarehouse:t}=Zr(),{toast:e}=qf(),[n,r]=E.useState([]),[s,i]=E.useState(!1),[o,c]=E.useState(!1),[u,f]=E.useState("out_of_stock"),[p,m]=E.useState(""),[x,y]=E.useState({}),[v,k]=E.useState(!1),w=E.useCallback(async(O=!1)=>{var X,le;if(t!=null&&t.id){O?c(!0):i(!0);try{const z=await Mn.getProductsByWarehouseId({warehouseId:t.id,page:1,limit:100});if(z.success){const te=z.data.products||[];console.log("[InventoryHealth] raw products sample:",JSON.stringify(te.slice(0,2).map(ie=>({id:ie.id,title:ie.title,stock:ie.stock,variants:(ie.variants||[]).map(oe=>({id:oe.id,sku:oe.sku,stock:oe.stock}))})),null,2)),r(te),y({})}}catch(z){console.error("Failed to fetch inventory:",z),e({title:"Failed to load inventory",description:((le=(X=z.response)==null?void 0:X.data)==null?void 0:le.error)||"Please try again later.",variant:"destructive"})}finally{i(!1),c(!1)}}},[t]);E.useEffect(()=>{w()},[w]);const j=E.useMemo(()=>vB(n),[n]),C=E.useMemo(()=>({all:j.length,low_stock:j.filter(O=>wi(O.stock)==="low_stock").length,out_of_stock:j.filter(O=>wi(O.stock)==="out_of_stock").length,needs_restock:j.filter(O=>wi(O.stock)!=="in_stock").length}),[j]),T=E.useMemo(()=>{let O=j;if(u==="low_stock"?O=O.filter(X=>wi(X.stock)==="low_stock"):u==="out_of_stock"?O=O.filter(X=>wi(X.stock)==="out_of_stock"):u==="needs_restock"&&(O=O.filter(X=>wi(X.stock)!=="in_stock")),p.trim()){const X=p.toLowerCase();O=O.filter(le=>{var z;return le.productName.toLowerCase().includes(X)||((z=le.sku)==null?void 0:z.toLowerCase().includes(X))||le.variantLabel.toLowerCase().includes(X)})}return O},[j,u,p]),A=(O,X)=>{(X===""||/^\d+$/.test(X))&&y(le=>({...le,[O]:X===""?"":parseInt(X,10)}))},M=(O,X,le)=>{const z=x[O]??X,te=Math.max(0,(typeof z=="number"?z:parseInt(z,10)||0)+le);y(ie=>({...ie,[O]:te}))},P=E.useMemo(()=>Object.entries(x).filter(([O,X])=>{const le=j.find(z=>z.variantId===O);return le&&le.isVariant&&X!==""&&X!==le.stock}).map(([O,X])=>({variantId:O,quantity:typeof X=="number"?X:parseInt(X,10)})),[x,j]),F=async()=>{var O,X;if(P.length!==0){console.log("[InventoryHealth] saving dirtyEntries:",JSON.stringify(P,null,2)),k(!0);try{if(P.length===1){const le=P[0];await Mn.updateVariantStock(le.variantId,{quantity:le.quantity,operation:"set"})}else await Mn.bulkUpdateVariantStock(P.map(le=>({variantId:le.variantId,quantity:le.quantity,operation:"set"})));e({title:"Stock updated",description:`Successfully updated ${P.length} variant${P.length>1?"s":""}.`,variant:"success"}),await w()}catch(le){console.error("Stock update failed:",le),e({title:"Stock update failed",description:((X=(O=le.response)==null?void 0:O.data)==null?void 0:X.error)||"Please try again.",variant:"destructive"})}finally{k(!1)}}},ne=O=>{switch(wi(O)){case"in_stock":return l.jsx(yt,{variant:"live",dot:!0,children:"In Stock"});case"low_stock":return l.jsx(yt,{variant:"warning",dot:!0,children:"Low Stock"});case"out_of_stock":return l.jsx(yt,{variant:"rejected",dot:!0,children:"Out of Stock"});default:return null}};return l.jsxs("div",{className:"space-y-6 animate-fade-in",children:[l.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Inventory Health"}),l.jsxs("p",{className:"mt-1 text-sm text-slate-500",children:["Monitor and manage stock levels for"," ",(t==null?void 0:t.name)||"Loading..."]})]}),l.jsxs(xe,{variant:"outline",onClick:()=>w(!0),loading:o,children:[l.jsx(Bo,{className:"h-4 w-4"}),"Refresh"]})]}),l.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:yB.map(O=>l.jsxs("button",{onClick:()=>f(O.id),className:be("relative flex flex-col rounded-xl border-2 p-5 text-left transition-all hover:shadow-md",u===O.id?`${O.bgColor} ${O.borderColor} shadow-md`:"bg-white border-slate-200 hover:border-slate-300"),children:[l.jsx("div",{className:be("flex h-12 w-12 items-center justify-center rounded-lg mb-3",u===O.id?O.bgColor:"bg-slate-100",u===O.id?O.color:"text-slate-400"),children:O.icon}),l.jsxs("span",{className:"text-2xl font-bold text-slate-900",children:[s?"":C[O.id]," ",l.jsx("span",{className:"text-sm font-normal text-slate-500",children:"SKUs"})]}),l.jsx("span",{className:be("text-sm font-medium mt-1",u===O.id?O.color:"text-slate-600"),children:O.label}),u===O.id&&l.jsx("div",{className:be("absolute top-3 right-3 h-3 w-3 rounded-full",O.id==="low_stock"?"bg-amber-500":O.id==="out_of_stock"?"bg-red-500":O.id==="needs_restock"?"bg-violet-500":"bg-blue-500")})]},O.id))}),l.jsx("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:l.jsx("div",{className:"flex-1 max-w-md",children:l.jsx(Pe,{placeholder:"Search by product name or SKU...",value:p,onChange:O=>m(O.target.value),icon:l.jsx(Gs,{className:"h-5 w-5"})})})}),l.jsx("div",{className:"rounded-xl border border-slate-200 bg-white shadow-sm overflow-hidden",children:l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b border-slate-200 bg-slate-50",children:[l.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-slate-900",children:"Product / Variant"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-slate-900",children:"SKU"}),l.jsx("th",{className:"px-6 py-4 text-center text-sm font-semibold text-slate-900",children:"Current Stock"}),l.jsx("th",{className:"px-6 py-4 text-center text-sm font-semibold text-slate-900",children:"New Stock"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-slate-900",children:"Status"}),l.jsx("th",{className:"hidden px-6 py-4 text-right text-sm font-semibold text-slate-900 md:table-cell",children:"Price"})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100",children:s?l.jsx("tr",{children:l.jsx("td",{colSpan:"6",className:"px-6 py-20 text-center text-slate-500",children:l.jsxs("div",{className:"flex flex-col items-center justify-center",children:[l.jsx(At,{className:"h-8 w-8 animate-spin text-blue-600 mb-2"}),l.jsx("p",{children:"Loading inventory data..."})]})})}):T.length===0?l.jsx("tr",{children:l.jsxs("td",{colSpan:"6",className:"px-6 py-12 text-center text-slate-500",children:[l.jsx(_t,{className:"mx-auto mb-4 h-12 w-12 text-slate-300"}),l.jsx("p",{className:"font-medium",children:"No inventory items found"}),l.jsx("p",{className:"text-xs mt-1",children:u!=="all"?"Try selecting a different filter above.":"Your warehouse has no products yet."})]})}):T.map(O=>{var ie;const X=x[O.variantId],le=X??O.stock,z=X!==void 0&&X!==""&&X!==O.stock,te=wi(O.stock);return l.jsxs("tr",{className:be("transition-colors hover:bg-slate-50",z&&"bg-blue-50/40"),children:[l.jsx("td",{className:"px-6 py-4",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg bg-slate-100",children:l.jsx(_t,{className:"h-5 w-5 text-slate-400"})}),l.jsxs("div",{className:"min-w-0",children:[l.jsx("p",{className:"truncate font-medium text-slate-900",children:O.productName}),O.variantLabel&&O.variantLabel!=="Default"&&l.jsx("p",{className:"text-xs text-slate-500",children:O.variantLabel})]})]})}),l.jsx("td",{className:"px-6 py-4",children:l.jsx("code",{className:"rounded bg-slate-100 px-2 py-1 text-sm text-slate-600",children:O.sku})}),l.jsx("td",{className:"px-6 py-4 text-center",children:l.jsx("span",{className:be("text-sm font-semibold",te==="out_of_stock"?"text-red-600":te==="low_stock"?"text-amber-600":"text-slate-900"),children:O.stock})}),l.jsx("td",{className:"px-6 py-4",children:O.isVariant?l.jsxs("div",{className:"flex items-center justify-center gap-1",children:[l.jsx("button",{type:"button",onClick:()=>M(O.variantId,O.stock,-1),className:"flex h-8 w-8 flex-shrink-0 items-center justify-center rounded-md border border-slate-300 bg-white text-slate-500 transition-colors hover:bg-slate-50 disabled:opacity-40",disabled:le<=0,children:l.jsx(oN,{className:"h-3.5 w-3.5"})}),l.jsx("input",{type:"text",inputMode:"numeric",className:be("w-20 rounded-lg border px-2 py-1.5 text-center text-sm font-medium transition-colors","focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",z?"border-blue-400 bg-blue-50 text-blue-700 ring-1 ring-blue-200":te==="out_of_stock"?"border-red-300 bg-red-50 text-red-700":te==="low_stock"?"border-amber-300 bg-amber-50 text-amber-700":"border-slate-300 bg-white text-slate-900"),value:X??O.stock,onChange:oe=>A(O.variantId,oe.target.value)}),l.jsx("button",{type:"button",onClick:()=>M(O.variantId,O.stock,1),className:"flex h-8 w-8 flex-shrink-0 items-center justify-center rounded-md border border-slate-300 bg-white text-slate-500 transition-colors hover:bg-slate-50",children:l.jsx(_n,{className:"h-3.5 w-3.5"})})]}):l.jsx("p",{className:"text-center text-xs text-slate-400",title:"Add variants to this product to manage stock",children:"No variants"})}),l.jsx("td",{className:"px-6 py-4",children:ne(O.stock)}),l.jsx("td",{className:"hidden px-6 py-4 text-right md:table-cell",children:l.jsxs("span",{className:"font-medium text-slate-900",children:["",(ie=O.price)==null?void 0:ie.toLocaleString()]})})]},O.rowId)})})]})})}),l.jsxs("div",{className:"flex flex-wrap items-center gap-6 text-sm text-slate-500",children:[l.jsxs("span",{children:["Showing ",T.length," of ",j.length," SKUs"]}),P.length>0&&l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{className:"h-2 w-2 rounded-full bg-blue-500 animate-pulse"}),l.jsxs("span",{className:"text-blue-600 font-medium",children:[P.length," unsaved change",P.length>1?"s":""]}),l.jsx(xe,{size:"sm",onClick:F,loading:v,children:P.length>1?"Bulk Update Stock":"Update Stock"}),l.jsx(xe,{variant:"ghost",size:"sm",onClick:()=>y({}),disabled:v,children:"Discard"})]})]})]})}const kB={CBSE:"bg-blue-100 text-blue-700",ICSE:"bg-purple-100 text-purple-700",State:"bg-amber-100 text-amber-700",IB:"bg-green-100 text-green-700",Cambridge:"bg-red-100 text-red-700"},NB={bookset:"Bookset",uniform:"Uniform",stationary:"Stationary",notebooks:"Notebooks",uniforms:"Uniforms"};function ok(t){if(!t)return null;try{return new Date(t).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})}catch{return t}}function jB({entry:t,onManageProducts:e,onRetry:n}){var p;const{status:r,productType:s=[],linkedAt:i,updatedAt:o,school:c={}}=t,u={pending:{variant:"pending",label:"Pending Approval"},approved:{variant:"approved",label:"Active"},rejected:{variant:"rejected",label:"Rejected"}},f=u[r]||u.pending;return l.jsxs("div",{className:be("group relative rounded-xl border bg-white overflow-hidden transition-all duration-300 hover:shadow-xl","dark:bg-slate-900 dark:border-slate-800",r==="approved"&&"hover:border-violet-300 dark:hover:border-violet-700",r==="pending"&&"hover:border-amber-300 dark:hover:border-amber-700",r==="rejected"&&"hover:border-red-300 dark:hover:border-red-700"),children:[l.jsx("div",{className:be("absolute top-0 left-0 right-0 h-1",r==="approved"&&"bg-gradient-to-r from-emerald-400 to-green-500",r==="pending"&&"bg-gradient-to-r from-amber-400 to-orange-400",r==="rejected"&&"bg-gradient-to-r from-red-400 to-rose-400")}),l.jsxs("div",{className:"p-5",children:[l.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[c.logo_url?l.jsx("img",{src:c.logo_url,alt:c.name,className:"w-14 h-14 rounded-xl object-cover flex-shrink-0 border border-slate-200"}):l.jsx("div",{className:be("w-14 h-14 rounded-xl flex items-center justify-center text-xl font-bold flex-shrink-0","bg-gradient-to-br from-violet-500 to-indigo-600 text-white"),children:((p=c.name)==null?void 0:p.charAt(0))||"S"}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-start justify-between gap-2",children:[l.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white truncate",children:c.name||"Unknown School"}),l.jsx(yt,{variant:f.variant,dot:!0,children:f.label})]}),c.affiliation_number&&l.jsxs("p",{className:"text-xs text-slate-400 dark:text-slate-500 mt-0.5 flex items-center gap-1",children:[l.jsx(sN,{className:"w-3 h-3"}),c.affiliation_number]})]})]}),l.jsxs("div",{className:"space-y-2 mb-4",children:[c.city&&l.jsxs("div",{className:"flex items-start gap-2 text-sm text-slate-600 dark:text-slate-400",children:[l.jsx(Rn,{className:"w-4 h-4 text-slate-400 mt-0.5 flex-shrink-0"}),l.jsxs("span",{className:"truncate",children:[c.city,c.state&&`, ${c.state}`,c.pincode&&` - ${c.pincode}`]})]}),c.phone&&l.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[l.jsx(Gr,{className:"w-4 h-4 text-slate-400"}),l.jsx("span",{children:c.phone})]}),c.email&&l.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[l.jsx(mr,{className:"w-4 h-4 text-slate-400"}),l.jsx("span",{className:"truncate",children:c.email})]}),c.website&&l.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[l.jsx(Ma,{className:"w-4 h-4 text-slate-400"}),l.jsx("a",{href:c.website,target:"_blank",rel:"noopener noreferrer",className:"truncate text-blue-600 hover:underline",children:c.website})]}),c.student_count&&l.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[l.jsx(w0,{className:"w-4 h-4 text-slate-400"}),l.jsxs("span",{children:[Number(c.student_count).toLocaleString()," students"]})]})]}),c.board&&l.jsx("div",{className:"flex items-center gap-2 mb-4",children:l.jsxs("span",{className:be("inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium",kB[c.board]||"bg-slate-100 text-slate-700"),children:[l.jsx(pn,{className:"w-3.5 h-3.5"}),c.board," Board"]})}),s.length>0&&l.jsx("div",{className:"flex flex-wrap gap-1.5 mb-4",children:s.map(m=>l.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-slate-100 text-slate-600 dark:bg-slate-800 dark:text-slate-300 capitalize",children:NB[m]||m},m))}),l.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 mb-4 text-xs text-slate-400",children:[i&&l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(hc,{className:"w-3 h-3"}),"Linked ",ok(i)]}),o&&o!==i&&l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(hc,{className:"w-3 h-3"}),"Updated ",ok(o)]})]}),r==="rejected"&&t.rejectionReason&&l.jsx("div",{className:"p-3 rounded-lg bg-red-50 dark:bg-red-950/30 border border-red-100 dark:border-red-900/50 mb-4",children:l.jsxs("p",{className:"text-sm text-red-700 dark:text-red-400",children:[l.jsx("strong",{children:"Reason:"})," ",t.rejectionReason]})}),l.jsxs("div",{className:"flex gap-2",children:[r==="approved"&&l.jsxs(xe,{onClick:e,className:"flex-1 group-hover:shadow-lg",size:"sm",children:[l.jsx(v0,{className:"w-4 h-4"}),"Manage Products",l.jsx(Ws,{className:"w-4 h-4 ml-auto opacity-50 group-hover:opacity-100 transition-opacity"})]}),r==="pending"&&l.jsxs(xe,{variant:"outline",className:"flex-1 border-amber-300 text-amber-600 hover:bg-amber-50 cursor-default",size:"sm",disabled:!0,children:[l.jsx(At,{className:"w-4 h-4 animate-spin"}),"Awaiting Approval"]}),r==="rejected"&&l.jsxs(xe,{onClick:n,variant:"outline",className:"flex-1 border-red-300 text-red-600 hover:bg-red-50",size:"sm",children:["Retry Application",l.jsx(Ws,{className:"w-4 h-4 ml-auto opacity-50 group-hover:opacity-100 transition-opacity"})]})]})]})]})}function SB(){const t=Dn(),[e,n]=E.useState("approved"),{activeWarehouse:r}=Zr(),{openRequestModal:s,connectedSchools:i,isLoadingConnected:o,connectedError:c,fetchConnectedSchools:u}=Gf();E.useEffect(()=>{u("approved"),u("pending"),u("rejected")},[]);const f=()=>{var k;const v=((k=r==null?void 0:r.address)==null?void 0:k.city)||(r==null?void 0:r.city)||"";s(v)},p=[{id:"approved",label:"Approved",count:i.approved.length},{id:"pending",label:"Pending",count:i.pending.length},{id:"rejected",label:"Rejected",count:i.rejected.length}],m=i[e]||[],x=o[e],y=c[e];return l.jsxs("div",{className:"space-y-6 animate-fade-in",children:[l.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"My Schools"}),l.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Manage your school partnerships and product access"})]}),l.jsxs(xe,{onClick:f,children:[l.jsx(_n,{className:"h-4 w-4"}),"Request School Access"]})]}),l.jsx("div",{className:"flex border-b border-slate-200",children:p.map(v=>l.jsxs("button",{onClick:()=>n(v.id),className:be("flex items-center gap-2 px-6 py-3 text-sm font-medium border-b-2 transition-colors",e===v.id?"border-blue-600 text-blue-600":"border-transparent text-slate-600 hover:text-slate-900"),children:[v.label,l.jsx("span",{className:be("rounded-full px-2 py-0.5 text-xs font-semibold",e===v.id?"bg-blue-100 text-blue-700":"bg-slate-100 text-slate-600"),children:v.count})]},v.id))}),y&&l.jsxs("div",{className:"flex items-center justify-between gap-3 rounded-lg border border-red-200 bg-red-50 p-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(sr,{className:"h-5 w-5 flex-shrink-0 text-red-500"}),l.jsx("p",{className:"text-sm text-red-700",children:y})]}),l.jsxs("button",{onClick:()=>u(e),className:"flex items-center gap-1.5 rounded-lg px-3 py-1.5 text-sm font-medium text-red-700 hover:bg-red-100 transition-colors",children:[l.jsx(Bo,{className:"h-3.5 w-3.5"}),"Retry"]})]}),x&&l.jsxs("div",{className:"flex flex-col items-center justify-center py-16",children:[l.jsx(At,{className:"h-8 w-8 animate-spin text-blue-500"}),l.jsxs("p",{className:"mt-3 text-sm text-slate-500",children:["Loading ",e," schools"]})]}),!x&&!y&&m.length>0&&l.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:m.map(v=>l.jsx(jB,{entry:v,onManageProducts:()=>t(`/dashboard/inventory/schools/${v.schoolId}`,{state:{allowedTypes:v.productType||[]}}),onRetry:()=>{f()}},v.schoolId))}),!x&&!y&&m.length===0&&l.jsxs("div",{className:"py-16 text-center",children:[l.jsx("div",{className:"mx-auto mb-4 h-32 w-32 rounded-full bg-slate-100 flex items-center justify-center",children:l.jsx(pn,{className:"h-12 w-12 text-slate-300"})}),l.jsxs("p",{className:"text-lg font-medium text-slate-600",children:["No ",e," school requests"]}),l.jsx("p",{className:"mt-2 text-sm text-slate-500",children:e==="approved"?"Request access to schools to start selling school-specific products":e==="pending"?"You don't have any pending requests":"No rejected requests"}),e==="approved"&&l.jsxs(xe,{className:"mt-4",onClick:f,children:[l.jsx(_n,{className:"h-4 w-4"}),"Request School Access"]})]}),l.jsx(zN,{onSuccess:()=>{u("pending")}})]})}const Bm=[{id:"all",label:"All",icon:""},{id:"bookset",label:"Bookset",icon:""},{id:"school",label:"School",icon:""},{id:"stationary",label:"Stationery",icon:""},{id:"uniform",label:"Uniforms",icon:""},{id:"general",label:"General",icon:""}];function CB(){var D,G,Ne,Ae,Ue,Ve;const{schoolId:t}=kk(),e=Dn(),n=Pr(),[r,s]=E.useState("my_products"),[i,o]=E.useState("all"),[c,u]=E.useState("grid"),[f,p]=E.useState(""),{schoolDetail:m,isLoadingSchoolDetail:x,schoolDetailError:y,schoolProducts:v,schoolAnalytics:k,fetchAllSchoolData:w,clearSchoolDetail:j,connectedSchools:C}=Gf(),T=E.useMemo(()=>{var Ce,Fe,se;if((Fe=(Ce=n.state)==null?void 0:Ce.allowedTypes)!=null&&Fe.length)return n.state.allowedTypes;const Z=C.approved.find(Ye=>Ye.schoolId===t);return(se=Z==null?void 0:Z.productType)!=null&&se.length?Z.productType:null},[n.state,C.approved,t]),A=E.useMemo(()=>T?[Bm[0],...Bm.filter(Z=>Z.id!=="all"&&T.includes(Z.id))]:Bm,[T]);E.useEffect(()=>(t&&w(t),()=>{j()}),[t]),E.useEffect(()=>{i!=="all"&&T&&!T.includes(i)&&o("all")},[T,i]);const M=()=>{t&&w(t)},P=m||{},F=x&&!m,ne=y&&!m,X=[[(D=P.address)==null?void 0:D.line1,(G=P.address)==null?void 0:G.line2].filter(Boolean).join(", "),P.city,P.state,P.postal_code||P.postalCode].filter(Boolean).join(", "),le=((Ne=P.contact)==null?void 0:Ne.phone)||P.phone,z=((Ae=P.contact)==null?void 0:Ae.email)||P.email,te=((Ue=P.contact)==null?void 0:Ue.website)||P.website,ie=k||{},oe=ie.totalProducts??v.length,W=ie.totalStudents??0,q=ie.totalOrders??0,J=E.useMemo(()=>{let Z=v;if(T&&(Z=Z.filter(Ce=>T.includes(Ce.product_type))),i!=="all"&&(Z=Z.filter(Ce=>Ce.product_type===i)),f.trim()){const Ce=f.toLowerCase();Z=Z.filter(Fe=>(Fe.title||"").toLowerCase().includes(Ce)||(Fe.sku||"").toLowerCase().includes(Ce)||(Fe.description||"").toLowerCase().includes(Ce))}return Z},[v,i,f,T]),fe=E.useMemo(()=>{let Z=v.filter(Ce=>!Ce.is_active&&!Ce.is_deleted);return T&&(Z=Z.filter(Ce=>T.includes(Ce.product_type))),Z},[v,T]),ce=[{id:"my_products",label:"Listed Products",count:J.length},{id:"track_approvals",label:"Track Approvals",count:fe.length},{id:"analytics",label:"Analytics",count:0}];return F?l.jsxs("div",{className:"flex flex-col items-center justify-center py-32",children:[l.jsx(At,{className:"h-10 w-10 animate-spin text-blue-500"}),l.jsx("p",{className:"mt-4 text-sm text-slate-500",children:"Loading school details"})]}):ne?l.jsxs("div",{className:"flex flex-col items-center justify-center py-32",children:[l.jsx(sr,{className:"h-12 w-12 text-red-400 mb-4"}),l.jsx("p",{className:"text-lg font-medium text-slate-700",children:"Failed to load school"}),l.jsx("p",{className:"text-sm text-slate-500 mt-1 mb-6 max-w-sm text-center",children:y}),l.jsxs("div",{className:"flex gap-3",children:[l.jsxs(xe,{variant:"outline",onClick:()=>e("/dashboard/inventory/schools"),children:[l.jsx(us,{className:"h-4 w-4"}),"Back to Schools"]}),l.jsxs(xe,{onClick:M,children:[l.jsx(Bo,{className:"h-4 w-4"}),"Retry"]})]})]}):l.jsxs("div",{className:"space-y-6 animate-fade-in",children:[l.jsxs("button",{onClick:()=>e("/dashboard/inventory/schools"),className:"flex items-center gap-2 text-sm font-medium text-slate-600 hover:text-slate-900 transition-colors",children:[l.jsx(us,{className:"h-4 w-4"}),"Back to My Schools"]}),l.jsx("div",{className:"rounded-xl border border-slate-200 bg-gradient-to-r from-violet-600 to-blue-600 p-8 text-white shadow-lg",children:l.jsxs("div",{className:"flex flex-col gap-6 lg:flex-row lg:items-center lg:justify-between",children:[l.jsxs("div",{className:"flex items-start gap-4",children:[P.image?l.jsx("img",{src:P.image,alt:P.name,className:"h-16 w-16 rounded-xl object-cover flex-shrink-0 border-2 border-white/30"}):l.jsx("div",{className:"flex h-16 w-16 flex-shrink-0 items-center justify-center rounded-xl bg-white/20 backdrop-blur-sm",children:l.jsx(pn,{className:"h-8 w-8 text-white"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold",children:P.name||"School"}),X&&l.jsxs("div",{className:"flex items-center gap-2 mt-2 text-white/80",children:[l.jsx(Rn,{className:"h-4 w-4 flex-shrink-0"}),l.jsx("p",{className:"text-sm",children:X})]}),P.board&&l.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[l.jsxs("span",{className:"rounded-full bg-white/20 px-3 py-1 text-xs font-medium text-white backdrop-blur-sm",children:[P.board," Board"]}),P.type&&l.jsx("span",{className:"rounded-full bg-white/20 px-3 py-1 text-xs font-medium text-white backdrop-blur-sm capitalize",children:P.type})]}),l.jsxs("div",{className:"flex flex-wrap gap-4 mt-3",children:[le&&l.jsxs("span",{className:"flex items-center gap-1.5 text-xs text-white/70",children:[l.jsx(Gr,{className:"w-3.5 h-3.5"})," ",le]}),z&&l.jsxs("span",{className:"flex items-center gap-1.5 text-xs text-white/70",children:[l.jsx(mr,{className:"w-3.5 h-3.5"})," ",z]}),te&&l.jsxs("a",{href:te,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1.5 text-xs text-white/70 hover:text-white transition-colors",children:[l.jsx(Ma,{className:"w-3.5 h-3.5"})," Website"]})]})]})]}),l.jsx("div",{className:"flex gap-4 flex-wrap",children:l.jsxs("div",{className:"rounded-xl bg-white/15 p-4 backdrop-blur-sm text-center min-w-[100px]",children:[l.jsx(_t,{className:"h-5 w-5 mx-auto mb-1 text-white/70"}),l.jsx("p",{className:"text-3xl font-bold",children:oe}),l.jsx("p",{className:"text-xs text-white/80 mt-1",children:"Products"})]})})]})}),l.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:A.map(Z=>l.jsxs("button",{onClick:()=>o(Z.id),className:be("flex flex-shrink-0 items-center gap-2 rounded-lg px-4 py-2.5 text-sm font-medium transition-all",i===Z.id?"bg-blue-600 text-white shadow-sm":"border border-slate-200 bg-white text-slate-600 hover:border-slate-300 hover:bg-slate-50"),children:[l.jsx("span",{children:Z.icon}),Z.label]},Z.id))}),l.jsx("div",{className:"flex border-b border-slate-200",children:ce.map(Z=>l.jsxs("button",{onClick:()=>s(Z.id),className:be("flex items-center gap-2 px-5 py-3 text-sm font-medium border-b-2 transition-colors",r===Z.id?"border-blue-600 text-blue-600":"border-transparent text-slate-600 hover:text-slate-900"),children:[Z.label,Z.count>0&&l.jsx("span",{className:be("rounded-full px-2 py-0.5 text-xs font-semibold",r===Z.id?"bg-blue-100 text-blue-700":"bg-slate-100 text-slate-600"),children:Z.count})]},Z.id))}),r==="my_products"&&l.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[l.jsx(Pe,{placeholder:"Search products...",value:f,onChange:Z=>p(Z.target.value),icon:l.jsx(Gs,{className:"h-4 w-4"}),className:"w-full sm:w-64"}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("div",{className:"flex rounded-lg border border-slate-200 overflow-hidden",children:[l.jsx("button",{onClick:()=>u("grid"),className:be("p-2 transition-colors",c==="grid"?"bg-blue-600 text-white":"bg-white text-slate-400 hover:bg-slate-50"),children:l.jsx(h0,{className:"h-4 w-4"})}),l.jsx("button",{onClick:()=>u("list"),className:be("p-2 transition-colors",c==="list"?"bg-blue-600 text-white":"bg-white text-slate-400 hover:bg-slate-50"),children:l.jsx(m0,{className:"h-4 w-4"})})]}),l.jsxs(xe,{onClick:()=>e(`/dashboard/inventory/general/add?schoolId=${t}`),children:[l.jsx(_n,{className:"h-4 w-4"}),"Add Product"]})]})]}),r==="my_products"&&l.jsxs(l.Fragment,{children:[J.length>0&&l.jsx(l.Fragment,{children:c==="grid"?l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:J.map(Z=>{var Ce,Fe;return l.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white shadow-sm overflow-hidden transition-all hover:shadow-md hover:-translate-y-0.5",children:[l.jsx("div",{className:"aspect-square bg-slate-100 flex items-center justify-center p-6 overflow-hidden",children:Z.primaryImage||Z.image_url||Z.images&&((Ce=Z.images[0])!=null&&Ce.url)?l.jsx("img",{src:Z.primaryImage||Z.image_url||((Fe=Z.images[0])==null?void 0:Fe.url),alt:Z.title||Z.name,className:"w-full h-full object-contain"}):l.jsx(_t,{className:"h-16 w-16 text-slate-300"})}),l.jsxs("div",{className:"p-4",children:[l.jsxs("div",{className:"flex items-start justify-between gap-2",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-slate-900 line-clamp-2 text-sm",children:Z.title||Z.name}),l.jsx("p",{className:"text-xs text-slate-500 mt-1",children:Z.sku||""})]}),Z.is_active!==void 0&&l.jsx(yt,{variant:Z.is_active?"live":"rejected",dot:!0,children:Z.is_active?"Active":"Inactive"})]}),l.jsxs("div",{className:"flex items-center justify-between mt-3",children:[l.jsxs("p",{className:"text-lg font-bold text-slate-900",children:["",Z.base_price??""]}),Z.product_type&&l.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-100 text-slate-500 capitalize",children:Z.product_type})]}),Z.schoolInfo&&l.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[l.jsxs("p",{className:"text-xs text-blue-600 font-medium",children:["Grade: ",Z.schoolInfo.grade]}),Z.schoolInfo.mandatory&&l.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-amber-100 text-amber-700 font-medium",children:"Mandatory"})]}),l.jsxs("div",{className:"flex items-center gap-1 mt-3 pt-3 border-t border-slate-100",children:[l.jsx("button",{className:"flex-1 rounded-lg p-2 text-slate-400 hover:bg-slate-50 hover:text-slate-600 transition-colors",children:l.jsx(eg,{className:"h-4 w-4 mx-auto"})}),l.jsx("button",{className:"flex-1 rounded-lg p-2 text-slate-400 hover:bg-slate-50 hover:text-slate-600 transition-colors",children:l.jsx(Pu,{className:"h-4 w-4 mx-auto"})}),l.jsx("button",{className:"flex-1 rounded-lg p-2 text-slate-400 hover:bg-red-50 hover:text-red-600 transition-colors",children:l.jsx(qs,{className:"h-4 w-4 mx-auto"})})]})]})]},Z.id)})}):l.jsx("div",{className:"rounded-xl border border-slate-200 bg-white shadow-sm overflow-hidden",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b border-slate-200 bg-slate-50",children:[l.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-slate-900",children:"Product"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-slate-900",children:"Type"}),l.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-slate-900",children:"Price"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-slate-900",children:"Grade"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-slate-900",children:"Status"}),l.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-slate-900",children:"Actions"})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100",children:J.map(Z=>{var Ce,Fe,se,Ye;return l.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[l.jsx("td",{className:"px-6 py-4",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg bg-slate-100 overflow-hidden",children:Z.primaryImage||Z.image_url||Z.images&&((Ce=Z.images[0])!=null&&Ce.url)?l.jsx("img",{src:Z.primaryImage||Z.image_url||((Fe=Z.images[0])==null?void 0:Fe.url),alt:Z.title||Z.name,className:"w-full h-full object-cover"}):l.jsx(fs,{className:"h-5 w-5 text-slate-400"})}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-slate-900 text-sm",children:Z.title||Z.name}),l.jsx("p",{className:"text-xs text-slate-500",children:Z.sku||""})]})]})}),l.jsx("td",{className:"px-6 py-4",children:l.jsx(yt,{variant:"default",className:"capitalize",children:Z.product_type||""})}),l.jsxs("td",{className:"px-6 py-4 text-right font-semibold text-slate-900",children:["",Z.base_price??""]}),l.jsxs("td",{className:"px-6 py-4 text-sm text-slate-700",children:[((se=Z.schoolInfo)==null?void 0:se.grade)||"",((Ye=Z.schoolInfo)==null?void 0:Ye.mandatory)&&l.jsx("span",{className:"ml-1.5 text-xs px-1.5 py-0.5 rounded bg-amber-100 text-amber-700 font-medium",children:"Mandatory"})]}),l.jsx("td",{className:"px-6 py-4",children:Z.is_active!==void 0?l.jsx(yt,{variant:Z.is_active?"live":"rejected",dot:!0,children:Z.is_active?"Active":"Inactive"}):l.jsx("span",{className:"text-xs text-slate-400",children:""})}),l.jsx("td",{className:"px-6 py-4",children:l.jsxs("div",{className:"flex items-center justify-end gap-1",children:[l.jsx("button",{className:"rounded-lg p-2 text-slate-400 hover:bg-slate-100 hover:text-slate-600",children:l.jsx(eg,{className:"h-4 w-4"})}),l.jsx("button",{className:"rounded-lg p-2 text-slate-400 hover:bg-slate-100 hover:text-slate-600",children:l.jsx(Pu,{className:"h-4 w-4"})})]})})]},Z.id)})})]})})}),J.length===0&&l.jsxs("div",{className:"py-16 text-center",children:[l.jsx(_t,{className:"mx-auto mb-4 h-12 w-12 text-slate-300"}),l.jsx("p",{className:"text-lg font-medium text-slate-600",children:"No products found"}),l.jsx("p",{className:"mt-2 text-sm text-slate-500",children:f?"Try a different search or category":"No products have been added to this school yet"}),l.jsxs(xe,{className:"mt-4",onClick:()=>e(`/dashboard/inventory/general/add?schoolId=${t}`),children:[l.jsx(_n,{className:"h-4 w-4"}),"Add Product"]})]})]}),r==="track_approvals"&&l.jsx("div",{className:"space-y-4",children:fe.length>0?fe.map(Z=>{var Ce,Fe,se;return l.jsxs("div",{className:"flex items-center justify-between rounded-xl border border-slate-200 bg-white p-5 shadow-sm hover:shadow-md transition-shadow",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-slate-100 overflow-hidden flex-shrink-0",children:Z.primaryImage||Z.image_url||Z.images&&((Ce=Z.images[0])!=null&&Ce.url)?l.jsx("img",{src:Z.primaryImage||Z.image_url||((Fe=Z.images[0])==null?void 0:Fe.url),alt:Z.title,className:"w-full h-full object-cover"}):l.jsx(fs,{className:"h-6 w-6 text-slate-400"})}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-slate-900",children:Z.title||Z.name}),l.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[l.jsxs("p",{className:"text-sm text-slate-500",children:["SKU: ",Z.sku||""]}),l.jsx("span",{className:"text-slate-300",children:""}),l.jsxs("p",{className:"text-sm text-slate-500",children:["",Z.base_price??""]}),((se=Z.schoolInfo)==null?void 0:se.grade)&&l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"text-slate-300",children:""}),l.jsxs("p",{className:"text-sm text-slate-500",children:["Grade: ",Z.schoolInfo.grade]})]})]}),Z.created_at&&l.jsxs("p",{className:"text-xs text-slate-400 mt-1 flex items-center gap-1",children:[l.jsx(d0,{className:"w-3 h-3"}),"Submitted: ",new Date(Z.created_at).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})]})]})]}),l.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0",children:[l.jsx(yt,{variant:"pending",dot:!0,children:"Under Review"}),l.jsx(Ws,{className:"h-4 w-4 text-slate-400"})]})]},Z.id)}):l.jsxs("div",{className:"py-16 text-center",children:[l.jsx(un,{className:"mx-auto mb-4 h-12 w-12 text-emerald-300"}),l.jsx("p",{className:"text-lg font-medium text-slate-600",children:"All products are approved"}),l.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"No pending approval requests at the moment."})]})}),r==="analytics"&&l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[l.jsx(mu,{icon:l.jsx(_t,{className:"h-5 w-5 text-blue-500"}),label:"Total Products",value:oe,bg:"bg-blue-50"}),l.jsx(mu,{icon:l.jsx(w0,{className:"h-5 w-5 text-emerald-500"}),label:"Total Students",value:W,bg:"bg-emerald-50"}),l.jsx(mu,{icon:l.jsx(Ic,{className:"h-5 w-5 text-green-500"}),label:"Total Orders",value:q,bg:"bg-green-50"}),l.jsx(mu,{icon:l.jsx(b0,{className:"h-5 w-5 text-amber-500"}),label:"Partnerships",value:((Ve=P.partnerships)==null?void 0:Ve.length)??0,bg:"bg-amber-50"})]}),l.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-6 shadow-sm",children:[l.jsx("h3",{className:"text-sm font-semibold text-slate-900 mb-4",children:"School Information"}),l.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[l.jsx(Is,{label:"Board",value:P.board}),l.jsx(Is,{label:"Type",value:P.type,className:"capitalize"}),l.jsx(Is,{label:"City",value:P.city}),l.jsx(Is,{label:"State",value:P.state}),l.jsx(Is,{label:"Postal Code",value:P.postal_code||P.postalCode}),l.jsx(Is,{label:"Status",value:P.is_active?"Active":"Inactive"}),le&&l.jsx(Is,{label:"Phone",value:le}),z&&l.jsx(Is,{label:"Email",value:z}),te&&l.jsx(Is,{label:"Website",value:te,isLink:!0})]})]})]})]})}function mu({icon:t,label:e,value:n,bg:r}){return l.jsx("div",{className:"rounded-xl border border-slate-200 bg-white p-5 shadow-sm",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:be("flex h-10 w-10 items-center justify-center rounded-lg",r),children:t}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-slate-500",children:e}),l.jsx("p",{className:"text-xl font-bold text-slate-900",children:n})]})]})})}function Is({label:t,value:e,isLink:n=!1,className:r=""}){return e?l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-slate-500 mb-0.5",children:t}),n?l.jsx("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"text-sm font-medium text-blue-600 hover:underline truncate block",children:e}):l.jsx("p",{className:be("text-sm font-medium text-slate-900",r),children:e})]}):null}const Fi={getOrders:async(t,{page:e=1,limit:n=10,status:r="",search:s=""}={})=>{if(!t)throw new Error("Warehouse ID is required to fetch orders.");const i={page:e,limit:n};return r&&r!=="all"&&(i.status=r),s&&(i.search=s),(await $e.get(`/retailer/orders/warehouse/${t}`,{params:i})).data},getOrdersByStatus:async(t,{page:e=1,limit:n=10}={})=>{const r={page:e,limit:n};return(await $e.get(`/orders/admin/status/${t}`,{params:r})).data},getOrderById:async t=>(await $e.get(`/orders/${t}`)).data,updateOrderStatus:async(t,{status:e,note:n=""})=>(await $e.put(`/orders/${t}/status`,{status:e,note:n})).data,updateOrderItemStatus:async(t,e,{status:n,note:r=""})=>(await $e.put(`/orders/${t}/items/${e}/status`,{status:n,note:r})).data,getStatistics:async()=>(await $e.get("/orders/admin/statistics")).data,getUserById:async t=>(await $e.get(`/users/admin/${t}`)).data},EB=Ff((t,e)=>({orders:[],totalCount:0,statistics:null,page:1,limit:10,statusFilter:"all",searchQuery:"",isLoading:!1,isUpdatingStatus:!1,error:null,fetchOrders:async n=>{var o,c,u,f,p;if(!n){t({orders:[],totalCount:0,isLoading:!1});return}const{page:r,limit:s,searchQuery:i}=e();t({isLoading:!0,error:null});try{const m=await Fi.getOrders(n,{page:r,limit:s,search:i}),x=(m==null?void 0:m.data)||m,y=(x==null?void 0:x.orders)||(x==null?void 0:x.items)||x||[],v=(x==null?void 0:x.totalCount)??(x==null?void 0:x.total)??((o=x==null?void 0:x.pagination)==null?void 0:o.total)??y.length;t({orders:Array.isArray(y)?y:[],totalCount:v,isLoading:!1})}catch(m){const x=((u=(c=m.response)==null?void 0:c.data)==null?void 0:u.message)||((p=(f=m.response)==null?void 0:f.data)==null?void 0:p.error)||"Failed to fetch orders. Please try again.";t({error:x,isLoading:!1,orders:[]})}},updateOrderStatus:async(n,r,s="")=>{var i,o,c,u;t({isUpdatingStatus:!0,error:null});try{return await Fi.updateOrderStatus(n,{status:r,note:s}),t(f=>({orders:f.orders.map(p=>p.id===n?{...p,status:r,items:(p.items||[]).map(m=>({...m,status:r}))}:p),isUpdatingStatus:!1})),{success:!0}}catch(f){const p=((o=(i=f.response)==null?void 0:i.data)==null?void 0:o.message)||((u=(c=f.response)==null?void 0:c.data)==null?void 0:u.error)||"Failed to update order status.";return t({error:p,isUpdatingStatus:!1}),{success:!1,error:p}}},fetchStatistics:async()=>{try{const n=await Fi.getStatistics(),r=(n==null?void 0:n.data)||n;t({statistics:r})}catch{}},setStatusFilter:n=>{t({statusFilter:n,page:1})},setSearchQuery:n=>{t({searchQuery:n,page:1})},setPage:n=>{t({page:n})},setLimit:n=>{t({limit:n,page:1})},clearError:()=>{t({error:null})}})),TB=[{id:"all",label:"All Orders",icon:l.jsx(_t,{className:"h-5 w-5"}),color:"text-blue-600",bgColor:"bg-blue-50",borderColor:"border-blue-200"},{id:"initialized",label:"New",icon:l.jsx(d0,{className:"h-5 w-5"}),color:"text-amber-600",bgColor:"bg-amber-50",borderColor:"border-amber-200"},{id:"processed",label:"Processed",icon:l.jsx(un,{className:"h-5 w-5"}),color:"text-emerald-600",bgColor:"bg-emerald-50",borderColor:"border-emerald-200"},{id:"shipped",label:"Shipped",icon:l.jsx(lN,{className:"h-5 w-5"}),color:"text-violet-600",bgColor:"bg-violet-50",borderColor:"border-violet-200"}],ak={initialized:"New",processed:"Processed",shipped:"Shipped",out_for_delivery:"Out for Delivery",delivered:"Delivered",cancelled:"Cancelled",refunded:"Refunded"},AB={initialized:"initialized",processed:"processing",shipped:"shipped",out_for_delivery:"out_for_delivery",delivered:"delivered",cancelled:"cancelled",refunded:"refunded"};function Jg(t){if(t.orderNumber)return t.orderNumber;const e=t.id||"";return e.length<=12?e:`#${e.replace(/-/g,"").slice(-8).toUpperCase()}`}const gu=["initialized","processed","shipped","out_for_delivery","delivered","cancelled","refunded"];function co(t){const e=t.items||[];if(e.length===0)return t.status||"initialized";let n=gu.length;for(const r of e){const s=gu.indexOf(r.status);s!==-1&&s<n&&(n=s)}return n<gu.length?gu[n]:t.status||"initialized"}function MB(){const{orders:t,totalCount:e,isLoading:n,isUpdatingStatus:r,error:s,statusFilter:i,searchQuery:o,page:c,limit:u,fetchOrders:f,setStatusFilter:p,setSearchQuery:m,setPage:x,setLimit:y,updateOrderStatus:v,clearError:k}=EB(),{activeWarehouse:w}=Zr(),j=Dn(),[C,T]=E.useState([]),A=E.useRef(null),M=w==null?void 0:w.id;E.useEffect(()=>{f(M)},[c,u,M,f]);const P=E.useCallback(q=>{const J=q.target.value;m(J),A.current&&clearTimeout(A.current),A.current=setTimeout(()=>{f(M)},400)},[m,f,M]);E.useEffect(()=>()=>{A.current&&clearTimeout(A.current)},[]);const F=t.filter(q=>!["delivered","cancelled","refunded"].includes(co(q))),ne={all:F.length,initialized:t.filter(q=>co(q)==="initialized").length,processed:t.filter(q=>co(q)==="processed").length,shipped:t.filter(q=>co(q)==="shipped").length},O=i==="all"?F:t.filter(q=>co(q)===i),X=q=>{T(J=>J.includes(q)?J.filter(fe=>fe!==q):[...J,q])},le=()=>{T(C.length===O.length?[]:O.map(q=>q.id))},z=async q=>{(await v(q,"processed","Confirmed by retailer")).success&&f(M)},te=q=>{var D,G,Ne,Ae,Ue;const J=t.find(Ve=>Ve.id===q);if(!J)return;const fe=`
            <html><head><title>Label  ${Jg(J)}</title>
            <style>
                body { font-family: Arial, sans-serif; padding: 40px; }
                .label { border: 2px solid #000; padding: 24px; max-width: 400px; }
                .label h2 { margin: 0 0 12px; font-size: 18px; }
                .label p { margin: 4px 0; font-size: 14px; }
                .order-id { font-size: 16px; font-weight: bold; letter-spacing: 1px; }
                .divider { border-top: 1px dashed #999; margin: 12px 0; }
            </style></head><body><div class="label">
                <p class="order-id">Order: ${Jg(J)}</p>
                <div class="divider"></div>
                <h2>Ship To:</h2>
                <p><strong>${((D=J.shippingAddress)==null?void 0:D.recipientName)||J.contactEmail||"Customer"}</strong></p>
                <p>${((G=J.shippingAddress)==null?void 0:G.line1)||""}</p>
                <p>${((Ne=J.shippingAddress)==null?void 0:Ne.city)||""}, ${((Ae=J.shippingAddress)==null?void 0:Ae.state)||""}</p>
                <p>${((Ue=J.shippingAddress)==null?void 0:Ue.postalCode)||""}</p>
                ${J.contactPhone?`<p>Phone: ${J.contactPhone}</p>`:""}
                <div class="divider"></div>
                <p>Amount: ${Number(J.totalAmount||0).toLocaleString()}</p>
                <p>Payment: ${(J.paymentMethod||"N/A").toUpperCase()}</p>
            </div></body></html>`,ce=window.open("","_blank","width=500,height=600");ce&&(ce.document.write(fe),ce.document.close(),ce.focus(),ce.print())},ie=async()=>{for(const q of C){const J=t.find(fe=>fe.id===q);J&&co(J)==="initialized"&&await v(q,"processed","Bulk confirmed by retailer")}T([]),f(M)},oe=()=>{C.forEach(q=>te(q))},W=Math.ceil(e/u);return l.jsxs("div",{className:"space-y-6 animate-fade-in",children:[l.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Active Orders"}),l.jsxs("p",{className:"mt-1 text-sm text-slate-500",children:["Manage and track orders for"," ",l.jsx("span",{className:"font-medium text-slate-700",children:(w==null?void 0:w.name)||"your warehouse"})]})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsxs(xe,{variant:"outline",size:"sm",onClick:()=>f(M),disabled:n,children:[l.jsx(Bo,{className:be("h-4 w-4",n&&"animate-spin")}),"Refresh"]}),l.jsxs(xe,{variant:"outline",size:"sm",children:[l.jsx(u0,{className:"h-4 w-4"}),"Export"]})]})]}),s&&l.jsxs("div",{className:"flex items-center gap-3 rounded-lg border border-red-200 bg-red-50 px-4 py-3",children:[l.jsx(sr,{className:"h-5 w-5 text-red-500 shrink-0"}),l.jsx("p",{className:"text-sm text-red-700 flex-1",children:s}),l.jsx(xe,{variant:"ghost",size:"sm",onClick:k,className:"text-red-600 hover:text-red-700",children:"Dismiss"})]}),l.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:TB.map(q=>l.jsxs("button",{onClick:()=>p(q.id),className:be("relative flex items-center gap-4 rounded-xl border-2 p-4 text-left transition-all hover:shadow-md",i===q.id?`${q.bgColor} ${q.borderColor} shadow-md`:"bg-white border-slate-200"),children:[l.jsx("div",{className:be("flex h-12 w-12 items-center justify-center rounded-lg",i===q.id?q.bgColor:"bg-slate-100",i===q.id?q.color:"text-slate-400"),children:q.icon}),l.jsxs("div",{children:[l.jsx("span",{className:"text-2xl font-bold text-slate-900",children:n?"":ne[q.id]}),l.jsx("p",{className:be("text-sm font-medium",i===q.id?q.color:"text-slate-600"),children:q.label})]})]},q.id))}),l.jsx("div",{className:"flex-1 max-w-md",children:l.jsx(Pe,{placeholder:"Search by order ID or customer...",value:o,onChange:P,icon:l.jsx(Gs,{className:"h-5 w-5"})})}),C.length>0&&l.jsxs("div",{className:"flex items-center gap-4 rounded-lg border border-blue-200 bg-blue-50 px-4 py-3",children:[l.jsxs("span",{className:"text-sm font-medium text-blue-700",children:[C.length," selected"]}),l.jsxs(xe,{variant:"outline",size:"sm",onClick:ie,disabled:r,children:[l.jsx(K4,{className:"h-4 w-4"}),"Mark as Confirmed"]}),l.jsxs(xe,{variant:"outline",size:"sm",onClick:oe,children:[l.jsx(y0,{className:"h-4 w-4"}),"Print Labels"]})]}),l.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white shadow-sm overflow-hidden",children:[l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b border-slate-200 bg-slate-50",children:[l.jsx("th",{className:"px-6 py-4 text-left",children:l.jsx("input",{type:"checkbox",checked:C.length===O.length&&O.length>0,onChange:le,className:"h-4 w-4 rounded border-slate-300"})}),l.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-slate-900",children:"Order Details"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-slate-900",children:"Customer"}),l.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-slate-900",children:"Amount"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-slate-900",children:"Status"}),l.jsx("th",{className:"px-6 py-4 text-center text-sm font-semibold text-slate-900",children:"Actions"})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100",children:n?l.jsx("tr",{children:l.jsxs("td",{colSpan:6,className:"py-16 text-center",children:[l.jsx(At,{className:"mx-auto mb-3 h-8 w-8 text-blue-500 animate-spin"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Loading orders"})]})}):O.length===0?l.jsx("tr",{children:l.jsxs("td",{colSpan:6,className:"py-16 text-center",children:[l.jsx(_t,{className:"mx-auto mb-4 h-12 w-12 text-slate-300"}),l.jsx("p",{className:"text-lg font-medium text-slate-600",children:"No orders found"}),l.jsx("p",{className:"mt-1 text-sm text-slate-400",children:o?"Try adjusting your search query":"Orders will appear here once customers place them"})]})}):O.map(q=>l.jsx(RB,{order:q,isSelected:C.includes(q.id),onToggleSelect:()=>X(q.id),onConfirm:()=>z(q.id),onPrintLabel:()=>te(q.id),onViewOrder:()=>j(`/dashboard/orders/${q.id}`),isUpdating:r},q.id))})]})}),l.jsxs("div",{className:"flex items-center justify-between border-t border-slate-200 bg-slate-50 px-6 py-4",children:[l.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[l.jsxs("select",{className:"rounded border border-slate-300 bg-white px-2 py-1 text-sm",value:u,onChange:q=>y(Number(q.target.value)),children:[l.jsx("option",{value:10,children:"10"}),l.jsx("option",{value:25,children:"25"}),l.jsx("option",{value:50,children:"50"})]}),l.jsx("span",{children:"Items per page"})]}),l.jsxs("div",{className:"flex items-center gap-3 text-sm text-slate-600",children:[l.jsxs("span",{children:["Page ",c," of ",W||1,"  ",e," total"]}),l.jsxs("div",{className:"flex gap-1",children:[l.jsx(xe,{variant:"outline",size:"sm",disabled:c<=1,onClick:()=>x(c-1),children:"Prev"}),l.jsx(xe,{variant:"outline",size:"sm",disabled:c>=W,onClick:()=>x(c+1),children:"Next"})]})]})]})]})]})}function RB({order:t,isSelected:e,onToggleSelect:n,onConfirm:r,onPrintLabel:s,onViewOrder:i,isUpdating:o}){var k,w,j,C,T,A;const c=Jg(t),u=co(t),f=((k=t.items)==null?void 0:k.some(M=>{var P,F;return((P=M.productSnapshot)==null?void 0:P.productType)==="bookset"||((F=M.productSnapshot)==null?void 0:F.productType)==="uniform"}))||((C=(j=(w=t.metadata)==null?void 0:w.orderSummary)==null?void 0:j.items)==null?void 0:C.some(M=>{var P,F;return((P=M.productSnapshot)==null?void 0:P.productType)==="bookset"||((F=M.productSnapshot)==null?void 0:F.productType)==="uniform"})),p=((T=t.shippingAddress)==null?void 0:T.recipientName)||t.contactEmail||"Customer",m=((A=t.shippingAddress)==null?void 0:A.city)||"",x=Number(t.totalAmount||0),y=t.createdAt?new Date(t.createdAt).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"",v=M=>{M.target.closest('input[type="checkbox"]')||M.target.closest("button")||i()};return l.jsxs("tr",{className:be("transition-colors hover:bg-slate-50 cursor-pointer",e&&"bg-blue-50/50"),onClick:v,children:[l.jsx("td",{className:"px-6 py-4",children:l.jsx("input",{type:"checkbox",checked:e,onChange:n,className:"h-4 w-4 rounded border-slate-300"})}),l.jsx("td",{className:"px-6 py-4",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:be("flex h-10 w-10 items-center justify-center rounded-lg",f?"bg-violet-100":"bg-slate-100"),children:f?l.jsx(pn,{className:"h-5 w-5 text-violet-600"}):l.jsx(Ic,{className:"h-5 w-5 text-slate-400"})}),l.jsxs("div",{children:[l.jsx("p",{className:"font-mono text-sm font-semibold text-blue-600",title:t.id,children:c}),l.jsx("p",{className:"mt-0.5 text-xs text-slate-500",children:y})]})]})}),l.jsxs("td",{className:"px-6 py-4",children:[l.jsx("p",{className:"text-sm font-medium text-slate-900 truncate max-w-[180px]",children:p}),m&&l.jsxs("div",{className:"flex items-center gap-1 mt-1 text-xs text-slate-500",children:[l.jsx(Rn,{className:"h-3 w-3"}),m]})]}),l.jsxs("td",{className:"px-6 py-4 text-right font-bold text-slate-900",children:["",x.toLocaleString()]}),l.jsx("td",{className:"px-6 py-4",children:l.jsx(yt,{variant:AB[u]||"default",dot:!0,children:ak[u]||u})}),l.jsx("td",{className:"px-6 py-4",children:l.jsxs("div",{className:"flex items-center justify-center gap-2",children:[l.jsx(xe,{variant:"outline",size:"sm",onClick:s,title:"Print shipping label",className:"text-slate-600 hover:text-slate-900",children:l.jsx(y0,{className:"h-4 w-4"})}),l.jsx(xe,{variant:"outline",size:"sm",onClick:r,disabled:o||u!=="initialized",title:u!=="initialized"?`Already ${ak[u]||u}`:"Mark as Confirmed",className:be(u==="initialized"?"text-emerald-600 border-emerald-200 hover:bg-emerald-50 hover:text-emerald-700":"text-slate-400 cursor-not-allowed"),children:l.jsx(un,{className:"h-4 w-4"})})]})})]})}const lk={initialized:"New",processed:"Processed",shipped:"Shipped",out_for_delivery:"Out for Delivery",delivered:"Delivered",cancelled:"Cancelled",refunded:"Refunded"},OB={initialized:"initialized",processed:"processing",shipped:"shipped",out_for_delivery:"out_for_delivery",delivered:"delivered",cancelled:"cancelled",refunded:"refunded"},_B={pending:"pending",paid:"success",failed:"rejected",refunded:"refunded"},Fm=["initialized","processed","shipped","out_for_delivery","delivered"],xu=["initialized","processed","shipped","out_for_delivery","delivered","cancelled","refunded"];function ck(t){const e=t.items||[];if(e.length===0)return t.status||"initialized";let n=xu.length;for(const r of e){const s=xu.indexOf(r.status);s!==-1&&s<n&&(n=s)}return n<xu.length?xu[n]:t.status||"initialized"}function $m(t){if(t.orderNumber)return t.orderNumber;const e=t.id||"";return e.length<=12?e:`#${e.replace(/-/g,"").slice(-8).toUpperCase()}`}function Vm(t){return t?new Date(t).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):""}function Tr(t){return`${Number(t||0).toLocaleString("en-IN")}`}function PB(){var F,ne,O,X,le;const{orderId:t}=kk(),e=Dn(),[n,r]=E.useState(null),[s,i]=E.useState(null),[o,c]=E.useState(!0),[u,f]=E.useState(!1),[p,m]=E.useState(!1),[x,y]=E.useState(null),v=E.useCallback(async()=>{var z,te,ie,oe;c(!0),y(null);try{const W=await Fi.getOrderById(t),q=(W==null?void 0:W.data)||W;if(r(q),q!=null&&q.userId){f(!0);try{const J=await Fi.getUserById(q.userId),fe=(J==null?void 0:J.data)||J;i((fe==null?void 0:fe.user)||fe)}catch{i(null)}f(!1)}}catch(W){const q=((te=(z=W.response)==null?void 0:z.data)==null?void 0:te.message)||((oe=(ie=W.response)==null?void 0:ie.data)==null?void 0:oe.error)||"Failed to load order details.";y(q)}finally{c(!1)}},[t]);E.useEffect(()=>{v()},[v]);const k=async()=>{var z,te;if(!(!n||ck(n)!=="initialized")){m(!0);try{await Fi.updateOrderStatus(n.id,{status:"processed",note:"Confirmed by retailer"}),r(ie=>({...ie,status:"processed",items:(ie.items||[]).map(oe=>({...oe,status:"processed"}))}))}catch(ie){y(((te=(z=ie.response)==null?void 0:z.data)==null?void 0:te.message)||"Failed to update status.")}finally{m(!1)}}},w=()=>{if(!n)return;const z=n.shippingAddress||{},te=`
            <html><head><title>Label  ${$m(n)}</title>
            <style>
                body{font-family:Arial,sans-serif;padding:40px}
                .label{border:2px solid #000;padding:24px;max-width:400px}
                .label h2{margin:0 0 12px;font-size:18px}
                .label p{margin:4px 0;font-size:14px}
                .order-id{font-size:16px;font-weight:bold;letter-spacing:1px}
                .divider{border-top:1px dashed #999;margin:12px 0}
            </style></head><body><div class="label">
                <p class="order-id">Order: ${$m(n)}</p>
                <div class="divider"></div>
                <h2>Ship To:</h2>
                <p><strong>${z.recipientName||n.contactEmail||"Customer"}</strong></p>
                <p>${z.line1||""}</p>
                ${z.line2?`<p>${z.line2}</p>`:""}
                <p>${z.city||""}, ${z.state||""} ${z.postalCode||""}</p>
                ${n.contactPhone?`<p>Phone: ${n.contactPhone}</p>`:""}
                <div class="divider"></div>
                <p>Amount: ${Tr(n.totalAmount)}</p>
                <p>Payment: ${(n.paymentMethod||"N/A").toUpperCase()}</p>
            </div></body></html>`,ie=window.open("","_blank","width=500,height=600");ie&&(ie.document.write(te),ie.document.close(),ie.focus(),ie.print())};if(o)return l.jsxs("div",{className:"flex items-center justify-center py-32",children:[l.jsx(At,{className:"h-8 w-8 text-blue-500 animate-spin"}),l.jsx("span",{className:"ml-3 text-slate-500",children:"Loading order details"})]});if(x&&!n)return l.jsxs("div",{className:"space-y-6 animate-fade-in",children:[l.jsxs(xe,{variant:"ghost",size:"sm",onClick:()=>e(-1),children:[l.jsx(us,{className:"h-4 w-4"})," Back to Orders"]}),l.jsxs("div",{className:"flex flex-col items-center justify-center py-24 text-center",children:[l.jsx(sr,{className:"h-12 w-12 text-red-400 mb-4"}),l.jsx("p",{className:"text-lg font-medium text-slate-700",children:x}),l.jsxs(xe,{variant:"outline",size:"sm",className:"mt-4",onClick:v,children:[l.jsx(Bo,{className:"h-4 w-4"})," Retry"]})]})]});if(!n)return null;const j=ck(n),C=n.shippingAddress||{},T=n.billingAddress||{},A=((F=n.metadata)==null?void 0:F.orderSummary)||{},M=n.items||[],P=Fm.indexOf(j);return l.jsxs("div",{className:"space-y-6 animate-fade-in",children:[l.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(xe,{variant:"ghost",size:"sm",onClick:()=>e(-1),children:l.jsx(us,{className:"h-4 w-4"})}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:$m(n)}),l.jsx(yt,{variant:OB[j]||"default",dot:!0,children:lk[j]||j})]}),l.jsxs("p",{className:"mt-0.5 text-sm text-slate-500",children:["Placed on ",Vm(n.createdAt)]})]})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsxs(xe,{variant:"outline",size:"sm",onClick:w,children:[l.jsx(y0,{className:"h-4 w-4"})," Print Label"]}),j==="initialized"&&l.jsxs(xe,{variant:"success",size:"sm",onClick:k,loading:p,children:[l.jsx(un,{className:"h-4 w-4"})," Confirm Order"]})]})]}),x&&l.jsxs("div",{className:"flex items-center gap-3 rounded-lg border border-red-200 bg-red-50 px-4 py-3",children:[l.jsx(sr,{className:"h-5 w-5 text-red-500 shrink-0"}),l.jsx("p",{className:"text-sm text-red-700 flex-1",children:x})]}),l.jsx($n,{children:l.jsxs(Vn,{className:"pt-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:Fm.map((z,te)=>{const ie=P>=te,oe=P===te;return l.jsxs(dt.Fragment,{children:[l.jsxs("div",{className:"flex flex-col items-center gap-1.5",children:[l.jsx("div",{className:be("flex h-9 w-9 items-center justify-center rounded-full border-2 transition-all",ie?"border-emerald-500 bg-emerald-500 text-white":"border-slate-300 bg-white text-slate-400",oe&&"ring-4 ring-emerald-100"),children:ie?l.jsx(un,{className:"h-4 w-4"}):l.jsx("span",{className:"text-xs font-bold",children:te+1})}),l.jsx("span",{className:be("text-xs font-medium text-center",ie?"text-emerald-700":"text-slate-400"),children:lk[z]})]}),te<Fm.length-1&&l.jsx("div",{className:be("flex-1 h-0.5 mx-2",P>te?"bg-emerald-500":"bg-slate-200")})]},z)})}),["cancelled","refunded"].includes(j)&&l.jsxs("div",{className:"mt-4 flex items-center gap-2 rounded-lg bg-red-50 border border-red-200 px-4 py-2",children:[l.jsx(sr,{className:"h-4 w-4 text-red-500"}),l.jsxs("span",{className:"text-sm font-medium text-red-700",children:["This order has been ",j,"."]})]})]})}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[l.jsxs($n,{children:[l.jsx(dr,{children:l.jsxs(ur,{className:"flex items-center gap-2",children:[l.jsx(_t,{className:"h-5 w-5 text-blue-600"}),"Order Items (",M.length,")"]})}),l.jsxs(Vn,{children:[l.jsx("div",{className:"divide-y divide-slate-100",children:M.map(z=>{var q,J,fe,ce,D,G;const te=z.productSnapshot||{},oe=((fe=(J=(q=z.variant)==null?void 0:q.options)==null?void 0:J.find(Ne=>Ne.imageUrl))==null?void 0:fe.imageUrl)||te.image||te.image_url,W=te.productType==="bookset";return l.jsxs("div",{className:"flex gap-4 py-4 first:pt-0 last:pb-0",children:[l.jsx("div",{className:be("h-16 w-16 shrink-0 rounded-lg flex items-center justify-center overflow-hidden",oe?"bg-slate-50":W?"bg-violet-50":"bg-slate-100"),children:oe?l.jsx("img",{src:oe,alt:z.title,className:"h-full w-full object-cover rounded-lg",onError:Ne=>{Ne.target.style.display="none"}}):W?l.jsx(pn,{className:"h-7 w-7 text-violet-500"}):l.jsx(Ic,{className:"h-7 w-7 text-slate-400"})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"font-medium text-slate-900 truncate",children:z.title||te.title||"Product"}),((D=(ce=z.variant)==null?void 0:ce.options)==null?void 0:D.length)>0&&l.jsx("div",{className:"mt-1.5 flex flex-wrap gap-1.5",children:z.variant.options.sort((Ne,Ae)=>{var Ue,Ve;return(((Ue=Ne.attribute)==null?void 0:Ue.position)||0)-(((Ve=Ae.attribute)==null?void 0:Ve.position)||0)}).map(Ne=>{var Ae;return l.jsxs("span",{className:"inline-flex items-center gap-1 rounded-md bg-slate-100 px-2 py-0.5 text-xs text-slate-700",children:[Ne.imageUrl&&l.jsx("img",{src:Ne.imageUrl,alt:Ne.value,className:"h-3.5 w-3.5 rounded-full object-cover ring-1 ring-slate-200"}),l.jsxs("span",{className:"font-medium capitalize",children:[((Ae=Ne.attribute)==null?void 0:Ae.name)||"Option",":"]}),l.jsx("span",{className:"capitalize",children:Ne.value})]},Ne.id)})}),l.jsxs("div",{className:"mt-1 flex flex-wrap items-center gap-x-4 gap-y-1 text-xs text-slate-500",children:[z.sku&&l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(sN,{className:"h-3 w-3"})," ",z.sku]}),l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(W4,{className:"h-3 w-3"})," Qty: ",z.quantity]}),((G=z.variant)==null?void 0:G.compareAtPrice)>z.unitPrice&&l.jsx("span",{className:"flex items-center gap-1 text-emerald-600",children:l.jsx("span",{className:"line-through text-slate-400",children:Tr(z.variant.compareAtPrice)})}),te.productType&&l.jsx(yt,{variant:W?"info":"default",className:"text-[10px]",children:te.productType})]})]}),l.jsxs("div",{className:"text-right shrink-0",children:[l.jsx("p",{className:"font-bold text-slate-900",children:Tr(z.totalPrice)}),l.jsxs("p",{className:"text-xs text-slate-500 mt-0.5",children:[Tr(z.unitPrice),"  ",z.quantity]})]})]},z.id)})}),l.jsxs("div",{className:"mt-5 border-t border-slate-200 pt-4 space-y-2",children:[l.jsx(Vl,{label:"Subtotal",value:Tr(A.subtotal||n.totalAmount)}),A.discount>0&&l.jsx(Vl,{label:"Discount",value:`-${Tr(A.discount)}`,className:"text-emerald-600"}),A.deliveryFee>0&&l.jsx(Vl,{label:"Delivery Fee",value:Tr(A.deliveryFee)}),A.platformFee>0&&l.jsx(Vl,{label:"Platform Fee",value:Tr(A.platformFee)}),A.tax>0&&l.jsx(Vl,{label:"Tax",value:Tr(A.tax)}),l.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-slate-200",children:[l.jsx("span",{className:"text-base font-bold text-slate-900",children:"Total"}),l.jsx("span",{className:"text-base font-bold text-slate-900",children:Tr(n.totalAmount)})]}),A.savings>0&&l.jsxs("p",{className:"text-xs text-emerald-600 text-right",children:["You saved ",Tr(A.savings)," on this order"]})]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsx(dk,{title:"Shipping Address",address:C}),l.jsx(dk,{title:"Billing Address",address:T})]})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs($n,{children:[l.jsx(dr,{children:l.jsxs(ur,{className:"flex items-center gap-2",children:[l.jsx(Na,{className:"h-5 w-5 text-blue-600"}),"Customer"]})}),l.jsx(Vn,{children:u?l.jsx("div",{className:"flex items-center justify-center py-6",children:l.jsx(At,{className:"h-5 w-5 text-slate-400 animate-spin"})}):l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-blue-100 text-blue-600 font-bold text-sm shrink-0",children:((s==null?void 0:s.full_name)||((ne=n.shippingAddress)==null?void 0:ne.recipientName)||"C").charAt(0).toUpperCase()}),l.jsxs("div",{className:"min-w-0",children:[l.jsx("p",{className:"font-semibold text-slate-900 truncate",children:(s==null?void 0:s.full_name)||((O=n.shippingAddress)==null?void 0:O.recipientName)||""}),l.jsx("p",{className:"text-xs text-slate-500",children:s!=null&&s.role?s.role.charAt(0).toUpperCase()+s.role.slice(1):"Customer"})]})]}),l.jsxs("div",{className:"space-y-2.5",children:[l.jsx(yu,{icon:l.jsx(mr,{className:"h-4 w-4"}),label:"Email",value:(s==null?void 0:s.email)||n.contactEmail||""}),l.jsx(yu,{icon:l.jsx(Gr,{className:"h-4 w-4"}),label:"Phone",value:(s==null?void 0:s.phone)||n.contactPhone||((X=n.shippingAddress)==null?void 0:X.phone)||""}),((s==null?void 0:s.city)||(s==null?void 0:s.state))&&l.jsx(yu,{icon:l.jsx(Rn,{className:"h-4 w-4"}),label:"Location",value:[s.city,s.state].filter(Boolean).join(", ")}),(s==null?void 0:s.created_at)&&l.jsx(yu,{icon:l.jsx(hc,{className:"h-4 w-4"}),label:"Member since",value:new Date(s.created_at).toLocaleDateString("en-IN",{month:"short",year:"numeric"})})]})]})})]}),l.jsxs($n,{children:[l.jsx(dr,{children:l.jsxs(ur,{className:"flex items-center gap-2",children:[l.jsx(rN,{className:"h-5 w-5 text-blue-600"}),"Payment"]})}),l.jsx(Vn,{children:l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-sm text-slate-500",children:"Method"}),l.jsx("span",{className:"text-sm font-medium text-slate-900 uppercase",children:n.paymentMethod||""})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-sm text-slate-500",children:"Status"}),l.jsx(yt,{variant:_B[n.paymentStatus]||"default",dot:!0,children:(n.paymentStatus||"pending").charAt(0).toUpperCase()+(n.paymentStatus||"pending").slice(1)})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-sm text-slate-500",children:"Currency"}),l.jsx("span",{className:"text-sm font-medium text-slate-900",children:n.currency||"INR"})]}),l.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-slate-100",children:[l.jsx("span",{className:"text-sm font-semibold text-slate-700",children:"Amount"}),l.jsx("span",{className:"text-lg font-bold text-slate-900",children:Tr(n.totalAmount)})]})]})})]}),l.jsxs($n,{children:[l.jsx(dr,{children:l.jsxs(ur,{className:"flex items-center gap-2",children:[l.jsx(f0,{className:"h-5 w-5 text-blue-600"}),"Details"]})}),l.jsx(Vn,{children:l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-sm text-slate-500",children:"Order ID"}),l.jsx("span",{className:"text-xs font-mono text-slate-600 max-w-[180px] truncate",title:n.id,children:n.id})]}),n.orderNumber&&l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-sm text-slate-500",children:"Order Number"}),l.jsx("span",{className:"text-sm font-medium text-slate-900",children:n.orderNumber})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-sm text-slate-500",children:"Placed"}),l.jsx("span",{className:"text-sm text-slate-700",children:Vm(n.createdAt)})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-sm text-slate-500",children:"Updated"}),l.jsx("span",{className:"text-sm text-slate-700",children:Vm(n.updatedAt)})]}),((le=n.metadata)==null?void 0:le.source)&&l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-sm text-slate-500",children:"Source"}),l.jsx(yt,{variant:"default",children:n.metadata.source})]}),n.warehouseId&&l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-sm text-slate-500",children:"Warehouse"}),l.jsx("span",{className:"text-xs font-mono text-slate-600 max-w-[180px] truncate",title:n.warehouseId,children:n.warehouseId})]})]})})]})]})]})]})}function Vl({label:t,value:e,className:n}){return l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-sm text-slate-500",children:t}),l.jsx("span",{className:be("text-sm font-medium text-slate-700",n),children:e})]})}function yu({icon:t,label:e,value:n}){return l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"mt-0.5 text-slate-400 shrink-0",children:t}),l.jsxs("div",{className:"min-w-0",children:[l.jsx("p",{className:"text-xs text-slate-400",children:e}),l.jsx("p",{className:"text-sm text-slate-700 break-all",children:n})]})]})}function dk({title:t,address:e}){return!e||!e.line1?l.jsxs($n,{children:[l.jsx(dr,{children:l.jsxs(ur,{className:"flex items-center gap-2 text-base",children:[l.jsx(Rn,{className:"h-4 w-4 text-blue-600"}),t]})}),l.jsx(Vn,{children:l.jsx("p",{className:"text-sm text-slate-400 italic",children:"Not provided"})})]}):l.jsxs($n,{children:[l.jsx(dr,{children:l.jsxs(ur,{className:"flex items-center gap-2 text-base",children:[l.jsx(Rn,{className:"h-4 w-4 text-blue-600"}),t]})}),l.jsx(Vn,{children:l.jsxs("div",{className:"space-y-1 text-sm text-slate-700",children:[e.recipientName&&l.jsx("p",{className:"font-semibold text-slate-900",children:e.recipientName}),l.jsx("p",{children:e.line1}),e.line2&&l.jsx("p",{children:e.line2}),l.jsx("p",{children:[e.city,e.state].filter(Boolean).join(", ")}),e.postalCode&&l.jsxs("p",{children:["PIN: ",e.postalCode]}),e.country&&l.jsx("p",{children:e.country}),e.phone&&l.jsxs("p",{className:"flex items-center gap-1.5 pt-1 text-slate-500",children:[l.jsx(Gr,{className:"h-3.5 w-3.5"})," ",e.phone]})]})})]})}function IB(t){if(t.orderNumber)return t.orderNumber;const e=t.id||"";return e.length<=12?e:`#${e.replace(/-/g,"").slice(-8).toUpperCase()}`}function uk(t){return`${Number(t||0).toLocaleString("en-IN")}`}function fk(t){return t?new Date(t).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):""}function DB(){const{activeWarehouse:t}=Zr(),e=Dn(),n=t==null?void 0:t.id,[r,s]=E.useState([]),[i,o]=E.useState(0),[c,u]=E.useState(!1),[f,p]=E.useState(null),[m,x]=E.useState(""),[y,v]=E.useState(1),[k,w]=E.useState(10),j=E.useRef(null),C=E.useCallback(async()=>{var P,F,ne,O,X;if(!n){s([]),o(0);return}u(!0),p(null);try{const le=await Fi.getOrders(n,{page:y,limit:k,status:"cancelled",search:m}),z=(le==null?void 0:le.data)||le,te=(z==null?void 0:z.orders)||(z==null?void 0:z.items)||z||[],ie=(z==null?void 0:z.totalCount)??(z==null?void 0:z.total)??((P=z==null?void 0:z.pagination)==null?void 0:P.total)??te.length;s(Array.isArray(te)?te:[]),o(ie)}catch(le){const z=((ne=(F=le.response)==null?void 0:F.data)==null?void 0:ne.message)||((X=(O=le.response)==null?void 0:O.data)==null?void 0:X.error)||"Failed to fetch cancelled orders.";p(z),s([])}finally{u(!1)}},[n,y,k,m]);E.useEffect(()=>{C()},[C]);const T=E.useCallback(P=>{const F=P.target.value;j.current&&clearTimeout(j.current),j.current=setTimeout(()=>{x(F),v(1)},400)},[]);E.useEffect(()=>()=>{j.current&&clearTimeout(j.current)},[]);const A=r.reduce((P,F)=>P+Number(F.totalAmount||0),0),M=Math.ceil(i/k);return l.jsxs("div",{className:"space-y-6 animate-fade-in",children:[l.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[l.jsx("span",{className:"text-blue-600 hover:underline cursor-pointer",onClick:()=>e("/dashboard/orders"),children:"Orders"}),l.jsx("span",{className:"text-slate-400",children:""}),l.jsx("span",{className:"text-slate-700 font-medium",children:"Cancellations"})]}),l.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Cancelled Orders"}),l.jsxs("p",{className:"mt-1 text-sm text-slate-500",children:["Viewing cancelled orders for"," ",l.jsx("span",{className:"font-medium text-slate-700",children:(t==null?void 0:t.name)||"your warehouse"})]})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsxs(xe,{variant:"outline",size:"sm",onClick:C,disabled:c,children:[l.jsx(Bo,{className:be("h-4 w-4",c&&"animate-spin")})," Refresh"]}),l.jsxs(xe,{variant:"outline",size:"sm",children:[l.jsx(u0,{className:"h-4 w-4"})," Export"]})]})]}),f&&l.jsxs("div",{className:"flex items-center gap-3 rounded-lg border border-red-200 bg-red-50 px-4 py-3",children:[l.jsx(sr,{className:"h-5 w-5 text-red-500 shrink-0"}),l.jsx("p",{className:"text-sm text-red-700 flex-1",children:f}),l.jsx(xe,{variant:"ghost",size:"sm",onClick:()=>p(null),className:"text-red-600 hover:text-red-700",children:"Dismiss"})]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[l.jsxs("div",{className:"flex items-center gap-4 rounded-xl border-2 border-red-200 bg-red-50 p-4",children:[l.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-red-100",children:l.jsx(Ou,{className:"h-6 w-6 text-red-600"})}),l.jsxs("div",{children:[l.jsx("span",{className:"text-2xl font-bold text-slate-900",children:c?"":i}),l.jsx("p",{className:"text-sm font-medium text-red-600",children:"Total Cancelled"})]})]}),l.jsxs("div",{className:"flex items-center gap-4 rounded-xl border-2 border-amber-200 bg-amber-50 p-4",children:[l.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-amber-100",children:l.jsx(Dc,{className:"h-6 w-6 text-amber-600"})}),l.jsxs("div",{children:[l.jsx("span",{className:"text-2xl font-bold text-slate-900",children:c?"":uk(A)}),l.jsx("p",{className:"text-sm font-medium text-amber-600",children:"Lost Revenue"})]})]}),l.jsxs("div",{className:"flex items-center gap-4 rounded-xl border-2 border-slate-200 bg-slate-50 p-4",children:[l.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-slate-100",children:l.jsx(_t,{className:"h-6 w-6 text-slate-500"})}),l.jsxs("div",{children:[l.jsx("span",{className:"text-2xl font-bold text-slate-900",children:c?"":r.reduce((P,F)=>{var ne;return P+(((ne=F.items)==null?void 0:ne.length)||0)},0)}),l.jsx("p",{className:"text-sm font-medium text-slate-600",children:"Items Affected"})]})]})]}),l.jsx("div",{className:"flex-1 max-w-md",children:l.jsx(Pe,{placeholder:"Search by order ID or customer...",defaultValue:m,onChange:T,icon:l.jsx(Gs,{className:"h-5 w-5"})})}),l.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white shadow-sm overflow-hidden",children:[l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b border-slate-200 bg-slate-50",children:[l.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-slate-900",children:"Order Details"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-slate-900",children:"Customer"}),l.jsx("th",{className:"px-6 py-4 text-center text-sm font-semibold text-slate-900",children:"Items"}),l.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-slate-900",children:"Amount"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-slate-900",children:"Cancelled On"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-slate-900",children:"Status"})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100",children:c?l.jsx("tr",{children:l.jsxs("td",{colSpan:6,className:"py-16 text-center",children:[l.jsx(At,{className:"mx-auto mb-3 h-8 w-8 text-blue-500 animate-spin"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Loading cancelled orders"})]})}):r.length===0?l.jsx("tr",{children:l.jsxs("td",{colSpan:6,className:"py-16 text-center",children:[l.jsx("div",{className:"mx-auto mb-4 h-24 w-24 rounded-full bg-slate-100 flex items-center justify-center",children:l.jsx(Ou,{className:"h-10 w-10 text-slate-300"})}),l.jsx("p",{className:"text-lg font-medium text-slate-600",children:"No Cancelled Orders"}),l.jsx("p",{className:"mt-1 text-sm text-slate-400",children:m?"Try adjusting your search query":"Great news! No cancellations found."})]})}):r.map(P=>{var le,z,te,ie;const F=(le=P.items)==null?void 0:le.some(oe=>{var W,q;return((W=oe.productSnapshot)==null?void 0:W.productType)==="bookset"||((q=oe.productSnapshot)==null?void 0:q.productType)==="uniform"}),ne=((z=P.shippingAddress)==null?void 0:z.recipientName)||P.contactEmail||"Customer",O=((te=P.shippingAddress)==null?void 0:te.city)||"",X=Number(P.totalAmount||0);return l.jsxs("tr",{className:"transition-colors hover:bg-slate-50 cursor-pointer",onClick:()=>e(`/dashboard/orders/${P.id}`),children:[l.jsx("td",{className:"px-6 py-4",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:be("flex h-10 w-10 items-center justify-center rounded-lg",F?"bg-violet-100":"bg-slate-100"),children:F?l.jsx(pn,{className:"h-5 w-5 text-violet-600"}):l.jsx(Ic,{className:"h-5 w-5 text-slate-400"})}),l.jsxs("div",{children:[l.jsx("p",{className:"font-mono text-sm font-semibold text-blue-600",title:P.id,children:IB(P)}),l.jsx("p",{className:"mt-0.5 text-xs text-slate-500",children:fk(P.createdAt)})]})]})}),l.jsxs("td",{className:"px-6 py-4",children:[l.jsx("p",{className:"text-sm font-medium text-slate-900 truncate max-w-[180px]",children:ne}),O&&l.jsxs("div",{className:"flex items-center gap-1 mt-1 text-xs text-slate-500",children:[l.jsx(Rn,{className:"h-3 w-3"})," ",O]})]}),l.jsx("td",{className:"px-6 py-4 text-center",children:l.jsx("span",{className:"inline-flex items-center justify-center h-7 min-w-[28px] rounded-full bg-slate-100 px-2 text-sm font-medium text-slate-700",children:((ie=P.items)==null?void 0:ie.length)||0})}),l.jsx("td",{className:"px-6 py-4 text-right",children:l.jsx("span",{className:"font-bold text-slate-900",children:uk(X)})}),l.jsx("td",{className:"px-6 py-4",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(hc,{className:"h-4 w-4 text-slate-400"}),l.jsx("span",{className:"text-sm text-slate-700",children:fk(P.updatedAt)})]})}),l.jsx("td",{className:"px-6 py-4",children:l.jsx(yt,{variant:"cancelled",dot:!0,children:"Cancelled"})})]},P.id)})})]})}),l.jsxs("div",{className:"flex items-center justify-between border-t border-slate-200 bg-slate-50 px-6 py-4",children:[l.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[l.jsxs("select",{className:"rounded border border-slate-300 bg-white px-2 py-1 text-sm",value:k,onChange:P=>{w(Number(P.target.value)),v(1)},children:[l.jsx("option",{value:10,children:"10"}),l.jsx("option",{value:25,children:"25"}),l.jsx("option",{value:50,children:"50"})]}),l.jsx("span",{children:"Items per page"})]}),l.jsxs("div",{className:"flex items-center gap-3 text-sm text-slate-600",children:[l.jsxs("span",{children:["Page ",y," of ",M||1,"  ",i," total"]}),l.jsxs("div",{className:"flex gap-1",children:[l.jsx(xe,{variant:"outline",size:"sm",disabled:y<=1,onClick:()=>v(y-1),children:"Prev"}),l.jsx(xe,{variant:"outline",size:"sm",disabled:y>=M,onClick:()=>v(y+1),children:"Next"})]})]})]})]})]})}function LB(t){if(t.orderNumber)return t.orderNumber;const e=t.id||"";return e.length<=12?e:`#${e.replace(/-/g,"").slice(-8).toUpperCase()}`}function hk(t){return`${Number(t||0).toLocaleString("en-IN")}`}function pk(t){return t?new Date(t).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):""}function zB(){const{activeWarehouse:t}=Zr(),e=Dn(),n=t==null?void 0:t.id,[r,s]=E.useState([]),[i,o]=E.useState(0),[c,u]=E.useState(!1),[f,p]=E.useState(null),[m,x]=E.useState(""),[y,v]=E.useState(1),[k,w]=E.useState(10),j=E.useRef(null),C=E.useCallback(async()=>{var F,ne,O,X,le;if(!n){s([]),o(0);return}u(!0),p(null);try{const z=await Fi.getOrders(n,{page:y,limit:k,status:"refunded",search:m}),te=(z==null?void 0:z.data)||z,ie=(te==null?void 0:te.orders)||(te==null?void 0:te.items)||te||[],oe=(te==null?void 0:te.totalCount)??(te==null?void 0:te.total)??((F=te==null?void 0:te.pagination)==null?void 0:F.total)??ie.length;s(Array.isArray(ie)?ie:[]),o(oe)}catch(z){const te=((O=(ne=z.response)==null?void 0:ne.data)==null?void 0:O.message)||((le=(X=z.response)==null?void 0:X.data)==null?void 0:le.error)||"Failed to fetch returns/refunds.";p(te),s([])}finally{u(!1)}},[n,y,k,m]);E.useEffect(()=>{C()},[C]);const T=E.useCallback(F=>{const ne=F.target.value;j.current&&clearTimeout(j.current),j.current=setTimeout(()=>{x(ne),v(1)},400)},[]);E.useEffect(()=>()=>{j.current&&clearTimeout(j.current)},[]);const A=r.reduce((F,ne)=>F+Number(ne.totalAmount||0),0),M=r.reduce((F,ne)=>{var O;return F+(((O=ne.items)==null?void 0:O.length)||0)},0),P=Math.ceil(i/k);return l.jsxs("div",{className:"space-y-6 animate-fade-in",children:[l.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[l.jsx("span",{className:"text-blue-600 hover:underline cursor-pointer",onClick:()=>e("/dashboard/orders"),children:"Orders"}),l.jsx("span",{className:"text-slate-400",children:""}),l.jsx("span",{className:"text-slate-700 font-medium",children:"Returns / Refunds"})]}),l.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Returns & Refunds"}),l.jsxs("p",{className:"mt-1 text-sm text-slate-500",children:["Viewing refunded orders for"," ",l.jsx("span",{className:"font-medium text-slate-700",children:(t==null?void 0:t.name)||"your warehouse"})]})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsxs(xe,{variant:"outline",size:"sm",onClick:C,disabled:c,children:[l.jsx(Bo,{className:be("h-4 w-4",c&&"animate-spin")})," Refresh"]}),l.jsxs(xe,{variant:"outline",size:"sm",children:[l.jsx(u0,{className:"h-4 w-4"})," Export"]})]})]}),f&&l.jsxs("div",{className:"flex items-center gap-3 rounded-lg border border-red-200 bg-red-50 px-4 py-3",children:[l.jsx(sr,{className:"h-5 w-5 text-red-500 shrink-0"}),l.jsx("p",{className:"text-sm text-red-700 flex-1",children:f}),l.jsx(xe,{variant:"ghost",size:"sm",onClick:()=>p(null),className:"text-red-600 hover:text-red-700",children:"Dismiss"})]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[l.jsxs("div",{className:"flex items-center gap-4 rounded-xl border-2 border-violet-200 bg-violet-50 p-4",children:[l.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-violet-100",children:l.jsx(tg,{className:"h-6 w-6 text-violet-600"})}),l.jsxs("div",{children:[l.jsx("span",{className:"text-2xl font-bold text-slate-900",children:c?"":i}),l.jsx("p",{className:"text-sm font-medium text-violet-600",children:"Total Returns"})]})]}),l.jsxs("div",{className:"flex items-center gap-4 rounded-xl border-2 border-emerald-200 bg-emerald-50 p-4",children:[l.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-emerald-100",children:l.jsx(iN,{className:"h-6 w-6 text-emerald-600"})}),l.jsxs("div",{children:[l.jsx("span",{className:"text-2xl font-bold text-slate-900",children:c?"":hk(A)}),l.jsx("p",{className:"text-sm font-medium text-emerald-600",children:"Total Refunded"})]})]}),l.jsxs("div",{className:"flex items-center gap-4 rounded-xl border-2 border-slate-200 bg-slate-50 p-4",children:[l.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-slate-100",children:l.jsx(_t,{className:"h-6 w-6 text-slate-500"})}),l.jsxs("div",{children:[l.jsx("span",{className:"text-2xl font-bold text-slate-900",children:c?"":M}),l.jsx("p",{className:"text-sm font-medium text-slate-600",children:"Items Returned"})]})]})]}),l.jsx("div",{className:"flex-1 max-w-md",children:l.jsx(Pe,{placeholder:"Search by order ID or customer...",defaultValue:m,onChange:T,icon:l.jsx(Gs,{className:"h-5 w-5"})})}),l.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white shadow-sm overflow-hidden",children:[l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b border-slate-200 bg-slate-50",children:[l.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-slate-900",children:"Order Details"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-slate-900",children:"Customer"}),l.jsx("th",{className:"px-6 py-4 text-center text-sm font-semibold text-slate-900",children:"Items"}),l.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-slate-900",children:"Refund Amount"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-slate-900",children:"Refunded On"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-slate-900",children:"Status"})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100",children:c?l.jsx("tr",{children:l.jsxs("td",{colSpan:6,className:"py-16 text-center",children:[l.jsx(At,{className:"mx-auto mb-3 h-8 w-8 text-blue-500 animate-spin"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Loading returns"})]})}):r.length===0?l.jsx("tr",{children:l.jsxs("td",{colSpan:6,className:"py-16 text-center",children:[l.jsx("div",{className:"mx-auto mb-4 h-24 w-24 rounded-full bg-slate-100 flex items-center justify-center",children:l.jsx(tg,{className:"h-10 w-10 text-slate-300"})}),l.jsx("p",{className:"text-lg font-medium text-slate-600",children:"No Returns"}),l.jsx("p",{className:"mt-1 text-sm text-slate-400",children:m?"Try adjusting your search query":"No refunded orders found."})]})}):r.map(F=>{var z,te,ie,oe;const ne=(z=F.items)==null?void 0:z.some(W=>{var q,J;return((q=W.productSnapshot)==null?void 0:q.productType)==="bookset"||((J=W.productSnapshot)==null?void 0:J.productType)==="uniform"}),O=((te=F.shippingAddress)==null?void 0:te.recipientName)||F.contactEmail||"Customer",X=((ie=F.shippingAddress)==null?void 0:ie.city)||"",le=Number(F.totalAmount||0);return l.jsxs("tr",{className:"transition-colors hover:bg-slate-50 cursor-pointer",onClick:()=>e(`/dashboard/orders/${F.id}`),children:[l.jsx("td",{className:"px-6 py-4",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:be("flex h-10 w-10 items-center justify-center rounded-lg",ne?"bg-violet-100":"bg-slate-100"),children:ne?l.jsx(pn,{className:"h-5 w-5 text-violet-600"}):l.jsx(Ic,{className:"h-5 w-5 text-slate-400"})}),l.jsxs("div",{children:[l.jsx("p",{className:"font-mono text-sm font-semibold text-blue-600",title:F.id,children:LB(F)}),l.jsx("p",{className:"mt-0.5 text-xs text-slate-500",children:pk(F.createdAt)})]})]})}),l.jsxs("td",{className:"px-6 py-4",children:[l.jsx("p",{className:"text-sm font-medium text-slate-900 truncate max-w-[180px]",children:O}),X&&l.jsxs("div",{className:"flex items-center gap-1 mt-1 text-xs text-slate-500",children:[l.jsx(Rn,{className:"h-3 w-3"})," ",X]})]}),l.jsx("td",{className:"px-6 py-4 text-center",children:l.jsx("span",{className:"inline-flex items-center justify-center h-7 min-w-[28px] rounded-full bg-slate-100 px-2 text-sm font-medium text-slate-700",children:((oe=F.items)==null?void 0:oe.length)||0})}),l.jsx("td",{className:"px-6 py-4 text-right",children:l.jsx("span",{className:"font-bold text-emerald-600",children:hk(le)})}),l.jsx("td",{className:"px-6 py-4",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(hc,{className:"h-4 w-4 text-slate-400"}),l.jsx("span",{className:"text-sm text-slate-700",children:pk(F.updatedAt)})]})}),l.jsx("td",{className:"px-6 py-4",children:l.jsx(yt,{variant:"refunded",dot:!0,children:"Refunded"})})]},F.id)})})]})}),l.jsxs("div",{className:"flex items-center justify-between border-t border-slate-200 bg-slate-50 px-6 py-4",children:[l.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[l.jsxs("select",{className:"rounded border border-slate-300 bg-white px-2 py-1 text-sm",value:k,onChange:F=>{w(Number(F.target.value)),v(1)},children:[l.jsx("option",{value:10,children:"10"}),l.jsx("option",{value:25,children:"25"}),l.jsx("option",{value:50,children:"50"})]}),l.jsx("span",{children:"Items per page"})]}),l.jsxs("div",{className:"flex items-center gap-3 text-sm text-slate-600",children:[l.jsxs("span",{children:["Page ",y," of ",P||1,"  ",i," total"]}),l.jsxs("div",{className:"flex gap-1",children:[l.jsx(xe,{variant:"outline",size:"sm",disabled:y<=1,onClick:()=>v(y-1),children:"Prev"}),l.jsx(xe,{variant:"outline",size:"sm",disabled:y>=P,onClick:()=>v(y+1),children:"Next"})]})]})]})]})]})}const Um={name:"",contactPhone:"",contactEmail:"",website:"",address:{line1:"",line2:"",city:"",state:"",postalCode:"",country:"India"}},BB=()=>{const{warehouses:t,loading:e,refreshWarehouses:n}=Zr(),{toast:r}=qf(),[s,i]=E.useState(!1),[o,c]=E.useState(null),[u,f]=E.useState(Um),[p,m]=E.useState(!1),x=(C=null)=>{var T,A,M,P,F,ne;c(C),f(C?{name:C.name||"",contactPhone:C.contact_phone||"",contactEmail:C.contact_email||"",website:C.website||"",address:{line1:((T=C.address)==null?void 0:T.line1)||"",line2:((A=C.address)==null?void 0:A.line2)||"",city:((M=C.address)==null?void 0:M.city)||"",state:((P=C.address)==null?void 0:P.state)||"",postalCode:((F=C.address)==null?void 0:F.postal_code)||"",country:((ne=C.address)==null?void 0:ne.country)||"India"}}:Um),i(!0)},y=()=>{i(!1),c(null),f(Um)},v=(C,T)=>{f(A=>({...A,[C]:T}))},k=(C,T)=>{f(A=>({...A,address:{...A.address,[C]:T}}))},w=async C=>{var T,A;if(C.preventDefault(),!!u.name.trim()){m(!0);try{o?(await Ql.updateWarehouse(o.id,u),r({title:"Warehouse updated successfully",variant:"success"})):(await Ql.createWarehouse(u),r({title:"Warehouse created successfully",variant:"success"})),n(),y()}catch(M){console.error(M),r({title:o?"Failed to update warehouse":"Failed to create warehouse",description:((A=(T=M==null?void 0:M.response)==null?void 0:T.data)==null?void 0:A.message)||"Something went wrong",variant:"destructive"})}finally{m(!1)}}},j=async C=>{var T,A;if(window.confirm("Are you sure you want to delete this warehouse?"))try{await Ql.deleteWarehouse(C),r({title:"Warehouse deleted successfully",variant:"success"}),n()}catch(M){console.error(M),r({title:"Failed to delete warehouse",description:((A=(T=M==null?void 0:M.response)==null?void 0:T.data)==null?void 0:A.message)||"Something went wrong",variant:"destructive"})}};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Warehouse Management"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Manage your warehouse locations and settings."})]}),l.jsxs(xe,{onClick:()=>x(),className:"bg-orange-500 hover:bg-orange-600",children:[l.jsx(_n,{className:"mr-2 h-4 w-4"}),"Add Warehouse"]})]}),l.jsx("div",{className:"rounded-xl border border-slate-200 bg-white shadow-sm overflow-hidden",children:l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-left text-sm",children:[l.jsx("thead",{className:"bg-slate-50 text-slate-500",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 font-medium",children:"Name"}),l.jsx("th",{className:"px-6 py-3 font-medium",children:"Contact"}),l.jsx("th",{className:"px-6 py-3 font-medium",children:"ID"}),l.jsx("th",{className:"px-6 py-3 font-medium text-right",children:"Actions"})]})}),l.jsx("tbody",{className:"divide-y divide-slate-200",children:e?l.jsx("tr",{children:l.jsx("td",{colSpan:"4",className:"px-6 py-8 text-center text-slate-500",children:"Loading warehouses..."})}):t.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:"4",className:"px-6 py-12 text-center text-slate-500",children:l.jsxs("div",{className:"flex flex-col items-center gap-2",children:[l.jsx("div",{className:"h-12 w-12 rounded-full bg-slate-100 flex items-center justify-center text-slate-400",children:l.jsx(Ha,{className:"h-6 w-6"})}),l.jsx("p",{className:"font-medium text-slate-900",children:"No warehouses found"}),l.jsx("p",{className:"text-xs",children:"Add your first warehouse to get started."})]})})}):t.map(C=>l.jsxs("tr",{className:"hover:bg-slate-50/50",children:[l.jsx("td",{className:"px-6 py-4 font-medium text-slate-900",children:C.name}),l.jsxs("td",{className:"px-6 py-4 text-slate-500 text-xs",children:[l.jsx("div",{children:C.contact_email}),l.jsx("div",{children:C.contact_phone})]}),l.jsx("td",{className:"px-6 py-4 text-slate-500 font-mono text-xs",children:C.id}),l.jsx("td",{className:"px-6 py-4 text-right",children:l.jsxs("div",{className:"flex items-center justify-end gap-2",children:[l.jsx(xe,{variant:"ghost",size:"sm",onClick:()=>x(C),children:l.jsx(x0,{className:"h-4 w-4 text-slate-500"})}),l.jsx(xe,{variant:"ghost",size:"sm",onClick:()=>j(C.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:l.jsx(qs,{className:"h-4 w-4"})})]})})]},C.id))})]})})}),s&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:l.jsxs("div",{className:"w-full max-w-2xl max-h-[90vh] bg-white rounded-xl shadow-lg overflow-hidden flex flex-col",children:[l.jsxs("div",{className:"flex items-center justify-between border-b border-slate-100 px-6 py-4 shrink-0",children:[l.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:o?"Edit Warehouse":"Add Warehouse"}),l.jsx("button",{onClick:y,className:"rounded-full p-1 text-slate-400 hover:bg-slate-100 hover:text-slate-500",children:l.jsx(On,{className:"h-5 w-5"})})]}),l.jsxs("form",{onSubmit:w,className:"flex flex-col flex-1 overflow-hidden",children:[l.jsxs("div",{className:"p-6 space-y-5 overflow-y-auto flex-1",children:[l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[l.jsx(Pe,{label:"Warehouse Name",placeholder:"Ex. North Zone Depot",value:u.name,onChange:C=>v("name",C.target.value),required:!0,autoFocus:!0}),l.jsx(Pe,{label:"Contact Phone",placeholder:"+91...",value:u.contactPhone,onChange:C=>v("contactPhone",C.target.value),icon:l.jsx(Gr,{className:"h-4 w-4"})})]}),l.jsx(Pe,{label:"Contact Email",type:"email",placeholder:"warehouse@example.com",value:u.contactEmail,onChange:C=>v("contactEmail",C.target.value),icon:l.jsx(mr,{className:"h-4 w-4"})}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2 text-slate-700",children:[l.jsx(Rn,{className:"h-4 w-4"}),l.jsx("span",{className:"text-sm font-semibold",children:"Location Address"})]}),l.jsx(Pe,{label:"Address Line 1",placeholder:"Street address, building, floor...",value:u.address.line1,onChange:C=>k("line1",C.target.value)}),l.jsx(Pe,{label:"Address Line 2",placeholder:"Landmark, suite, unit, etc. (Optional)",value:u.address.line2,onChange:C=>k("line2",C.target.value)}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[l.jsx(Pe,{label:"City",placeholder:"Ex. Mumbai",value:u.address.city,onChange:C=>k("city",C.target.value)}),l.jsx(Pe,{label:"State",placeholder:"Ex. Maharashtra",value:u.address.state,onChange:C=>k("state",C.target.value)})]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[l.jsx(Pe,{label:"Postal Code",placeholder:"Ex. 400001",value:u.address.postalCode,onChange:C=>k("postalCode",C.target.value)}),l.jsx(Pe,{label:"Country",placeholder:"India",value:u.address.country,onChange:C=>k("country",C.target.value)})]})]}),l.jsx(Pe,{label:"Website",type:"url",placeholder:"https://warehouse-logistics.com",value:u.website,onChange:C=>v("website",C.target.value),icon:l.jsx(Ma,{className:"h-4 w-4"})})]}),l.jsxs("div",{className:"flex justify-end gap-3 border-t border-slate-100 px-6 py-4 shrink-0",children:[l.jsx(xe,{type:"button",variant:"outline",onClick:y,children:"Cancel"}),l.jsx(xe,{type:"submit",className:"bg-orange-500 hover:bg-orange-600 text-white",loading:p,children:o?"Save Changes":"Create Warehouse"})]})]})]})})]})},Ul={getAll:async()=>(await $e.get("/retailer/bank-accounts")).data.data,add:async t=>(await $e.post("/retailer/bank-accounts",t)).data,update:async(t,e)=>(await $e.put(`/retailer/bank-accounts/${t}`,e)).data,remove:async t=>(await $e.delete(`/retailer/bank-accounts/${t}`)).data,setPrimary:async t=>(await $e.patch(`/retailer/bank-accounts/${t}/set-primary`)).data},Tn=({icon:t,label:e,value:n,mono:r=!1,copyable:s=!1})=>{const[i,o]=E.useState(!1),c=()=>{n&&(navigator.clipboard.writeText(typeof n=="string"?n:""),o(!0),setTimeout(()=>o(!1),2e3))};return l.jsxs("div",{className:"flex items-start gap-3 py-3",children:[l.jsx("div",{className:"flex h-9 w-9 flex-shrink-0 items-center justify-center rounded-lg bg-slate-100 text-slate-500",children:l.jsx(t,{className:"h-4 w-4"})}),l.jsxs("div",{className:"min-w-0 flex-1",children:[l.jsx("p",{className:"text-xs font-medium uppercase tracking-wider text-slate-400",children:e}),l.jsx("p",{className:`mt-0.5 text-sm font-medium text-slate-800 break-all ${r?"font-mono tracking-wide":""}`,children:n||l.jsx("span",{className:"italic text-slate-400",children:"Not provided"})})]}),s&&n&&typeof n=="string"&&l.jsx("button",{onClick:c,title:"Copy",className:"mt-1 rounded-md p-1.5 text-slate-400 hover:bg-slate-100 hover:text-slate-600 transition-colors",children:i?l.jsx(un,{className:"h-3.5 w-3.5 text-emerald-500"}):l.jsx(Q4,{className:"h-3.5 w-3.5"})})]})},vu=({icon:t,title:e,badge:n,action:r,children:s})=>l.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white shadow-sm overflow-hidden",children:[l.jsxs("div",{className:"flex items-center justify-between border-b border-slate-100 bg-slate-50/50 px-6 py-4",children:[l.jsxs("div",{className:"flex items-center gap-2.5",children:[l.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-blue-100 text-blue-600",children:l.jsx(t,{className:"h-4 w-4"})}),l.jsx("h2",{className:"text-base font-semibold text-slate-800",children:e})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[n,r]})]}),l.jsx("div",{className:"px-6 py-2 divide-y divide-slate-100",children:s})]}),FB=({warehouse:t,onClose:e})=>{if(!t)return null;const n=t.address||{},r=[n.line1,n.line2].filter(Boolean).join(", "),s=n.postal_code||n.postalCode||"";return l.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[l.jsx("div",{className:"absolute inset-0 bg-slate-900/50 backdrop-blur-sm",onClick:e}),l.jsxs("div",{className:"relative w-full max-w-lg rounded-2xl border border-slate-200 bg-white shadow-2xl animate-fade-in overflow-hidden",children:[l.jsx("div",{className:"h-2 bg-gradient-to-r from-blue-600 via-blue-500 to-indigo-600"}),l.jsx("button",{onClick:e,className:"absolute top-4 right-4 rounded-lg p-1.5 text-slate-400 hover:bg-slate-100 hover:text-slate-600 transition-colors z-10",children:l.jsx(On,{className:"h-5 w-5"})}),l.jsxs("div",{className:"px-6 pt-5 pb-6",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-5",children:[l.jsx("div",{className:"flex h-11 w-11 items-center justify-center rounded-xl bg-blue-100 text-blue-600",children:l.jsx(Iu,{className:"h-5 w-5"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-slate-900",children:t.name}),l.jsx("p",{className:"text-xs text-slate-400",children:"Warehouse Details"})]})]}),l.jsxs("div",{className:"space-y-0 divide-y divide-slate-100",children:[l.jsx(Tn,{icon:Ha,label:"Store Name",value:t.name}),l.jsx(Tn,{icon:mr,label:"Contact Email",value:t.contact_email,copyable:!0}),l.jsx(Tn,{icon:Gr,label:"Contact Phone",value:t.contact_phone,copyable:!0}),l.jsx(Tn,{icon:Ma,label:"Website",value:t.website})]}),(r||n.city||s)&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"mt-4 mb-2 flex items-center gap-2",children:[l.jsx("div",{className:"flex h-7 w-7 items-center justify-center rounded-md bg-emerald-100 text-emerald-600",children:l.jsx(Rn,{className:"h-3.5 w-3.5"})}),l.jsx("span",{className:"text-sm font-semibold text-slate-700",children:"Pickup Address"})]}),l.jsxs("div",{className:"divide-y divide-slate-100",children:[r&&l.jsx(Tn,{icon:Rn,label:"Street Address",value:r}),n.city&&l.jsx(Tn,{icon:eN,label:"City",value:n.city}),n.state&&l.jsx(Tn,{icon:Rn,label:"State",value:n.state}),s&&l.jsx(Tn,{icon:f0,label:"Pincode",value:s,mono:!0}),l.jsx(Tn,{icon:Ma,label:"Country",value:n.country||"India"})]})]})]}),l.jsx("div",{className:"border-t border-slate-100 bg-slate-50/50 px-6 py-3 flex justify-end",children:l.jsx(xe,{size:"sm",variant:"outline",onClick:e,children:"Close"})})]})]})},mk={accountHolderName:"",accountNumber:"",confirmAccountNumber:"",ifscCode:"",bankName:"",branchName:"",accountType:"savings",isPrimary:!1},$B=({isOpen:t,onClose:e,onSave:n,editData:r})=>{const[s,i]=E.useState(mk),[o,c]=E.useState({});if(E.useEffect(()=>{i(r?{...r,confirmAccountNumber:r.accountNumber}:mk),c({})},[r,t]),!t)return null;const u=(m,x)=>{i(y=>({...y,[m]:x})),c(y=>({...y,[m]:void 0}))},f=()=>{const m={};return s.accountHolderName.trim()||(m.accountHolderName="Account holder name is required"),s.accountNumber.trim()?/^\d{9,18}$/.test(s.accountNumber.trim())||(m.accountNumber="Enter a valid account number (9-18 digits)"):m.accountNumber="Account number is required",s.accountNumber!==s.confirmAccountNumber&&(m.confirmAccountNumber="Account numbers do not match"),s.ifscCode.trim()?/^[A-Z]{4}0[A-Z0-9]{6}$/.test(s.ifscCode.trim().toUpperCase())||(m.ifscCode="Enter a valid IFSC code (e.g. SBIN0001234)"):m.ifscCode="IFSC code is required",s.bankName.trim()||(m.bankName="Bank name is required"),c(m),Object.keys(m).length===0},p=m=>{m.preventDefault(),f()&&n({...s,ifscCode:s.ifscCode.trim().toUpperCase(),id:(r==null?void 0:r.id)||void 0})};return l.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[l.jsx("div",{className:"absolute inset-0 bg-slate-900/50 backdrop-blur-sm",onClick:e}),l.jsxs("div",{className:"relative w-full max-w-lg max-h-[90vh] overflow-y-auto rounded-2xl border border-slate-200 bg-white shadow-2xl animate-fade-in",children:[l.jsx("div",{className:"h-2 bg-gradient-to-r from-emerald-500 via-teal-500 to-cyan-500"}),l.jsx("button",{onClick:e,className:"absolute top-4 right-4 rounded-lg p-1.5 text-slate-400 hover:bg-slate-100 hover:text-slate-600 transition-colors z-10",children:l.jsx(On,{className:"h-5 w-5"})}),l.jsxs("form",{onSubmit:p,className:"px-6 pt-5 pb-6",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx("div",{className:"flex h-11 w-11 items-center justify-center rounded-xl bg-emerald-100 text-emerald-600",children:l.jsx(Zl,{className:"h-5 w-5"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-slate-900",children:r?"Edit Bank Account":"Add Bank Account"}),l.jsx("p",{className:"text-xs text-slate-400",children:r?"Update your bank details":"Enter your bank account information"})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx(Pe,{label:"Account Holder Name",placeholder:"Enter name as per bank records",value:s.accountHolderName,onChange:m=>u("accountHolderName",m.target.value),error:o.accountHolderName,required:!0}),l.jsx(Pe,{label:"Account Number",placeholder:"Enter account number",value:s.accountNumber,onChange:m=>u("accountNumber",m.target.value.replace(/\D/g,"")),error:o.accountNumber,required:!0}),l.jsx(Pe,{label:"Confirm Account Number",placeholder:"Re-enter account number",value:s.confirmAccountNumber,onChange:m=>u("confirmAccountNumber",m.target.value.replace(/\D/g,"")),error:o.confirmAccountNumber,required:!0}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[l.jsx(Pe,{label:"IFSC Code",placeholder:"e.g. SBIN0001234",value:s.ifscCode,onChange:m=>u("ifscCode",m.target.value.toUpperCase()),error:o.ifscCode,required:!0}),l.jsxs("div",{children:[l.jsxs("label",{className:"mb-1.5 block text-sm font-medium text-slate-700",children:["Account Type ",l.jsx("span",{className:"ml-0.5 text-red-500",children:"*"})]}),l.jsxs("select",{value:s.accountType,onChange:m=>u("accountType",m.target.value),className:"flex h-11 w-full rounded-lg border border-slate-300 bg-white px-4 py-2.5 text-sm text-slate-900 transition-all duration-200 hover:border-slate-400 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20",children:[l.jsx("option",{value:"savings",children:"Savings"}),l.jsx("option",{value:"current",children:"Current"})]})]})]}),l.jsx(Pe,{label:"Bank Name",placeholder:"e.g. State Bank of India",value:s.bankName,onChange:m=>u("bankName",m.target.value),error:o.bankName,required:!0}),l.jsx(Pe,{label:"Branch Name",placeholder:"e.g. Connaught Place, Delhi",value:s.branchName,onChange:m=>u("branchName",m.target.value)}),l.jsxs("label",{className:"flex items-center gap-3 cursor-pointer rounded-lg border border-slate-200 bg-slate-50 px-4 py-3 hover:bg-slate-100 transition-colors",children:[l.jsx("input",{type:"checkbox",checked:s.isPrimary,onChange:m=>u("isPrimary",m.target.checked),className:"h-4 w-4 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-slate-700",children:"Set as primary account"}),l.jsx("p",{className:"text-xs text-slate-400",children:"Payments will be credited to this account"})]})]})]}),l.jsxs("div",{className:"mt-6 flex gap-3 justify-end",children:[l.jsx(xe,{type:"button",variant:"outline",size:"sm",onClick:e,children:"Cancel"}),l.jsx(xe,{type:"submit",size:"sm",variant:"success",children:r?l.jsxs(l.Fragment,{children:[l.jsx(x0,{className:"h-4 w-4"})," Update Account"]}):l.jsxs(l.Fragment,{children:[l.jsx(_n,{className:"h-4 w-4"})," Add Account"]})})]})]})]})]})},VB=({isOpen:t,bankName:e,onClose:n,onConfirm:r})=>t?l.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[l.jsx("div",{className:"absolute inset-0 bg-slate-900/50 backdrop-blur-sm",onClick:n}),l.jsxs("div",{className:"relative w-full max-w-sm rounded-2xl border border-slate-200 bg-white shadow-2xl animate-fade-in overflow-hidden",children:[l.jsx("div",{className:"h-2 bg-gradient-to-r from-red-500 to-rose-500"}),l.jsxs("div",{className:"px-6 pt-5 pb-6 text-center",children:[l.jsx("div",{className:"mx-auto mb-4 flex h-14 w-14 items-center justify-center rounded-full bg-red-100",children:l.jsx(qs,{className:"h-6 w-6 text-red-500"})}),l.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Delete Bank Account"}),l.jsxs("p",{className:"mt-2 text-sm text-slate-500",children:["Are you sure you want to remove ",l.jsx("strong",{className:"text-slate-700",children:e})," account? This action cannot be undone."]}),l.jsxs("div",{className:"mt-6 flex gap-3 justify-center",children:[l.jsx(xe,{variant:"outline",size:"sm",onClick:n,children:"Cancel"}),l.jsxs(xe,{variant:"destructive",size:"sm",onClick:r,children:[l.jsx(qs,{className:"h-4 w-4"})," Delete"]})]})]})]})]}):null,UB=[{key:"profile",label:"Profile",icon:Na},{key:"bank",label:"Bank Details",icon:Zl}];function HB(){const{user:t}=Zt(),[e,n]=E.useState("profile"),[r,s]=E.useState(null),[i,o]=E.useState([]),[c,u]=E.useState(!0),[f,p]=E.useState(!0),[m,x]=E.useState(null),[y,v]=E.useState(null),[k,w]=E.useState([]),[j,C]=E.useState(!0),[T,A]=E.useState(!1),[M,P]=E.useState(!1),[F,ne]=E.useState(null),[O,X]=E.useState(null),le=async()=>{C(!0);try{const se=await Ul.getAll();w(se||[])}catch(se){console.error("Bank accounts fetch error:",se),w([])}finally{C(!1)}};E.useEffect(()=>{le()},[]),E.useEffect(()=>{(async()=>{var Ye,wt,ht,xr,yr,vr;p(!0),x(null);try{const[Wt,an]=await Promise.allSettled([$e.get("/users/profile"),$e.get("/retailer/data/status")]),Yr=Wt.status==="fulfilled"?((wt=(Ye=Wt.value)==null?void 0:Ye.data)==null?void 0:wt.data)||((ht=Wt.value)==null?void 0:ht.data):null,qn=an.status==="fulfilled"?((yr=(xr=an.value)==null?void 0:xr.data)==null?void 0:yr.data)||((vr=an.value)==null?void 0:vr.data):null;s({profile:Yr,retailer:qn})}catch(Wt){console.error("Profile fetch error:",Wt),x("Unable to load profile details. Please try again later.")}finally{p(!1)}})()},[]),E.useEffect(()=>{(async()=>{u(!0);try{const Ye=await Ql.getWarehouses();o(Ye||[])}catch(Ye){console.error("Warehouse fetch error:",Ye),o([])}finally{u(!1)}})()},[]);const z=async se=>{var Ye,wt;A(!0);try{const ht={accountHolderName:se.accountHolderName,accountNumber:se.accountNumber,ifscCode:se.ifscCode,bankName:se.bankName,branchName:se.branchName||"",accountType:se.accountType,isPrimary:se.isPrimary};se.id?await Ul.update(se.id,ht):await Ul.add(ht),await le(),P(!1),ne(null)}catch(ht){console.error("Bank save error:",ht),alert(((wt=(Ye=ht==null?void 0:ht.response)==null?void 0:Ye.data)==null?void 0:wt.message)||"Failed to save bank account. Please try again.")}finally{A(!1)}},te=async()=>{var se,Ye;if(O){A(!0);try{await Ul.remove(O.id),await le(),X(null)}catch(wt){console.error("Bank delete error:",wt),alert(((Ye=(se=wt==null?void 0:wt.response)==null?void 0:se.data)==null?void 0:Ye.message)||"Failed to delete bank account. Please try again.")}finally{A(!1)}}},ie=async se=>{var Ye,wt;A(!0);try{await Ul.setPrimary(se),await le()}catch(ht){console.error("Set primary error:",ht),alert(((wt=(Ye=ht==null?void 0:ht.response)==null?void 0:Ye.data)==null?void 0:wt.message)||"Failed to set primary account. Please try again.")}finally{A(!1)}},oe=(r==null?void 0:r.profile)||{},W=(r==null?void 0:r.retailer)||{},q=(t==null?void 0:t.full_name)||(t==null?void 0:t.fullName)||(oe==null?void 0:oe.full_name)||"Retailer",J=(t==null?void 0:t.email)||(oe==null?void 0:oe.email)||"",fe=(t==null?void 0:t.phone)||(oe==null?void 0:oe.phone)||"",ce=q.split(" ").map(se=>se[0]).join("").toUpperCase().slice(0,2),D=(W==null?void 0:W.ownerName)||(W==null?void 0:W.owner_name)||(oe==null?void 0:oe.owner_name)||"",G=(W==null?void 0:W.gstin)||(oe==null?void 0:oe.gstin)||"",Ne=(W==null?void 0:W.pan)||(W==null?void 0:W.panNumber)||(W==null?void 0:W.pan_number)||(oe==null?void 0:oe.pan)||"",Ae=(W==null?void 0:W.businessCategory)||(W==null?void 0:W.business_category)||(oe==null?void 0:oe.business_category)||"",Ue=(W==null?void 0:W.signatureUrl)||(W==null?void 0:W.signature_url)||(oe==null?void 0:oe.signature_url)||"",Ve=(W==null?void 0:W.status)||(oe==null?void 0:oe.verification_status)||(t==null?void 0:t.status)||"",Z=Ve==="authorized"||Ve==="verified",Ce=se=>se?se.replace(/_/g," ").replace(/\b\w/g,Ye=>Ye.toUpperCase()):"",Fe=se=>!se||se.length<4?se:"  "+se.slice(-4);return f?l.jsx("div",{className:"flex items-center justify-center py-32",children:l.jsxs("div",{className:"flex flex-col items-center gap-3",children:[l.jsx(At,{className:"h-8 w-8 animate-spin text-blue-500"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Loading profile"})]})}):m?l.jsx("div",{className:"flex items-center justify-center py-32",children:l.jsxs("div",{className:"flex flex-col items-center gap-3 text-center max-w-sm",children:[l.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-red-100",children:l.jsx(sr,{className:"h-6 w-6 text-red-500"})}),l.jsx("p",{className:"text-sm text-slate-600",children:m}),l.jsx(xe,{size:"sm",variant:"outline",onClick:()=>window.location.reload(),children:"Retry"})]})}):l.jsxs("div",{className:"space-y-6 animate-fade-in",children:[y&&l.jsx(FB,{warehouse:y,onClose:()=>v(null)}),l.jsx($B,{isOpen:M,onClose:()=>{P(!1),ne(null)},onSave:z,editData:F}),l.jsx(VB,{isOpen:!!O,bankName:O==null?void 0:O.bankName,onClose:()=>X(null),onConfirm:te}),l.jsx("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Settings"}),l.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Manage your profile, business details and bank information."})]})}),l.jsx("div",{className:"flex items-center gap-1 rounded-xl border border-slate-200 bg-white p-1.5 shadow-sm w-fit",children:UB.map(se=>{const Ye=e===se.key;return l.jsxs("button",{onClick:()=>n(se.key),className:`
                                flex items-center gap-2 rounded-lg px-4 py-2.5 text-sm font-semibold transition-all duration-200
                                ${Ye?"bg-blue-600 text-white shadow-sm":"text-slate-500 hover:bg-slate-100 hover:text-slate-700"}
                            `,children:[l.jsx(se.icon,{className:"h-4 w-4"}),se.label,se.key==="bank"&&k.length>0&&l.jsx("span",{className:`ml-1 flex h-5 w-5 items-center justify-center rounded-full text-[11px] font-bold ${Ye?"bg-white/20 text-white":"bg-slate-200 text-slate-600"}`,children:k.length})]},se.key)})}),e==="profile"&&l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white shadow-sm overflow-hidden",children:[l.jsx("div",{className:"h-24 bg-gradient-to-r from-blue-600 via-blue-500 to-indigo-600"}),l.jsxs("div",{className:"relative px-6 pb-6",children:[l.jsx("div",{className:"absolute -top-10 left-6 flex h-20 w-20 items-center justify-center rounded-2xl border-4 border-white bg-gradient-to-br from-blue-500 to-blue-700 shadow-lg",children:l.jsx("span",{className:"text-2xl font-bold text-white",children:ce})}),l.jsxs("div",{className:"pt-14 sm:flex sm:items-end sm:justify-between",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-slate-900",children:q}),l.jsx("p",{className:"mt-0.5 text-sm text-slate-500",children:J})]}),l.jsxs("div",{className:"mt-3 flex flex-wrap gap-2 sm:mt-0",children:[l.jsx(yt,{variant:Z?"approved":"pending",dot:!0,children:Z?"Verified":"Pending Verification"}),Ae&&l.jsx(yt,{variant:"info",dot:!0,children:Ce(Ae)})]})]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[l.jsxs(vu,{icon:Na,title:"Account Information",children:[l.jsx(Tn,{icon:Na,label:"Full Name",value:q}),l.jsx(Tn,{icon:mr,label:"Email Address",value:J,copyable:!0}),l.jsx(Tn,{icon:Gr,label:"Mobile Number",value:fe,copyable:!0}),l.jsx(Tn,{icon:aN,label:"Account Status",value:Z?l.jsxs("span",{className:"inline-flex items-center gap-1 text-emerald-600",children:[l.jsx(un,{className:"h-3.5 w-3.5"})," Authorized"]}):l.jsxs("span",{className:"inline-flex items-center gap-1 text-amber-600",children:[l.jsx(sr,{className:"h-3.5 w-3.5"})," Pending Approval"]})})]}),l.jsxs(vu,{icon:eN,title:"Business Details",badge:Ae?l.jsx(yt,{variant:"info",children:Ce(Ae)}):null,children:[l.jsx(Tn,{icon:Na,label:"Owner Name",value:D}),l.jsx(Tn,{icon:f0,label:"GSTIN",value:G,mono:!0,copyable:!0}),l.jsx(Tn,{icon:rN,label:"PAN Number",value:Ne,mono:!0,copyable:!0}),Ue&&l.jsxs("div",{className:"py-3",children:[l.jsx("p",{className:"text-xs font-medium uppercase tracking-wider text-slate-400 mb-2",children:"E-Signature"}),l.jsx("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-4 flex items-center justify-center",children:l.jsx("img",{src:Ue,alt:"E-Signature",className:"max-h-16 object-contain"})})]})]})]}),l.jsx(vu,{icon:Iu,title:`My Warehouses${!c&&i.length?` (${i.length})`:""}`,badge:!c&&i.length>0?l.jsxs(yt,{variant:"approved",dot:!0,children:[i.length," Active"]}):null,children:c?l.jsxs("div",{className:"flex items-center justify-center gap-2 py-10 text-sm text-slate-400",children:[l.jsx(At,{className:"h-5 w-5 animate-spin"})," Loading warehouses"]}):i.length===0?l.jsxs("div",{className:"py-10 text-center",children:[l.jsx("div",{className:"mx-auto mb-3 flex h-12 w-12 items-center justify-center rounded-full bg-slate-100",children:l.jsx(Iu,{className:"h-6 w-6 text-slate-400"})}),l.jsx("p",{className:"text-sm font-medium text-slate-600",children:"No warehouses yet"}),l.jsx("p",{className:"mt-1 text-xs text-slate-400",children:"Warehouses you set up will appear here."})]}):l.jsx("div",{className:"grid grid-cols-1 gap-3 py-3 sm:grid-cols-2 lg:grid-cols-3",children:i.map(se=>{const Ye=se.address||{},wt=[Ye.city,Ye.state].filter(Boolean).join(", ");return l.jsxs("button",{type:"button",onClick:()=>v(se),className:"group relative text-left rounded-xl border border-slate-200 bg-white p-4 transition-all duration-200 hover:border-blue-300 hover:shadow-md hover:-translate-y-0.5 focus:outline-none focus:ring-2 focus:ring-blue-500/30",children:[l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg bg-blue-50 text-blue-600 group-hover:bg-blue-100 transition-colors",children:l.jsx(Ha,{className:"h-5 w-5"})}),l.jsxs("div",{className:"min-w-0 flex-1",children:[l.jsx("p",{className:"text-sm font-semibold text-slate-800 truncate",children:se.name}),wt&&l.jsxs("p",{className:"mt-0.5 flex items-center gap-1 text-xs text-slate-500",children:[l.jsx(Rn,{className:"h-3 w-3 flex-shrink-0"}),wt]})]}),l.jsx(Ws,{className:"h-4 w-4 text-slate-300 group-hover:text-blue-500 transition-colors mt-1"})]}),l.jsxs("div",{className:"mt-3 flex flex-wrap gap-1.5",children:[se.contact_email&&l.jsxs("span",{className:"inline-flex items-center gap-1 rounded-md bg-slate-50 px-2 py-0.5 text-[11px] text-slate-500",children:[l.jsx(mr,{className:"h-3 w-3"}),se.contact_email]}),se.contact_phone&&l.jsxs("span",{className:"inline-flex items-center gap-1 rounded-md bg-slate-50 px-2 py-0.5 text-[11px] text-slate-500",children:[l.jsx(Gr,{className:"h-3 w-3"}),se.contact_phone]})]}),l.jsx("p",{className:"mt-2.5 text-[11px] text-slate-400 group-hover:text-blue-500 transition-colors",children:"Click to view details "})]},se.id)})})})]}),e==="bank"&&l.jsxs("div",{className:"space-y-6",children:[l.jsx(vu,{icon:Zl,title:"Bank Accounts",badge:k.length>0?l.jsxs(yt,{variant:"approved",dot:!0,children:[k.length," Saved"]}):null,action:l.jsxs(xe,{size:"sm",onClick:()=>{ne(null),P(!0)},children:[l.jsx(_n,{className:"h-4 w-4"})," Add Account"]}),children:j?l.jsxs("div",{className:"flex items-center justify-center gap-2 py-14 text-sm text-slate-400",children:[l.jsx(At,{className:"h-5 w-5 animate-spin"})," Loading bank accounts"]}):k.length===0?l.jsxs("div",{className:"py-14 text-center",children:[l.jsx("div",{className:"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-2xl bg-emerald-50",children:l.jsx(Zl,{className:"h-8 w-8 text-emerald-400"})}),l.jsx("h3",{className:"text-base font-semibold text-slate-700",children:"No bank accounts added"}),l.jsx("p",{className:"mt-1 text-sm text-slate-400 max-w-xs mx-auto",children:"Add your bank account details to receive payments for your orders."}),l.jsxs(xe,{size:"sm",className:"mt-5",onClick:()=>{ne(null),P(!0)},children:[l.jsx(_n,{className:"h-4 w-4"})," Add Bank Account"]})]}):l.jsx("div",{className:"grid grid-cols-1 gap-4 py-4 sm:grid-cols-2 lg:grid-cols-3",children:k.map(se=>l.jsxs("div",{className:`group relative rounded-xl border p-5 transition-all duration-200 hover:shadow-md ${se.isPrimary?"border-emerald-300 bg-emerald-50/40":"border-slate-200 bg-white hover:border-slate-300"}`,children:[se.isPrimary&&l.jsx("div",{className:"absolute -top-2.5 left-4",children:l.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-emerald-500 px-2.5 py-0.5 text-[11px] font-semibold text-white shadow-sm",children:[l.jsx(Pb,{className:"h-3 w-3"})," Primary"]})}),l.jsx("div",{className:"flex items-start justify-between mt-1",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`flex h-10 w-10 items-center justify-center rounded-lg ${se.isPrimary?"bg-emerald-100 text-emerald-600":"bg-slate-100 text-slate-500"}`,children:l.jsx(Zl,{className:"h-5 w-5"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-semibold text-slate-800",children:se.bankName}),se.branchName&&l.jsx("p",{className:"text-xs text-slate-400",children:se.branchName})]})]})}),l.jsxs("div",{className:"mt-4 space-y-2",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-xs text-slate-400",children:"Account No."}),l.jsx("span",{className:"text-xs font-mono font-medium text-slate-700",children:Fe(se.accountNumber)})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-xs text-slate-400",children:"IFSC"}),l.jsx("span",{className:"text-xs font-mono font-medium text-slate-700",children:se.ifscCode})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-xs text-slate-400",children:"Holder"}),l.jsx("span",{className:"text-xs font-medium text-slate-700 truncate max-w-[150px]",children:se.accountHolderName})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-xs text-slate-400",children:"Type"}),l.jsx(yt,{variant:"default",children:se.accountType==="current"?"Current":"Savings"})]})]}),l.jsxs("div",{className:"mt-4 flex items-center gap-2 border-t border-slate-100 pt-3",children:[!se.isPrimary&&l.jsxs("button",{onClick:()=>ie(se.id),disabled:T,className:"flex items-center gap-1 rounded-md px-2.5 py-1.5 text-xs font-medium text-blue-600 hover:bg-blue-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[T?l.jsx(At,{className:"h-3 w-3 animate-spin"}):l.jsx(Pb,{className:"h-3 w-3"})," Set Primary"]}),l.jsx("div",{className:"flex-1"}),l.jsx("button",{onClick:()=>{ne(se),P(!0)},disabled:T,className:"rounded-md p-1.5 text-slate-400 hover:bg-slate-100 hover:text-blue-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Edit",children:l.jsx(x0,{className:"h-3.5 w-3.5"})}),l.jsx("button",{onClick:()=>X(se),disabled:T,className:"rounded-md p-1.5 text-slate-400 hover:bg-red-50 hover:text-red-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Delete",children:l.jsx(qs,{className:"h-3.5 w-3.5"})})]})]},se.id))})}),l.jsxs("div",{className:"flex items-start gap-3 rounded-xl border border-emerald-200 bg-emerald-50 p-4",children:[l.jsx("div",{className:"flex h-8 w-8 flex-shrink-0 items-center justify-center rounded-lg bg-emerald-100 text-emerald-600 mt-0.5",children:l.jsx(un,{className:"h-4 w-4"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-semibold text-emerald-800",children:"Securely Synced"}),l.jsx("p",{className:"mt-0.5 text-xs text-emerald-700 leading-relaxed",children:"Your bank details are securely saved on our server. They will be used for processing payouts once verification is complete."})]})]})]})]})}function WB(){return l.jsxs("div",{className:"space-y-6 animate-fade-in",children:[l.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Notifications"}),l.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Stay updated with your store activity, orders, and alerts."})]}),l.jsx("div",{className:"flex items-center gap-2",children:l.jsxs("span",{className:"inline-flex items-center gap-1.5 rounded-full bg-blue-50 border border-blue-200 px-3 py-1 text-xs font-semibold text-blue-700",children:[l.jsx(c0,{className:"h-3.5 w-3.5"}),"0 unread"]})})]}),l.jsx("div",{className:"rounded-lg border border-slate-200 bg-white shadow-sm",children:l.jsxs("div",{className:"flex flex-col items-center justify-center px-6 py-24",children:[l.jsx("div",{className:"rounded-2xl bg-blue-50 p-6",children:l.jsx(U4,{className:"h-12 w-12 text-blue-400"})}),l.jsx("h3",{className:"mt-6 text-lg font-semibold text-slate-900",children:"No notifications yet"}),l.jsx("p",{className:"mt-2 max-w-sm text-center text-sm text-slate-500",children:"When you receive order updates, school requests, stock alerts, or other important activity  they'll show up here."}),l.jsx("div",{className:"mt-8 grid grid-cols-1 gap-3 sm:grid-cols-3",children:[{label:"Order Updates",icon:""},{label:"School Requests",icon:""},{label:"Stock Alerts",icon:""}].map(t=>l.jsxs("div",{className:"flex items-center gap-2.5 rounded-xl border border-slate-200 bg-slate-50 px-4 py-2.5 text-sm text-slate-500",children:[l.jsx("span",{children:t.icon}),t.label]},t.label))})]})})]})}function qB(){const t=Zt(e=>e.initialize);return E.useEffect(()=>{t()},[t]),l.jsx(wM,{children:l.jsxs(VT,{children:[l.jsx(St,{path:"/",element:l.jsx(r5,{})}),l.jsx(St,{path:"/login",element:l.jsx(nm,{children:l.jsx(oR,{})})}),l.jsx(St,{path:"/register",element:l.jsx(nm,{children:l.jsx(kR,{})})}),l.jsx(St,{path:"/forgot-password",element:l.jsx(nm,{children:l.jsx(jR,{})})}),l.jsx(St,{path:"/reset-password",element:l.jsx(CR,{})}),l.jsx(St,{path:"/pending-approval",element:l.jsx(ER,{})}),l.jsxs(St,{path:"/dashboard",element:l.jsx(z4,{children:l.jsx(kM,{children:l.jsx(RR,{})})}),children:[l.jsx(St,{index:!0,element:l.jsx(fo,{to:"overview",replace:!0})}),l.jsx(St,{path:"overview",element:l.jsx(VR,{})}),l.jsxs(St,{path:"inventory/general",element:l.jsx(OR,{}),children:[l.jsx(St,{index:!0,element:l.jsx(KR,{})}),l.jsx(St,{path:"add",element:l.jsx(gB,{})})]}),l.jsx(St,{path:"inventory/health",element:l.jsx(wB,{})}),l.jsx(St,{path:"inventory/schools",element:l.jsx(SB,{})}),l.jsx(St,{path:"inventory/schools/:schoolId",element:l.jsx(CB,{})}),l.jsxs(St,{path:"orders",element:l.jsx(_R,{}),children:[l.jsx(St,{index:!0,element:l.jsx(MB,{})}),l.jsx(St,{path:":orderId",element:l.jsx(PB,{})}),l.jsx(St,{path:"cancelled",element:l.jsx(DB,{})}),l.jsx(St,{path:"returns",element:l.jsx(zB,{})})]}),l.jsx(St,{path:"notifications",element:l.jsx(WB,{})}),l.jsx(St,{path:"settings/warehouses",element:l.jsx(BB,{})}),l.jsx(St,{path:"settings/profile",element:l.jsx(HB,{})})]}),l.jsx(St,{path:"*",element:l.jsx(fo,{to:"/",replace:!0})})]})})}KE.createRoot(document.getElementById("root")).render(l.jsx(dt.StrictMode,{children:l.jsx(ZT,{children:l.jsx(qB,{})})}));
